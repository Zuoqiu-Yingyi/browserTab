"use strict";var Ui=Object.defineProperty;var Ki=(t,e,o)=>e in t?Ui(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var Y=(t,e,o)=>(Ki(t,typeof e!="symbol"?e+"":e,o),o);const he=require("siyuan"),lt=Uo(),Xe=zi();Ji();const vn=Gi();function Hi(){return!!globalThis.require}function Vi(){return!!globalThis.process}function Uo(){return Vi()&&Hi()}function zi(){switch(he.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function Gi(){switch(he.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function Ji(){switch(he.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}class Yi{constructor(e,o=!0){this.label=e,this.collapsed=o}stdout(e,o,...n){const i=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${e.name.toUpperCase()}\x1B[0m>`;this.collapsed?globalThis.console.groupCollapsed(i):globalThis.console.group(i),o?n.forEach(s=>Array.isArray(s)?e(...s):e(s)):e(...n),globalThis.console.trace(),globalThis.console.groupEnd()}dir(...e){this.stdout(globalThis.console.dir,!1,...e)}dirs(...e){this.stdout(globalThis.console.dir,!0,...e)}table(...e){this.stdout(globalThis.console.table,!1,...e)}tables(...e){this.stdout(globalThis.console.table,!0,...e)}debug(...e){this.stdout(globalThis.console.debug,!1,...e)}debugs(...e){this.stdout(globalThis.console.debug,!0,...e)}info(...e){this.stdout(globalThis.console.info,!1,...e)}infos(...e){this.stdout(globalThis.console.info,!0,...e)}log(...e){this.stdout(globalThis.console.log,!1,...e)}logs(...e){this.stdout(globalThis.console.log,!0,...e)}warn(...e){this.stdout(globalThis.console.warn,!1,...e)}warns(...e){this.stdout(globalThis.console.warn,!0,...e)}error(...e){this.stdout(globalThis.console.error,!1,...e)}errors(...e){this.stdout(globalThis.console.error,!0,...e)}}function Tn(t,e){return t.button===e.button&&t.type===e.type&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey&&t.shiftKey===e.shiftKey}function Xi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qi=function(e){return Zi(e)&&!xi(e)};function Zi(t){return!!t&&typeof t=="object"}function xi(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||ns(t)}var es=typeof Symbol=="function"&&Symbol.for,ts=es?Symbol.for("react.element"):60103;function ns(t){return t.$$typeof===ts}function os(t){return Array.isArray(t)?[]:{}}function nt(t,e){return e.clone!==!1&&e.isMergeableObject(t)?ze(os(t),t,e):t}function is(t,e,o){return t.concat(e).map(function(n){return nt(n,o)})}function ss(t,e){if(!e.customMerge)return ze;var o=e.customMerge(t);return typeof o=="function"?o:ze}function rs(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function En(t){return Object.keys(t).concat(rs(t))}function Ko(t,e){try{return e in t}catch{return!1}}function as(t,e){return Ko(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function ls(t,e,o){var n={};return o.isMergeableObject(t)&&En(t).forEach(function(i){n[i]=nt(t[i],o)}),En(e).forEach(function(i){as(t,i)||(Ko(t,i)&&o.isMergeableObject(e[i])?n[i]=ss(i,o)(t[i],e[i],o):n[i]=nt(e[i],o))}),n}function ze(t,e,o){o=o||{},o.arrayMerge=o.arrayMerge||is,o.isMergeableObject=o.isMergeableObject||Qi,o.cloneUnlessOtherwiseSpecified=nt;var n=Array.isArray(e),i=Array.isArray(t),s=n===i;return s?n?o.arrayMerge(t,e,o):ls(t,e,o):nt(e,o)}ze.all=function(e,o){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,i){return ze(n,i,o)},{})};var us=ze,cs=us;const fs=Xi(cs);function mt(...t){return fs.all(t)}const Ke={id:/^\d{14}-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}-[0-9a-z]{7})/,snippet:/^\d{14}-[0-9a-z]{7}$/,created:/^\d{10}$/,history:/[\/\\]history[\/\\]\d{4}-\d{2}-\d{2}-\d{6}-(clean|update|delete|format|sync|replace)([\/\\]\d{14}-[0-9a-z]{7})+\.sy$/,snapshot:/^[0-9a-f]{40}$/,shorthand:/^\d{13}$/};function ps(t){const e=t.composedPath();for(let o=0;o<e.length;++o){const n=e[o].dataset;if(n)switch(!0){case(n.nodeId&&Ke.id.test(n.nodeId)):return n.nodeId;case(n.id&&Ke.id.test(n.id)):return n.id;case(n.oid&&Ke.id.test(n.oid)):return n.oid;case(n.rootId&&Ke.id.test(n.rootId)):return n.rootId}}}var Te=(t=>(t[t.window=0]="window",t[t.app=1]="app",t[t.desktop=2]="desktop",t[t.mobile=3]="mobile",t))(Te||{}),qt=(t=>(t.window="/stage/build/app/window.html",t.app="/stage/build/app",t.desktop="/stage/build/desktop",t.mobile="/stage/build/mobile",t))(qt||{});function At(t){switch(t){case Te.window:return"/stage/build/app/window.html";case Te.app:return"/stage/build/app";case Te.desktop:return"/stage/build/desktop";case Te.mobile:return"/stage/build/mobile"}}function Qe(t,e,o=globalThis.origin){const n=new URL(o);return n.pathname=t,e!=null&&e.id&&n.searchParams.set("id",e.id),(e==null?void 0:e.focus)!==void 0&&n.searchParams.set("focus",e.focus?"1":"0"),e!=null&&e.url&&n.searchParams.set("url",e.url),n}function On(t){return Ke.url.test(t.href)?{id:Ke.url.exec(t.href)[1],focus:t.searchParams.get("focus")==="1"}:null}function ds(t,e=!0){switch(t.startsWith("/")&&(t=t.substring(1)),!0){case t.startsWith("stage/"):return!e;case t.startsWith("appearance/"):case t.startsWith("export/"):case t.startsWith("history/"):case t.startsWith("assets/"):case t.startsWith("emojies/"):case t.startsWith("plugins/"):case t.startsWith("public/"):case t.startsWith("snippets/"):case t.startsWith("templates/"):case t.startsWith("widgets/"):return!0;default:return!1}}var hs=Object.defineProperty,ms=(t,e,o)=>e in t?hs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,De=(t,e,o)=>(ms(t,typeof e!="symbol"?e+"":e,o),o);function Ho(t,e){return function(){return t.apply(e,arguments)}}const{toString:gs}=Object.prototype,{getPrototypeOf:Zt}=Object,kt=(t=>e=>{const o=gs.call(e);return t[o]||(t[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),Oe=t=>(t=t.toLowerCase(),e=>kt(e)===t),St=t=>e=>typeof e===t,{isArray:Je}=Array,ot=St("undefined");function bs(t){return t!==null&&!ot(t)&&t.constructor!==null&&!ot(t.constructor)&&we(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Vo=Oe("ArrayBuffer");function _s(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Vo(t.buffer),e}const ws=St("string"),we=St("function"),zo=St("number"),$t=t=>t!==null&&typeof t=="object",ys=t=>t===!0||t===!1,ct=t=>{if(kt(t)!=="object")return!1;const e=Zt(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},ks=Oe("Date"),Ss=Oe("File"),$s=Oe("Blob"),vs=Oe("FileList"),Ts=t=>$t(t)&&we(t.pipe),Es=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||we(t.append)&&((e=kt(t))==="formdata"||e==="object"&&we(t.toString)&&t.toString()==="[object FormData]"))},Os=Oe("URLSearchParams"),Bs=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function st(t,e,{allOwnKeys:o=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Je(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const s=o?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let l;for(n=0;n<a;n++)l=s[n],e.call(null,t[l],l,t)}}function Go(t,e){e=e.toLowerCase();const o=Object.keys(t);let n=o.length,i;for(;n-- >0;)if(i=o[n],e===i.toLowerCase())return i;return null}const Jo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Yo=t=>!ot(t)&&t!==Jo;function Wt(){const{caseless:t}=Yo(this)&&this||{},e={},o=(n,i)=>{const s=t&&Go(e,i)||i;ct(e[s])&&ct(n)?e[s]=Wt(e[s],n):ct(n)?e[s]=Wt({},n):Je(n)?e[s]=n.slice():e[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&st(arguments[n],o);return e}const Ns=(t,e,o,{allOwnKeys:n}={})=>(st(e,(i,s)=>{o&&we(i)?t[s]=Ho(i,o):t[s]=i},{allOwnKeys:n}),t),As=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Rs=(t,e,o,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),o&&Object.assign(t.prototype,o)},Cs=(t,e,o,n)=>{let i,s,a;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)a=i[s],(!n||n(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=o!==!1&&Zt(t)}while(t&&(!o||o(t,e))&&t!==Object.prototype);return e},Ds=(t,e,o)=>{t=String(t),(o===void 0||o>t.length)&&(o=t.length),o-=e.length;const n=t.indexOf(e,o);return n!==-1&&n===o},Ps=t=>{if(!t)return null;if(Je(t))return t;let e=t.length;if(!zo(e))return null;const o=new Array(e);for(;e-- >0;)o[e]=t[e];return o},Ms=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Zt(Uint8Array)),Ls=(t,e)=>{const o=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=o.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},js=(t,e)=>{let o;const n=[];for(;(o=t.exec(e))!==null;)n.push(o);return n},Is=Oe("HTMLFormElement"),Fs=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,o,n){return o.toUpperCase()+n}),Bn=(({hasOwnProperty:t})=>(e,o)=>t.call(e,o))(Object.prototype),qs=Oe("RegExp"),Xo=(t,e)=>{const o=Object.getOwnPropertyDescriptors(t),n={};st(o,(i,s)=>{e(i,s,t)!==!1&&(n[s]=i)}),Object.defineProperties(t,n)},Ws=t=>{Xo(t,(e,o)=>{if(we(t)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const n=t[o];if(we(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},Us=(t,e)=>{const o={},n=i=>{i.forEach(s=>{o[s]=!0})};return Je(t)?n(t):n(String(t).split(e)),o},Ks=()=>{},Hs=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Rt="abcdefghijklmnopqrstuvwxyz",Nn="0123456789",Qo={DIGIT:Nn,ALPHA:Rt,ALPHA_DIGIT:Rt+Rt.toUpperCase()+Nn},Vs=(t=16,e=Qo.ALPHA_DIGIT)=>{let o="";const{length:n}=e;for(;t--;)o+=e[Math.random()*n|0];return o};function zs(t){return!!(t&&we(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Gs=t=>{const e=new Array(10),o=(n,i)=>{if($t(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const s=Je(n)?[]:{};return st(n,(a,l)=>{const r=o(a,i+1);!ot(r)&&(s[l]=r)}),e[i]=void 0,s}}return n};return o(t,0)},Js=Oe("AsyncFunction"),Ys=t=>t&&($t(t)||we(t))&&we(t.then)&&we(t.catch),y={isArray:Je,isArrayBuffer:Vo,isBuffer:bs,isFormData:Es,isArrayBufferView:_s,isString:ws,isNumber:zo,isBoolean:ys,isObject:$t,isPlainObject:ct,isUndefined:ot,isDate:ks,isFile:Ss,isBlob:$s,isRegExp:qs,isFunction:we,isStream:Ts,isURLSearchParams:Os,isTypedArray:Ms,isFileList:vs,forEach:st,merge:Wt,extend:Ns,trim:Bs,stripBOM:As,inherits:Rs,toFlatObject:Cs,kindOf:kt,kindOfTest:Oe,endsWith:Ds,toArray:Ps,forEachEntry:Ls,matchAll:js,isHTMLForm:Is,hasOwnProperty:Bn,hasOwnProp:Bn,reduceDescriptors:Xo,freezeMethods:Ws,toObjectSet:Us,toCamelCase:Fs,noop:Ks,toFiniteNumber:Hs,findKey:Go,global:Jo,isContextDefined:Yo,ALPHABET:Qo,generateString:Vs,isSpecCompliantForm:zs,toJSONObject:Gs,isAsyncFn:Js,isThenable:Ys};function U(t,e,o,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),o&&(this.config=o),n&&(this.request=n),i&&(this.response=i)}y.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:y.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Zo=U.prototype,xo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xo[t]={value:t}});Object.defineProperties(U,xo);Object.defineProperty(Zo,"isAxiosError",{value:!0});U.from=(t,e,o,n,i,s)=>{const a=Object.create(Zo);return y.toFlatObject(t,a,function(l){return l!==Error.prototype},l=>l!=="isAxiosError"),U.call(a,t.message,e,o,n,i),a.cause=t,a.name=t.name,s&&Object.assign(a,s),a};const Xs=null;function Ut(t){return y.isPlainObject(t)||y.isArray(t)}function ei(t){return y.endsWith(t,"[]")?t.slice(0,-2):t}function An(t,e,o){return t?t.concat(e).map(function(n,i){return n=ei(n),!o&&i?"["+n+"]":n}).join(o?".":""):e}function Qs(t){return y.isArray(t)&&!t.some(Ut)}const Zs=y.toFlatObject(y,{},null,function(t){return/^is[A-Z]/.test(t)});function vt(t,e,o){if(!y.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,o=y.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,p){return!y.isUndefined(p[h])});const n=o.metaTokens,i=o.visitor||u,s=o.dots,a=o.indexes,l=(o.Blob||typeof Blob<"u"&&Blob)&&y.isSpecCompliantForm(e);if(!y.isFunction(i))throw new TypeError("visitor must be a function");function r(h){if(h===null)return"";if(y.isDate(h))return h.toISOString();if(!l&&y.isBlob(h))throw new U("Blob is not supported. Use a Buffer instead.");return y.isArrayBuffer(h)||y.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,p,d){let m=h;if(h&&!d&&typeof h=="object"){if(y.endsWith(p,"{}"))p=n?p:p.slice(0,-2),h=JSON.stringify(h);else if(y.isArray(h)&&Qs(h)||(y.isFileList(h)||y.endsWith(p,"[]"))&&(m=y.toArray(h)))return p=ei(p),m.forEach(function(B,F){!(y.isUndefined(B)||B===null)&&e.append(a===!0?An([p],F,s):a===null?p:p+"[]",r(B))}),!1}return Ut(h)?!0:(e.append(An(d,p,s),r(h)),!1)}const c=[],f=Object.assign(Zs,{defaultVisitor:u,convertValue:r,isVisitable:Ut});function b(h,p){if(!y.isUndefined(h)){if(c.indexOf(h)!==-1)throw Error("Circular reference detected in "+p.join("."));c.push(h),y.forEach(h,function(d,m){(!(y.isUndefined(d)||d===null)&&i.call(e,d,y.isString(m)?m.trim():m,p,f))===!0&&b(d,p?p.concat(m):[m])}),c.pop()}}if(!y.isObject(t))throw new TypeError("data must be an object");return b(t),e}function Rn(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(o){return e[o]})}function xt(t,e){this._pairs=[],t&&vt(t,this,e)}const ti=xt.prototype;ti.append=function(t,e){this._pairs.push([t,e])};ti.toString=function(t){const e=t?function(o){return t.call(this,o,Rn)}:Rn;return this._pairs.map(function(o){return e(o[0])+"="+e(o[1])},"").join("&")};function xs(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ni(t,e,o){if(!e)return t;const n=o&&o.encode||xs,i=o&&o.serialize;let s;if(i?s=i(e,o):s=y.isURLSearchParams(e)?e.toString():new xt(e,o).toString(n),s){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class er{constructor(){this.handlers=[]}use(e,o,n){return this.handlers.push({fulfilled:e,rejected:o,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){y.forEach(this.handlers,function(o){o!==null&&e(o)})}}const Cn=er,oi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},tr=typeof URLSearchParams<"u"?URLSearchParams:xt,nr=typeof FormData<"u"?FormData:null,or=typeof Blob<"u"?Blob:null,ir=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),sr=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ee={isBrowser:!0,classes:{URLSearchParams:tr,FormData:nr,Blob:or},isStandardBrowserEnv:ir,isStandardBrowserWebWorkerEnv:sr,protocols:["http","https","file","blob","url","data"]};function rr(t,e){return vt(t,new Ee.classes.URLSearchParams,Object.assign({visitor:function(o,n,i,s){return Ee.isNode&&y.isBuffer(o)?(this.append(n,o.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function ar(t){return y.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function lr(t){const e={},o=Object.keys(t);let n;const i=o.length;let s;for(n=0;n<i;n++)s=o[n],e[s]=t[s];return e}function ii(t){function e(o,n,i,s){let a=o[s++];const l=Number.isFinite(+a),r=s>=o.length;return a=!a&&y.isArray(i)?i.length:a,r?(y.hasOwnProp(i,a)?i[a]=[i[a],n]:i[a]=n,!l):((!i[a]||!y.isObject(i[a]))&&(i[a]=[]),e(o,n,i[a],s)&&y.isArray(i[a])&&(i[a]=lr(i[a])),!l)}if(y.isFormData(t)&&y.isFunction(t.entries)){const o={};return y.forEachEntry(t,(n,i)=>{e(ar(n),i,o,0)}),o}return null}const ur={"Content-Type":void 0};function cr(t,e,o){if(y.isString(t))try{return(e||JSON.parse)(t),y.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(o||JSON.stringify)(t)}const Tt={transitional:oi,adapter:["xhr","http"],transformRequest:[function(t,e){const o=e.getContentType()||"",n=o.indexOf("application/json")>-1,i=y.isObject(t);if(i&&y.isHTMLForm(t)&&(t=new FormData(t)),y.isFormData(t))return n&&n?JSON.stringify(ii(t)):t;if(y.isArrayBuffer(t)||y.isBuffer(t)||y.isStream(t)||y.isFile(t)||y.isBlob(t))return t;if(y.isArrayBufferView(t))return t.buffer;if(y.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let s;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return rr(t,this.formSerializer).toString();if((s=y.isFileList(t))||o.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return vt(s?{"files[]":t}:t,a&&new a,this.formSerializer)}}return i||n?(e.setContentType("application/json",!1),cr(t)):t}],transformResponse:[function(t){const e=this.transitional||Tt.transitional,o=e&&e.forcedJSONParsing,n=this.responseType==="json";if(t&&y.isString(t)&&(o&&!this.responseType||n)){const i=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(s){if(i)throw s.name==="SyntaxError"?U.from(s,U.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ee.classes.FormData,Blob:Ee.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};y.forEach(["delete","get","head"],function(t){Tt.headers[t]={}});y.forEach(["post","put","patch"],function(t){Tt.headers[t]=y.merge(ur)});const en=Tt,fr=y.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),pr=t=>{const e={};let o,n,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),o=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!o||e[o]&&fr[o])&&(o==="set-cookie"?e[o]?e[o].push(n):e[o]=[n]:e[o]=e[o]?e[o]+", "+n:n)}),e},Dn=Symbol("internals");function Ze(t){return t&&String(t).trim().toLowerCase()}function ft(t){return t===!1||t==null?t:y.isArray(t)?t.map(ft):String(t)}function dr(t){const e=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(t);)e[n[1]]=n[2];return e}const hr=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ct(t,e,o,n,i){if(y.isFunction(n))return n.call(this,e,o);if(i&&(e=o),!!y.isString(e)){if(y.isString(n))return e.indexOf(n)!==-1;if(y.isRegExp(n))return n.test(e)}}function mr(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,o,n)=>o.toUpperCase()+n)}function gr(t,e){const o=y.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+o,{value:function(i,s,a){return this[n].call(this,e,i,s,a)},configurable:!0})})}let Et=class{constructor(t){t&&this.set(t)}set(t,e,o){const n=this;function i(a,l,r){const u=Ze(l);if(!u)throw new Error("header name must be a non-empty string");const c=y.findKey(n,u);(!c||n[c]===void 0||r===!0||r===void 0&&n[c]!==!1)&&(n[c||l]=ft(a))}const s=(a,l)=>y.forEach(a,(r,u)=>i(r,u,l));return y.isPlainObject(t)||t instanceof this.constructor?s(t,e):y.isString(t)&&(t=t.trim())&&!hr(t)?s(pr(t),e):t!=null&&i(e,t,o),this}get(t,e){if(t=Ze(t),t){const o=y.findKey(this,t);if(o){const n=this[o];if(!e)return n;if(e===!0)return dr(n);if(y.isFunction(e))return e.call(this,n,o);if(y.isRegExp(e))return e.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Ze(t),t){const o=y.findKey(this,t);return!!(o&&this[o]!==void 0&&(!e||Ct(this,this[o],o,e)))}return!1}delete(t,e){const o=this;let n=!1;function i(s){if(s=Ze(s),s){const a=y.findKey(o,s);a&&(!e||Ct(o,o[a],a,e))&&(delete o[a],n=!0)}}return y.isArray(t)?t.forEach(i):i(t),n}clear(t){const e=Object.keys(this);let o=e.length,n=!1;for(;o--;){const i=e[o];(!t||Ct(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const e=this,o={};return y.forEach(this,(n,i)=>{const s=y.findKey(o,i);if(s){e[s]=ft(n),delete e[i];return}const a=t?mr(i):String(i).trim();a!==i&&delete e[i],e[a]=ft(n),o[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return y.forEach(this,(o,n)=>{o!=null&&o!==!1&&(e[n]=t&&y.isArray(o)?o.join(", "):o)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const o=new this(t);return e.forEach(n=>o.set(n)),o}static accessor(t){const e=(this[Dn]=this[Dn]={accessors:{}}).accessors,o=this.prototype;function n(i){const s=Ze(i);e[s]||(gr(o,i),e[s]=!0)}return y.isArray(t)?t.forEach(n):n(t),this}};Et.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);y.freezeMethods(Et.prototype);y.freezeMethods(Et);const Ne=Et;function Dt(t,e){const o=this||en,n=e||o,i=Ne.from(n.headers);let s=n.data;return y.forEach(t,function(a){s=a.call(o,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function si(t){return!!(t&&t.__CANCEL__)}function rt(t,e,o){U.call(this,t??"canceled",U.ERR_CANCELED,e,o),this.name="CanceledError"}y.inherits(rt,U,{__CANCEL__:!0});function br(t,e,o){const n=o.config.validateStatus;!o.status||!n||n(o.status)?t(o):e(new U("Request failed with status code "+o.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}const _r=Ee.isStandardBrowserEnv?function(){return{write:function(t,e,o,n,i,s){const a=[];a.push(t+"="+encodeURIComponent(e)),y.isNumber(o)&&a.push("expires="+new Date(o).toGMTString()),y.isString(n)&&a.push("path="+n),y.isString(i)&&a.push("domain="+i),s===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function wr(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function yr(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function ri(t,e){return t&&!wr(e)?yr(t,e):e}const kr=Ee.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let o;function n(i){let s=i;return t&&(e.setAttribute("href",s),s=e.href),e.setAttribute("href",s),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return o=n(window.location.href),function(i){const s=y.isString(i)?n(i):i;return s.protocol===o.protocol&&s.host===o.host}}():function(){return function(){return!0}}();function Sr(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function $r(t,e){t=t||10;const o=new Array(t),n=new Array(t);let i=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const r=Date.now(),u=n[s];a||(a=r),o[i]=l,n[i]=r;let c=s,f=0;for(;c!==i;)f+=o[c++],c=c%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),r-a<e)return;const b=u&&r-u;return b?Math.round(f*1e3/b):void 0}}function Pn(t,e){let o=0;const n=$r(50,250);return i=>{const s=i.loaded,a=i.lengthComputable?i.total:void 0,l=s-o,r=n(l),u=s<=a;o=s;const c={loaded:s,total:a,progress:a?s/a:void 0,bytes:l,rate:r||void 0,estimated:r&&a&&u?(a-s)/r:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const vr=typeof XMLHttpRequest<"u",Tr=vr&&function(t){return new Promise(function(e,o){let n=t.data;const i=Ne.from(t.headers).normalize(),s=t.responseType;let a;function l(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}y.isFormData(n)&&(Ee.isStandardBrowserEnv||Ee.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let r=new XMLHttpRequest;if(t.auth){const b=t.auth.username||"",h=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(b+":"+h))}const u=ri(t.baseURL,t.url);r.open(t.method.toUpperCase(),ni(u,t.params,t.paramsSerializer),!0),r.timeout=t.timeout;function c(){if(!r)return;const b=Ne.from("getAllResponseHeaders"in r&&r.getAllResponseHeaders()),h={data:!s||s==="text"||s==="json"?r.responseText:r.response,status:r.status,statusText:r.statusText,headers:b,config:t,request:r};br(function(p){e(p),l()},function(p){o(p),l()},h),r=null}if("onloadend"in r?r.onloadend=c:r.onreadystatechange=function(){!r||r.readyState!==4||r.status===0&&!(r.responseURL&&r.responseURL.indexOf("file:")===0)||setTimeout(c)},r.onabort=function(){r&&(o(new U("Request aborted",U.ECONNABORTED,t,r)),r=null)},r.onerror=function(){o(new U("Network Error",U.ERR_NETWORK,t,r)),r=null},r.ontimeout=function(){let b=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const h=t.transitional||oi;t.timeoutErrorMessage&&(b=t.timeoutErrorMessage),o(new U(b,h.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,t,r)),r=null},Ee.isStandardBrowserEnv){const b=(t.withCredentials||kr(u))&&t.xsrfCookieName&&_r.read(t.xsrfCookieName);b&&i.set(t.xsrfHeaderName,b)}n===void 0&&i.setContentType(null),"setRequestHeader"in r&&y.forEach(i.toJSON(),function(b,h){r.setRequestHeader(h,b)}),y.isUndefined(t.withCredentials)||(r.withCredentials=!!t.withCredentials),s&&s!=="json"&&(r.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&r.addEventListener("progress",Pn(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&r.upload&&r.upload.addEventListener("progress",Pn(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=b=>{r&&(o(!b||b.type?new rt(null,t,r):b),r.abort(),r=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const f=Sr(u);if(f&&Ee.protocols.indexOf(f)===-1){o(new U("Unsupported protocol "+f+":",U.ERR_BAD_REQUEST,t));return}r.send(n||null)})},pt={http:Xs,xhr:Tr};y.forEach(pt,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Er={getAdapter:t=>{t=y.isArray(t)?t:[t];const{length:e}=t;let o,n;for(let i=0;i<e&&(o=t[i],!(n=y.isString(o)?pt[o.toLowerCase()]:o));i++);if(!n)throw n===!1?new U(`Adapter ${o} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(y.hasOwnProp(pt,o)?`Adapter '${o}' is not available in the build`:`Unknown adapter '${o}'`);if(!y.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:pt};function Pt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new rt(null,t)}function Mn(t){return Pt(t),t.headers=Ne.from(t.headers),t.data=Dt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Er.getAdapter(t.adapter||en.adapter)(t).then(function(e){return Pt(t),e.data=Dt.call(t,t.transformResponse,e),e.headers=Ne.from(e.headers),e},function(e){return si(e)||(Pt(t),e&&e.response&&(e.response.data=Dt.call(t,t.transformResponse,e.response),e.response.headers=Ne.from(e.response.headers))),Promise.reject(e)})}const Ln=t=>t instanceof Ne?t.toJSON():t;function Ge(t,e){e=e||{};const o={};function n(u,c,f){return y.isPlainObject(u)&&y.isPlainObject(c)?y.merge.call({caseless:f},u,c):y.isPlainObject(c)?y.merge({},c):y.isArray(c)?c.slice():c}function i(u,c,f){if(y.isUndefined(c)){if(!y.isUndefined(u))return n(void 0,u,f)}else return n(u,c,f)}function s(u,c){if(!y.isUndefined(c))return n(void 0,c)}function a(u,c){if(y.isUndefined(c)){if(!y.isUndefined(u))return n(void 0,u)}else return n(void 0,c)}function l(u,c,f){if(f in e)return n(u,c);if(f in t)return n(void 0,u)}const r={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(u,c)=>i(Ln(u),Ln(c),!0)};return y.forEach(Object.keys(Object.assign({},t,e)),function(u){const c=r[u]||i,f=c(t[u],e[u],u);y.isUndefined(f)&&c!==l||(o[u]=f)}),o}const ai="1.4.0",tn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{tn[t]=function(o){return typeof o===t||"a"+(e<1?"n ":" ")+t}});const jn={};tn.transitional=function(t,e,o){function n(i,s){return"[Axios v"+ai+"] Transitional option '"+i+"'"+s+(o?". "+o:"")}return(i,s,a)=>{if(t===!1)throw new U(n(s," has been removed"+(e?" in "+e:"")),U.ERR_DEPRECATED);return e&&!jn[s]&&(jn[s]=!0,console.warn(n(s," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(i,s,a):!0}};function Or(t,e,o){if(typeof t!="object")throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const s=n[i],a=e[s];if(a){const l=t[s],r=l===void 0||a(l,s,t);if(r!==!0)throw new U("option "+s+" must be "+r,U.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new U("Unknown option "+s,U.ERR_BAD_OPTION)}}const Kt={assertOptions:Or,validators:tn},Ae=Kt.validators;let gt=class{constructor(t){this.defaults=t,this.interceptors={request:new Cn,response:new Cn}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Ge(this.defaults,e);const{transitional:o,paramsSerializer:n,headers:i}=e;o!==void 0&&Kt.assertOptions(o,{silentJSONParsing:Ae.transitional(Ae.boolean),forcedJSONParsing:Ae.transitional(Ae.boolean),clarifyTimeoutError:Ae.transitional(Ae.boolean)},!1),n!=null&&(y.isFunction(n)?e.paramsSerializer={serialize:n}:Kt.assertOptions(n,{encode:Ae.function,serialize:Ae.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let s;s=i&&y.merge(i.common,i[e.method]),s&&y.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),e.headers=Ne.concat(s,i);const a=[];let l=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(l=l&&h.synchronous,a.unshift(h.fulfilled,h.rejected))});const r=[];this.interceptors.response.forEach(function(h){r.push(h.fulfilled,h.rejected)});let u,c=0,f;if(!l){const h=[Mn.bind(this),void 0];for(h.unshift.apply(h,a),h.push.apply(h,r),f=h.length,u=Promise.resolve(e);c<f;)u=u.then(h[c++],h[c++]);return u}f=a.length;let b=e;for(c=0;c<f;){const h=a[c++],p=a[c++];try{b=h(b)}catch(d){p.call(this,d);break}}try{u=Mn.call(this,b)}catch(h){return Promise.reject(h)}for(c=0,f=r.length;c<f;)u=u.then(r[c++],r[c++]);return u}getUri(t){t=Ge(this.defaults,t);const e=ri(t.baseURL,t.url);return ni(e,t.params,t.paramsSerializer)}};y.forEach(["delete","get","head","options"],function(t){gt.prototype[t]=function(e,o){return this.request(Ge(o||{},{method:t,url:e,data:(o||{}).data}))}});y.forEach(["post","put","patch"],function(t){function e(o){return function(n,i,s){return this.request(Ge(s||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}gt.prototype[t]=e(),gt.prototype[t+"Form"]=e(!0)});const dt=gt;let Br=class li{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(i){o=i});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const a=new Promise(l=>{n.subscribe(l),s=l}).then(i);return a.cancel=function(){n.unsubscribe(s)},a},e(function(i,s,a){n.reason||(n.reason=new rt(i,s,a),o(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const o=this._listeners.indexOf(e);o!==-1&&this._listeners.splice(o,1)}static source(){let e;return{token:new li(function(o){e=o}),cancel:e}}};const Nr=Br;function Ar(t){return function(e){return t.apply(null,e)}}function Rr(t){return y.isObject(t)&&t.isAxiosError===!0}const Ht={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ht).forEach(([t,e])=>{Ht[e]=t});const Cr=Ht;function ui(t){const e=new dt(t),o=Ho(dt.prototype.request,e);return y.extend(o,dt.prototype,e,{allOwnKeys:!0}),y.extend(o,e,null,{allOwnKeys:!0}),o.create=function(n){return ui(Ge(t,n))},o}const ie=ui(en);ie.Axios=dt;ie.CanceledError=rt;ie.CancelToken=Nr;ie.isCancel=si;ie.VERSION=ai;ie.toFormData=vt;ie.AxiosError=U;ie.Cancel=ie.CanceledError;ie.all=function(t){return Promise.all(t)};ie.spread=Ar;ie.isAxiosError=Rr;ie.mergeConfig=Ge;ie.AxiosHeaders=Ne;ie.formToJSON=t=>ii(y.isHTMLForm(t)?new FormData(t):t);ie.HttpStatusCode=Cr;ie.default=ie;const ci=ie,{Axios:Rc,AxiosError:Cc,CanceledError:Dc,isCancel:Pc,CancelToken:Mc,VERSION:Lc,all:jc,Cancel:Ic,isAxiosError:Fc,spread:qc,toFormData:Wc,AxiosHeaders:Uc,HttpStatusCode:Dr,formToJSON:Kc,mergeConfig:Hc}=ci,Pr=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Mr=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Lr=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function jr(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Ir(t);return}return e}function Ir(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Fr(t,e={}){if(typeof t!="string")return t;const o=t.trim();if(t[0]==='"'&&t[t.length-1]==='"')return o.slice(1,-1);const n=o.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;if(n!=="undefined"){if(n==="null")return null;if(n==="nan")return Number.NaN;if(n==="infinity")return Number.POSITIVE_INFINITY;if(n==="-infinity")return Number.NEGATIVE_INFINITY;if(!Lr.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Pr.test(t)||Mr.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,jr)}return JSON.parse(t)}catch(i){if(e.strict)throw i;return t}}}const qr=/#/g,Wr=/&/g,Ur=/=/g,nn=/\+/g,Kr=/%5e/gi,Hr=/%60/gi,Vr=/%7c/gi,zr=/%20/gi;function Gr(t){return encodeURI(""+t).replace(Vr,"|")}function Vt(t){return Gr(typeof t=="string"?t:JSON.stringify(t)).replace(nn,"%2B").replace(zr,"+").replace(qr,"%23").replace(Wr,"%26").replace(Hr,"`").replace(Kr,"^")}function Mt(t){return Vt(t).replace(Ur,"%3D")}function fi(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function Jr(t){return fi(t.replace(nn," "))}function Yr(t){return fi(t.replace(nn," "))}function Xr(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const o of t.split("&")){const n=o.match(/([^=]+)=?(.*)/)||[];if(n.length<2)continue;const i=Jr(n[1]);if(i==="__proto__"||i==="constructor")continue;const s=Yr(n[2]||"");e[i]===void 0?e[i]=s:Array.isArray(e[i])?e[i].push(s):e[i]=[e[i],s]}return e}function Qr(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(o=>`${Mt(t)}=${Vt(o)}`).join("&"):`${Mt(t)}=${Vt(e)}`:Mt(t)}function Zr(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>Qr(e,t[e])).filter(Boolean).join("&")}const xr=/^\w{2,}:([/\\]{1,2})/,ea=/^\w{2,}:([/\\]{2})?/,ta=/^([/\\]\s*){2,}[^/\\]/;function pi(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?xr.test(t):ea.test(t)||(e.acceptRelative?ta.test(t):!1)}const na=/\/$|\/\?/;function zt(t="",e=!1){return e?na.test(t):t.endsWith("/")}function oa(t="",e=!1){if(!e)return(zt(t)?t.slice(0,-1):t)||"/";if(!zt(t,!0))return t||"/";const[o,...n]=t.split("?");return(o.slice(0,-1)||"/")+(n.length>0?`?${n.join("?")}`:"")}function ia(t="",e=!1){if(!e)return t.endsWith("/")?t:t+"/";if(zt(t,!0))return t||"/";const[o,...n]=t.split("?");return o+"/"+(n.length>0?`?${n.join("?")}`:"")}function sa(t,e){if(aa(e)||pi(t))return t;const o=oa(e);return t.startsWith(o)?t:ca(o,t)}function ra(t,e){const o=di(t),n={...Xr(o.search),...e};return o.search=Zr(n),fa(o)}function aa(t){return!t||t==="/"}function la(t){return t&&t!=="/"}const ua=/^\.?\//;function ca(t,...e){let o=t||"";for(const n of e.filter(i=>la(i)))if(o){const i=n.replace(ua,"");o=ia(o)+i}else o=n;return o}function di(t="",e){if(!pi(t,{acceptRelative:!0}))return e?di(e+t):In(t);const[o="",n,i=""]=(t.replace(/\\/g,"/").match(/([^/:]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[s="",a=""]=(i.match(/([^#/?]*)(.*)?/)||[]).splice(1),{pathname:l,search:r,hash:u}=In(a.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:o,auth:n?n.slice(0,Math.max(0,n.length-1)):"",host:s,pathname:l,search:r,hash:u}}function In(t=""){const[e="",o="",n=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:o,hash:n}}function fa(t){const e=t.pathname+(t.search?(t.search.startsWith("?")?"":"?")+t.search:"")+t.hash;return t.protocol?t.protocol+"//"+(t.auth?t.auth+"@":"")+t.host+e:e}class pa extends Error{constructor(){super(...arguments),this.name="FetchError"}}function da(t,e,o){let n="";e&&(n=e.message),t&&o?n=`${n} (${o.status} ${o.statusText} (${t.toString()}))`:t&&(n=`${n} (${t.toString()})`);const i=new pa(n);return Object.defineProperty(i,"request",{get(){return t}}),Object.defineProperty(i,"response",{get(){return o}}),Object.defineProperty(i,"data",{get(){return o&&o._data}}),Object.defineProperty(i,"status",{get(){return o&&o.status}}),Object.defineProperty(i,"statusText",{get(){return o&&o.statusText}}),Object.defineProperty(i,"statusCode",{get(){return o&&o.status}}),Object.defineProperty(i,"statusMessage",{get(){return o&&o.statusText}}),i}const ha=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Fn(t="GET"){return ha.has(t.toUpperCase())}function ma(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const ga=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ba=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function _a(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return ba.test(e)?"json":ga.has(e)||e.startsWith("text/")?"text":"blob"}function wa(t,e,o=globalThis.Headers){const n={...e,...t};if(e!=null&&e.params&&t!=null&&t.params&&(n.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&t!=null&&t.query&&(n.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&t!=null&&t.headers){n.headers=new o((e==null?void 0:e.headers)||{});for(const[i,s]of new o((t==null?void 0:t.headers)||{}))n.headers.set(i,s)}return n}const ya=new Set([408,409,425,429,500,502,503,504]);function hi(t){const{fetch:e,Headers:o}=t;function n(a){const l=a.error&&a.error.name==="AbortError"||!1;if(a.options.retry!==!1&&!l){let u;typeof a.options.retry=="number"?u=a.options.retry:u=Fn(a.options.method)?0:1;const c=a.response&&a.response.status||500;if(u>0&&ya.has(c))return i(a.request,{...a.options,retry:u-1})}const r=da(a.request,a.error,a.response);throw Error.captureStackTrace&&Error.captureStackTrace(r,i),r}const i=async function(a,l={}){const r={request:a,options:wa(l,t.defaults,o),response:void 0,error:void 0};r.options.onRequest&&await r.options.onRequest(r),typeof r.request=="string"&&(r.options.baseURL&&(r.request=sa(r.request,r.options.baseURL)),(r.options.query||r.options.params)&&(r.request=ra(r.request,{...r.options.params,...r.options.query})),r.options.body&&Fn(r.options.method)&&ma(r.options.body)&&(r.options.body=typeof r.options.body=="string"?r.options.body:JSON.stringify(r.options.body),r.options.headers=new o(r.options.headers||{}),r.options.headers.has("content-type")||r.options.headers.set("content-type","application/json"),r.options.headers.has("accept")||r.options.headers.set("accept","application/json")));try{r.response=await e(r.request,r.options)}catch(c){return r.error=c,r.options.onRequestError&&await r.options.onRequestError(r),await n(r)}const u=(r.options.parseResponse?"json":r.options.responseType)||_a(r.response.headers.get("content-type")||"");if(u==="json"){const c=await r.response.text(),f=r.options.parseResponse||Fr;r.response._data=f(c)}else u==="stream"?r.response._data=r.response.body:r.response._data=await r.response[u]();return r.options.onResponse&&await r.options.onResponse(r),!r.options.ignoreResponseError&&r.response.status>=400&&r.response.status<600?(r.options.onResponseError&&await r.options.onResponseError(r),await n(r)):r.response},s=async function(a,l){return(await i(a,l))._data};return s.raw=i,s.native=e,s.create=(a={})=>hi({...t,defaults:{...t.defaults,...a}}),s}const mi=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),ka=mi.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),Sa=mi.Headers,$a=hi({fetch:ka,Headers:Sa}),Lt={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};class va extends Error{constructor(e){super(e.statusText),De(this,"status"),this.response=e,this.status=e.status}}class qn extends Error{constructor(e,o){super(e.msg),De(this,"code"),this.body=e,this.response=o,this.code=e.code}}var Wn,Un;const Ta=class w{constructor(e={},o="xhr"){De(this,"_type","xhr"),De(this,"_baseURL",((Wn=globalThis.document)==null?void 0:Wn.baseURI)??((Un=globalThis.location)==null?void 0:Un.origin)??Lt.SIYUAN_DEFAULT_BASE_URL),De(this,"_token",Lt.SIYUAN_DEFAULT_TOKEN),De(this,"_axios",ci.create({baseURL:this._baseURL,timeout:Lt.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),De(this,"_fetch",$a.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(o),this._updateOptions(e,o)}_setClientType(e){this._type=e}_updateOptions(e,o=this._type){switch(this._token=e.token??this._token,o){case"fetch":const n=e;if(n.token){const i="Authorization",s=`Token ${e.token}`;Array.isArray(n.headers)?n.headers.push([i,s]):n.headers instanceof Headers?n.headers.set(i,s):typeof n.headers=="object"?n.headers[i]=s:n.headers={[i]:s},delete e.token}this._fetch=this._fetch.create(n);break;case"xhr":default:for(const[i,s]of Object.entries(e))switch(i){case"token":this._axios.defaults.headers.Authorization=`Token ${e.token}`;break;default:this._axios.defaults[i]=s;break}break}this._baseURL=e.baseURL??this._baseURL}async getBookmarkLabels(e){return await this._request(w.api.attr.getBookmarkLabels.pathname,w.api.attr.getBookmarkLabels.method,void 0,e)}async getDocInfo(e,o){return await this._request(w.api.block.getDocInfo.pathname,w.api.block.getDocInfo.method,e,o)}async listDocsByPath(e,o){return await this._request(w.api.filetree.listDocsByPath.pathname,w.api.filetree.listDocsByPath.method,e,o)}async searchDocs(e,o){return await this._request(w.api.filetree.searchDocs.pathname,w.api.filetree.searchDocs.method,e,o)}async fullTextSearchBlock(e,o){return await this._request(w.api.search.fullTextSearchBlock.pathname,w.api.search.fullTextSearchBlock.method,e,o)}async getRecentDocs(e){return await this._request(w.api.storage.getRecentDocs.pathname,w.api.storage.getRecentDocs.method,void 0,e)}async getConf(e){return await this._request(w.api.system.getConf.pathname,w.api.system.getConf.method,void 0,e)}async upload(e,o){const n=new FormData;return n.append("assetsDirPath",e.assetsDirPath??"/assets/"),e.files.forEach(i=>n.append("file[]",i)),await this._request(w.api.asset.upload.pathname,w.api.asset.upload.method,n,o)}async getBlockAttrs(e,o){return await this._request(w.api.attr.getBlockAttrs.pathname,w.api.attr.getBlockAttrs.method,e,o)}async setBlockAttrs(e,o){return await this._request(w.api.attr.setBlockAttrs.pathname,w.api.attr.setBlockAttrs.method,e,o)}async appendBlock(e,o){return await this._request(w.api.block.appendBlock.pathname,w.api.block.appendBlock.method,e,o)}async deleteBlock(e,o){return await this._request(w.api.block.deleteBlock.pathname,w.api.block.deleteBlock.method,e,o)}async getBlockBreadcrumb(e,o){return await this._request(w.api.block.getBlockBreadcrumb.pathname,w.api.block.getBlockBreadcrumb.method,e,o)}async getBlockDOM(e,o){return await this._request(w.api.block.getBlockDOM.pathname,w.api.block.getBlockDOM.method,e,o)}async getBlockInfo(e,o){return await this._request(w.api.block.getBlockInfo.pathname,w.api.block.getBlockInfo.method,e,o)}async getBlockKramdown(e,o){return await this._request(w.api.block.getBlockKramdown.pathname,w.api.block.getBlockKramdown.method,e,o)}async getChildBlocks(e,o){return await this._request(w.api.block.getChildBlocks.pathname,w.api.block.getChildBlocks.method,e,o)}async insertBlock(e,o){return await this._request(w.api.block.insertBlock.pathname,w.api.block.insertBlock.method,e,o)}async moveBlock(e,o){return await this._request(w.api.block.moveBlock.pathname,w.api.block.moveBlock.method,e,o)}async prependBlock(e,o){return await this._request(w.api.block.prependBlock.pathname,w.api.block.prependBlock.method,e,o)}async transferBlockRef(e,o){return await this._request(w.api.block.transferBlockRef.pathname,w.api.block.transferBlockRef.method,e,o)}async updateBlock(e,o){return await this._request(w.api.block.updateBlock.pathname,w.api.block.updateBlock.method,e,o)}async pandoc(e,o){return await this._request(w.api.convert.pandoc.pathname,w.api.convert.pandoc.method,e,o)}async exportResources(e,o){return await this._request(w.api.export.exportResources.pathname,w.api.export.exportResources.method,e,o)}async exportMdContent(e,o){return await this._request(w.api.export.exportMdContent.pathname,w.api.export.exportMdContent.method,e,o)}async getFile(e,o="text",n){return await this._request(w.api.file.getFile.pathname,w.api.file.getFile.method,e,n,!1,o)}async putFile(e,o){e.file!==void 0&&!(e.file instanceof File)&&(e.file=new File([e.file],e.path.split("/").pop()));const n=new FormData;for(const[i,s]of Object.entries(e))e.hasOwnProperty(i)&&(s instanceof Blob?n.append(i,s):n.append(i,String(s)));return await this._request(w.api.file.putFile.pathname,w.api.file.putFile.method,n,o)}async readDir(e,o){return await this._request(w.api.file.readDir.pathname,w.api.file.readDir.method,e,o)}async removeFile(e,o){return await this._request(w.api.file.removeFile.pathname,w.api.file.removeFile.method,e,o)}async renameFile(e,o){return await this._request(w.api.file.renameFile.pathname,w.api.file.renameFile.method,e,o)}async createDocWithMd(e,o){return await this._request(w.api.filetree.createDocWithMd.pathname,w.api.filetree.createDocWithMd.method,e,o)}async getDoc(e,o){return await this._request(w.api.filetree.getDoc.pathname,w.api.filetree.getDoc.method,e,o)}async getHPathByID(e,o){return await this._request(w.api.filetree.getHPathByID.pathname,w.api.filetree.getHPathByID.method,e,o)}async getHPathByPath(e,o){return await this._request(w.api.filetree.getHPathByPath.pathname,w.api.filetree.getHPathByPath.method,e,o)}async moveDocs(e,o){return await this._request(w.api.filetree.moveDocs.pathname,w.api.filetree.moveDocs.method,e,o)}async removeDoc(e,o){return await this._request(w.api.filetree.removeDoc.pathname,w.api.filetree.removeDoc.method,e,o)}async renameDoc(e,o){return await this._request(w.api.filetree.renameDoc.pathname,w.api.filetree.renameDoc.method,e,o)}async getDocHistoryContent(e,o){return await this._request(w.api.history.getDocHistoryContent.pathname,w.api.history.getDocHistoryContent.method,e,o)}async getHistoryItems(e,o){return await this._request(w.api.history.getHistoryItems.pathname,w.api.history.getHistoryItems.method,e,o)}async getShorthand(e,o){return await this._request(w.api.inbox.getShorthand.pathname,w.api.inbox.getShorthand.method,e,o)}async forwardProxy(e,o){return await this._request(w.api.network.forwardProxy.pathname,w.api.network.forwardProxy.method,e,o)}async closeNotebook(e,o){return await this._request(w.api.notebook.closeNotebook.pathname,w.api.notebook.closeNotebook.method,e,o)}async createNotebook(e,o){return await this._request(w.api.notebook.createNotebook.pathname,w.api.notebook.createNotebook.method,e,o)}async getNotebookConf(e,o){return await this._request(w.api.notebook.getNotebookConf.pathname,w.api.notebook.getNotebookConf.method,e,o)}async lsNotebooks(e){return await this._request(w.api.notebook.lsNotebooks.pathname,w.api.notebook.lsNotebooks.method,void 0,e)}async openNotebook(e,o){return await this._request(w.api.notebook.openNotebook.pathname,w.api.notebook.openNotebook.method,e,o)}async removeNotebook(e,o){return await this._request(w.api.notebook.removeNotebook.pathname,w.api.notebook.removeNotebook.method,e,o)}async renameNotebook(e,o){return await this._request(w.api.notebook.renameNotebook.pathname,w.api.notebook.renameNotebook.method,e,o)}async setNotebookConf(e,o){return await this._request(w.api.notebook.setNotebookConf.pathname,w.api.notebook.setNotebookConf.method,e,o)}async pushErrMsg(e,o){return await this._request(w.api.notification.pushErrMsg.pathname,w.api.notification.pushErrMsg.method,e,o)}async pushMsg(e,o){return await this._request(w.api.notification.pushMsg.pathname,w.api.notification.pushMsg.method,e,o)}async sql(e,o){return await this._request(w.api.query.sql.pathname,w.api.query.sql.method,e,o)}async openRepoSnapshotDoc(e,o){return await this._request(w.api.repo.openRepoSnapshotDoc.pathname,w.api.repo.openRepoSnapshotDoc.method,e,o)}async getSnippet(e,o){return await this._request(w.api.snippet.getSnippet.pathname,w.api.snippet.getSnippet.method,e,o)}async setSnippet(e,o){return await this._request(w.api.snippet.setSnippet.pathname,w.api.snippet.setSnippet.method,e,o)}async bootProgress(e){return await this._request(w.api.system.bootProgress.pathname,w.api.system.bootProgress.method,void 0,e)}async currentTime(e){return await this._request(w.api.system.currentTime.pathname,w.api.system.currentTime.method,void 0,e)}async version(e){return await this._request(w.api.system.version.pathname,w.api.system.version.method,void 0,e)}async render(e,o){return await this._request(w.api.template.render.pathname,w.api.template.render.method,e,o)}async renderSprig(e,o){return await this._request(w.api.template.renderSprig.pathname,w.api.template.renderSprig.method,e,o)}async _request(e,o,n,i,s=!0,a="json"){try{switch((i==null?void 0:i.type)??this._type){case"fetch":{const l=i==null?void 0:i.options;a=(()=>{switch(a){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return a}})();const r=await this._fetch(e,{method:o,body:n,responseType:a,...l});return s&&a==="json"&&typeof r=="object"?this._parseFetchResponse(r):r}case"xhr":default:{const l=i==null?void 0:i.options;a=(()=>{switch(a){case"arrayBuffer":return"arraybuffer";default:return a}})();const r=await this._axios.request({url:e,method:o,data:n,responseType:a,...l});if(r.status===Dr.Ok)return s&&a==="json"&&typeof r.data=="object"?this._parseAxiosResponse(r):r.data;throw new va(r)}}}catch(l){throw l}}_parseFetchResponse(e){if(e.code===0)return e;throw new qn(e)}_parseAxiosResponse(e){if(e.data.code===0)return e.data;throw new qn(e.data,e)}};De(Ta,"api",{search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},storage:{getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"}},asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},version:{pathname:"/api/system/version",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});var gi=(t=>(t.NodeNotebook="NodeNotebook",t.NodeFolder="NodeFolder",t.NodeDocument="NodeDocument",t.NodeSuperBlock="NodeSuperBlock",t.NodeBlockquote="NodeBlockquote",t.NodeList="NodeList",t.NodeListItem="NodeListItem",t.NodeHeading="NodeHeading",t.NodeParagraph="NodeParagraph",t.NodeMathBlock="NodeMathBlock",t.NodeTable="NodeTable",t.NodeCodeBlock="NodeCodeBlock",t.NodeHTMLBlock="NodeHTMLBlock",t.NodeThematicBreak="NodeThematicBreak",t.NodeAudio="NodeAudio",t.NodeVideo="NodeVideo",t.NodeIFrame="NodeIFrame",t.NodeWidget="NodeWidget",t.NodeBlockQueryEmbed="NodeBlockQueryEmbed",t))(gi||{}),bi=(t=>(t.d="d",t.s="s",t.b="b",t.l="l",t.i="i",t.h="h",t.p="p",t.m="m",t.t="t",t.c="c",t.html="html",t.query_embed="query_embed",t.tb="tb",t.audio="audio",t.video="video",t.iframe="iframe",t.widget="widget",t))(bi||{}),_i=(t=>(t.d="d",t.s="s",t.b="b",t.l="l",t.i="i",t))(_i||{}),wi=(t=>(t.h="h",t.p="p",t.m="m",t.t="t",t.c="c",t.html="html",t.query_embed="query_embed",t.tb="tb",t.audio="audio",t.video="video",t.iframe="iframe",t.widget="widget",t))(wi||{}),yi=(t=>(t.h1="h1",t.h2="h2",t.h3="h3",t.h4="h4",t.h5="h5",t.h6="h6",t.u="u",t.o="o",t.t="t",t.none="",t))(yi||{}),ki=(t=>(t.u="u",t.o="o",t.t="t",t))(ki||{}),Si=(t=>(t.h1="h1",t.h2="h2",t.h3="h3",t.h4="h4",t.h5="h5",t.h6="h6",t))(Si||{}),$i=(t=>(t[t.keyword=0]="keyword",t[t.querySyntax=1]="querySyntax",t[t.sql=2]="sql",t[t.regex=3]="regex",t))($i||{}),vi=(t=>(t[t.noGroupBy=0]="noGroupBy",t[t.group=1]="group",t))(vi||{}),Ti=(t=>(t[t.type=0]="type",t[t.createdASC=1]="createdASC",t[t.createdDESC=2]="createdDESC",t[t.modifiedASC=3]="modifiedASC",t[t.modifiedDESC=4]="modifiedDESC",t[t.sortByContent=5]="sortByContent",t[t.sortByRankAsc=6]="sortByRankAsc",t[t.sortByRankDesc=7]="sortByRankDesc",t))(Ti||{}),Ei=(t=>(t[t.SortModeNameASC=0]="SortModeNameASC",t[t.SortModeNameDESC=1]="SortModeNameDESC",t[t.SortModeUpdatedASC=2]="SortModeUpdatedASC",t[t.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",t[t.SortModeAlphanumASC=4]="SortModeAlphanumASC",t[t.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",t[t.SortModeCustom=6]="SortModeCustom",t[t.SortModeRefCountASC=7]="SortModeRefCountASC",t[t.SortModeRefCountDESC=8]="SortModeRefCountDESC",t[t.SortModeCreatedASC=9]="SortModeCreatedASC",t[t.SortModeCreatedDESC=10]="SortModeCreatedDESC",t[t.SortModeSizeASC=11]="SortModeSizeASC",t[t.SortModeSizeDESC=12]="SortModeSizeDESC",t[t.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",t[t.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",t))(Ei||{});const Ea=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:yi,BlockType:bi,Container:_i,GroupBy:vi,Leaf:wi,Method:$i,NodeHeadingSubType:Si,NodeListSubType:ki,NodeType:gi,OrderBy:Ti,SortMode:Ei},Symbol.toStringTag,{value:"Module"}));function Oa(t){const{protyle:e,data:o,blockElements:n}=t;if(o){const i={element:e.wysiwyg.element,id:o.id,type:Ea.NodeType.NodeDocument};return{...i,isDocumentBlock:!0,isMultiBlock:!1,blocks:[i]}}else if(n&&n.length>0){const i=[];return n.forEach(s=>{i.push({element:s,id:s.dataset.nodeId,type:s.dataset.type,subtype:s.dataset.subtype})}),{...i[0],isDocumentBlock:!1,isMultiBlock:i.length>1,blocks:i}}return null}function z(){}const on=t=>t;function Ot(t,e){for(const o in e)t[o]=e[o];return t}function Oi(t){return t()}function Kn(){return Object.create(null)}function ae(t){t.forEach(Oi)}function Bt(t){return typeof t=="function"}function se(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let ut;function Hn(t,e){return t===e?!0:(ut||(ut=document.createElement("a")),ut.href=e,t===ut.href)}function Ba(t){return Object.keys(t).length===0}function ee(t,e,o,n){if(t){const i=Bi(t,e,o,n);return t[0](i)}}function Bi(t,e,o,n){return t[1]&&n?Ot(o.ctx.slice(),t[1](n(e))):o.ctx}function te(t,e,o,n){if(t[2]&&n){const i=t[2](n(o));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],a=Math.max(e.dirty.length,i.length);for(let l=0;l<a;l+=1)s[l]=e.dirty[l]|i[l];return s}return e.dirty|i}return e.dirty}function ne(t,e,o,n,i,s){if(i){const a=Bi(e,o,n,s);t.p(a,i)}}function oe(t){if(t.ctx.length>32){const e=[],o=t.ctx.length/32;for(let n=0;n<o;n++)e[n]=-1;return e}return-1}function Na(t){const e={};for(const o in t)e[o]=!0;return e}const Ni=typeof window<"u";let Ai=Ni?()=>window.performance.now():()=>Date.now(),sn=Ni?t=>requestAnimationFrame(t):z;const He=new Set;function Ri(t){He.forEach(e=>{e.c(t)||(He.delete(e),e.f())}),He.size!==0&&sn(Ri)}function Ci(t){let e;return He.size===0&&sn(Ri),{promise:new Promise(o=>{He.add(e={c:t,f:o})}),abort(){He.delete(e)}}}function A(t,e){t.appendChild(e)}function Di(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Aa(t){const e=D("style");return e.textContent="/* empty */",Ra(Di(t),e),e.sheet}function Ra(t,e){return A(t.head||t,e),e.sheet}function O(t,e,o){t.insertBefore(e,o||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function D(t){return document.createElement(t)}function Gt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ge(t){return document.createTextNode(t)}function P(){return ge(" ")}function re(){return ge("")}function J(t,e,o,n){return t.addEventListener(e,o,n),()=>t.removeEventListener(e,o,n)}function k(t,e,o){o==null?t.removeAttribute(e):t.getAttribute(e)!==o&&t.setAttribute(e,o)}const Ca=["width","height"];function Da(t,e){const o=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:o[n]&&o[n].set&&Ca.indexOf(n)===-1?t[n]=e[n]:k(t,n,e[n])}function Pa(t,e){Object.keys(e).forEach(o=>{Ma(t,o,e[o])})}function Ma(t,e,o){e in t?t[e]=typeof t[e]=="boolean"&&o===""?!0:o:k(t,e,o)}function Vn(t){return/-/.test(t)?Pa:Da}function zn(t,e,o){t.setAttributeNS("http://www.w3.org/1999/xlink",e,o)}function Jt(t){return t===""?null:+t}function La(t){return Array.from(t.childNodes)}function Me(t,e){e=""+e,t.data!==e&&(t.data=e)}function pe(t,e){t.value=e??""}function Be(t,e,o,n){o==null?t.style.removeProperty(e):t.style.setProperty(e,o,n?"important":"")}function Gn(t,e,o){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e){i.selected=!0;return}}(!o||e!==void 0)&&(t.selectedIndex=-1)}function ja(t){const e=t.querySelector(":checked");return e&&e.__value}function N(t,e,o){t.classList.toggle(e,!!o)}function Pi(t,e,{bubbles:o=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:o,cancelable:n})}class at{constructor(e=!1){Y(this,"is_svg",!1);Y(this,"e");Y(this,"n");Y(this,"t");Y(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,o,n=null){this.e||(this.is_svg?this.e=Gt(o.nodeName):this.e=D(o.nodeType===11?"TEMPLATE":o.nodeName),this.t=o.tagName!=="TEMPLATE"?o:o.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let o=0;o<this.n.length;o+=1)O(this.t,this.n[o],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(E)}}const bt=new Map;let _t=0;function Ia(t){let e=5381,o=t.length;for(;o--;)e=(e<<5)-e^t.charCodeAt(o);return e>>>0}function Fa(t,e){const o={stylesheet:Aa(e),rules:{}};return bt.set(t,o),o}function Mi(t,e,o,n,i,s,a,l=0){const r=16.666/n;let u=`{
`;for(let m=0;m<=1;m+=r){const B=e+(o-e)*s(m);u+=m*100+`%{${a(B,1-B)}}
`}const c=u+`100% {${a(o,1-o)}}
}`,f=`__svelte_${Ia(c)}_${l}`,b=Di(t),{stylesheet:h,rules:p}=bt.get(b)||Fa(b,t);p[f]||(p[f]=!0,h.insertRule(`@keyframes ${f} ${c}`,h.cssRules.length));const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${f} ${n}ms linear ${i}ms 1 both`,_t+=1,f}function Yt(t,e){const o=(t.style.animation||"").split(", "),n=o.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=o.length-n.length;i&&(t.style.animation=n.join(", "),_t-=i,_t||qa())}function qa(){sn(()=>{_t||(bt.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&E(e)}),bt.clear())})}let it;function et(t){it=t}function rn(){if(!it)throw new Error("Function called outside component initialization");return it}function Wa(t){rn().$$.on_mount.push(t)}function Ua(t){rn().$$.on_destroy.push(t)}function Nt(){const t=rn();return(e,o,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=Pi(e,o,{cancelable:n});return i.slice().forEach(a=>{a.call(t,s)}),!s.defaultPrevented}return!0}}function Jn(t,e){const o=t.$$.callbacks[e.type];o&&o.slice().forEach(n=>n.call(this,e))}const Ue=[],wt=[];let Ve=[];const Yn=[],Ka=Promise.resolve();let Xt=!1;function Ha(){Xt||(Xt=!0,Ka.then(Li))}function je(t){Ve.push(t)}const jt=new Set;let qe=0;function Li(){if(qe!==0)return;const t=it;do{try{for(;qe<Ue.length;){const e=Ue[qe];qe++,et(e),Va(e.$$)}}catch(e){throw Ue.length=0,qe=0,e}for(et(null),Ue.length=0,qe=0;wt.length;)wt.pop()();for(let e=0;e<Ve.length;e+=1){const o=Ve[e];jt.has(o)||(jt.add(o),o())}Ve.length=0}while(Ue.length);for(;Yn.length;)Yn.pop()();Xt=!1,jt.clear(),et(t)}function Va(t){if(t.fragment!==null){t.update(),ae(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(je)}}function za(t){const e=[],o=[];Ve.forEach(n=>t.indexOf(n)===-1?e.push(n):o.push(n)),o.forEach(n=>n()),Ve=e}let xe;function ji(){return xe||(xe=Promise.resolve(),xe.then(()=>{xe=null})),xe}function yt(t,e,o){t.dispatchEvent(Pi(`${e?"intro":"outro"}${o}`))}const ht=new Set;let Pe;function Q(){Pe={r:0,c:[],p:Pe}}function Z(){Pe.r||ae(Pe.c),Pe=Pe.p}function g(t,e){t&&t.i&&(ht.delete(t),t.i(e))}function _(t,e,o,n){if(t&&t.o){if(ht.has(t))return;ht.add(t),Pe.c.push(()=>{ht.delete(t),n&&(o&&t.d(1),n())}),t.o(e)}else n&&n()}const Ii={duration:0};function Ga(t,e,o){const n={direction:"in"};let i=e(t,o,n),s=!1,a,l,r=0;function u(){a&&Yt(t,a)}function c(){const{delay:b=0,duration:h=300,easing:p=on,tick:d=z,css:m}=i||Ii;m&&(a=Mi(t,0,1,h,b,p,m,r++)),d(0,1);const B=Ai()+b,F=B+h;l&&l.abort(),s=!0,je(()=>yt(t,!0,"start")),l=Ci(H=>{if(s){if(H>=F)return d(1,0),yt(t,!0,"end"),u(),s=!1;if(H>=B){const S=p((H-B)/h);d(S,1-S)}}return s})}let f=!1;return{start(){f||(f=!0,Yt(t),Bt(i)?(i=i(n),ji().then(c)):c())},invalidate(){f=!1},end(){s&&(u(),s=!1)}}}function Ja(t,e,o){const n={direction:"out"};let i=e(t,o,n),s=!0,a;const l=Pe;l.r+=1;let r;function u(){const{delay:c=0,duration:f=300,easing:b=on,tick:h=z,css:p}=i||Ii;p&&(a=Mi(t,1,0,f,c,b,p));const d=Ai()+c,m=d+f;je(()=>yt(t,!1,"start")),"inert"in t&&(r=t.inert,t.inert=!0),Ci(B=>{if(s){if(B>=m)return h(0,1),yt(t,!1,"end"),--l.r||ae(l.c),!1;if(B>=d){const F=b((B-d)/f);h(1-F,F)}}return s})}return Bt(i)?ji().then(()=>{i=i(n),u()}):u(),{end(c){c&&"inert"in t&&(t.inert=r),c&&i.tick&&i.tick(1,0),s&&(a&&Yt(t,a),s=!1)}}}function de(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Ya(t,e){t.d(1),e.delete(t.key)}function Ye(t,e){_(t,1,1,()=>{e.delete(t.key)})}function Ie(t,e,o,n,i,s,a,l,r,u,c,f){let b=t.length,h=s.length,p=b;const d={};for(;p--;)d[t[p].key]=p;const m=[],B=new Map,F=new Map,H=[];for(p=h;p--;){const V=f(i,s,p),q=o(V);let R=a.get(q);R?n&&H.push(()=>R.p(V,e)):(R=u(q,V),R.c()),B.set(q,m[p]=R),q in d&&F.set(q,Math.abs(p-d[q]))}const S=new Set,K=new Set;function j(V){g(V,1),V.m(l,c),a.set(V.key,V),c=V.first,h--}for(;b&&h;){const V=m[h-1],q=t[b-1],R=V.key,fe=q.key;V===q?(c=V.first,b--,h--):B.has(fe)?!a.has(R)||S.has(R)?j(V):K.has(fe)?b--:F.get(R)>F.get(fe)?(K.add(R),j(V)):(S.add(fe),b--):(r(q,a),b--)}for(;b--;){const V=t[b];B.has(V.key)||r(V,a)}for(;h;)j(m[h-1]);return ae(H),m}function an(t,e){const o={},n={},i={$$scope:1};let s=t.length;for(;s--;){const a=t[s],l=e[s];if(l){for(const r in a)r in l||(n[r]=1);for(const r in l)i[r]||(o[r]=l[r],i[r]=1);t[s]=l}else for(const r in a)i[r]=1}for(const a in n)a in o||(o[a]=void 0);return o}function Fi(t){return typeof t=="object"&&t!==null?t:{}}function T(t){t&&t.c()}function $(t,e,o){const{fragment:n,after_update:i}=t.$$;n&&n.m(e,o),je(()=>{const s=t.$$.on_mount.map(Oi).filter(Bt);t.$$.on_destroy?t.$$.on_destroy.push(...s):ae(s),t.$$.on_mount=[]}),i.forEach(je)}function v(t,e){const o=t.$$;o.fragment!==null&&(za(o.after_update),ae(o.on_destroy),o.fragment&&o.fragment.d(e),o.on_destroy=o.fragment=null,o.ctx=[])}function Xa(t,e){t.$$.dirty[0]===-1&&(Ue.push(t),Ha(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ue(t,e,o,n,i,s,a,l=[-1]){const r=it;et(t);const u=t.$$={fragment:null,ctx:[],props:s,update:z,not_equal:i,bound:Kn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:Kn(),dirty:l,skip_bound:!1,root:e.target||r.$$.root};a&&a(u.root);let c=!1;if(u.ctx=o?o(t,e.props||{},(f,b,...h)=>{const p=h.length?h[0]:b;return u.ctx&&i(u.ctx[f],u.ctx[f]=p)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](p),c&&Xa(t,f)),b}):[],u.update(),c=!0,ae(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const f=La(e.target);u.fragment&&u.fragment.l(f),f.forEach(E)}else u.fragment&&u.fragment.c();e.intro&&g(t.$$.fragment),$(t,e.target,e.anchor),Li()}et(r)}class ce{constructor(){Y(this,"$$");Y(this,"$$set")}$destroy(){v(this,1),this.$destroy=z}$on(e,o){if(!Bt(o))return z;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(o),()=>{const i=n.indexOf(o);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Ba(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Qa="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Qa);function Za(t){let e,o;return{c(){e=Gt("svg"),o=Gt("use"),zn(o,"xlink:href",t[0]),k(e,"style",t[3]),k(e,"data-id",t[1]),k(e,"class",t[2]),N(e,"popover__block",t[1])},m(n,i){O(n,e,i),A(e,o)},p(n,[i]){i&1&&zn(o,"xlink:href",n[0]),i&8&&k(e,"style",n[3]),i&2&&k(e,"data-id",n[1]),i&4&&k(e,"class",n[2]),i&6&&N(e,"popover__block",n[1])},i:z,o:z,d(n){n&&E(e)}}}function xa(t,e,o){let{icon:n}=e,{id:i=""}=e,{className:s=""}=e,{style:a=""}=e;return t.$$set=l=>{"icon"in l&&o(0,n=l.icon),"id"in l&&o(1,i=l.id),"className"in l&&o(2,s=l.className),"style"in l&&o(3,a=l.style)},[n,i,s,a]}class ye extends ce{constructor(e){super(),ue(this,e,xa,Za,se,{icon:0,id:1,className:2,style:3})}}const el=t=>({focus:t&1}),Xn=t=>({focus:t[0]});function Qn(t,e,o){const n=t.slice();return n[13]=e[o],n}function Zn(t){let e,o,n,i,s,a,l;return o=new ye({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){e=D("div"),T(o.$$.fragment),n=P(),i=D("input"),k(i,"placeholder",t[4]),k(i,"class","b3-text-field fn__block b3-form__icon-input"),k(e,"class","b3-form__icon")},m(r,u){O(r,e,u),$(o,e,null),A(e,n),A(e,i),pe(i,t[1]),s=!0,a||(l=[J(i,"input",t[9]),J(i,"change",t[5])],a=!0)},p(r,u){(!s||u&16)&&k(i,"placeholder",r[4]),u&2&&i.value!==r[1]&&pe(i,r[1])},i(r){s||(g(o.$$.fragment,r),s=!0)},o(r){_(o.$$.fragment,r),s=!1},d(r){r&&E(e),v(o),a=!1,ae(l)}}}function xn(t,e){let o,n,i,s,a=e[13].text+"",l,r,u,c,f;n=new ye({props:{icon:e[13].icon,className:"b3-list-item__graphic"}});function b(){return e[10](e[13])}function h(){return e[11](e[13])}return{key:t,first:null,c(){o=D("li"),T(n.$$.fragment),i=P(),s=D("span"),l=P(),k(s,"class","b3-list-item__text svelte-15drd7h"),k(o,"role","button"),k(o,"data-name",r=e[13].name),k(o,"class","b3-list-item"),N(o,"b3-list-item--focus",e[13].key===e[0]),this.first=o},m(p,d){O(p,o,d),$(n,o,null),A(o,i),A(o,s),s.innerHTML=a,A(o,l),u=!0,c||(f=[J(o,"click",b),J(o,"keyup",h)],c=!0)},p(p,d){e=p;const m={};d&4&&(m.icon=e[13].icon),n.$set(m),(!u||d&4)&&a!==(a=e[13].text+"")&&(s.innerHTML=a),(!u||d&4&&r!==(r=e[13].name))&&k(o,"data-name",r),(!u||d&5)&&N(o,"b3-list-item--focus",e[13].key===e[0])},i(p){u||(g(n.$$.fragment,p),u=!0)},o(p){_(n.$$.fragment,p),u=!1},d(p){p&&E(o),v(n),c=!1,ae(f)}}}function tl(t){let e;return{c(){e=ge("Container")},m(o,n){O(o,e,n)},d(o){o&&E(e)}}}function nl(t){let e,o,n,i=[],s=new Map,a,l,r,u=t[3]&&Zn(t),c=de(t[2]);const f=d=>d[13].key;for(let d=0;d<c.length;d+=1){let m=Qn(t,c,d),B=f(m);s.set(B,i[d]=xn(B,m))}const b=t[8].default,h=ee(b,t,t[7],Xn),p=h||tl();return{c(){e=D("div"),o=D("ul"),u&&u.c(),n=P();for(let d=0;d<i.length;d+=1)i[d].c();a=P(),l=D("div"),p&&p.c(),k(o,"class","b3-tab-bar b3-list b3-list--background"),k(l,"class","config__tab-wrap"),k(e,"class","fn__flex-1 fn__flex config__panel")},m(d,m){O(d,e,m),A(e,o),u&&u.m(o,null),A(o,n);for(let B=0;B<i.length;B+=1)i[B]&&i[B].m(o,null);A(e,a),A(e,l),p&&p.m(l,null),r=!0},p(d,[m]){d[3]?u?(u.p(d,m),m&8&&g(u,1)):(u=Zn(d),u.c(),g(u,1),u.m(o,n)):u&&(Q(),_(u,1,1,()=>{u=null}),Z()),m&69&&(c=de(d[2]),Q(),i=Ie(i,m,f,1,d,c,s,o,Ye,xn,null,Qn),Z()),h&&h.p&&(!r||m&129)&&ne(h,b,d,d[7],r?te(b,d[7],m,el):oe(d[7]),Xn)},i(d){if(!r){g(u);for(let m=0;m<c.length;m+=1)g(i[m]);g(p,d),r=!0}},o(d){_(u);for(let m=0;m<i.length;m+=1)_(i[m]);_(p,d),r=!1},d(d){d&&E(e),u&&u.d();for(let m=0;m<i.length;m+=1)i[m].d();p&&p.d(d)}}}function ol(t,e,o){let{$$slots:n={},$$scope:i}=e,{panels:s}=e,{focus:a}=e,{searchEnable:l=!1}=e,{searchPlaceholder:r=""}=e,{searchValue:u=""}=e;const c=Nt();function f(){c("search-changed",{value:u})}function b(m){c("changed",{key:m}),o(0,a=m)}function h(){u=this.value,o(1,u)}const p=m=>b(m.key),d=m=>b(m.key);return t.$$set=m=>{"panels"in m&&o(2,s=m.panels),"focus"in m&&o(0,a=m.focus),"searchEnable"in m&&o(3,l=m.searchEnable),"searchPlaceholder"in m&&o(4,r=m.searchPlaceholder),"searchValue"in m&&o(1,u=m.searchValue),"$$scope"in m&&o(7,i=m.$$scope)},[a,u,s,l,r,f,b,i,n,h,p,d]}class il extends ce{constructor(e){super(),ue(this,e,ol,nl,se,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function sl(t){let e,o;const n=t[4].default,i=ee(n,t,t[3],null);return{c(){e=D("div"),i&&i.c(),k(e,"data-name",t[2]),k(e,"class","config__tab-container"),N(e,"fn__none",!t[0]),N(e,"config__tab-container--top",t[1])},m(s,a){O(s,e,a),i&&i.m(e,null),o=!0},p(s,[a]){i&&i.p&&(!o||a&8)&&ne(i,n,s,s[3],o?te(n,s[3],a,null):oe(s[3]),null),(!o||a&4)&&k(e,"data-name",s[2]),(!o||a&1)&&N(e,"fn__none",!s[0]),(!o||a&2)&&N(e,"config__tab-container--top",s[1])},i(s){o||(g(i,s),o=!0)},o(s){_(i,s),o=!1},d(s){s&&E(e),i&&i.d(s)}}}function rl(t,e,o){let{$$slots:n={},$$scope:i}=e,{display:s=!0}=e,{top:a=!0}=e,{name:l=""}=e;return t.$$set=r=>{"display"in r&&o(0,s=r.display),"top"in r&&o(1,a=r.top),"name"in r&&o(2,l=r.name),"$$scope"in r&&o(3,i=r.$$scope)},[s,a,l,i,n]}class It extends ce{constructor(e){super(),ue(this,e,rl,sl,se,{display:0,top:1,name:2})}}const al=t=>({}),eo=t=>({}),ll=t=>({}),to=t=>({});function no(t){let e,o;const n=t[6].icon,i=ee(n,t,t[5],to);return{c(){e=D("span"),i&&i.c(),k(e,"class","item__icon")},m(s,a){O(s,e,a),i&&i.m(e,null),o=!0},p(s,a){i&&i.p&&(!o||a&32)&&ne(i,n,s,s[5],o?te(n,s[5],a,ll):oe(s[5]),to)},i(s){o||(g(i,s),o=!0)},o(s){_(i,s),o=!1},d(s){s&&E(e),i&&i.d(s)}}}function ul(t){let e;return{c(){e=ge("text")},m(o,n){O(o,e,n)},d(o){o&&E(e)}}}function cl(t){let e,o,n,i,s,a,l,r,u,c,f=t[3].icon&&no(t);const b=t[6].text,h=ee(b,t,t[5],eo),p=h||ul();return{c(){e=D("div"),o=D("span"),n=P(),f&&f.c(),i=P(),s=D("span"),p&&p.c(),a=P(),l=D("span"),k(o,"class","fn__flex-1"),k(s,"class","item__text"),k(l,"class","fn__flex-1"),k(e,"role","button"),k(e,"data-type",t[0]),k(e,"class","item item--full"),N(e,"item--focus",t[1])},m(d,m){O(d,e,m),A(e,o),A(e,n),f&&f.m(e,null),A(e,i),A(e,s),p&&p.m(s,null),A(e,a),A(e,l),r=!0,u||(c=J(e,"click",t[2]),u=!0)},p(d,[m]){d[3].icon?f?(f.p(d,m),m&8&&g(f,1)):(f=no(d),f.c(),g(f,1),f.m(e,i)):f&&(Q(),_(f,1,1,()=>{f=null}),Z()),h&&h.p&&(!r||m&32)&&ne(h,b,d,d[5],r?te(b,d[5],m,al):oe(d[5]),eo),(!r||m&1)&&k(e,"data-type",d[0]),(!r||m&2)&&N(e,"item--focus",d[1])},i(d){r||(g(f),g(p,d),r=!0)},o(d){_(f),_(p,d),r=!1},d(d){d&&E(e),f&&f.d(),p&&p.d(d),u=!1,c()}}}function fl(t,e,o){let{$$slots:n={},$$scope:i}=e;const s=Na(n);let{key:a}=e,{name:l=""}=e,{focus:r=!1}=e;const u=Nt();function c(){r||u("changed",{key:a})}return t.$$set=f=>{"key"in f&&o(4,a=f.key),"name"in f&&o(0,l=f.name),"focus"in f&&o(1,r=f.focus),"$$scope"in f&&o(5,i=f.$$scope)},[l,r,c,s,a,i,n]}let pl=class extends ce{constructor(e){super(),ue(this,e,fl,cl,se,{key:4,name:0,focus:1})}};const dl=t=>({focus:t&1}),oo=t=>({focus:t[0]});function io(t,e,o){const n=t.slice();return n[5]=e[o],n}function hl(t){let e,o=t[5].icon+"",n;return{c(){e=new at(!1),n=re(),e.a=n},m(i,s){e.m(o,i,s),O(i,n,s)},p(i,s){s&2&&o!==(o=i[5].icon+"")&&e.p(o)},i:z,o:z,d(i){i&&(E(n),e.d())}}}function ml(t){let e,o;return e=new ye({props:{icon:t[5].icon}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&2&&(s.icon=n[5].icon),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function gl(t){let e,o,n,i,s,a;const l=[ml,hl],r=[];function u(c,f){return f&2&&(o=null),o==null&&(o=!!c[5].icon.startsWith("#")),o?0:1}return n=u(t,-1),i=r[n]=l[n](t),{c(){e=D("span"),i.c(),s=P(),k(e,"slot","icon")},m(c,f){O(c,e,f),r[n].m(e,null),A(e,s),a=!0},p(c,f){let b=n;n=u(c,f),n===b?r[n].p(c,f):(Q(),_(r[b],1,1,()=>{r[b]=null}),Z(),i=r[n],i?i.p(c,f):(i=r[n]=l[n](c),i.c()),g(i,1),i.m(e,s))},i(c){a||(g(i),a=!0)},o(c){_(i),a=!1},d(c){c&&E(e),r[n].d()}}}function bl(t){let e,o,n=t[5].text+"",i;return{c(){e=D("span"),o=new at(!1),i=P(),o.a=i,k(e,"slot","text")},m(s,a){O(s,e,a),o.m(n,e),A(e,i)},p(s,a){a&2&&n!==(n=s[5].text+"")&&o.p(n)},d(s){s&&E(e)}}}function so(t,e){let o,n,i;return n=new pl({props:{key:e[5].key,name:e[5].name,focus:e[5].key===e[0],$$slots:{text:[bl],icon:[gl]},$$scope:{ctx:e}}}),n.$on("changed",e[2]),{key:t,first:null,c(){o=re(),T(n.$$.fragment),this.first=o},m(s,a){O(s,o,a),$(n,s,a),i=!0},p(s,a){e=s;const l={};a&2&&(l.key=e[5].key),a&2&&(l.name=e[5].name),a&3&&(l.focus=e[5].key===e[0]),a&18&&(l.$$scope={dirty:a,ctx:e}),n.$set(l)},i(s){i||(g(n.$$.fragment,s),i=!0)},o(s){_(n.$$.fragment,s),i=!1},d(s){s&&E(o),v(n,s)}}}function _l(t){let e;return{c(){e=ge("Container")},m(o,n){O(o,e,n)},d(o){o&&E(e)}}}function wl(t){let e,o,n=[],i=new Map,s,a,l,r=de(t[1]);const u=h=>h[5].key;for(let h=0;h<r.length;h+=1){let p=io(t,r,h),d=u(p);i.set(d,n[h]=so(d,p))}const c=t[3].default,f=ee(c,t,t[4],oo),b=f||_l();return{c(){e=D("div"),o=D("div");for(let h=0;h<n.length;h+=1)n[h].c();s=P(),a=D("div"),b&&b.c(),k(o,"class","layout-tab-bar fn__flex"),k(a,"class","fn__flex-1"),k(e,"class","fn__flex-column"),Be(e,"height","100%")},m(h,p){O(h,e,p),A(e,o);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(o,null);A(e,s),A(e,a),b&&b.m(a,null),l=!0},p(h,[p]){p&7&&(r=de(h[1]),Q(),n=Ie(n,p,u,1,h,r,i,o,Ye,so,null,io),Z()),f&&f.p&&(!l||p&17)&&ne(f,c,h,h[4],l?te(c,h[4],p,dl):oe(h[4]),oo)},i(h){if(!l){for(let p=0;p<r.length;p+=1)g(n[p]);g(b,h),l=!0}},o(h){for(let p=0;p<n.length;p+=1)_(n[p]);_(b,h),l=!1},d(h){h&&E(e);for(let p=0;p<n.length;p+=1)n[p].d();b&&b.d(h)}}}function yl(t,e,o){let{$$slots:n={},$$scope:i}=e,{tabs:s}=e,{focus:a}=e;function l(r){o(0,a=r.detail.key)}return t.$$set=r=>{"tabs"in r&&o(1,s=r.tabs),"focus"in r&&o(0,a=r.focus),"$$scope"in r&&o(4,i=r.$$scope)},[a,s,l,n,i]}class qi extends ce{constructor(e){super(),ue(this,e,yl,wl,se,{tabs:1,focus:0})}}const kl=t=>({}),ro=t=>({}),Sl=t=>({}),ao=t=>({}),$l=t=>({}),lo=t=>({}),vl=t=>({}),uo=t=>({});function Tl(t){let e,o;return{c(){e=new at(!1),o=re(),e.a=o},m(n,i){e.m(t[0],n,i),O(n,o,i)},p(n,i){i&1&&e.p(n[0])},d(n){n&&(E(o),e.d())}}}function El(t){let e,o;return{c(){e=new at(!1),o=re(),e.a=o},m(n,i){e.m(t[1],n,i),O(n,o,i)},p(n,i){i&2&&e.p(n[1])},d(n){n&&(E(o),e.d())}}}function co(t){let e,o,n;const i=t[4].input,s=ee(i,t,t[3],ao);return{c(){e=D("div"),o=P(),s&&s.c(),k(e,"class","fn__hr")},m(a,l){O(a,e,l),O(a,o,l),s&&s.m(a,l),n=!0},p(a,l){s&&s.p&&(!n||l&8)&&ne(s,i,a,a[3],n?te(i,a[3],l,Sl):oe(a[3]),ao)},i(a){n||(g(s,a),n=!0)},o(a){_(s,a),n=!1},d(a){a&&(E(e),E(o)),s&&s.d(a)}}}function fo(t){let e,o,n;const i=t[4].input,s=ee(i,t,t[3],ro);return{c(){e=D("span"),o=P(),s&&s.c(),k(e,"class","fn__space")},m(a,l){O(a,e,l),O(a,o,l),s&&s.m(a,l),n=!0},p(a,l){s&&s.p&&(!n||l&8)&&ne(s,i,a,a[3],n?te(i,a[3],l,kl):oe(a[3]),ro)},i(a){n||(g(s,a),n=!0)},o(a){_(s,a),n=!1},d(a){a&&(E(e),E(o)),s&&s.d(a)}}}function Ol(t){let e,o,n,i,s,a,l;const r=t[4].title,u=ee(r,t,t[3],uo),c=u||Tl(t),f=t[4].text,b=ee(f,t,t[3],lo),h=b||El(t);let p=t[2]&&co(t),d=!t[2]&&fo(t);return{c(){e=D("label"),o=D("div"),c&&c.c(),n=P(),i=D("div"),h&&h.c(),s=P(),p&&p.c(),a=P(),d&&d.c(),k(i,"class","b3-label__text"),k(o,"class","fn__flex-1 svelte-2m76cy"),N(o,"visible",t[2]),k(e,"class","fn__flex b3-label")},m(m,B){O(m,e,B),A(e,o),c&&c.m(o,null),A(o,n),A(o,i),h&&h.m(i,null),A(o,s),p&&p.m(o,null),A(e,a),d&&d.m(e,null),l=!0},p(m,[B]){u?u.p&&(!l||B&8)&&ne(u,r,m,m[3],l?te(r,m[3],B,vl):oe(m[3]),uo):c&&c.p&&(!l||B&1)&&c.p(m,l?B:-1),b?b.p&&(!l||B&8)&&ne(b,f,m,m[3],l?te(f,m[3],B,$l):oe(m[3]),lo):h&&h.p&&(!l||B&2)&&h.p(m,l?B:-1),m[2]?p?(p.p(m,B),B&4&&g(p,1)):(p=co(m),p.c(),g(p,1),p.m(o,null)):p&&(Q(),_(p,1,1,()=>{p=null}),Z()),(!l||B&4)&&N(o,"visible",m[2]),m[2]?d&&(Q(),_(d,1,1,()=>{d=null}),Z()):d?(d.p(m,B),B&4&&g(d,1)):(d=fo(m),d.c(),g(d,1),d.m(e,null))},i(m){l||(g(c,m),g(h,m),g(p),g(d),l=!0)},o(m){_(c,m),_(h,m),_(p),_(d),l=!1},d(m){m&&E(e),c&&c.d(m),h&&h.d(m),p&&p.d(),d&&d.d()}}}function Bl(t,e,o){let{$$slots:n={},$$scope:i}=e,{title:s=""}=e,{text:a=""}=e,{block:l=!1}=e;return t.$$set=r=>{"title"in r&&o(0,s=r.title),"text"in r&&o(1,a=r.text),"block"in r&&o(2,l=r.block),"$$scope"in r&&o(3,i=r.$$scope)},[s,a,l,i,n]}let x=class extends ce{constructor(e){super(),ue(this,e,Bl,Ol,se,{title:0,text:1,block:2})}};var W=(t=>(t[t.checkbox=0]="checkbox",t[t.text=1]="text",t[t.number=2]="number",t[t.slider=3]="slider",t[t.button=4]="button",t[t.select=5]="select",t[t.textarea=6]="textarea",t))(W||{});function po(t,e,o){const n=t.slice();return n[19]=e[o],n}function Nl(t){let e,o,n;return{c(){e=D("textarea"),e.disabled=t[2],k(e,"class","b3-text-field"),k(e,"placeholder",t[5]),N(e,"fn__block",t[3]),N(e,"fn__size200",!t[3]&&t[4]),Be(e,"height",t[8]>0?`${t[8]}px`:void 0)},m(i,s){O(i,e,s),pe(e,t[0]),o||(n=[J(e,"input",t[17]),J(e,"change",t[10])],o=!0)},p(i,s){s&4&&(e.disabled=i[2]),s&32&&k(e,"placeholder",i[5]),s&65&&pe(e,i[0]),s&8&&N(e,"fn__block",i[3]),s&24&&N(e,"fn__size200",!i[3]&&i[4]),s&256&&Be(e,"height",i[8]>0?`${i[8]}px`:void 0)},d(i){i&&E(e),o=!1,ae(n)}}}function Al(t){let e,o=[],n=new Map,i,s,a=de(t[6]);const l=r=>r[19].key;for(let r=0;r<a.length;r+=1){let u=po(t,a,r),c=l(u);n.set(c,o[r]=ho(c,u))}return{c(){e=D("select");for(let r=0;r<o.length;r+=1)o[r].c();e.disabled=t[2],k(e,"class","b3-select"),t[0]===void 0&&je(()=>t[16].call(e)),N(e,"fn__block",t[3]),N(e,"fn__size200",!t[3]&&t[4]),N(e,"fn__flex-center",!t[3])},m(r,u){O(r,e,u);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);Gn(e,t[0],!0),i||(s=[J(e,"change",t[16]),J(e,"change",t[10])],i=!0)},p(r,u){u&64&&(a=de(r[6]),o=Ie(o,u,l,1,r,a,n,e,Ya,ho,null,po)),u&4&&(e.disabled=r[2]),u&65&&Gn(e,r[0]),u&8&&N(e,"fn__block",r[3]),u&24&&N(e,"fn__size200",!r[3]&&r[4]),u&8&&N(e,"fn__flex-center",!r[3])},d(r){r&&E(e);for(let u=0;u<o.length;u+=1)o[u].d();i=!1,ae(s)}}}function Rl(t){let e,o,n,i;return{c(){e=D("button"),o=ge(t[0]),e.disabled=t[2],k(e,"class","b3-button b3-button--outline"),N(e,"fn__block",t[3]),N(e,"fn__size200",!t[3]&&t[4]),N(e,"fn__flex-center",!t[3])},m(s,a){O(s,e,a),A(e,o),n||(i=J(e,"click",t[9]),n=!0)},p(s,a){a&1&&Me(o,s[0]),a&4&&(e.disabled=s[2]),a&8&&N(e,"fn__block",s[3]),a&24&&N(e,"fn__size200",!s[3]&&s[4]),a&8&&N(e,"fn__flex-center",!s[3])},d(s){s&&E(e),n=!1,i()}}}function Cl(t){let e,o,n,i,s,a;return{c(){e=D("input"),e.disabled=t[2],k(e,"class","b3-slider svelte-edt8og"),k(e,"type","range"),k(e,"min",o=t[7].min),k(e,"max",n=t[7].max),k(e,"step",i=t[7].step),N(e,"fn__block",t[3]),N(e,"fn__size200",!t[3]&&t[4])},m(l,r){O(l,e,r),pe(e,t[0]),s||(a=[J(e,"change",t[15]),J(e,"input",t[15]),J(e,"change",t[10])],s=!0)},p(l,r){r&4&&(e.disabled=l[2]),r&128&&o!==(o=l[7].min)&&k(e,"min",o),r&128&&n!==(n=l[7].max)&&k(e,"max",n),r&128&&i!==(i=l[7].step)&&k(e,"step",i),r&65&&pe(e,l[0]),r&8&&N(e,"fn__block",l[3]),r&24&&N(e,"fn__size200",!l[3]&&l[4])},d(l){l&&E(e),s=!1,ae(a)}}}function Dl(t){let e,o,n,i,s,a;return{c(){e=D("input"),e.disabled=t[2],k(e,"class","b3-text-field"),k(e,"type","number"),k(e,"placeholder",t[5]),k(e,"min",o=t[7].min),k(e,"max",n=t[7].max),k(e,"step",i=t[7].step),N(e,"fn__block",t[3]),N(e,"fn__size200",!t[3]&&t[4]),N(e,"fn__flex-center",!t[3])},m(l,r){O(l,e,r),pe(e,t[0]),s||(a=[J(e,"input",t[14]),J(e,"change",t[10])],s=!0)},p(l,r){r&4&&(e.disabled=l[2]),r&32&&k(e,"placeholder",l[5]),r&128&&o!==(o=l[7].min)&&k(e,"min",o),r&128&&n!==(n=l[7].max)&&k(e,"max",n),r&128&&i!==(i=l[7].step)&&k(e,"step",i),r&65&&Jt(e.value)!==l[0]&&pe(e,l[0]),r&8&&N(e,"fn__block",l[3]),r&24&&N(e,"fn__size200",!l[3]&&l[4]),r&8&&N(e,"fn__flex-center",!l[3])},d(l){l&&E(e),s=!1,ae(a)}}}function Pl(t){let e,o,n;return{c(){e=D("input"),e.disabled=t[2],k(e,"class","b3-text-field"),k(e,"placeholder",t[5]),N(e,"fn__block",t[3]),N(e,"fn__size200",!t[3]&&t[4]),N(e,"fn__flex-center",!t[3])},m(i,s){O(i,e,s),pe(e,t[0]),o||(n=[J(e,"input",t[13]),J(e,"change",t[10])],o=!0)},p(i,s){s&4&&(e.disabled=i[2]),s&32&&k(e,"placeholder",i[5]),s&65&&e.value!==i[0]&&pe(e,i[0]),s&8&&N(e,"fn__block",i[3]),s&24&&N(e,"fn__size200",!i[3]&&i[4]),s&8&&N(e,"fn__flex-center",!i[3])},d(i){i&&E(e),o=!1,ae(n)}}}function Ml(t){let e,o,n;return{c(){e=D("input"),e.disabled=t[2],k(e,"class","b3-switch svelte-edt8og"),k(e,"type","checkbox"),N(e,"fn__block",t[3]),N(e,"fn__flex-center",!t[3])},m(i,s){O(i,e,s),e.checked=t[0],o||(n=[J(e,"change",t[12]),J(e,"change",t[10])],o=!0)},p(i,s){s&4&&(e.disabled=i[2]),s&65&&(e.checked=i[0]),s&8&&N(e,"fn__block",i[3]),s&8&&N(e,"fn__flex-center",!i[3])},d(i){i&&E(e),o=!1,ae(n)}}}function ho(t,e){let o,n=e[19].text+"",i,s;return{key:t,first:null,c(){o=D("option"),i=ge(n),o.__value=s=e[19].key,pe(o,o.__value),this.first=o},m(a,l){O(a,o,l),A(o,i)},p(a,l){e=a,l&64&&n!==(n=e[19].text+"")&&Me(i,n),l&64&&s!==(s=e[19].key)&&(o.__value=s,pe(o,o.__value))},d(a){a&&E(o)}}}function Ll(t){let e;function o(s,a){if(s[1]===W.checkbox)return Ml;if(s[1]===W.text)return Pl;if(s[1]===W.number)return Dl;if(s[1]===W.slider)return Cl;if(s[1]===W.button)return Rl;if(s[1]===W.select)return Al;if(s[1]===W.textarea)return Nl}let n=o(t),i=n&&n(t);return{c(){i&&i.c(),e=re()},m(s,a){i&&i.m(s,a),O(s,e,a)},p(s,[a]){n===(n=o(s))&&i?i.p(s,a):(i&&i.d(1),i=n&&n(s),i&&(i.c(),i.m(e.parentNode,e)))},i:z,o:z,d(s){s&&E(e),i&&i.d(s)}}}function jl(t,e,o){let{type:n}=e,{settingKey:i}=e,{settingValue:s}=e,{disabled:a=!1}=e,{block:l=!1}=e,{normal:r=!0}=e,{placeholder:u=""}=e,{options:c=[]}=e,{limits:f={min:0,max:100,step:1}}=e,{height:b=0}=e;const h=Nt();function p(j){h("clicked",{event:j})}function d(j){h("changed",{key:i,value:s,event:j})}function m(){s=this.checked,o(0,s),o(6,c)}function B(){s=this.value,o(0,s),o(6,c)}function F(){s=Jt(this.value),o(0,s),o(6,c)}function H(){s=Jt(this.value),o(0,s),o(6,c)}function S(){s=ja(this),o(0,s),o(6,c)}function K(){s=this.value,o(0,s),o(6,c)}return t.$$set=j=>{"type"in j&&o(1,n=j.type),"settingKey"in j&&o(11,i=j.settingKey),"settingValue"in j&&o(0,s=j.settingValue),"disabled"in j&&o(2,a=j.disabled),"block"in j&&o(3,l=j.block),"normal"in j&&o(4,r=j.normal),"placeholder"in j&&o(5,u=j.placeholder),"options"in j&&o(6,c=j.options),"limits"in j&&o(7,f=j.limits),"height"in j&&o(8,b=j.height)},[s,n,a,l,r,u,c,f,b,p,d,i,m,B,F,H,S,K]}class G extends ce{constructor(e){super(),ue(this,e,jl,Ll,se,{type:1,settingKey:11,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8})}}function Il(t){let e,o,n,i,s;const a=t[2].default,l=ee(a,t,t[1],null);return{c(){e=D("div"),o=new at(!1),n=P(),i=D("div"),l&&l.c(),o.a=n,k(i,"class","config-query"),k(e,"class","b3-label")},m(r,u){O(r,e,u),o.m(t[0],e),A(e,n),A(e,i),l&&l.m(i,null),s=!0},p(r,[u]){(!s||u&1)&&o.p(r[0]),l&&l.p&&(!s||u&2)&&ne(l,a,r,r[1],s?te(a,r[1],u,null):oe(r[1]),null)},i(r){s||(g(l,r),s=!0)},o(r){_(l,r),s=!1},d(r){r&&E(e),l&&l.d(r)}}}function Fl(t,e,o){let{$$slots:n={},$$scope:i}=e,{title:s}=e;return t.$$set=a=>{"title"in a&&o(0,s=a.title),"$$scope"in a&&o(1,i=a.$$scope)},[s,i,n]}class ln extends ce{constructor(e){super(),ue(this,e,Fl,Il,se,{title:0})}}const ql=t=>({}),mo=t=>({}),Wl=t=>({}),go=t=>({}),Ul=t=>({}),bo=t=>({});function Kl(t){let e,o,n,i,s,a,l,r,u;const c=t[3].icon,f=ee(c,t,t[2],bo),b=t[3].title,h=ee(b,t,t[2],go),p=t[3].input,d=ee(p,t,t[2],mo);return{c(){e=D("label"),f&&f.c(),o=P(),n=D("span"),i=P(),s=D("div"),h&&h.c(),a=P(),l=D("span"),r=P(),d&&d.c(),k(n,"class","fn__space"),k(s,"class","fn__flex-1"),k(l,"class","fn__space"),Be(e,"min-width",t[0]),Be(e,"margin-right",t[1]),k(e,"class","fn__flex svelte-1l7osn9")},m(m,B){O(m,e,B),f&&f.m(e,null),A(e,o),A(e,n),A(e,i),A(e,s),h&&h.m(s,null),A(e,a),A(e,l),A(e,r),d&&d.m(e,null),u=!0},p(m,[B]){f&&f.p&&(!u||B&4)&&ne(f,c,m,m[2],u?te(c,m[2],B,Ul):oe(m[2]),bo),h&&h.p&&(!u||B&4)&&ne(h,b,m,m[2],u?te(b,m[2],B,Wl):oe(m[2]),go),d&&d.p&&(!u||B&4)&&ne(d,p,m,m[2],u?te(p,m[2],B,ql):oe(m[2]),mo),(!u||B&1)&&Be(e,"min-width",m[0]),(!u||B&2)&&Be(e,"margin-right",m[1])},i(m){u||(g(f,m),g(h,m),g(d,m),u=!0)},o(m){_(f,m),_(h,m),_(d,m),u=!1},d(m){m&&E(e),f&&f.d(m),h&&h.d(m),d&&d.d(m)}}}function Hl(t,e,o){let{$$slots:n={},$$scope:i}=e,{minWidth:s="24em"}=e,{marginRight:a="2em"}=e;return t.$$set=l=>{"minWidth"in l&&o(0,s=l.minWidth),"marginRight"in l&&o(1,a=l.marginRight),"$$scope"in l&&o(2,i=l.$$scope)},[s,a,i,n]}class Le extends ce{constructor(e){super(),ue(this,e,Hl,Kl,se,{minWidth:0,marginRight:1})}}var ve=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(ve||{}),X=(t=>(t.click="click",t.dblclick="dblclick",t.contextmenu="contextmenu",t.mousedown="mousedown",t.mouseup="mouseup",t.mouseenter="mouseenter",t.mouseleave="mouseleave",t.mousewheel="mousewheel",t.mouseover="mouseover",t.mousemove="mousemove",t.mouseout="mouseout",t))(X||{});function _o(t){let e,o;return e=new Le({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[Gl],title:[zl],default:[Vl]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4195329&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Vl(t){let e,o;return e=new ye({props:{icon:"#iconKeymap",className:"svg"}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p:z,i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function zl(t){let e;return{c(){e=D("kbd"),e.textContent="Ctrl",k(e,"slot","title")},m(o,n){O(o,e,n)},p:z,d(o){o&&E(e)}}}function Gl(t){let e,o;return e=new G({props:{slot:"input",normal:!1,disabled:t[10],type:W.checkbox,settingKey:"ctrlKey",settingValue:t[0].ctrlKey}}),e.$on("changed",t[20]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&1024&&(s.disabled=n[10]),i&1&&(s.settingValue=n[0].ctrlKey),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function wo(t){let e,o;return e=new Le({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[Xl],title:[Yl],default:[Jl]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4196353&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Jl(t){let e,o;return e=new ye({props:{icon:"#iconKeymap",className:"svg"}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p:z,i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Yl(t){let e;return{c(){e=D("kbd"),e.textContent="Shift",k(e,"slot","title")},m(o,n){O(o,e,n)},p:z,d(o){o&&E(e)}}}function Xl(t){let e,o;return e=new G({props:{slot:"input",normal:!1,disabled:t[11],type:W.checkbox,settingKey:"shiftKey",settingValue:t[0].shiftKey}}),e.$on("changed",t[20]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&2048&&(s.disabled=n[11]),i&1&&(s.settingValue=n[0].shiftKey),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function yo(t){let e,o;return e=new Le({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[xl],title:[Zl],default:[Ql]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4198401&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Ql(t){let e,o;return e=new ye({props:{icon:"#iconKeymap",className:"svg"}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p:z,i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Zl(t){let e;return{c(){e=D("kbd"),e.textContent="Alt",k(e,"slot","title")},m(o,n){O(o,e,n)},p:z,d(o){o&&E(e)}}}function xl(t){let e,o;return e=new G({props:{slot:"input",normal:!1,disabled:t[12],type:W.checkbox,settingKey:"altKey",settingValue:t[0].altKey}}),e.$on("changed",t[20]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&4096&&(s.disabled=n[12]),i&1&&(s.settingValue=n[0].altKey),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function ko(t){let e,o;return e=new Le({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[nu],title:[tu],default:[eu]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4202497&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function eu(t){let e,o;return e=new ye({props:{icon:"#iconKeymap",className:"svg"}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p:z,i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function tu(t){let e;return{c(){e=D("kbd"),e.textContent="Meta",k(e,"slot","title")},m(o,n){O(o,e,n)},p:z,d(o){o&&E(e)}}}function nu(t){let e,o;return e=new G({props:{slot:"input",normal:!1,disabled:t[13],type:W.checkbox,settingKey:"metaKey",settingValue:t[0].metaKey}}),e.$on("changed",t[20]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&8192&&(s.disabled=n[13]),i&1&&(s.settingValue=n[0].metaKey),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function So(t){let e,o;return e=new Le({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[su],title:[iu],default:[ou]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4538369&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function ou(t){let e,o;return e=new ye({props:{icon:"#iconSelectText",className:"svg"}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p:z,i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function iu(t){let e,o;return{c(){e=D("span"),o=ge(t[16]),k(e,"slot","title")},m(n,i){O(n,e,i),A(e,o)},p(n,i){i&65536&&Me(o,n[16])},d(n){n&&E(e)}}}function su(t){let e,o;return e=new G({props:{slot:"input",normal:!1,disabled:t[14],type:W.select,settingKey:"button",settingValue:t[0].button,options:t[18]}}),e.$on("changed",t[20]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&16384&&(s.disabled=n[14]),i&1&&(s.settingValue=n[0].button),i&262144&&(s.options=n[18]),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function $o(t){let e,o;return e=new Le({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[lu],title:[au],default:[ru]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4882433&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function ru(t){let e,o;return e=new ye({props:{icon:"#iconSelectText",className:"svg"}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p:z,i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function au(t){let e,o;return{c(){e=D("span"),o=ge(t[17]),k(e,"slot","title")},m(n,i){O(n,e,i),A(e,o)},p(n,i){i&131072&&Me(o,n[17])},d(n){n&&E(e)}}}function lu(t){let e,o;return e=new G({props:{slot:"input",normal:!1,disabled:t[15],type:W.select,settingKey:"type",settingValue:t[0].type,options:t[19]}}),e.$on("changed",t[20]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&32768&&(s.disabled=n[15]),i&1&&(s.settingValue=n[0].type),i&524288&&(s.options=n[19]),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function uu(t){let e,o,n,i,s,a,l,r=t[4]&&_o(t),u=t[5]&&wo(t),c=t[6]&&yo(t),f=t[7]&&ko(t),b=t[8]&&So(t),h=t[9]&&$o(t);return{c(){r&&r.c(),e=P(),u&&u.c(),o=P(),c&&c.c(),n=P(),f&&f.c(),i=P(),b&&b.c(),s=P(),h&&h.c(),a=re()},m(p,d){r&&r.m(p,d),O(p,e,d),u&&u.m(p,d),O(p,o,d),c&&c.m(p,d),O(p,n,d),f&&f.m(p,d),O(p,i,d),b&&b.m(p,d),O(p,s,d),h&&h.m(p,d),O(p,a,d),l=!0},p(p,d){p[4]?r?(r.p(p,d),d&16&&g(r,1)):(r=_o(p),r.c(),g(r,1),r.m(e.parentNode,e)):r&&(Q(),_(r,1,1,()=>{r=null}),Z()),p[5]?u?(u.p(p,d),d&32&&g(u,1)):(u=wo(p),u.c(),g(u,1),u.m(o.parentNode,o)):u&&(Q(),_(u,1,1,()=>{u=null}),Z()),p[6]?c?(c.p(p,d),d&64&&g(c,1)):(c=yo(p),c.c(),g(c,1),c.m(n.parentNode,n)):c&&(Q(),_(c,1,1,()=>{c=null}),Z()),p[7]?f?(f.p(p,d),d&128&&g(f,1)):(f=ko(p),f.c(),g(f,1),f.m(i.parentNode,i)):f&&(Q(),_(f,1,1,()=>{f=null}),Z()),p[8]?b?(b.p(p,d),d&256&&g(b,1)):(b=So(p),b.c(),g(b,1),b.m(s.parentNode,s)):b&&(Q(),_(b,1,1,()=>{b=null}),Z()),p[9]?h?(h.p(p,d),d&512&&g(h,1)):(h=$o(p),h.c(),g(h,1),h.m(a.parentNode,a)):h&&(Q(),_(h,1,1,()=>{h=null}),Z())},i(p){l||(g(r),g(u),g(c),g(f),g(b),g(h),l=!0)},o(p){_(r),_(u),_(c),_(f),_(b),_(h),l=!1},d(p){p&&(E(e),E(o),E(n),E(i),E(s),E(a)),r&&r.d(p),u&&u.d(p),c&&c.d(p),f&&f.d(p),b&&b.d(p),h&&h.d(p)}}}function cu(t){let e,o;return e=new ln({props:{title:t[1],$$slots:{default:[uu]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,[i]){const s={};i&2&&(s.title=n[1]),i&5242877&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function fu(t,e,o){let{title:n}=e,{shortcut:i}=e,{minWidth:s=void 0}=e,{marginRight:a=void 0}=e,{displayCtrlKey:l=!0}=e,{displayShiftKey:r=!0}=e,{displayAltKey:u=!0}=e,{displayMetaKey:c=!0}=e,{displayMouseButton:f=!0}=e,{displayMouseEvent:b=!0}=e,{disabledCtrlKey:h=!1}=e,{disabledShiftKey:p=!1}=e,{disabledAltKey:d=!1}=e,{disabledMetaKey:m=!1}=e,{disabledMouseButton:B=!1}=e,{disabledMouseEvent:F=!1}=e,{mouseButtonTitle:H="Mouse Button"}=e,{mouseEventTitle:S="Mouse Event"}=e,{mouseButtonOptions:K=[{key:ve.Left,text:"Left"},{key:ve.Middle,text:"Middle"},{key:ve.Right,text:"Right"},{key:ve.Back,text:"Back"},{key:ve.Forward,text:"Forward"}]}=e,{mouseEventOptions:j=[{key:X.click,text:X.click},{key:X.dblclick,text:X.dblclick},{key:X.mousedown,text:X.mousedown},{key:X.mouseup,text:X.mouseup},{key:X.mouseenter,text:X.mouseenter},{key:X.mouseleave,text:X.mouseleave},{key:X.mousewheel,text:X.mousewheel},{key:X.mouseover,text:X.mouseover},{key:X.mousemove,text:X.mousemove},{key:X.mouseout,text:X.mouseout}]}=e;const V=Nt();function q(R){i.hasOwnProperty(R.detail.key)&&o(0,i[R.detail.key]=R.detail.value,i),V("changed",{shortcut:i})}return t.$$set=R=>{"title"in R&&o(1,n=R.title),"shortcut"in R&&o(0,i=R.shortcut),"minWidth"in R&&o(2,s=R.minWidth),"marginRight"in R&&o(3,a=R.marginRight),"displayCtrlKey"in R&&o(4,l=R.displayCtrlKey),"displayShiftKey"in R&&o(5,r=R.displayShiftKey),"displayAltKey"in R&&o(6,u=R.displayAltKey),"displayMetaKey"in R&&o(7,c=R.displayMetaKey),"displayMouseButton"in R&&o(8,f=R.displayMouseButton),"displayMouseEvent"in R&&o(9,b=R.displayMouseEvent),"disabledCtrlKey"in R&&o(10,h=R.disabledCtrlKey),"disabledShiftKey"in R&&o(11,p=R.disabledShiftKey),"disabledAltKey"in R&&o(12,d=R.disabledAltKey),"disabledMetaKey"in R&&o(13,m=R.disabledMetaKey),"disabledMouseButton"in R&&o(14,B=R.disabledMouseButton),"disabledMouseEvent"in R&&o(15,F=R.disabledMouseEvent),"mouseButtonTitle"in R&&o(16,H=R.mouseButtonTitle),"mouseEventTitle"in R&&o(17,S=R.mouseEventTitle),"mouseButtonOptions"in R&&o(18,K=R.mouseButtonOptions),"mouseEventOptions"in R&&o(19,j=R.mouseEventOptions)},[i,n,s,a,l,r,u,c,f,b,h,p,d,m,B,F,H,S,K,j,q]}class Wi extends ce{constructor(e){super(),ue(this,e,fu,cu,se,{title:1,shortcut:0,minWidth:2,marginRight:3,displayCtrlKey:4,displayShiftKey:5,displayAltKey:6,displayMetaKey:7,displayMouseButton:8,displayMouseEvent:9,disabledCtrlKey:10,disabledShiftKey:11,disabledAltKey:12,disabledMetaKey:13,disabledMouseButton:14,disabledMouseEvent:15,mouseButtonTitle:16,mouseEventTitle:17,mouseButtonOptions:18,mouseEventOptions:19})}}function pu(t,e=!0){const o=[{role:"about"},...t?[{type:"separator"},{role:"help"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"}]:[],{type:"separator"},{role:"quit"}],n=[...t?[{role:"recentDocuments"},{role:"clearRecentDocuments"},{type:"separator"}]:[],{role:"close"}],i=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteAndMatchStyle"},{role:"delete"},{type:"separator"},{role:"selectAll"},{type:"separator"},{role:"toggleSpellChecker"},...t?[{type:"separator"},{role:"showSubstitutions"},{role:"toggleTextReplacement"},{type:"separator"},{role:"toggleSmartQuotes"},{role:"toggleSmartDashes"},{type:"separator"},{role:"startSpeaking"},{role:"stopSpeaking"}]:[]],s=[{role:"reload"},{role:"forceReload"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn",accelerator:"CmdOrCtrl+="},{role:"zoomOut"},...t?[{role:"zoom"},{type:"separator"},{role:"front"}]:[{type:"separator"},{label:"Toggle On Top",click:(r,u,c)=>{u&&u.setAlwaysOnTop(!u.isAlwaysOnTop())},type:"checkbox",checked:e,accelerator:"CmdOrCtrl+Shift+Space"}],{role:"togglefullscreen"},{type:"separator"},{role:"toggleDevTools"}],a=[...t?[{role:"window"},{type:"separator"},{role:"toggleTabBar"},{role:"selectNextTab"},{role:"selectPreviousTab"},{role:"mergeAllWindows"},{role:"moveTabToNewWindow"},{type:"separator"}]:[],{role:"minimize"},{role:"close"}],l=[{role:"appMenu",submenu:o},{role:"fileMenu",submenu:n},{role:"editMenu",submenu:i},{role:"viewMenu",submenu:s},{role:"windowMenu",submenu:a}];return t&&l.push({role:"shareMenu"}),l}var me=(t=>(t[t.AlwaysShow=0]="AlwaysShow",t[t.AutoHide=1]="AutoHide",t[t.Disabled=2]="Disabled",t))(me||{});function du(t,e,o,n,i){o.webPreferences=mt(o.webPreferences||{},n);const s=mt(e,o);if(Uo())try{s.center&&(delete s.x,delete s.y);const{BrowserWindow:a,Menu:l}=globalThis.require("@electron/remote"),r=new a(s);if(s.enableMenuBar){const u=l.buildFromTemplate(pu(globalThis.process.platform==="darwin",s.alwaysOnTop));r.setMenu(u)}else r.removeMenu();return s.enableElectron&&globalThis.require("@electron/remote").require("@electron/remote/main").enable(r.webContents),r.loadURL(t.href,{userAgent:i.useragent}),r}catch(a){i.logger.warn(a)}else return s.center&&(s.x=(globalThis.screen.width-s.width)/2,s.y=(globalThis.screen.height-s.height)/2),console.debug(globalThis.screen,s),globalThis.open(t.href,t.href,["popup = true",`width = ${s.width}`,`height = ${s.height}`,`left = ${s.x}`,`top = ${s.y}`].join(", "))}function vo(t,e,o){const n=t.slice();return n[31]=e[o][0],n[32]=e[o][1],n[33]=e,n[34]=o,n}function To(t,e,o){const n=t.slice();return n[31]=e[o][0],n[32]=e[o][1],n[35]=e,n[36]=o,n}function hu(t){let e,o;return e=new G({props:{slot:"input",type:W.text,block:!0,placeholder:globalThis.navigator.userAgent,settingKey:"Text",settingValue:t[0].general.useragent}}),e.$on("changed",t[7]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].general.useragent),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function mu(t){let e,o;return e=new G({props:{slot:"input",type:W.text,settingKey:"text",settingValue:t[0].general.background}}),e.$on("changed",t[8]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].general.background),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function gu(t){let e,o;return e=new G({props:{slot:"input",type:W.button,settingKey:"Reset",settingValue:t[2].settings.generalSettings.reset.text}}),e.$on("clicked",t[4]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p:z,i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function bu(t){let e,o,n,i,s,a;return e=new x({props:{title:t[2].settings.generalSettings.useragent.title,text:t[2].settings.generalSettings.useragent.description,block:!0,$$slots:{input:[hu]},$$scope:{ctx:t}}}),n=new x({props:{title:t[2].settings.background.title,text:t[2].settings.background.description,$$slots:{input:[mu]},$$scope:{ctx:t}}}),s=new x({props:{title:t[2].settings.generalSettings.reset.title,text:t[2].settings.generalSettings.reset.description,$$slots:{input:[gu]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment),o=P(),T(n.$$.fragment),i=P(),T(s.$$.fragment)},m(l,r){$(e,l,r),O(l,o,r),$(n,l,r),O(l,i,r),$(s,l,r),a=!0},p(l,r){const u={};r[0]&1|r[1]&64&&(u.$$scope={dirty:r,ctx:l}),e.$set(u);const c={};r[0]&1|r[1]&64&&(c.$$scope={dirty:r,ctx:l}),n.$set(c);const f={};r[1]&64&&(f.$$scope={dirty:r,ctx:l}),s.$set(f)},i(l){a||(g(e.$$.fragment,l),g(n.$$.fragment,l),g(s.$$.fragment,l),a=!0)},o(l){_(e.$$.fragment,l),_(n.$$.fragment,l),_(s.$$.fragment,l),a=!1},d(l){l&&(E(o),E(i)),v(e,l),v(n,l),v(s,l)}}}function _u(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.enable}}),e.$on("changed",t[9]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].tab.enable),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function wu(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.open.targets.hyperlink.editor.enable}}),e.$on("changed",t[10]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].tab.open.targets.hyperlink.editor.enable),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function yu(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.open.targets.hyperlink.other.enable}}),e.$on("changed",t[11]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].tab.open.targets.hyperlink.other.enable),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function ku(t){let e,o=t[32].prefix+"",n;return{c(){e=D("code"),n=ge(o),k(e,"slot","title"),k(e,"class","fn__code")},m(i,s){O(i,e,s),A(e,n)},p(i,s){s[0]&1&&o!==(o=i[32].prefix+"")&&Me(n,o)},d(i){i&&E(e)}}}function Su(t){let e,o;function n(...i){return t[12](t[32],t[35],t[36],...i)}return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"Checkbox",settingValue:t[32].enable}}),e.$on("changed",n),{c(){T(e.$$.fragment)},m(i,s){$(e,i,s),o=!0},p(i,s){t=i;const a={};s[0]&1&&(a.settingValue=t[32].enable),e.$set(a)},i(i){o||(g(e.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),o=!1},d(i){v(e,i)}}}function Eo(t,e){let o,n,i;return n=new Le({props:{minWidth:"8em",$$slots:{input:[Su],title:[ku]},$$scope:{ctx:e}}}),{key:t,first:null,c(){o=re(),T(n.$$.fragment),this.first=o},m(s,a){O(s,o,a),$(n,s,a),i=!0},p(s,a){e=s;const l={};a[0]&1|a[1]&64&&(l.$$scope={dirty:a,ctx:e}),n.$set(l)},i(s){i||(g(n.$$.fragment,s),i=!0)},o(s){_(n.$$.fragment,s),i=!1},d(s){s&&E(o),v(n,s)}}}function $u(t){let e=[],o=new Map,n,i,s=de(Object.entries(t[0].tab.open.protocols));const a=l=>l[31];for(let l=0;l<s.length;l+=1){let r=To(t,s,l),u=a(r);o.set(u,e[l]=Eo(u,r))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=re()},m(l,r){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(l,r);O(l,n,r),i=!0},p(l,r){r[0]&9&&(s=de(Object.entries(l[0].tab.open.protocols)),Q(),e=Ie(e,r,a,1,l,s,o,n.parentNode,Ye,Eo,n,To),Z())},i(l){if(!i){for(let r=0;r<s.length;r+=1)g(e[r]);i=!0}},o(l){for(let r=0;r<e.length;r+=1)_(e[r]);i=!1},d(l){l&&E(n);for(let r=0;r<e.length;r+=1)e[r].d(l)}}}function vu(t){let e,o,n,i,s,a,l,r,u,c,f,b,h;return o=new x({props:{title:t[2].settings.open.enable.tab.title,text:t[2].settings.open.enable.tab.description,$$slots:{input:[_u]},$$scope:{ctx:t}}}),i=new x({props:{title:t[2].settings.open.editorHyperlink.title,text:t[2].settings.open.editorHyperlink.description,$$slots:{input:[wu]},$$scope:{ctx:t}}}),a=new x({props:{title:t[2].settings.open.otherHyperlink.title,text:t[2].settings.open.otherHyperlink.description,$$slots:{input:[yu]},$$scope:{ctx:t}}}),u=new ln({props:{title:t[2].settings.protocols.title,$$slots:{default:[$u]},$$scope:{ctx:t}}}),b=new Wi({props:{minWidth:"16em",title:t[2].settings.open.shortcut.title,shortcut:t[0].tab.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:t[2].settings.mouse.button,mouseButtonOptions:[{key:ve.Left,text:t[2].settings.mouse.left}]}}),b.$on("changed",t[3]),{c(){e=D("div"),T(o.$$.fragment),n=P(),T(i.$$.fragment),s=P(),T(a.$$.fragment),l=P(),r=D("div"),T(u.$$.fragment),c=P(),f=D("div"),T(b.$$.fragment),k(e,"data-type",t[6].tab[0].name),N(e,"fn__none",t[6].tab[0].key!==t[30]),k(r,"data-type",t[6].tab[1].name),N(r,"fn__none",t[6].tab[1].key!==t[30]),k(f,"data-type",t[6].tab[2].name),N(f,"fn__none",t[6].tab[2].key!==t[30])},m(p,d){O(p,e,d),$(o,e,null),A(e,n),$(i,e,null),A(e,s),$(a,e,null),O(p,l,d),O(p,r,d),$(u,r,null),O(p,c,d),O(p,f,d),$(b,f,null),h=!0},p(p,d){const m={};d[0]&1|d[1]&64&&(m.$$scope={dirty:d,ctx:p}),o.$set(m);const B={};d[0]&1|d[1]&64&&(B.$$scope={dirty:d,ctx:p}),i.$set(B);const F={};d[0]&1|d[1]&64&&(F.$$scope={dirty:d,ctx:p}),a.$set(F),(!h||d[0]&1073741888)&&N(e,"fn__none",p[6].tab[0].key!==p[30]);const H={};d[0]&1|d[1]&64&&(H.$$scope={dirty:d,ctx:p}),u.$set(H),(!h||d[0]&1073741888)&&N(r,"fn__none",p[6].tab[1].key!==p[30]);const S={};d[0]&1&&(S.shortcut=p[0].tab.open.mouse),b.$set(S),(!h||d[0]&1073741888)&&N(f,"fn__none",p[6].tab[2].key!==p[30])},i(p){h||(g(o.$$.fragment,p),g(i.$$.fragment,p),g(a.$$.fragment,p),g(u.$$.fragment,p),g(b.$$.fragment,p),h=!0)},o(p){_(o.$$.fragment,p),_(i.$$.fragment,p),_(a.$$.fragment,p),_(u.$$.fragment,p),_(b.$$.fragment,p),h=!1},d(p){p&&(E(e),E(l),E(r),E(c),E(f)),v(o),v(i),v(a),v(u),v(b)}}}function Tu(t){let e,o;return e=new qi({props:{focus:Gu,tabs:t[6].tab,$$slots:{default:[vu,({focus:n})=>({30:n}),({focus:n})=>[n?1073741824:0]]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1073741825|i[1]&64&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Eu(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"enable",settingValue:t[0].window.enable}}),e.$on("changed",t[13]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.enable),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Ou(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"editorHyperlink",settingValue:t[0].window.open.targets.hyperlink.editor}}),e.$on("changed",t[14]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.open.targets.hyperlink.editor),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Bu(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"otherHyperlink",settingValue:t[0].window.open.targets.hyperlink.other}}),e.$on("changed",t[15]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.open.targets.hyperlink.other),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Nu(t){let e,o;return e=new G({props:{slot:"input",type:W.number,settingKey:"width",settingValue:t[0].window.params.width,limits:{min:320,max:15360,step:40}}}),e.$on("changed",t[16]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.width),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Au(t){let e,o;return e=new G({props:{slot:"input",type:W.number,settingKey:"height",settingValue:t[0].window.params.height,limits:{min:240,max:8640,step:40}}}),e.$on("changed",t[17]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.height),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Ru(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"center",settingValue:t[0].window.params.center}}),e.$on("changed",t[18]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.center),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Cu(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"top",settingValue:t[0].window.params.alwaysOnTop}}),e.$on("changed",t[19]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.alwaysOnTop),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Du(t){let e,o;return e=new G({props:{slot:"input",type:W.select,settingKey:"menuBar",settingValue:t[0].window.params.enableMenuBar?t[0].window.params.autoHideMenuBar?me.AutoHide:me.AlwaysShow:me.Disabled,options:[{key:me.AutoHide,text:t[2].settings.window.menuBar.options.autoHide},{key:me.AlwaysShow,text:t[2].settings.window.menuBar.options.alwaysShow},{key:me.Disabled,text:t[2].settings.window.menuBar.options.disabled}]}}),e.$on("changed",t[20]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.enableMenuBar?n[0].window.params.autoHideMenuBar?me.AutoHide:me.AlwaysShow:me.Disabled),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Pu(t){let e,o=t[32].prefix+"",n;return{c(){e=D("code"),n=ge(o),k(e,"slot","title"),k(e,"class","fn__code")},m(i,s){O(i,e,s),A(e,n)},p(i,s){s[0]&1&&o!==(o=i[32].prefix+"")&&Me(n,o)},d(i){i&&E(e)}}}function Mu(t){let e,o;function n(...i){return t[21](t[32],t[33],t[34],...i)}return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"Checkbox",settingValue:t[32].enable}}),e.$on("changed",n),{c(){T(e.$$.fragment)},m(i,s){$(e,i,s),o=!0},p(i,s){t=i;const a={};s[0]&1&&(a.settingValue=t[32].enable),e.$set(a)},i(i){o||(g(e.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),o=!1},d(i){v(e,i)}}}function Oo(t,e){let o,n,i;return n=new Le({props:{minWidth:"8em",$$slots:{input:[Mu],title:[Pu]},$$scope:{ctx:e}}}),{key:t,first:null,c(){o=re(),T(n.$$.fragment),this.first=o},m(s,a){O(s,o,a),$(n,s,a),i=!0},p(s,a){e=s;const l={};a[0]&1|a[1]&64&&(l.$$scope={dirty:a,ctx:e}),n.$set(l)},i(s){i||(g(n.$$.fragment,s),i=!0)},o(s){_(n.$$.fragment,s),i=!1},d(s){s&&E(o),v(n,s)}}}function Lu(t){let e=[],o=new Map,n,i,s=de(Object.entries(t[0].window.open.protocols));const a=l=>l[31];for(let l=0;l<s.length;l+=1){let r=vo(t,s,l),u=a(r);o.set(u,e[l]=Oo(u,r))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=re()},m(l,r){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(l,r);O(l,n,r),i=!0},p(l,r){r[0]&9&&(s=de(Object.entries(l[0].window.open.protocols)),Q(),e=Ie(e,r,a,1,l,s,o,n.parentNode,Ye,Oo,n,vo),Z())},i(l){if(!i){for(let r=0;r<s.length;r+=1)g(e[r]);i=!0}},o(l){for(let r=0;r<e.length;r+=1)_(e[r]);i=!1},d(l){l&&E(n);for(let r=0;r<e.length;r+=1)e[r].d(l)}}}function ju(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"enable",settingValue:t[0].window.siyuan.enable}}),e.$on("changed",t[22]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.siyuan.enable),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Iu(t){let e,o;return e=new G({props:{slot:"input",type:W.button,settingKey:"open-desktop-window",settingValue:t[2].settings.siyuan.open.desktop.text}}),e.$on("clicked",t[23]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p:z,i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Fu(t){let e,o;return e=new G({props:{slot:"input",type:W.button,settingKey:"open-mobile-window",settingValue:t[2].settings.siyuan.open.mobile.text}}),e.$on("clicked",t[24]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p:z,i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function qu(t){let e,o;return e=new G({props:{slot:"input",type:W.checkbox,settingKey:"focus",settingValue:t[0].window.siyuan.focus}}),e.$on("changed",t[25]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.siyuan.focus),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Wu(t){let e,o;return e=new G({props:{slot:"input",type:W.select,settingKey:"menuBar",settingValue:t[0].window.siyuan.editorType,options:[{key:Te.mobile,text:t[2].settings.siyuan.editorType.options.mobile},{key:Te.desktop,text:t[2].settings.siyuan.editorType.options.desktop}]}}),e.$on("changed",t[26]),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.siyuan.editorType),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Uu(t){let e,o,n,i,s,a,l,r,u,c,f,b,h,p,d,m,B,F,H,S,K,j,V,q,R,fe,ke,Fe,Se,I,L,be,le,_e;return o=new x({props:{title:t[2].settings.open.enable.window.title,text:t[2].settings.open.enable.window.description,$$slots:{input:[Eu]},$$scope:{ctx:t}}}),i=new x({props:{title:t[2].settings.open.editorHyperlink.title,text:t[2].settings.open.editorHyperlink.description,$$slots:{input:[Ou]},$$scope:{ctx:t}}}),a=new x({props:{title:t[2].settings.open.otherHyperlink.title,text:t[2].settings.open.otherHyperlink.description,$$slots:{input:[Bu]},$$scope:{ctx:t}}}),r=new x({props:{title:t[2].settings.window.width.title,text:t[2].settings.window.width.description,$$slots:{input:[Nu]},$$scope:{ctx:t}}}),c=new x({props:{title:t[2].settings.window.height.title,text:t[2].settings.window.height.description,$$slots:{input:[Au]},$$scope:{ctx:t}}}),b=new x({props:{title:t[2].settings.window.center.title,text:t[2].settings.window.center.description,$$slots:{input:[Ru]},$$scope:{ctx:t}}}),p=new x({props:{title:t[2].settings.window.top.title,text:t[2].settings.window.top.description,$$slots:{input:[Cu]},$$scope:{ctx:t}}}),m=new x({props:{title:t[2].settings.window.menuBar.title,text:t[2].settings.window.menuBar.description,$$slots:{input:[Du]},$$scope:{ctx:t}}}),H=new ln({props:{title:t[2].settings.protocols.title,$$slots:{default:[Lu]},$$scope:{ctx:t}}}),j=new Wi({props:{minWidth:"16em",title:t[2].settings.open.shortcut.title,shortcut:t[0].window.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:t[2].settings.mouse.button,mouseButtonOptions:[{key:ve.Middle,text:t[2].settings.mouse.middle}]}}),j.$on("changed",t[3]),R=new x({props:{title:t[2].settings.siyuan.enable.title,text:t[2].settings.siyuan.enable.description,$$slots:{input:[ju]},$$scope:{ctx:t}}}),ke=new x({props:{title:t[2].settings.siyuan.open.desktop.title,text:t[2].settings.siyuan.open.desktop.description,$$slots:{input:[Iu]},$$scope:{ctx:t}}}),Se=new x({props:{title:t[2].settings.siyuan.open.mobile.title,text:t[2].settings.siyuan.open.mobile.description,$$slots:{input:[Fu]},$$scope:{ctx:t}}}),L=new x({props:{title:t[2].settings.siyuan.focus.title,text:t[2].settings.siyuan.focus.description,$$slots:{input:[qu]},$$scope:{ctx:t}}}),le=new x({props:{title:t[2].settings.siyuan.editorType.title,text:t[2].settings.siyuan.editorType.description,$$slots:{input:[Wu]},$$scope:{ctx:t}}}),{c(){e=D("div"),T(o.$$.fragment),n=P(),T(i.$$.fragment),s=P(),T(a.$$.fragment),l=P(),T(r.$$.fragment),u=P(),T(c.$$.fragment),f=P(),T(b.$$.fragment),h=P(),T(p.$$.fragment),d=P(),T(m.$$.fragment),B=P(),F=D("div"),T(H.$$.fragment),S=P(),K=D("div"),T(j.$$.fragment),V=P(),q=D("div"),T(R.$$.fragment),fe=P(),T(ke.$$.fragment),Fe=P(),T(Se.$$.fragment),I=P(),T(L.$$.fragment),be=P(),T(le.$$.fragment),k(e,"data-type",t[6].window[0].name),N(e,"fn__none",t[6].window[0].key!==t[30]),k(F,"data-type",t[6].window[1].name),N(F,"fn__none",t[6].window[1].key!==t[30]),k(K,"data-type",t[6].window[2].name),N(K,"fn__none",t[6].window[2].key!==t[30]),k(q,"data-type",t[6].window[3].name),N(q,"fn__none",t[6].window[3].key!==t[30])},m(C,M){O(C,e,M),$(o,e,null),A(e,n),$(i,e,null),A(e,s),$(a,e,null),A(e,l),$(r,e,null),A(e,u),$(c,e,null),A(e,f),$(b,e,null),A(e,h),$(p,e,null),A(e,d),$(m,e,null),O(C,B,M),O(C,F,M),$(H,F,null),O(C,S,M),O(C,K,M),$(j,K,null),O(C,V,M),O(C,q,M),$(R,q,null),A(q,fe),$(ke,q,null),A(q,Fe),$(Se,q,null),A(q,I),$(L,q,null),A(q,be),$(le,q,null),_e=!0},p(C,M){const un={};M[0]&1|M[1]&64&&(un.$$scope={dirty:M,ctx:C}),o.$set(un);const cn={};M[0]&1|M[1]&64&&(cn.$$scope={dirty:M,ctx:C}),i.$set(cn);const fn={};M[0]&1|M[1]&64&&(fn.$$scope={dirty:M,ctx:C}),a.$set(fn);const pn={};M[0]&1|M[1]&64&&(pn.$$scope={dirty:M,ctx:C}),r.$set(pn);const dn={};M[0]&1|M[1]&64&&(dn.$$scope={dirty:M,ctx:C}),c.$set(dn);const hn={};M[0]&1|M[1]&64&&(hn.$$scope={dirty:M,ctx:C}),b.$set(hn);const mn={};M[0]&1|M[1]&64&&(mn.$$scope={dirty:M,ctx:C}),p.$set(mn);const gn={};M[0]&1|M[1]&64&&(gn.$$scope={dirty:M,ctx:C}),m.$set(gn),(!_e||M[0]&1073741888)&&N(e,"fn__none",C[6].window[0].key!==C[30]);const bn={};M[0]&1|M[1]&64&&(bn.$$scope={dirty:M,ctx:C}),H.$set(bn),(!_e||M[0]&1073741888)&&N(F,"fn__none",C[6].window[1].key!==C[30]);const _n={};M[0]&1&&(_n.shortcut=C[0].window.open.mouse),j.$set(_n),(!_e||M[0]&1073741888)&&N(K,"fn__none",C[6].window[2].key!==C[30]);const wn={};M[0]&1|M[1]&64&&(wn.$$scope={dirty:M,ctx:C}),R.$set(wn);const yn={};M[0]&2|M[1]&64&&(yn.$$scope={dirty:M,ctx:C}),ke.$set(yn);const kn={};M[0]&2|M[1]&64&&(kn.$$scope={dirty:M,ctx:C}),Se.$set(kn);const Sn={};M[0]&1|M[1]&64&&(Sn.$$scope={dirty:M,ctx:C}),L.$set(Sn);const $n={};M[0]&1|M[1]&64&&($n.$$scope={dirty:M,ctx:C}),le.$set($n),(!_e||M[0]&1073741888)&&N(q,"fn__none",C[6].window[3].key!==C[30])},i(C){_e||(g(o.$$.fragment,C),g(i.$$.fragment,C),g(a.$$.fragment,C),g(r.$$.fragment,C),g(c.$$.fragment,C),g(b.$$.fragment,C),g(p.$$.fragment,C),g(m.$$.fragment,C),g(H.$$.fragment,C),g(j.$$.fragment,C),g(R.$$.fragment,C),g(ke.$$.fragment,C),g(Se.$$.fragment,C),g(L.$$.fragment,C),g(le.$$.fragment,C),_e=!0)},o(C){_(o.$$.fragment,C),_(i.$$.fragment,C),_(a.$$.fragment,C),_(r.$$.fragment,C),_(c.$$.fragment,C),_(b.$$.fragment,C),_(p.$$.fragment,C),_(m.$$.fragment,C),_(H.$$.fragment,C),_(j.$$.fragment,C),_(R.$$.fragment,C),_(ke.$$.fragment,C),_(Se.$$.fragment,C),_(L.$$.fragment,C),_(le.$$.fragment,C),_e=!1},d(C){C&&(E(e),E(B),E(F),E(S),E(K),E(V),E(q)),v(o),v(i),v(a),v(r),v(c),v(b),v(p),v(m),v(H),v(j),v(R),v(ke),v(Se),v(L),v(le)}}}function Ku(t){let e,o;return e=new qi({props:{focus:Ju,tabs:t[6].window,$$slots:{default:[Uu,({focus:n})=>({30:n}),({focus:n})=>[n?1073741824:0]]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&1073741827|i[1]&64&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Hu(t){let e,o,n,i,s,a;return e=new It({props:{display:t[5][0].key===t[29],$$slots:{default:[bu]},$$scope:{ctx:t}}}),n=new It({props:{display:t[5][1].key===t[29],$$slots:{default:[Tu]},$$scope:{ctx:t}}}),s=new It({props:{display:t[5][2].key===t[29],$$slots:{default:[Ku]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment),o=P(),T(n.$$.fragment),i=P(),T(s.$$.fragment)},m(l,r){$(e,l,r),O(l,o,r),$(n,l,r),O(l,i,r),$(s,l,r),a=!0},p(l,r){const u={};r[0]&536870912&&(u.display=l[5][0].key===l[29]),r[0]&1|r[1]&64&&(u.$$scope={dirty:r,ctx:l}),e.$set(u);const c={};r[0]&536870912&&(c.display=l[5][1].key===l[29]),r[0]&1|r[1]&64&&(c.$$scope={dirty:r,ctx:l}),n.$set(c);const f={};r[0]&536870912&&(f.display=l[5][2].key===l[29]),r[0]&3|r[1]&64&&(f.$$scope={dirty:r,ctx:l}),s.$set(f)},i(l){a||(g(e.$$.fragment,l),g(n.$$.fragment,l),g(s.$$.fragment,l),a=!0)},o(l){_(e.$$.fragment,l),_(n.$$.fragment,l),_(s.$$.fragment,l),a=!1},d(l){l&&(E(o),E(i)),v(e,l),v(n,l),v(s,l)}}}function Vu(t){let e,o;return e=new il({props:{panels:t[5],focus:zu,$$slots:{default:[Hu,({focus:n})=>({29:n}),({focus:n})=>[n?536870912:0]]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i[0]&536870915|i[1]&64&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}let zu=0,Gu=0,Ju=0;function Yu(t,e,o){let{config:n}=e,{plugin:i}=e;const s=i.i18n;function a(){i.updateConfig(n)}function l(){i.siyuan.confirm(s.settings.generalSettings.reset.title,s.settings.generalSettings.reset.description,async()=>{await i.resetConfig(),globalThis.location.reload()})}const r=[{key:0,text:s.settings.generalSettings.title,name:s.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:s.settings.openTab,name:s.settings.openTab,icon:"#iconBoth"},{key:2,text:s.settings.openWindow,name:s.settings.openWindow,icon:"#iconOpenWindow"}],u={tab:[{key:0,text:s.settings.general,name:s.settings.general,icon:"⚙"},{key:1,text:s.settings.protocol,name:s.settings.protocol,icon:"🌐"},{key:2,text:s.settings.shortcut,name:s.settings.shortcut,icon:"⌨"}],window:[{key:0,text:s.settings.general,name:s.settings.general,icon:"⚙"},{key:1,text:s.settings.protocol,name:s.settings.protocol,icon:"🌐"},{key:2,text:s.settings.shortcut,name:s.settings.shortcut,icon:"⌨"},{key:3,text:s.settings.siyuan.title,name:s.settings.siyuan.title,icon:"📝"}]},c=I=>{o(0,n.general.useragent=I.detail.value,n),a()},f=I=>{o(0,n.general.background=I.detail.value,n),a()},b=I=>{o(0,n.tab.enable=I.detail.value,n),a()},h=I=>{o(0,n.tab.open.targets.hyperlink.editor.enable=I.detail.value,n),a()},p=I=>{o(0,n.tab.open.targets.hyperlink.other.enable=I.detail.value,n),a()},d=(I,L,be,le)=>{o(0,L[be][1].enable=le.detail.value,n),a()},m=I=>{o(0,n.window.enable=I.detail.value,n),a()},B=I=>{o(0,n.window.open.targets.hyperlink.editor=I.detail.value,n),a()},F=I=>{o(0,n.window.open.targets.hyperlink.other=I.detail.value,n),a()},H=I=>{o(0,n.window.params.width=I.detail.value,n),a()},S=I=>{o(0,n.window.params.height=I.detail.value,n),a()},K=I=>{o(0,n.window.params.center=I.detail.value,n),a()},j=I=>{o(0,n.window.params.alwaysOnTop=I.detail.value,n),a()},V=I=>{switch(I.detail.value){case me.AutoHide:o(0,n.window.params.enableMenuBar=!0,n),o(0,n.window.params.autoHideMenuBar=!0,n);break;case me.AlwaysShow:o(0,n.window.params.enableMenuBar=!0,n),o(0,n.window.params.autoHideMenuBar=!1,n);break;case me.Disabled:o(0,n.window.params.enableMenuBar=!1,n);break}a()},q=(I,L,be,le)=>{o(0,L[be][1].enable=le.detail.value,n),a()},R=I=>{o(0,n.window.siyuan.enable=I.detail.value,n),a()},fe=I=>i.openSiyuanDesktopWindow(I.detail.event),ke=I=>i.openSiyuanMobileWindow(I.detail.event),Fe=I=>{o(0,n.window.siyuan.focus=I.detail.value,n),a()},Se=I=>{o(0,n.window.siyuan.editorType=I.detail.value,n),a()};return t.$$set=I=>{"config"in I&&o(0,n=I.config),"plugin"in I&&o(1,i=I.plugin)},[n,i,s,a,l,r,u,c,f,b,h,p,d,m,B,F,H,S,K,j,V,q,R,fe,ke,Fe,Se]}class Xu extends ce{constructor(e){super(),ue(this,e,Yu,Vu,se,{config:0,plugin:1},null,[-1,-1])}}function Bo(t,{delay:e=0,duration:o=400,easing:n=on}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:o,easing:n,css:s=>`opacity: ${s*i}`}}const Qu=t=>({}),No=t=>({});function Ao(t){let e,o;return e=new ye({props:{id:t[1],icon:t[2]}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&2&&(s.id=n[1]),i&4&&(s.icon=n[2]),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Zu(t){let e,o,n=t[2]&&Ao(t);return{c(){n&&n.c(),e=re()},m(i,s){n&&n.m(i,s),O(i,e,s),o=!0},p(i,s){i[2]?n?(n.p(i,s),s&4&&g(n,1)):(n=Ao(i),n.c(),g(n,1),n.m(e.parentNode,e)):n&&(Q(),_(n,1,1,()=>{n=null}),Z())},i(i){o||(g(n),o=!0)},o(i){_(n),o=!1},d(i){i&&E(e),n&&n.d(i)}}}function xu(t){let e,o,n,i,s;const a=t[7].svg,l=ee(a,t,t[6],No),r=l||Zu(t);return{c(){e=D("span"),r&&r.c(),o=P(),n=D("span"),i=ge(t[3]),k(n,"title",t[4]),k(n,"class","protyle-breadcrumb__text"),N(n,"protyle-breadcrumb__text--ellipsis",t[5]),k(e,"class","protyle-breadcrumb__item"),k(e,"data-node-id",t[0])},m(u,c){O(u,e,c),r&&r.m(e,null),A(e,o),A(e,n),A(n,i),s=!0},p(u,[c]){l?l.p&&(!s||c&64)&&ne(l,a,u,u[6],s?te(a,u[6],c,Qu):oe(u[6]),No):r&&r.p&&(!s||c&6)&&r.p(u,s?c:-1),(!s||c&8)&&Me(i,u[3]),(!s||c&16)&&k(n,"title",u[4]),(!s||c&32)&&N(n,"protyle-breadcrumb__text--ellipsis",u[5]),(!s||c&1)&&k(e,"data-node-id",u[0])},i(u){s||(g(r,u),s=!0)},o(u){_(r,u),s=!1},d(u){u&&E(e),r&&r.d(u)}}}function ec(t,e,o){let{$$slots:n={},$$scope:i}=e,{itemId:s=""}=e,{iconId:a=""}=e,{icon:l=""}=e,{text:r=""}=e,{textTitle:u=""}=e,{textEllipsis:c=!0}=e;return t.$$set=f=>{"itemId"in f&&o(0,s=f.itemId),"iconId"in f&&o(1,a=f.iconId),"icon"in f&&o(2,l=f.icon),"text"in f&&o(3,r=f.text),"textTitle"in f&&o(4,u=f.textTitle),"textEllipsis"in f&&o(5,c=f.textEllipsis),"$$scope"in f&&o(6,i=f.$$scope)},[s,a,l,r,u,c,i,n]}class tc extends ce{constructor(e){super(),ue(this,e,ec,xu,se,{itemId:0,iconId:1,icon:2,text:3,textTitle:4,textEllipsis:5})}}function Ro(t,e,o){const n=t.slice();return n[3]=e[o],n[5]=o,n}function nc(t){let e,o;return e=new ye({props:{className:"protyle-breadcrumb__arrow",icon:t[3].icon||"#iconRight"}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&1&&(s.icon=n[3].icon||"#iconRight"),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function oc(t){let e,o;const n=[t[3]];let i={};for(let s=0;s<n.length;s+=1)i=Ot(i,n[s]);return e=new tc({props:i}),{c(){T(e.$$.fragment)},m(s,a){$(e,s,a),o=!0},p(s,a){const l=a&1?an(n,[Fi(s[3])]):{};e.$set(l)},i(s){o||(g(e.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),o=!1},d(s){v(e,s)}}}function Co(t,e){let o,n,i,s,a;const l=[oc,nc],r=[];function u(c,f){return c[3].type==="item"?0:c[3].type==="arrow"?1:-1}return~(n=u(e))&&(i=r[n]=l[n](e)),{key:t,first:null,c(){o=re(),i&&i.c(),s=re(),this.first=o},m(c,f){O(c,o,f),~n&&r[n].m(c,f),O(c,s,f),a=!0},p(c,f){e=c;let b=n;n=u(e),n===b?~n&&r[n].p(e,f):(i&&(Q(),_(r[b],1,1,()=>{r[b]=null}),Z()),~n?(i=r[n],i?i.p(e,f):(i=r[n]=l[n](e),i.c()),g(i,1),i.m(s.parentNode,s)):i=null)},i(c){a||(g(i),a=!0)},o(c){_(i),a=!1},d(c){c&&(E(o),E(s)),~n&&r[n].d(c)}}}function ic(t){let e=[],o=new Map,n,i,s=de(t[0]);const a=l=>l[5];for(let l=0;l<s.length;l+=1){let r=Ro(t,s,l),u=a(r);o.set(u,e[l]=Co(u,r))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=re()},m(l,r){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(l,r);O(l,n,r),i=!0},p(l,r){r&1&&(s=de(l[0]),Q(),e=Ie(e,r,a,1,l,s,o,n.parentNode,Ye,Co,n,Ro),Z())},i(l){if(!i){for(let r=0;r<s.length;r+=1)g(e[r]);i=!0}},o(l){for(let r=0;r<e.length;r+=1)_(e[r]);i=!1},d(l){l&&E(n);for(let r=0;r<e.length;r+=1)e[r].d(l)}}}function sc(t){let e,o;const n=t[2].default,i=ee(n,t,t[1],null),s=i||ic(t);return{c(){e=D("div"),s&&s.c(),k(e,"class","protyle-breadcrumb__bar protyle-breadcrumb__bar--nowrap")},m(a,l){O(a,e,l),s&&s.m(e,null),o=!0},p(a,[l]){i?i.p&&(!o||l&2)&&ne(i,n,a,a[1],o?te(n,a[1],l,null):oe(a[1]),null):s&&s.p&&(!o||l&1)&&s.p(a,o?l:-1)},i(a){o||(g(s,a),o=!0)},o(a){_(s,a),o=!1},d(a){a&&E(e),s&&s.d(a)}}}function rc(t,e,o){let{$$slots:n={},$$scope:i}=e,{items:s=[]}=e;return t.$$set=a=>{"items"in a&&o(0,s=a.items),"$$scope"in a&&o(1,i=a.$$scope)},[s,i,n]}class ac extends ce{constructor(e){super(),ue(this,e,rc,sc,se,{items:0})}}const We=[];function Re(t,e=z){let o;const n=new Set;function i(l){if(se(t,l)&&(t=l,o)){const r=!We.length;for(const u of n)u[1](),We.push(u,t);if(r){for(let u=0;u<We.length;u+=2)We[u][0](We[u+1]);We.length=0}}}function s(l){i(l(t))}function a(l,r=z){const u=[l,r];return n.add(u),n.size===1&&(o=e(i,s)||z),l(t),()=>{n.delete(u),n.size===0&&o&&(o(),o=null)}}return{set:i,update:s,subscribe:a}}var $e=(t=>(t.none="",t.n="b3-tooltips__n",t.ne="b3-tooltips__ne",t.e="b3-tooltips__e",t.se="b3-tooltips__se",t.s="b3-tooltips__s",t.sw="b3-tooltips__sw",t.w="b3-tooltips__w",t.nw="b3-tooltips__nw",t))($e||{});function Ft(t){let e,o,n,i,s,a;o=new ye({props:{icon:t[0]}});let l=[{role:"button"},{"data-type":t[5]},{"aria-label":t[6]},{class:n="block__icon fn__flex-center "+t[7]}],r={};for(let u=0;u<l.length;u+=1)r=Ot(r,l[u]);return{c(){e=D(t[8]),T(o.$$.fragment),Vn(t[8])(e,r),N(e,"fn__none",t[2]),N(e,"block__icon--show",t[1]),N(e,"toolbar__item--active",t[3]),N(e,"toolbar__item--disabled",t[4]),N(e,"b3-tooltips",t[7]!==$e.none)},m(u,c){O(u,e,c),$(o,e,null),t[14](e),i=!0,s||(a=[J(e,"click",t[12]),J(e,"dblclick",t[13]),J(e,"click",t[15])],s=!0)},p(u,c){const f={};c&1&&(f.icon=u[0]),o.$set(f),Vn(u[8])(e,r=an(l,[{role:"button"},(!i||c&32)&&{"data-type":u[5]},(!i||c&64)&&{"aria-label":u[6]},(!i||c&128&&n!==(n="block__icon fn__flex-center "+u[7]))&&{class:n}])),N(e,"fn__none",u[2]),N(e,"block__icon--show",u[1]),N(e,"toolbar__item--active",u[3]),N(e,"toolbar__item--disabled",u[4]),N(e,"b3-tooltips",u[7]!==$e.none)},i(u){i||(g(o.$$.fragment,u),i=!0)},o(u){_(o.$$.fragment,u),i=!1},d(u){u&&E(e),v(o),t[14](null),s=!1,ae(a)}}}function lc(t){let e=t[8],o,n=t[8]&&Ft(t);return{c(){n&&n.c(),o=re()},m(i,s){n&&n.m(i,s),O(i,o,s)},p(i,[s]){i[8]?e?se(e,i[8])?(n.d(1),n=Ft(i),e=i[8],n.c(),n.m(o.parentNode,o)):n.p(i,s):(n=Ft(i),e=i[8],n.c(),n.m(o.parentNode,o)):e&&(n.d(1),n=null,e=i[8])},i:z,o(i){_(n,i)},d(i){i&&E(o),n&&n.d(i)}}}function uc(t,e,o){let{icon:n="#iconHelp"}=e,{tag:i="button"}=e,{show:s=!0}=e,{none:a=!1}=e,{active:l=!1}=e,{disabled:r=!1}=e,{type:u=""}=e,{ariaLabel:c=""}=e,{tooltipsDirection:f=$e.none}=e,{onClick:b=()=>null}=e,h;const p={icon:Re(n),show:Re(s),none:Re(a),active:Re(l),disabled:Re(r),type:Re(u),ariaLabel:Re(c),tooltipsDirection:Re(f)},d=[p.icon.subscribe(S=>o(0,n=S)),p.show.subscribe(S=>o(1,s=S)),p.none.subscribe(S=>o(2,a=S)),p.active.subscribe(S=>o(3,l=S)),p.disabled.subscribe(S=>o(4,r=S)),p.type.subscribe(S=>o(5,u=S)),p.ariaLabel.subscribe(S=>o(6,c=S)),p.tooltipsDirection.subscribe(S=>o(7,f=S))];Ua(()=>{d.forEach(S=>S())});function m(S){Jn.call(this,t,S)}function B(S){Jn.call(this,t,S)}function F(S){wt[S?"unshift":"push"](()=>{h=S,o(10,h)})}const H=S=>b(S,h,p);return t.$$set=S=>{"icon"in S&&o(0,n=S.icon),"tag"in S&&o(8,i=S.tag),"show"in S&&o(1,s=S.show),"none"in S&&o(2,a=S.none),"active"in S&&o(3,l=S.active),"disabled"in S&&o(4,r=S.disabled),"type"in S&&o(5,u=S.type),"ariaLabel"in S&&o(6,c=S.ariaLabel),"tooltipsDirection"in S&&o(7,f=S.tooltipsDirection),"onClick"in S&&o(9,b=S.onClick)},t.$$.update=()=>{t.$$.dirty&1&&p.icon.set(n),t.$$.dirty&2&&p.show.set(s),t.$$.dirty&4&&p.none.set(a),t.$$.dirty&8&&p.active.set(l),t.$$.dirty&16&&p.disabled.set(r),t.$$.dirty&32&&p.type.set(u),t.$$.dirty&64&&p.ariaLabel.set(c),t.$$.dirty&128&&p.tooltipsDirection.set(f)},[n,s,a,l,r,u,c,f,i,b,h,p,m,B,F,H]}class Ce extends ce{constructor(e){super(),ue(this,e,uc,lc,se,{icon:0,tag:8,show:1,none:2,active:3,disabled:4,type:5,ariaLabel:6,tooltipsDirection:7,onClick:9})}}function Do(t,e,o){const n=t.slice();return n[4]=e[o],n[6]=o,n}const cc=t=>({}),Po=t=>({}),fc=t=>({}),Mo=t=>({});function pc(t){let e,o;return e=new ac({props:{items:t[0]}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&1&&(s.items=n[0]),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function dc(t){let e;return{c(){e=D("span"),k(e,"class","fn__space")},m(o,n){O(o,e,n)},d(o){o&&E(e)}}}function hc(t){let e;return{c(){e=D("span"),k(e,"class","protyle-breadcrumb__space")},m(o,n){O(o,e,n)},d(o){o&&E(e)}}}function Lo(t,e){let o,n,i,s;function a(f,b){return f[6]===0?hc:dc}let l=a(e),r=l(e);const u=[e[4]];let c={};for(let f=0;f<u.length;f+=1)c=Ot(c,u[f]);return i=new Ce({props:c}),{key:t,first:null,c(){o=re(),r.c(),n=P(),T(i.$$.fragment),this.first=o},m(f,b){O(f,o,b),r.m(f,b),O(f,n,b),$(i,f,b),s=!0},p(f,b){e=f,l!==(l=a(e))&&(r.d(1),r=l(e),r&&(r.c(),r.m(n.parentNode,n)));const h=b&2?an(u,[Fi(e[4])]):{};i.$set(h)},i(f){s||(g(i.$$.fragment,f),s=!0)},o(f){_(i.$$.fragment,f),s=!1},d(f){f&&(E(o),E(n)),r.d(f),v(i,f)}}}function mc(t){let e=[],o=new Map,n,i,s=de(t[1]);const a=l=>l[6];for(let l=0;l<s.length;l+=1){let r=Do(t,s,l),u=a(r);o.set(u,e[l]=Lo(u,r))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=re()},m(l,r){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(l,r);O(l,n,r),i=!0},p(l,r){r&2&&(s=de(l[1]),Q(),e=Ie(e,r,a,1,l,s,o,n.parentNode,Ye,Lo,n,Do),Z())},i(l){if(!i){for(let r=0;r<s.length;r+=1)g(e[r]);i=!0}},o(l){for(let r=0;r<e.length;r+=1)_(e[r]);i=!1},d(l){l&&E(n);for(let r=0;r<e.length;r+=1)e[r].d(l)}}}function gc(t){let e,o,n;const i=t[3].bar,s=ee(i,t,t[2],Mo),a=s||pc(t),l=t[3].icons,r=ee(l,t,t[2],Po),u=r||mc(t);return{c(){e=D("div"),a&&a.c(),o=P(),u&&u.c(),k(e,"class","protyle-breadcrumb")},m(c,f){O(c,e,f),a&&a.m(e,null),A(e,o),u&&u.m(e,null),n=!0},p(c,[f]){s?s.p&&(!n||f&4)&&ne(s,i,c,c[2],n?te(i,c[2],f,fc):oe(c[2]),Mo):a&&a.p&&(!n||f&1)&&a.p(c,n?f:-1),r?r.p&&(!n||f&4)&&ne(r,l,c,c[2],n?te(l,c[2],f,cc):oe(c[2]),Po):u&&u.p&&(!n||f&2)&&u.p(c,n?f:-1)},i(c){n||(g(a,c),g(u,c),n=!0)},o(c){_(a,c),_(u,c),n=!1},d(c){c&&E(e),a&&a.d(c),u&&u.d(c)}}}function bc(t,e,o){let{$$slots:n={},$$scope:i}=e,{items:s=[]}=e,{icons:a=[]}=e;return t.$$set=l=>{"items"in l&&o(0,s=l.items),"icons"in l&&o(1,a=l.icons),"$$scope"in l&&o(2,i=l.$$scope)},[s,a,i,n]}class _c extends ce{constructor(e){super(),ue(this,e,bc,gc,se,{items:0,icons:1})}}const wc=t=>({}),jo=t=>({}),yc=t=>({}),Io=t=>({});function Fo(t){let e,o;return e=new _c({props:{items:t[2],icons:t[3]}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,i){const s={};i&4&&(s.items=n[2]),i&8&&(s.icons=n[3]),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function kc(t){let e,o,n=t[1]&&Fo(t);return{c(){n&&n.c(),e=re()},m(i,s){n&&n.m(i,s),O(i,e,s),o=!0},p(i,s){i[1]?n?(n.p(i,s),s&2&&g(n,1)):(n=Fo(i),n.c(),g(n,1),n.m(e.parentNode,e)):n&&(Q(),_(n,1,1,()=>{n=null}),Z())},i(i){o||(g(n),o=!0)},o(i){_(n),o=!1},d(i){i&&E(e),n&&n.d(i)}}}function Sc(t){let e,o,n,i;const s=t[5].breadcrumb,a=ee(s,t,t[4],Io),l=a||kc(t),r=t[5].content,u=ee(r,t,t[4],jo);return{c(){e=D("div"),l&&l.c(),o=P(),n=D("div"),u&&u.c(),k(n,"class","protyle-preview"),k(e,"class","fn__flex-column"),N(e,"fullscreen",t[0])},m(c,f){O(c,e,f),l&&l.m(e,null),A(e,o),A(e,n),u&&u.m(n,null),i=!0},p(c,[f]){a?a.p&&(!i||f&16)&&ne(a,s,c,c[4],i?te(s,c[4],f,yc):oe(c[4]),Io):l&&l.p&&(!i||f&14)&&l.p(c,i?f:-1),u&&u.p&&(!i||f&16)&&ne(u,r,c,c[4],i?te(r,c[4],f,wc):oe(c[4]),jo),(!i||f&1)&&N(e,"fullscreen",c[0])},i(c){i||(g(l,c),g(u,c),i=!0)},o(c){_(l,c),_(u,c),i=!1},d(c){c&&E(e),l&&l.d(c),u&&u.d(c)}}}function $c(t,e,o){let{$$slots:n={},$$scope:i}=e,{fullscreen:s=!1}=e,{breadcrumb:a=!0}=e,{breadcrumbItems:l=[]}=e,{breadcrumbIcons:r=[]}=e;return t.$$set=u=>{"fullscreen"in u&&o(0,s=u.fullscreen),"breadcrumb"in u&&o(1,a=u.breadcrumb),"breadcrumbItems"in u&&o(2,l=u.breadcrumbItems),"breadcrumbIcons"in u&&o(3,r=u.breadcrumbIcons),"$$scope"in u&&o(4,i=u.$$scope)},[s,a,l,r,i,n]}class vc extends ce{constructor(e){super(),ue(this,e,$c,Sc,se,{fullscreen:0,breadcrumb:1,breadcrumbItems:2,breadcrumbIcons:3})}}function Tc(t){let e,o,n,i,s,a,l,r,u,c,f,b,h,p,d,m,B,F,H;return o=new Ce({props:{icon:"#iconLeft",ariaLabel:t[13].webview.goForwardOnePage,disabled:!t[4],tooltipsDirection:$e.se}}),o.$on("click",t[14]),i=new Ce({props:{icon:"#iconRight",ariaLabel:t[13].webview.goBackOnePage,disabled:!t[5],tooltipsDirection:$e.se}}),i.$on("click",t[15]),a=new Ce({props:{icon:t[6]?"#iconClose":"#iconRefresh",ariaLabel:t[6]?t[13].webview.stopLoadingThisPage:t[13].webview.reloadCurrentPage,tooltipsDirection:$e.se}}),a.$on("click",t[16]),c=new Ce({props:{icon:"#iconLanguage",ariaLabel:t[13].webview.openWithDefaultProgram,tooltipsDirection:$e.sw}}),c.$on("click",t[18]),b=new Ce({props:{icon:"#iconOpenWindow",ariaLabel:t[13].webview.openWithNewWindow,tooltipsDirection:$e.sw}}),b.$on("click",t[19]),p=new Ce({props:{icon:t[3]?"#iconFullscreenExit":"#iconFullscreen",ariaLabel:t[3]?t[13].webview.exitFullscreen:t[13].webview.enterFullscreen,active:t[3],tooltipsDirection:$e.sw}}),p.$on("click",t[20]),m=new Ce({props:{icon:"#iconBug",ariaLabel:t[8]?t[13].webview.closeDevTools:t[13].webview.openDevTools,active:t[8],tooltipsDirection:$e.sw}}),m.$on("click",t[21]),{c(){e=D("div"),T(o.$$.fragment),n=P(),T(i.$$.fragment),s=P(),T(a.$$.fragment),l=P(),r=D("input"),u=P(),T(c.$$.fragment),f=P(),T(b.$$.fragment),h=P(),T(p.$$.fragment),d=P(),T(m.$$.fragment),k(r,"class","b3-text-field fn__flex-1 address-field svelte-11juv7b"),k(r,"type","url"),k(e,"slot","breadcrumb"),k(e,"class","protyle-breadcrumb svelte-11juv7b")},m(S,K){O(S,e,K),$(o,e,null),A(e,n),$(i,e,null),A(e,s),$(a,e,null),A(e,l),A(e,r),pe(r,t[7]),A(e,u),$(c,e,null),A(e,f),$(b,e,null),A(e,h),$(p,e,null),A(e,d),$(m,e,null),B=!0,F||(H=[J(r,"change",t[17]),J(r,"input",t[27])],F=!0)},p(S,K){const j={};K&16&&(j.disabled=!S[4]),o.$set(j);const V={};K&32&&(V.disabled=!S[5]),i.$set(V);const q={};K&64&&(q.icon=S[6]?"#iconClose":"#iconRefresh"),K&64&&(q.ariaLabel=S[6]?S[13].webview.stopLoadingThisPage:S[13].webview.reloadCurrentPage),a.$set(q),K&128&&r.value!==S[7]&&pe(r,S[7]);const R={};K&8&&(R.icon=S[3]?"#iconFullscreenExit":"#iconFullscreen"),K&8&&(R.ariaLabel=S[3]?S[13].webview.exitFullscreen:S[13].webview.enterFullscreen),K&8&&(R.active=S[3]),p.$set(R);const fe={};K&256&&(fe.ariaLabel=S[8]?S[13].webview.closeDevTools:S[13].webview.openDevTools),K&256&&(fe.active=S[8]),m.$set(fe)},i(S){B||(g(o.$$.fragment,S),g(i.$$.fragment,S),g(a.$$.fragment,S),g(c.$$.fragment,S),g(b.$$.fragment,S),g(p.$$.fragment,S),g(m.$$.fragment,S),B=!0)},o(S){_(o.$$.fragment,S),_(i.$$.fragment,S),_(a.$$.fragment,S),_(c.$$.fragment,S),_(b.$$.fragment,S),_(p.$$.fragment,S),_(m.$$.fragment,S),B=!1},d(S){S&&E(e),v(o),v(i),v(a),v(c),v(b),v(p),v(m),F=!1,ae(H)}}}function qo(t){let e,o,n,i,s,a;return{c(){e=D("div"),o=D("span"),n=ge(t[12]),k(e,"class","webview-status tooltip svelte-11juv7b")},m(l,r){O(l,e,r),A(e,o),A(o,n),a=!0},p(l,r){(!a||r&4096)&&Me(n,l[12])},i(l){a||(l&&je(()=>{a&&(s&&s.end(1),i=Ga(e,Bo,{delay:0,duration:125}),i.start())}),a=!0)},o(l){i&&i.invalidate(),l&&(s=Ja(e,Bo,{delay:500,duration:250})),a=!1},d(l){l&&E(e),l&&s&&s.end()}}}function Ec(t){let e,o,n,i,s,a,l=t[11]&&qo(t);return{c(){e=D("div"),o=D("webview"),i=P(),l&&l.c(),Hn(o.src,n=t[0])||k(o,"src",n),k(o,"useragent",t[1]),k(o,"class","webview fn__flex-1 svelte-11juv7b"),k(o,"allowpopups",""),N(o,"pointer-events-disable",t[10]),Be(o,"background",t[2]),k(e,"slot","content"),k(e,"class","content fn__flex fn__flex-1 svelte-11juv7b")},m(r,u){O(r,e,u),A(e,o),t[24](o),A(e,i),l&&l.m(e,null),s||(a=[J(e,"mouseenter",t[25]),J(e,"mouseleave",t[26])],s=!0)},p(r,u){u&1&&!Hn(o.src,n=r[0])&&k(o,"src",n),u&2&&k(o,"useragent",r[1]),u&1024&&N(o,"pointer-events-disable",r[10]),u&4&&Be(o,"background",r[2]),r[11]?l?(l.p(r,u),u&2048&&g(l,1)):(l=qo(r),l.c(),g(l,1),l.m(e,null)):l&&(Q(),_(l,1,1,()=>{l=null}),Z())},d(r){r&&E(e),t[24](null),l&&l.d(),s=!1,ae(a)}}}function Oc(t){let e,o;return e=new vc({props:{fullscreen:t[3],$$slots:{content:[Ec],breadcrumb:[Tc]},$$scope:{ctx:t}}}),{c(){T(e.$$.fragment)},m(n,i){$(e,n,i),o=!0},p(n,[i]){const s={};i&8&&(s.fullscreen=n[3]),i&268443647&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){o||(g(e.$$.fragment,n),o=!0)},o(n){_(e.$$.fragment,n),o=!1},d(n){v(e,n)}}}function Bc(t,e,o){let{src:n}=e,{tab:i}=e,{plugin:s}=e,{useragent:a=s.useragent}=e,{background:l=s.background}=e;const r=s.i18n;let u=!1,c=!1,f=!1,b=!1,h=decodeURI(n),p=!1,d,m=!1,B=!1,F="";function H(){c&&(d==null||d.goBack())}function S(){c&&(d==null||d.goBack())}function K(){b?d==null||d.stop():d==null||d.reload()}function j(L){if(h)try{const be=new URL(h);d.loadURL(be.href)}catch{try{const le=new URL(`http://${h}`);d.loadURL(le.href.replace(/^http:/,""))}catch{s.siyuan.showMessage(`${s.name}:
URL <code class="fn__code">${h}</code> ${r.message.nonStandardURL}
`,void 0,"error")}}}function V(){global.open(i.data.href,"_blank")}function q(L){s.openWindow(i.data.href,{x:L.screenX,y:L.screenY,title:i.data.title})}function R(){o(3,u=!u)}function fe(){d&&(d.isDevToolsOpened()?d.closeDevTools():d.openDevTools())}Wa(()=>{d.addEventListener("load-commit",L=>{L.isMainFrame&&(o(7,h=decodeURI(L.url)),o(22,i.data.href=L.url,i)),o(4,c=d.canGoBack()),o(5,f=d.canGoForward())}),d.addEventListener("page-title-updated",L=>{o(22,i.data.title=L.title,i),i.tab.updateTitle(L.title),o(22,i.tab.headElement.ariaLabel=L.title,i)}),d.addEventListener("page-favicon-updated",L=>{var le;const be=L.favicons;if((le=i.tab.headElement.querySelector(".item__graphic"))==null||le.remove(),be.length>0){const _e=be[0],C=i.tab.headElement.querySelector(".item__icon");if(i.tab.docIcon!==_e||!C){o(22,i.tab.docIcon=_e,i);const M=`<img src="${_e}" />`;C?C.innerHTML=M:i.tab.headElement.insertAdjacentHTML("afterbegin",`<span class="item__icon">${M}</span>`)}}else i.tab.setDocIcon("🌐".codePointAt(0).toString(16),!0)}),d.addEventListener("did-start-loading",L=>{o(6,b=!0)}),d.addEventListener("did-stop-loading",L=>{o(6,b=!1)}),d.addEventListener("devtools-open-url",L=>{s.openWebviewTab(L.url)}),d.addEventListener("devtools-opened",L=>o(8,p=!0)),d.addEventListener("devtools-closed",L=>o(8,p=!1)),d.addEventListener("update-target-url",L=>{L.url?(o(12,F=L.url),B||o(11,B=!0)):o(11,B=!1)}),d.addEventListener("context-menu",L=>{s.logger.debug(L),L.params.linkURL&&s.openWebviewTab(L.params.linkURL,L.params.titleText||L.params.linkText||L.params.altText)})});function ke(L){wt[L?"unshift":"push"](()=>{d=L,o(9,d)})}const Fe=L=>o(10,m=L.button!==0),Se=()=>o(10,m=!0);function I(){h=this.value,o(7,h)}return t.$$set=L=>{"src"in L&&o(0,n=L.src),"tab"in L&&o(22,i=L.tab),"plugin"in L&&o(23,s=L.plugin),"useragent"in L&&o(1,a=L.useragent),"background"in L&&o(2,l=L.background)},[n,a,l,u,c,f,b,h,p,d,m,B,F,r,H,S,K,j,V,q,R,fe,i,s,ke,Fe,Se,I]}class Nc extends ce{constructor(e){super(),ue(this,e,Bc,Oc,se,{src:0,tab:22,plugin:23,useragent:1,background:2})}}const Wo={general:{useragent:"",background:"transparent"},tab:{enable:!0,open:{mouse:{type:"click",button:ve.Left,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!0}}},protocols:{https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"},"#":{enable:!1,prefix:"#"}}}},window:{enable:!0,open:{mouse:{type:"mousedown",button:ve.Middle,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!1}}},protocols:{siyuan:{enable:!0,prefix:"siyuan://"},https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}},params:{width:800,height:600,center:!1,frame:!0,alwaysOnTop:!0,autoHideMenuBar:!0,enableMenuBar:!0},siyuan:{enable:!0,focus:!1,editorType:Te.mobile}}},tt=class tt extends he.Plugin{constructor(o){super(o);Y(this,"siyuan",he);Y(this,"logger");Y(this,"TOP_BAR_MENU_ID");Y(this,"SETTINGS_DIALOG_ID");Y(this,"webview_tab");Y(this,"tab_bar_item");Y(this,"config");Y(this,"blockRefMenuEventListener",o=>{const n=o.detail.element,i=n.dataset.id,s=[];s.push({icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:()=>this.openSiyuanWindowByID(n,i,!1)}),s.push({icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:()=>this.openSiyuanWindowByID(n,i,!0)}),o.detail.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:s})});Y(this,"linkMenuEventListener",o=>{const n=[],i=o.detail.element,s=this.parseHyperlinkMeta(i,this.config.tab.open.targets);switch(!0){case s.href.startsWith("siyuan:"):{const a=new URL(s.href),l=On(a);n.push({icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>{he.openTab({app:this.app,doc:{id:l.id,action:["cb-get-focus","cb-get-hl"],zoomIn:l.focus},keepCursor:!1,removeCurrentTab:!1})}}),n.push({icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>{he.openTab({app:this.app,doc:{id:l.id,action:["cb-get-focus","cb-get-hl"],zoomIn:l.focus},keepCursor:!0,removeCurrentTab:!1})}}),n.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>{he.openTab({app:this.app,doc:{id:l.id,action:["cb-get-focus","cb-get-hl"],zoomIn:l.focus},position:"right",keepCursor:!1,removeCurrentTab:!1})}}),n.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>{he.openTab({app:this.app,doc:{id:l.id,action:["cb-get-focus","cb-get-hl"],zoomIn:l.focus},position:"bottom",keepCursor:!1,removeCurrentTab:!1})}}),n.push({icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>this.openSiyuanWindowByID(i,l.id,l.focus)});break}case ds(s.href):{const a=s.href.startsWith("/")?`${globalThis.location.origin}${s.href}`:`${globalThis.document.baseURI}${s.href}`;lt&&Xe&&(n.push({icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>this.openWebviewTab(a,s.title,void 0,{keepCursor:!1})}),n.push({icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>this.openWebviewTab(a,s.title,void 0,{keepCursor:!0})}),n.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>this.openWebviewTab(a,s.title,void 0,{position:"right"})}),n.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>this.openWebviewTab(a,s.title,void 0,{position:"bottom"})})),n.push({icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>this.openWebpageWindow(a,s.title,{screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})});break}default:{lt&&Xe&&(n.push({icon:"iconFile",label:this.i18n.menu.openTabBackground.label,click:()=>this.openWebviewTab(s.href,s.title,void 0,{keepCursor:!0})}),n.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>this.openWebviewTab(s.href,s.title,void 0,{position:"right"})}),n.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>this.openWebviewTab(s.href,s.title,void 0,{position:"bottom"})})),n.push({icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>this.openWebpageWindow(s.href,s.title,{screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})});break}}o.detail.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:n})});Y(this,"blockMenuEventListener",o=>{const n=o.detail,i=Oa(o.detail);if(i){const s=[];s.push({icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:a=>this.openSiyuanWindowByID(a,i.id,!1)}),!i.isDocumentBlock&&!i.isMultiBlock&&s.push({icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:a=>this.openSiyuanWindowByID(a,i.id,!0)}),n.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:s})}});Y(this,"openTabEventListener",o=>{try{if(!this.config.tab.enable||!Tn(o,this.config.tab.open.mouse))return;const n=this.parseHyperlinkMeta(o.target,this.config.tab.open.targets);if(n.valid&&(this.logger.info(n),this.isUrlSchemeAvailable(n.href,this.config.tab.open.protocols)))try{o.preventDefault(),o.stopPropagation(),this.openWebviewTab(n.href,n.title)}catch(i){this.logger.warn(i)}}catch(n){this.logger.warn(n)}});Y(this,"openWindowEventListener",o=>{try{if(!this.config.window.enable||!Tn(o,this.config.window.open.mouse))return;const n=this.parseHyperlinkMeta(o.target,this.config.window.open.targets);if(n.valid){if(this.logger.info(n.href),n.enabled&&this.isUrlSchemeAvailable(n.href,this.config.window.open.protocols))if(o.preventDefault(),o.stopPropagation(),n.href.startsWith("siyuan://")){if(this.config.window.siyuan.enable){const i=Qe(At(this.config.window.siyuan.editorType),On(new URL(n.href)));this.openSiyuanWindow(i,o)}}else this.openWindow(n.href,{x:o.screenX,y:o.screenY,title:n.title||this.name})}else if(this.config.window.siyuan.enable){const i=ps(o);if(i){o.preventDefault(),o.stopPropagation();const s=Qe(At(this.config.window.siyuan.editorType),{id:i,focus:this.config.window.siyuan.focus});this.openSiyuanWindow(s,o)}}}catch(n){this.logger.warn(n)}});this.logger=new Yi(this.name),this.TOP_BAR_MENU_ID=`${this.name}-top-bar-menu`,this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`;const n=this;this.webview_tab=this.addTab({type:"-webview-tag",init(){const i=this;new Nc({target:i.element,props:{src:i.data.href,tab:i,plugin:n}})}})}onload(){this.loadData(tt.GLOBAL_CONFIG_NAME).then(o=>{this.config=mt(Wo,o||{})}).catch(o=>this.logger.error(o)).finally(()=>{lt&&Xe&&globalThis.addEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.addEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.on("click-editortitleicon",this.blockMenuEventListener),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("open-menu-blockref",this.blockRefMenuEventListener),this.eventBus.on("open-menu-link",this.linkMenuEventListener),this.addCommand({langKey:"openDesktopWindow",langText:this.i18n.menu.openDesktopWindow.label,hotkey:"⇧⌘N",customHotkey:"",callback:()=>{this.openSiyuanDesktopWindow()}}),this.addCommand({langKey:"openMobildWindow",langText:this.i18n.menu.openMobildWindow.label,hotkey:"",customHotkey:"",callback:()=>{this.openSiyuanMobileWindow()}})})}onLayoutReady(){Xe&&(new he.Menu(this.TOP_BAR_MENU_ID),this.tab_bar_item=this.addTopBar({icon:"iconOpenWindow",title:this.i18n.displayName,position:"right",callback:o=>{const n=new he.Menu(this.TOP_BAR_MENU_ID);n.addItem({icon:"iconSiYuan",label:this.i18n.menu.openDesktopWindow.label,click:s=>{this.openSiyuanDesktopWindow({screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})}}),n.addItem({icon:"iconSiYuan",label:this.i18n.menu.openMobildWindow.label,click:s=>{this.openSiyuanDesktopWindow({screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})}});const i={x:0,y:0,isLeft:!0};if(o.target.classList.contains("fn__none")){const s=document.getElementById("barPlugins");if(s){const a=s.getBoundingClientRect();i.x=a.x+a.width/2,i.y=a.y+a.height/2}}else{const s=this.tab_bar_item.getBoundingClientRect();i.x=s.x+s.width/2,i.y=s.y+s.height/2}n.open(i)}}))}onunload(){lt&&Xe&&globalThis.removeEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.removeEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editortitleicon",this.blockMenuEventListener),this.eventBus.off("open-menu-blockref",this.blockRefMenuEventListener),this.eventBus.off("open-menu-link",this.linkMenuEventListener)}openSetting(){const o=this,n=new he.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${o.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:vn?"92vw":"720px",height:vn?void 0:"640px"});new Xu({target:n.element.querySelector(`#${o.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(mt(Wo))}async updateConfig(o){return o&&o!==this.config&&(this.config=o),this.saveData(tt.GLOBAL_CONFIG_NAME,this.config)}get useragent(){return this.config.general.useragent||global.navigator.userAgent}get background(){return this.config.general.background}openWebviewTab(o,n,i="iconLanguage",s={}){he.openTab({app:this.app,custom:{icon:i,title:n||this.name,fn:this.webview_tab,data:{href:o,title:n||this.name}},keepCursor:!1,removeCurrentTab:!1,...s})}openWindow(o,n={x:0,y:0,title:null},i={defaultFontSize:globalThis.siyuan.config.editor.fontSize,defaultFontFamily:{standard:globalThis.siyuan.config.editor.fontFamily}}){try{const s=new URL(o);return du(s,{backgroundColor:this.background,...this.config.window.params},n,i,this)}catch(s){this.logger.warn(s)}}openWebpageWindow(o,n,i){const s={x:(i==null?void 0:i.screenX)??0,y:(i==null?void 0:i.screenY)??0,title:n,alwaysOnTop:!1,autoHideMenuBar:!0,webPreferences:{nodeIntegration:!1,webviewTag:!1,contextIsolation:!1},enableMenuBar:!0,enableElectron:!1};return this.openWindow(o,s)}openSiyuanDesktopWindow(o,n){const i={x:(o==null?void 0:o.screenX)??0,y:(o==null?void 0:o.screenY)??0,title:"desktop",alwaysOnTop:!1,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(n||Qe(qt.desktop).href,i)}openSiyuanMobileWindow(o,n){const i={x:(o==null?void 0:o.screenX)??0,y:(o==null?void 0:o.screenY)??0,title:"mobile",alwaysOnTop:!0,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(n||Qe(qt.mobile).href,i)}openSiyuanWindow(o,n){switch(this.config.window.siyuan.editorType){case Te.desktop:this.openSiyuanDesktopWindow(n,o.href);break;case Te.mobile:this.openSiyuanMobileWindow(n,o.href);break}}openSiyuanWindowByID(o,n,i){const s=Qe(At(this.config.window.siyuan.editorType),{id:n,focus:i});this.openSiyuanWindowByURL(o,s)}openSiyuanWindowByURL(o,n){this.openSiyuanWindow(n,{screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})}isUrlSchemeAvailable(o,n){for(const i in n){const s=n[i];if(s.enable&&o.startsWith(s.prefix))return!0}return!1}parseHyperlinkMeta(o,n){const i={valid:!1,enabled:!1,href:void 0,title:void 0};switch(o.localName){case"a":i.valid=!0,i.enabled=n.hyperlink.other.enable,i.href=o.getAttribute("href")||"",i.title=o.title||o.innerText;break;case"span":/\ba\b/.test(o.dataset.type)&&(i.valid=!0,i.enabled=n.hyperlink.editor.enable,i.href=o.dataset.href||"",i.title=o.dataset.title||o.innerText);break}return i}};Y(tt,"GLOBAL_CONFIG_NAME","global-config");let Qt=tt;module.exports=Qt;
