"use strict";var un=Object.defineProperty;var fn=(n,e,i)=>e in n?un(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i;var de=(n,e,i)=>(fn(n,typeof e!="symbol"?e+"":e,i),i);const ve=require("siyuan");globalThis.navigator.userAgent.includes("Electron");function cn(){return!!globalThis.require}function _n(){return!!globalThis.process}function ze(){return _n()&&cn()}function _t(){switch(ve.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function gt(){switch(ve.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}class gn{constructor(e,i=!0){this.label=e,this.collapsed=i}stdout(e,...i){const t=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${e.name.toUpperCase()}\x1B[0m>`;this.collapsed?globalThis.console.groupCollapsed(t):globalThis.console.group(t),e(...i),globalThis.console.trace(),globalThis.console.groupEnd()}dir(...e){this.stdout(globalThis.console.dir,...e)}table(...e){this.stdout(globalThis.console.table,...e)}debug(...e){this.stdout(globalThis.console.debug,...e)}info(...e){this.stdout(globalThis.console.info,...e)}log(...e){this.stdout(globalThis.console.log,...e)}warn(...e){this.stdout(globalThis.console.warn,...e)}error(...e){this.stdout(globalThis.console.error,...e)}}function pt(n,e){return n.button===e.button&&n.type===e.type&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey&&n.shiftKey===e.shiftKey}function pn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var mn=function(e){return dn(e)&&!hn(e)};function dn(n){return!!n&&typeof n=="object"}function hn(n){var e=Object.prototype.toString.call(n);return e==="[object RegExp]"||e==="[object Date]"||$n(n)}var bn=typeof Symbol=="function"&&Symbol.for,wn=bn?Symbol.for("react.element"):60103;function $n(n){return n.$$typeof===wn}function kn(n){return Array.isArray(n)?[]:{}}function Oe(n,e){return e.clone!==!1&&e.isMergeableObject(n)?Ee(kn(n),n,e):n}function yn(n,e,i){return n.concat(e).map(function(t){return Oe(t,i)})}function vn(n,e){if(!e.customMerge)return Ee;var i=e.customMerge(n);return typeof i=="function"?i:Ee}function Tn(n){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(n).filter(function(e){return Object.propertyIsEnumerable.call(n,e)}):[]}function mt(n){return Object.keys(n).concat(Tn(n))}function en(n,e){try{return e in n}catch{return!1}}function Mn(n,e){return en(n,e)&&!(Object.hasOwnProperty.call(n,e)&&Object.propertyIsEnumerable.call(n,e))}function En(n,e,i){var t={};return i.isMergeableObject(n)&&mt(n).forEach(function(s){t[s]=Oe(n[s],i)}),mt(e).forEach(function(s){Mn(n,s)||(en(n,s)&&i.isMergeableObject(e[s])?t[s]=vn(s,i)(n[s],e[s],i):t[s]=Oe(e[s],i))}),t}function Ee(n,e,i){i=i||{},i.arrayMerge=i.arrayMerge||yn,i.isMergeableObject=i.isMergeableObject||mn,i.cloneUnlessOtherwiseSpecified=Oe;var t=Array.isArray(e),s=Array.isArray(n),l=t===s;return l?t?i.arrayMerge(n,e,i):En(n,e,i):Oe(e,i)}Ee.all=function(e,i){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(t,s){return Ee(t,s,i)},{})};var Kn=Ee,Ln=Kn;const Sn=pn(Ln);function De(...n){return Sn.all(n)}const Te={id:/^\d{14}\-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}\-[0-9a-z]{7})/};function On(n){const e=n.composedPath();for(let i=0;i<e.length;++i){const t=e[i].dataset;switch(!0){case(t.nodeId&&Te.id.test(t.nodeId)):return t.nodeId;case(t.id&&Te.id.test(t.id)):return t.id;case(t.oid&&Te.id.test(t.oid)):return t.oid;case(t.rootId&&Te.id.test(t.rootId)):return t.rootId}}}var ge=(n=>(n[n.window=0]="window",n[n.app=1]="app",n[n.desktop=2]="desktop",n[n.mobile=3]="mobile",n))(ge||{}),Ge=(n=>(n.window="/stage/build/app/window.html",n.app="/stage/build/app",n.desktop="/stage/build/desktop",n.mobile="/stage/build/mobile",n))(Ge||{});function dt(n){switch(n){case ge.window:return"/stage/build/app/window.html";case ge.app:return"/stage/build/app";case ge.desktop:return"/stage/build/desktop";case ge.mobile:return"/stage/build/mobile"}}function Ve(n,e,i=globalThis.origin){const t=new URL(i);return t.pathname=n,e!=null&&e.id&&t.searchParams.set("id",e.id),e!=null&&e.focus&&t.searchParams.set("focus","1"),e!=null&&e.url&&t.searchParams.set("url",e.url),t}function An(n){return Te.url.test(n.href)?{id:Te.url.exec(n.href)[1],focus:n.searchParams.get("focus")==="1"}:null}function G(){}function Wn(n,e){for(const i in e)n[i]=e[i];return n}function tn(n){return n()}function ht(){return Object.create(null)}function ee(n){n.forEach(tn)}function nn(n){return typeof n=="function"}function oe(n,e){return n!=n?e==e:n!==e||n&&typeof n=="object"||typeof n=="function"}let Ne;function bt(n,e){return Ne||(Ne=document.createElement("a")),Ne.href=e,n===Ne.href}function Bn(n){return Object.keys(n).length===0}function ne(n,e,i,t){if(n){const s=sn(n,e,i,t);return n[0](s)}}function sn(n,e,i,t){return n[1]&&t?Wn(i.ctx.slice(),n[1](t(e))):i.ctx}function ie(n,e,i,t){if(n[2]&&t){const s=n[2](t(i));if(e.dirty===void 0)return s;if(typeof s=="object"){const l=[],a=Math.max(e.dirty.length,s.length);for(let r=0;r<a;r+=1)l[r]=e.dirty[r]|s[r];return l}return e.dirty|s}return e.dirty}function se(n,e,i,t,s,l){if(s){const a=sn(e,i,t,l);n.p(a,s)}}function le(n){if(n.ctx.length>32){const e=[],i=n.ctx.length/32;for(let t=0;t<i;t++)e[t]=-1;return e}return-1}function Vn(n){const e={};for(const i in n)e[i]=!0;return e}function S(n,e){n.appendChild(e)}function E(n,e,i){n.insertBefore(e,i||null)}function M(n){n.parentNode&&n.parentNode.removeChild(n)}function A(n){return document.createElement(n)}function qe(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ce(n){return document.createTextNode(n)}function W(){return ce(" ")}function pe(){return ce("")}function H(n,e,i,t){return n.addEventListener(e,i,t),()=>n.removeEventListener(e,i,t)}function $(n,e,i){i==null?n.removeAttribute(e):n.getAttribute(e)!==i&&n.setAttribute(e,i)}function wt(n,e,i){n.setAttributeNS("http://www.w3.org/1999/xlink",e,i)}function Ye(n){return n===""?null:+n}function Nn(n){return Array.from(n.childNodes)}function Ke(n,e){e=""+e,n.data!==e&&(n.data=e)}function fe(n,e){n.value=e??""}function Le(n,e,i,t){i==null?n.style.removeProperty(e):n.style.setProperty(e,i,t?"important":"")}function $t(n,e,i){for(let t=0;t<n.options.length;t+=1){const s=n.options[t];if(s.__value===e){s.selected=!0;return}}(!i||e!==void 0)&&(n.selectedIndex=-1)}function Rn(n){const e=n.querySelector(":checked");return e&&e.__value}function L(n,e,i){n.classList[i?"add":"remove"](e)}function Cn(n,e,{bubbles:i=!1,cancelable:t=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(n,i,t,e),s}class We{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,i,t=null){this.e||(this.is_svg?this.e=qe(i.nodeName):this.e=A(i.nodeType===11?"TEMPLATE":i.nodeName),this.t=i.tagName!=="TEMPLATE"?i:i.content,this.c(e)),this.i(t)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let i=0;i<this.n.length;i+=1)E(this.t,this.n[i],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(M)}}let Ae;function Se(n){Ae=n}function ln(){if(!Ae)throw new Error("Function called outside component initialization");return Ae}function Dn(n){ln().$$.on_mount.push(n)}function Ie(){const n=ln();return(e,i,{cancelable:t=!1}={})=>{const s=n.$$.callbacks[e];if(s){const l=Cn(e,i,{cancelable:t});return s.slice().forEach(a=>{a.call(n,l)}),!l.defaultPrevented}return!0}}function Fn(n,e){const i=n.$$.callbacks[e.type];i&&i.slice().forEach(t=>t.call(this,e))}const ye=[],Xe=[];let Me=[];const kt=[],jn=Promise.resolve();let Qe=!1;function In(){Qe||(Qe=!0,jn.then(on))}function Fe(n){Me.push(n)}const He=new Set;let ke=0;function on(){if(ke!==0)return;const n=Ae;do{try{for(;ke<ye.length;){const e=ye[ke];ke++,Se(e),Pn(e.$$)}}catch(e){throw ye.length=0,ke=0,e}for(Se(null),ye.length=0,ke=0;Xe.length;)Xe.pop()();for(let e=0;e<Me.length;e+=1){const i=Me[e];He.has(i)||(He.add(i),i())}Me.length=0}while(ye.length);for(;kt.length;)kt.pop()();Qe=!1,He.clear(),Se(n)}function Pn(n){if(n.fragment!==null){n.update(),ee(n.before_update);const e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Fe)}}function Hn(n){const e=[],i=[];Me.forEach(t=>n.indexOf(t)===-1?e.push(t):i.push(t)),i.forEach(t=>t()),Me=e}const Re=new Set;let $e;function Z(){$e={r:0,c:[],p:$e}}function J(){$e.r||ee($e.c),$e=$e.p}function p(n,e){n&&n.i&&(Re.delete(n),n.i(e))}function m(n,e,i,t){if(n&&n.o){if(Re.has(n))return;Re.add(n),$e.c.push(()=>{Re.delete(n),t&&(i&&n.d(1),t())}),n.o(e)}else t&&t()}function Un(n,e){n.d(1),e.delete(n.key)}function Pe(n,e){m(n,1,1,()=>{e.delete(n.key)})}function Be(n,e,i,t,s,l,a,r,o,f,d,g){let b=n.length,_=l.length,u=b;const c={};for(;u--;)c[n[u].key]=u;const w=[],O=new Map,U=new Map,j=[];for(u=_;u--;){const C=g(s,l,u),z=i(C);let h=a.get(z);h?t&&j.push(()=>h.p(C,e)):(h=f(z,C),h.c()),O.set(z,w[u]=h),z in c&&U.set(z,Math.abs(u-c[z]))}const R=new Set,N=new Set;function D(C){p(C,1),C.m(r,d),a.set(C.key,C),d=C.first,_--}for(;b&&_;){const C=w[_-1],z=n[b-1],h=C.key,I=z.key;C===z?(d=C.first,b--,_--):O.has(I)?!a.has(h)||R.has(h)?D(C):N.has(I)?b--:U.get(h)>U.get(I)?(N.add(h),D(C)):(R.add(I),b--):(o(z,a),b--)}for(;b--;){const C=n[b];O.has(C.key)||o(C,a)}for(;_;)D(w[_-1]);return ee(j),w}function v(n){n&&n.c()}function k(n,e,i,t){const{fragment:s,after_update:l}=n.$$;s&&s.m(e,i),t||Fe(()=>{const a=n.$$.on_mount.map(tn).filter(nn);n.$$.on_destroy?n.$$.on_destroy.push(...a):ee(a),n.$$.on_mount=[]}),l.forEach(Fe)}function y(n,e){const i=n.$$;i.fragment!==null&&(Hn(i.after_update),ee(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function zn(n,e){n.$$.dirty[0]===-1&&(ye.push(n),In(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function re(n,e,i,t,s,l,a,r=[-1]){const o=Ae;Se(n);const f=n.$$={fragment:null,ctx:[],props:l,update:G,not_equal:s,bound:ht(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:ht(),dirty:r,skip_bound:!1,root:e.target||o.$$.root};a&&a(f.root);let d=!1;if(f.ctx=i?i(n,e.props||{},(g,b,..._)=>{const u=_.length?_[0]:b;return f.ctx&&s(f.ctx[g],f.ctx[g]=u)&&(!f.skip_bound&&f.bound[g]&&f.bound[g](u),d&&zn(n,g)),b}):[],f.update(),d=!0,ee(f.before_update),f.fragment=t?t(f.ctx):!1,e.target){if(e.hydrate){const g=Nn(e.target);f.fragment&&f.fragment.l(g),g.forEach(M)}else f.fragment&&f.fragment.c();e.intro&&p(n.$$.fragment),k(n,e.target,e.anchor,e.customElement),on()}Se(o)}class ae{$destroy(){y(this,1),this.$destroy=G}$on(e,i){if(!nn(i))return G;const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(i),()=>{const s=t.indexOf(i);s!==-1&&t.splice(s,1)}}$set(e){this.$$set&&!Bn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Gn(n){let e,i;return{c(){e=qe("svg"),i=qe("use"),wt(i,"xlink:href",n[0]),$(e,"style",n[2]),$(e,"class",n[1])},m(t,s){E(t,e,s),S(e,i)},p(t,[s]){s&1&&wt(i,"xlink:href",t[0]),s&4&&$(e,"style",t[2]),s&2&&$(e,"class",t[1])},i:G,o:G,d(t){t&&M(e)}}}function qn(n,e,i){let{icon:t}=e,{className:s=void 0}=e,{style:l=void 0}=e;return n.$$set=a=>{"icon"in a&&i(0,t=a.icon),"className"in a&&i(1,s=a.className),"style"in a&&i(2,l=a.style)},[t,s,l]}class me extends ae{constructor(e){super(),re(this,e,qn,Gn,oe,{icon:0,className:1,style:2})}}const Yn=n=>({focus:n&1}),yt=n=>({focus:n[0]});function vt(n,e,i){const t=n.slice();return t[12]=e[i],t}function Tt(n){let e,i,t,s,l,a,r;return i=new me({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){e=A("div"),v(i.$$.fragment),t=W(),s=A("input"),$(s,"placeholder",n[4]),$(s,"class","b3-text-field fn__block b3-form__icon-input"),$(e,"class","b3-form__icon")},m(o,f){E(o,e,f),k(i,e,null),S(e,t),S(e,s),fe(s,n[1]),l=!0,a||(r=[H(s,"input",n[9]),H(s,"change",n[5])],a=!0)},p(o,f){(!l||f&16)&&$(s,"placeholder",o[4]),f&2&&s.value!==o[1]&&fe(s,o[1])},i(o){l||(p(i.$$.fragment,o),l=!0)},o(o){m(i.$$.fragment,o),l=!1},d(o){o&&M(e),y(i),a=!1,ee(r)}}}function Mt(n,e){let i,t,s,l,a=e[12].text+"",r,o,f,d,g;t=new me({props:{icon:e[12].icon,className:"b3-list-item__graphic"}});function b(){return e[10](e[12])}return{key:n,first:null,c(){i=A("li"),v(t.$$.fragment),s=W(),l=A("span"),r=W(),$(l,"class","b3-list-item__text svelte-15drd7h"),$(i,"data-name",o=e[12].name),$(i,"class","b3-list-item"),L(i,"b3-list-item--focus",e[12].key===e[0]),this.first=i},m(_,u){E(_,i,u),k(t,i,null),S(i,s),S(i,l),l.innerHTML=a,S(i,r),f=!0,d||(g=H(i,"click",b),d=!0)},p(_,u){e=_;const c={};u&4&&(c.icon=e[12].icon),t.$set(c),(!f||u&4)&&a!==(a=e[12].text+"")&&(l.innerHTML=a),(!f||u&4&&o!==(o=e[12].name))&&$(i,"data-name",o),(!f||u&5)&&L(i,"b3-list-item--focus",e[12].key===e[0])},i(_){f||(p(t.$$.fragment,_),f=!0)},o(_){m(t.$$.fragment,_),f=!1},d(_){_&&M(i),y(t),d=!1,g()}}}function Xn(n){let e;return{c(){e=ce("Container")},m(i,t){E(i,e,t)},d(i){i&&M(e)}}}function Qn(n){let e,i,t,s=[],l=new Map,a,r,o=n[3]&&Tt(n),f=n[2];const d=u=>u[12].key;for(let u=0;u<f.length;u+=1){let c=vt(n,f,u),w=d(c);l.set(w,s[u]=Mt(w,c))}const g=n[8].default,b=ne(g,n,n[7],yt),_=b||Xn();return{c(){e=A("div"),i=A("ul"),o&&o.c(),t=W();for(let u=0;u<s.length;u+=1)s[u].c();a=W(),_&&_.c(),$(i,"class","b3-tab-bar b3-list b3-list--background"),$(e,"class","fn__flex-1 fn__flex config__panel")},m(u,c){E(u,e,c),S(e,i),o&&o.m(i,null),S(i,t);for(let w=0;w<s.length;w+=1)s[w]&&s[w].m(i,null);S(e,a),_&&_.m(e,null),r=!0},p(u,[c]){u[3]?o?(o.p(u,c),c&8&&p(o,1)):(o=Tt(u),o.c(),p(o,1),o.m(i,t)):o&&(Z(),m(o,1,1,()=>{o=null}),J()),c&69&&(f=u[2],Z(),s=Be(s,c,d,1,u,f,l,i,Pe,Mt,null,vt),J()),b&&b.p&&(!r||c&129)&&se(b,g,u,u[7],r?ie(g,u[7],c,Yn):le(u[7]),yt)},i(u){if(!r){p(o);for(let c=0;c<f.length;c+=1)p(s[c]);p(_,u),r=!0}},o(u){m(o);for(let c=0;c<s.length;c+=1)m(s[c]);m(_,u),r=!1},d(u){u&&M(e),o&&o.d();for(let c=0;c<s.length;c+=1)s[c].d();_&&_.d(u)}}}function Zn(n,e,i){let{$$slots:t={},$$scope:s}=e,{panels:l}=e,{focus:a}=e,{searchEnable:r=!1}=e,{searchPlaceholder:o=""}=e,{searchValue:f=""}=e;const d=Ie();function g(){d("search-changed",{value:f})}function b(c){d("changed",{key:c}),i(0,a=c)}function _(){f=this.value,i(1,f)}const u=c=>b(c.key);return n.$$set=c=>{"panels"in c&&i(2,l=c.panels),"focus"in c&&i(0,a=c.focus),"searchEnable"in c&&i(3,r=c.searchEnable),"searchPlaceholder"in c&&i(4,o=c.searchPlaceholder),"searchValue"in c&&i(1,f=c.searchValue),"$$scope"in c&&i(7,s=c.$$scope)},[a,f,l,r,o,g,b,s,t,_,u]}class Jn extends ae{constructor(e){super(),re(this,e,Zn,Qn,oe,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function xn(n){let e,i;const t=n[3].default,s=ne(t,n,n[2],null);return{c(){e=A("div"),s&&s.c(),$(e,"data-name",n[1]),$(e,"class","config__tab-container"),L(e,"fn__none",!n[0])},m(l,a){E(l,e,a),s&&s.m(e,null),i=!0},p(l,[a]){s&&s.p&&(!i||a&4)&&se(s,t,l,l[2],i?ie(t,l[2],a,null):le(l[2]),null),(!i||a&2)&&$(e,"data-name",l[1]),(!i||a&1)&&L(e,"fn__none",!l[0])},i(l){i||(p(s,l),i=!0)},o(l){m(s,l),i=!1},d(l){l&&M(e),s&&s.d(l)}}}function ei(n,e,i){let{$$slots:t={},$$scope:s}=e,{display:l=!0}=e,{name:a=""}=e;return n.$$set=r=>{"display"in r&&i(0,l=r.display),"name"in r&&i(1,a=r.name),"$$scope"in r&&i(2,s=r.$$scope)},[l,a,s,t]}class Ue extends ae{constructor(e){super(),re(this,e,ei,xn,oe,{display:0,name:1})}}const ti=n=>({}),Et=n=>({}),ni=n=>({}),Kt=n=>({});function Lt(n){let e,i;const t=n[6].icon,s=ne(t,n,n[5],Kt);return{c(){e=A("span"),s&&s.c(),$(e,"class","item__icon")},m(l,a){E(l,e,a),s&&s.m(e,null),i=!0},p(l,a){s&&s.p&&(!i||a&32)&&se(s,t,l,l[5],i?ie(t,l[5],a,ni):le(l[5]),Kt)},i(l){i||(p(s,l),i=!0)},o(l){m(s,l),i=!1},d(l){l&&M(e),s&&s.d(l)}}}function ii(n){let e;return{c(){e=ce("text")},m(i,t){E(i,e,t)},d(i){i&&M(e)}}}function si(n){let e,i,t,s,l,a,r,o,f,d,g=n[3].icon&&Lt(n);const b=n[6].text,_=ne(b,n,n[5],Et),u=_||ii();return{c(){e=A("div"),i=A("span"),t=W(),g&&g.c(),s=W(),l=A("span"),u&&u.c(),a=W(),r=A("span"),$(i,"class","fn__flex-1"),$(l,"class","item__text"),$(r,"class","fn__flex-1"),$(e,"data-type",n[0]),$(e,"class","item item--full"),L(e,"item--focus",n[1])},m(c,w){E(c,e,w),S(e,i),S(e,t),g&&g.m(e,null),S(e,s),S(e,l),u&&u.m(l,null),S(e,a),S(e,r),o=!0,f||(d=H(e,"click",n[2]),f=!0)},p(c,[w]){c[3].icon?g?(g.p(c,w),w&8&&p(g,1)):(g=Lt(c),g.c(),p(g,1),g.m(e,s)):g&&(Z(),m(g,1,1,()=>{g=null}),J()),_&&_.p&&(!o||w&32)&&se(_,b,c,c[5],o?ie(b,c[5],w,ti):le(c[5]),Et),(!o||w&1)&&$(e,"data-type",c[0]),(!o||w&2)&&L(e,"item--focus",c[1])},i(c){o||(p(g),p(u,c),o=!0)},o(c){m(g),m(u,c),o=!1},d(c){c&&M(e),g&&g.d(),u&&u.d(c),f=!1,d()}}}function li(n,e,i){let{$$slots:t={},$$scope:s}=e;const l=Vn(t);let{key:a}=e,{name:r=""}=e,{focus:o=!1}=e;const f=Ie();function d(){o||f("changed",{key:a})}return n.$$set=g=>{"key"in g&&i(4,a=g.key),"name"in g&&i(0,r=g.name),"focus"in g&&i(1,o=g.focus),"$$scope"in g&&i(5,s=g.$$scope)},[r,o,d,l,a,s,t]}class oi extends ae{constructor(e){super(),re(this,e,li,si,oe,{key:4,name:0,focus:1})}}const ri=n=>({focus:n&1}),St=n=>({focus:n[0]});function Ot(n,e,i){const t=n.slice();return t[5]=e[i],t}function ai(n){let e,i=n[5].icon+"",t;return{c(){e=new We(!1),t=pe(),e.a=t},m(s,l){e.m(i,s,l),E(s,t,l)},p(s,l){l&2&&i!==(i=s[5].icon+"")&&e.p(i)},i:G,o:G,d(s){s&&M(t),s&&e.d()}}}function ui(n){let e,i;return e=new me({props:{icon:n[5].icon}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&2&&(l.icon=t[5].icon),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function fi(n){let e,i,t,s,l,a;const r=[ui,ai],o=[];function f(d,g){return g&2&&(i=null),i==null&&(i=!!d[5].icon.startsWith("#")),i?0:1}return t=f(n,-1),s=o[t]=r[t](n),{c(){e=A("span"),s.c(),l=W(),$(e,"slot","icon")},m(d,g){E(d,e,g),o[t].m(e,null),S(e,l),a=!0},p(d,g){let b=t;t=f(d,g),t===b?o[t].p(d,g):(Z(),m(o[b],1,1,()=>{o[b]=null}),J(),s=o[t],s?s.p(d,g):(s=o[t]=r[t](d),s.c()),p(s,1),s.m(e,l))},i(d){a||(p(s),a=!0)},o(d){m(s),a=!1},d(d){d&&M(e),o[t].d()}}}function ci(n){let e,i,t=n[5].text+"",s;return{c(){e=A("span"),i=new We(!1),s=W(),i.a=s,$(e,"slot","text")},m(l,a){E(l,e,a),i.m(t,e),S(e,s)},p(l,a){a&2&&t!==(t=l[5].text+"")&&i.p(t)},d(l){l&&M(e)}}}function At(n,e){let i,t,s;return t=new oi({props:{key:e[5].key,name:e[5].name,focus:e[5].key===e[0],$$slots:{text:[ci],icon:[fi]},$$scope:{ctx:e}}}),t.$on("changed",e[2]),{key:n,first:null,c(){i=pe(),v(t.$$.fragment),this.first=i},m(l,a){E(l,i,a),k(t,l,a),s=!0},p(l,a){e=l;const r={};a&2&&(r.key=e[5].key),a&2&&(r.name=e[5].name),a&3&&(r.focus=e[5].key===e[0]),a&18&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(l){s||(p(t.$$.fragment,l),s=!0)},o(l){m(t.$$.fragment,l),s=!1},d(l){l&&M(i),y(t,l)}}}function _i(n){let e;return{c(){e=ce("Container")},m(i,t){E(i,e,t)},d(i){i&&M(e)}}}function gi(n){let e,i,t=[],s=new Map,l,a,r,o=n[1];const f=_=>_[5].key;for(let _=0;_<o.length;_+=1){let u=Ot(n,o,_),c=f(u);s.set(c,t[_]=At(c,u))}const d=n[3].default,g=ne(d,n,n[4],St),b=g||_i();return{c(){e=A("div"),i=A("div");for(let _=0;_<t.length;_+=1)t[_].c();l=W(),a=A("div"),b&&b.c(),$(i,"class","layout-tab-bar fn__flex"),$(a,"class","fn__flex-1"),$(e,"class","fn__flex-column"),Le(e,"height","100%")},m(_,u){E(_,e,u),S(e,i);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(i,null);S(e,l),S(e,a),b&&b.m(a,null),r=!0},p(_,[u]){u&7&&(o=_[1],Z(),t=Be(t,u,f,1,_,o,s,i,Pe,At,null,Ot),J()),g&&g.p&&(!r||u&17)&&se(g,d,_,_[4],r?ie(d,_[4],u,ri):le(_[4]),St)},i(_){if(!r){for(let u=0;u<o.length;u+=1)p(t[u]);p(b,_),r=!0}},o(_){for(let u=0;u<t.length;u+=1)m(t[u]);m(b,_),r=!1},d(_){_&&M(e);for(let u=0;u<t.length;u+=1)t[u].d();b&&b.d(_)}}}function pi(n,e,i){let{$$slots:t={},$$scope:s}=e,{tabs:l}=e,{focus:a}=e;function r(o){i(0,a=o.detail.key)}return n.$$set=o=>{"tabs"in o&&i(1,l=o.tabs),"focus"in o&&i(0,a=o.focus),"$$scope"in o&&i(4,s=o.$$scope)},[a,l,r,t,s]}class rn extends ae{constructor(e){super(),re(this,e,pi,gi,oe,{tabs:1,focus:0})}}const mi=n=>({}),Wt=n=>({}),di=n=>({}),Bt=n=>({}),hi=n=>({}),Vt=n=>({}),bi=n=>({}),Nt=n=>({});function wi(n){let e,i;return{c(){e=new We(!1),i=pe(),e.a=i},m(t,s){e.m(n[0],t,s),E(t,i,s)},p(t,s){s&1&&e.p(t[0])},d(t){t&&M(i),t&&e.d()}}}function $i(n){let e,i;return{c(){e=new We(!1),i=pe(),e.a=i},m(t,s){e.m(n[1],t,s),E(t,i,s)},p(t,s){s&2&&e.p(t[1])},d(t){t&&M(i),t&&e.d()}}}function Rt(n){let e,i,t;const s=n[4].input,l=ne(s,n,n[3],Bt);return{c(){e=A("div"),i=W(),l&&l.c(),$(e,"class","fn__hr")},m(a,r){E(a,e,r),E(a,i,r),l&&l.m(a,r),t=!0},p(a,r){l&&l.p&&(!t||r&8)&&se(l,s,a,a[3],t?ie(s,a[3],r,di):le(a[3]),Bt)},i(a){t||(p(l,a),t=!0)},o(a){m(l,a),t=!1},d(a){a&&M(e),a&&M(i),l&&l.d(a)}}}function Ct(n){let e,i,t;const s=n[4].input,l=ne(s,n,n[3],Wt);return{c(){e=A("span"),i=W(),l&&l.c(),$(e,"class","fn__space")},m(a,r){E(a,e,r),E(a,i,r),l&&l.m(a,r),t=!0},p(a,r){l&&l.p&&(!t||r&8)&&se(l,s,a,a[3],t?ie(s,a[3],r,mi):le(a[3]),Wt)},i(a){t||(p(l,a),t=!0)},o(a){m(l,a),t=!1},d(a){a&&M(e),a&&M(i),l&&l.d(a)}}}function ki(n){let e,i,t,s,l,a,r;const o=n[4].title,f=ne(o,n,n[3],Nt),d=f||wi(n),g=n[4].text,b=ne(g,n,n[3],Vt),_=b||$i(n);let u=n[2]&&Rt(n),c=!n[2]&&Ct(n);return{c(){e=A("label"),i=A("div"),d&&d.c(),t=W(),s=A("div"),_&&_.c(),l=W(),u&&u.c(),a=W(),c&&c.c(),$(s,"class","b3-label__text"),$(i,"class","fn__flex-1 svelte-2m76cy"),L(i,"visible",n[2]),$(e,"class","fn__flex b3-label")},m(w,O){E(w,e,O),S(e,i),d&&d.m(i,null),S(i,t),S(i,s),_&&_.m(s,null),S(i,l),u&&u.m(i,null),S(e,a),c&&c.m(e,null),r=!0},p(w,[O]){f?f.p&&(!r||O&8)&&se(f,o,w,w[3],r?ie(o,w[3],O,bi):le(w[3]),Nt):d&&d.p&&(!r||O&1)&&d.p(w,r?O:-1),b?b.p&&(!r||O&8)&&se(b,g,w,w[3],r?ie(g,w[3],O,hi):le(w[3]),Vt):_&&_.p&&(!r||O&2)&&_.p(w,r?O:-1),w[2]?u?(u.p(w,O),O&4&&p(u,1)):(u=Rt(w),u.c(),p(u,1),u.m(i,null)):u&&(Z(),m(u,1,1,()=>{u=null}),J()),(!r||O&4)&&L(i,"visible",w[2]),w[2]?c&&(Z(),m(c,1,1,()=>{c=null}),J()):c?(c.p(w,O),O&4&&p(c,1)):(c=Ct(w),c.c(),p(c,1),c.m(e,null))},i(w){r||(p(d,w),p(_,w),p(u),p(c),r=!0)},o(w){m(d,w),m(_,w),m(u),m(c),r=!1},d(w){w&&M(e),d&&d.d(w),_&&_.d(w),u&&u.d(),c&&c.d()}}}function yi(n,e,i){let{$$slots:t={},$$scope:s}=e,{title:l=""}=e,{text:a=""}=e,{block:r=!1}=e;return n.$$set=o=>{"title"in o&&i(0,l=o.title),"text"in o&&i(1,a=o.text),"block"in o&&i(2,r=o.block),"$$scope"in o&&i(3,s=o.$$scope)},[l,a,r,s,t]}class Y extends ae{constructor(e){super(),re(this,e,yi,ki,oe,{title:0,text:1,block:2})}}var F=(n=>(n[n.checkbox=0]="checkbox",n[n.text=1]="text",n[n.number=2]="number",n[n.slider=3]="slider",n[n.button=4]="button",n[n.select=5]="select",n[n.textarea=6]="textarea",n))(F||{});function Dt(n,e,i){const t=n.slice();return t[18]=e[i],t}function vi(n){let e,i,t;return{c(){e=A("textarea"),e.disabled=n[2],$(e,"class","b3-text-field"),$(e,"placeholder",n[5]),L(e,"fn__block",n[3]),L(e,"fn__size200",!n[3]&&n[4])},m(s,l){E(s,e,l),fe(e,n[0]),i||(t=[H(e,"input",n[16]),H(e,"change",n[9])],i=!0)},p(s,l){l&4&&(e.disabled=s[2]),l&32&&$(e,"placeholder",s[5]),l&65&&fe(e,s[0]),l&8&&L(e,"fn__block",s[3]),l&24&&L(e,"fn__size200",!s[3]&&s[4])},d(s){s&&M(e),i=!1,ee(t)}}}function Ti(n){let e,i=[],t=new Map,s,l,a=n[6];const r=o=>o[18].key;for(let o=0;o<a.length;o+=1){let f=Dt(n,a,o),d=r(f);t.set(d,i[o]=Ft(d,f))}return{c(){e=A("select");for(let o=0;o<i.length;o+=1)i[o].c();e.disabled=n[2],$(e,"class","b3-select"),n[0]===void 0&&Fe(()=>n[15].call(e)),L(e,"fn__block",n[3]),L(e,"fn__size200",!n[3]&&n[4]),L(e,"fn__flex-center",!n[3])},m(o,f){E(o,e,f);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null);$t(e,n[0],!0),s||(l=[H(e,"change",n[15]),H(e,"change",n[9])],s=!0)},p(o,f){f&64&&(a=o[6],i=Be(i,f,r,1,o,a,t,e,Un,Ft,null,Dt)),f&4&&(e.disabled=o[2]),f&65&&$t(e,o[0]),f&8&&L(e,"fn__block",o[3]),f&24&&L(e,"fn__size200",!o[3]&&o[4]),f&8&&L(e,"fn__flex-center",!o[3])},d(o){o&&M(e);for(let f=0;f<i.length;f+=1)i[f].d();s=!1,ee(l)}}}function Mi(n){let e,i,t,s;return{c(){e=A("button"),i=ce(n[0]),e.disabled=n[2],$(e,"class","b3-button b3-button--outline"),L(e,"fn__block",n[3]),L(e,"fn__size200",!n[3]&&n[4]),L(e,"fn__flex-center",!n[3])},m(l,a){E(l,e,a),S(e,i),t||(s=H(e,"click",n[8]),t=!0)},p(l,a){a&1&&Ke(i,l[0]),a&4&&(e.disabled=l[2]),a&8&&L(e,"fn__block",l[3]),a&24&&L(e,"fn__size200",!l[3]&&l[4]),a&8&&L(e,"fn__flex-center",!l[3])},d(l){l&&M(e),t=!1,s()}}}function Ei(n){let e,i,t,s,l,a;return{c(){e=A("input"),e.disabled=n[2],$(e,"class","b3-slider svelte-edt8og"),$(e,"type","range"),$(e,"min",i=n[7].min),$(e,"max",t=n[7].max),$(e,"step",s=n[7].step),L(e,"fn__block",n[3]),L(e,"fn__size200",!n[3]&&n[4])},m(r,o){E(r,e,o),fe(e,n[0]),l||(a=[H(e,"change",n[14]),H(e,"input",n[14]),H(e,"change",n[9])],l=!0)},p(r,o){o&4&&(e.disabled=r[2]),o&128&&i!==(i=r[7].min)&&$(e,"min",i),o&128&&t!==(t=r[7].max)&&$(e,"max",t),o&128&&s!==(s=r[7].step)&&$(e,"step",s),o&65&&fe(e,r[0]),o&8&&L(e,"fn__block",r[3]),o&24&&L(e,"fn__size200",!r[3]&&r[4])},d(r){r&&M(e),l=!1,ee(a)}}}function Ki(n){let e,i,t,s,l,a;return{c(){e=A("input"),e.disabled=n[2],$(e,"class","b3-text-field"),$(e,"type","number"),$(e,"placeholder",n[5]),$(e,"min",i=n[7].min),$(e,"max",t=n[7].max),$(e,"step",s=n[7].step),L(e,"fn__block",n[3]),L(e,"fn__size200",!n[3]&&n[4]),L(e,"fn__flex-center",!n[3])},m(r,o){E(r,e,o),fe(e,n[0]),l||(a=[H(e,"input",n[13]),H(e,"change",n[9])],l=!0)},p(r,o){o&4&&(e.disabled=r[2]),o&32&&$(e,"placeholder",r[5]),o&128&&i!==(i=r[7].min)&&$(e,"min",i),o&128&&t!==(t=r[7].max)&&$(e,"max",t),o&128&&s!==(s=r[7].step)&&$(e,"step",s),o&65&&Ye(e.value)!==r[0]&&fe(e,r[0]),o&8&&L(e,"fn__block",r[3]),o&24&&L(e,"fn__size200",!r[3]&&r[4]),o&8&&L(e,"fn__flex-center",!r[3])},d(r){r&&M(e),l=!1,ee(a)}}}function Li(n){let e,i,t;return{c(){e=A("input"),e.disabled=n[2],$(e,"class","b3-text-field"),$(e,"placeholder",n[5]),L(e,"fn__block",n[3]),L(e,"fn__size200",!n[3]&&n[4]),L(e,"fn__flex-center",!n[3])},m(s,l){E(s,e,l),fe(e,n[0]),i||(t=[H(e,"input",n[12]),H(e,"change",n[9])],i=!0)},p(s,l){l&4&&(e.disabled=s[2]),l&32&&$(e,"placeholder",s[5]),l&65&&e.value!==s[0]&&fe(e,s[0]),l&8&&L(e,"fn__block",s[3]),l&24&&L(e,"fn__size200",!s[3]&&s[4]),l&8&&L(e,"fn__flex-center",!s[3])},d(s){s&&M(e),i=!1,ee(t)}}}function Si(n){let e,i,t;return{c(){e=A("input"),e.disabled=n[2],$(e,"class","b3-switch svelte-edt8og"),$(e,"type","checkbox"),L(e,"fn__block",n[3]),L(e,"fn__flex-center",!n[3])},m(s,l){E(s,e,l),e.checked=n[0],i||(t=[H(e,"change",n[11]),H(e,"change",n[9])],i=!0)},p(s,l){l&4&&(e.disabled=s[2]),l&65&&(e.checked=s[0]),l&8&&L(e,"fn__block",s[3]),l&8&&L(e,"fn__flex-center",!s[3])},d(s){s&&M(e),i=!1,ee(t)}}}function Ft(n,e){let i,t=e[18].text+"",s,l;return{key:n,first:null,c(){i=A("option"),s=ce(t),i.__value=l=e[18].key,i.value=i.__value,this.first=i},m(a,r){E(a,i,r),S(i,s)},p(a,r){e=a,r&64&&t!==(t=e[18].text+"")&&Ke(s,t),r&64&&l!==(l=e[18].key)&&(i.__value=l,i.value=i.__value)},d(a){a&&M(i)}}}function Oi(n){let e;function i(l,a){if(l[1]===F.checkbox)return Si;if(l[1]===F.text)return Li;if(l[1]===F.number)return Ki;if(l[1]===F.slider)return Ei;if(l[1]===F.button)return Mi;if(l[1]===F.select)return Ti;if(l[1]===F.textarea)return vi}let t=i(n),s=t&&t(n);return{c(){s&&s.c(),e=pe()},m(l,a){s&&s.m(l,a),E(l,e,a)},p(l,[a]){t===(t=i(l))&&s?s.p(l,a):(s&&s.d(1),s=t&&t(l),s&&(s.c(),s.m(e.parentNode,e)))},i:G,o:G,d(l){s&&s.d(l),l&&M(e)}}}function Ai(n,e,i){let{type:t}=e,{settingKey:s}=e,{settingValue:l}=e,{disabled:a=!1}=e,{block:r=!1}=e,{normal:o=!0}=e,{placeholder:f=""}=e,{options:d=[]}=e,{limits:g={min:0,max:100,step:1}}=e;const b=Ie();function _(N){b("clicked",{event:N})}function u(N){b("changed",{key:s,value:l,event:N})}function c(){l=this.checked,i(0,l),i(6,d)}function w(){l=this.value,i(0,l),i(6,d)}function O(){l=Ye(this.value),i(0,l),i(6,d)}function U(){l=Ye(this.value),i(0,l),i(6,d)}function j(){l=Rn(this),i(0,l),i(6,d)}function R(){l=this.value,i(0,l),i(6,d)}return n.$$set=N=>{"type"in N&&i(1,t=N.type),"settingKey"in N&&i(10,s=N.settingKey),"settingValue"in N&&i(0,l=N.settingValue),"disabled"in N&&i(2,a=N.disabled),"block"in N&&i(3,r=N.block),"normal"in N&&i(4,o=N.normal),"placeholder"in N&&i(5,f=N.placeholder),"options"in N&&i(6,d=N.options),"limits"in N&&i(7,g=N.limits)},[l,t,a,r,o,f,d,g,_,u,s,c,w,O,U,j,R]}class P extends ae{constructor(e){super(),re(this,e,Ai,Oi,oe,{type:1,settingKey:10,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7})}}function Wi(n){let e,i,t,s,l;const a=n[2].default,r=ne(a,n,n[1],null);return{c(){e=A("div"),i=new We(!1),t=W(),s=A("div"),r&&r.c(),i.a=t,$(s,"class","config-query"),$(e,"class","b3-label")},m(o,f){E(o,e,f),i.m(n[0],e),S(e,t),S(e,s),r&&r.m(s,null),l=!0},p(o,[f]){(!l||f&1)&&i.p(o[0]),r&&r.p&&(!l||f&2)&&se(r,a,o,o[1],l?ie(a,o[1],f,null):le(o[1]),null)},i(o){l||(p(r,o),l=!0)},o(o){m(r,o),l=!1},d(o){o&&M(e),r&&r.d(o)}}}function Bi(n,e,i){let{$$slots:t={},$$scope:s}=e,{title:l}=e;return n.$$set=a=>{"title"in a&&i(0,l=a.title),"$$scope"in a&&i(1,s=a.$$scope)},[l,s,t]}class Ze extends ae{constructor(e){super(),re(this,e,Bi,Wi,oe,{title:0})}}const Vi=n=>({}),jt=n=>({}),Ni=n=>({}),It=n=>({}),Ri=n=>({}),Pt=n=>({});function Ci(n){let e,i,t,s,l,a,r,o,f;const d=n[3].icon,g=ne(d,n,n[2],Pt),b=n[3].title,_=ne(b,n,n[2],It),u=n[3].input,c=ne(u,n,n[2],jt);return{c(){e=A("label"),g&&g.c(),i=W(),t=A("span"),s=W(),l=A("div"),_&&_.c(),a=W(),r=A("span"),o=W(),c&&c.c(),$(t,"class","fn__space"),$(l,"class","fn__flex-1"),$(r,"class","fn__space"),Le(e,"min-width",n[0]),Le(e,"margin-right",n[1]),$(e,"class","fn__flex svelte-1l7osn9")},m(w,O){E(w,e,O),g&&g.m(e,null),S(e,i),S(e,t),S(e,s),S(e,l),_&&_.m(l,null),S(e,a),S(e,r),S(e,o),c&&c.m(e,null),f=!0},p(w,[O]){g&&g.p&&(!f||O&4)&&se(g,d,w,w[2],f?ie(d,w[2],O,Ri):le(w[2]),Pt),_&&_.p&&(!f||O&4)&&se(_,b,w,w[2],f?ie(b,w[2],O,Ni):le(w[2]),It),c&&c.p&&(!f||O&4)&&se(c,u,w,w[2],f?ie(u,w[2],O,Vi):le(w[2]),jt),(!f||O&1)&&Le(e,"min-width",w[0]),(!f||O&2)&&Le(e,"margin-right",w[1])},i(w){f||(p(g,w),p(_,w),p(c,w),f=!0)},o(w){m(g,w),m(_,w),m(c,w),f=!1},d(w){w&&M(e),g&&g.d(w),_&&_.d(w),c&&c.d(w)}}}function Di(n,e,i){let{$$slots:t={},$$scope:s}=e,{minWidth:l="24em"}=e,{marginRight:a="2em"}=e;return n.$$set=r=>{"minWidth"in r&&i(0,l=r.minWidth),"marginRight"in r&&i(1,a=r.marginRight),"$$scope"in r&&i(2,s=r.$$scope)},[l,a,s,t]}class be extends ae{constructor(e){super(),re(this,e,Di,Ci,oe,{minWidth:0,marginRight:1})}}var _e=(n=>(n[n.Left=0]="Left",n[n.Middle=1]="Middle",n[n.Right=2]="Right",n[n.Back=3]="Back",n[n.Forward=4]="Forward",n))(_e||{}),q=(n=>(n.click="click",n.dblclick="dblclick",n.mousedown="mousedown",n.mouseup="mouseup",n.mouseenter="mouseenter",n.mouseleave="mouseleave",n.mousewheel="mousewheel",n.mouseover="mouseover",n.mousemove="mousemove",n.mouseout="mouseout",n))(q||{});function Ht(n){let e,i;return e=new be({props:{minWidth:n[2],marginRight:n[3],$$slots:{input:[Ii],title:[ji],default:[Fi]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&4&&(l.minWidth=t[2]),s&8&&(l.marginRight=t[3]),s&4195329&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Fi(n){let e,i;return e=new me({props:{icon:"#iconKeymap",className:"svg"}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p:G,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function ji(n){let e;return{c(){e=A("kbd"),e.textContent="Ctrl",$(e,"slot","title")},m(i,t){E(i,e,t)},p:G,d(i){i&&M(e)}}}function Ii(n){let e,i;return e=new P({props:{slot:"input",normal:!1,disabled:n[10],type:F.checkbox,settingKey:"ctrlKey",settingValue:n[0].ctrlKey}}),e.$on("changed",n[20]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&1024&&(l.disabled=t[10]),s&1&&(l.settingValue=t[0].ctrlKey),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Ut(n){let e,i;return e=new be({props:{minWidth:n[2],marginRight:n[3],$$slots:{input:[Ui],title:[Hi],default:[Pi]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&4&&(l.minWidth=t[2]),s&8&&(l.marginRight=t[3]),s&4196353&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Pi(n){let e,i;return e=new me({props:{icon:"#iconKeymap",className:"svg"}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p:G,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Hi(n){let e;return{c(){e=A("kbd"),e.textContent="Shift",$(e,"slot","title")},m(i,t){E(i,e,t)},p:G,d(i){i&&M(e)}}}function Ui(n){let e,i;return e=new P({props:{slot:"input",normal:!1,disabled:n[11],type:F.checkbox,settingKey:"shiftKey",settingValue:n[0].shiftKey}}),e.$on("changed",n[20]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&2048&&(l.disabled=t[11]),s&1&&(l.settingValue=t[0].shiftKey),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function zt(n){let e,i;return e=new be({props:{minWidth:n[2],marginRight:n[3],$$slots:{input:[qi],title:[Gi],default:[zi]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&4&&(l.minWidth=t[2]),s&8&&(l.marginRight=t[3]),s&4198401&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function zi(n){let e,i;return e=new me({props:{icon:"#iconKeymap",className:"svg"}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p:G,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Gi(n){let e;return{c(){e=A("kbd"),e.textContent="Alt",$(e,"slot","title")},m(i,t){E(i,e,t)},p:G,d(i){i&&M(e)}}}function qi(n){let e,i;return e=new P({props:{slot:"input",normal:!1,disabled:n[12],type:F.checkbox,settingKey:"altKey",settingValue:n[0].altKey}}),e.$on("changed",n[20]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&4096&&(l.disabled=t[12]),s&1&&(l.settingValue=t[0].altKey),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Gt(n){let e,i;return e=new be({props:{minWidth:n[2],marginRight:n[3],$$slots:{input:[Qi],title:[Xi],default:[Yi]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&4&&(l.minWidth=t[2]),s&8&&(l.marginRight=t[3]),s&4202497&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Yi(n){let e,i;return e=new me({props:{icon:"#iconKeymap",className:"svg"}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p:G,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Xi(n){let e;return{c(){e=A("kbd"),e.textContent="Meta",$(e,"slot","title")},m(i,t){E(i,e,t)},p:G,d(i){i&&M(e)}}}function Qi(n){let e,i;return e=new P({props:{slot:"input",normal:!1,disabled:n[13],type:F.checkbox,settingKey:"metaKey",settingValue:n[0].metaKey}}),e.$on("changed",n[20]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&8192&&(l.disabled=t[13]),s&1&&(l.settingValue=t[0].metaKey),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function qt(n){let e,i;return e=new be({props:{minWidth:n[2],marginRight:n[3],$$slots:{input:[xi],title:[Ji],default:[Zi]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&4&&(l.minWidth=t[2]),s&8&&(l.marginRight=t[3]),s&4538369&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Zi(n){let e,i;return e=new me({props:{icon:"#iconSelectText",className:"svg"}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p:G,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Ji(n){let e,i;return{c(){e=A("span"),i=ce(n[16]),$(e,"slot","title")},m(t,s){E(t,e,s),S(e,i)},p(t,s){s&65536&&Ke(i,t[16])},d(t){t&&M(e)}}}function xi(n){let e,i;return e=new P({props:{slot:"input",normal:!1,disabled:n[14],type:F.select,settingKey:"button",settingValue:n[0].button,options:n[18]}}),e.$on("changed",n[20]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&16384&&(l.disabled=t[14]),s&1&&(l.settingValue=t[0].button),s&262144&&(l.options=t[18]),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Yt(n){let e,i;return e=new be({props:{minWidth:n[2],marginRight:n[3],$$slots:{input:[ns],title:[ts],default:[es]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&4&&(l.minWidth=t[2]),s&8&&(l.marginRight=t[3]),s&4882433&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function es(n){let e,i;return e=new me({props:{icon:"#iconSelectText",className:"svg"}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p:G,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function ts(n){let e,i;return{c(){e=A("span"),i=ce(n[17]),$(e,"slot","title")},m(t,s){E(t,e,s),S(e,i)},p(t,s){s&131072&&Ke(i,t[17])},d(t){t&&M(e)}}}function ns(n){let e,i;return e=new P({props:{slot:"input",normal:!1,disabled:n[15],type:F.select,settingKey:"type",settingValue:n[0].type,options:n[19]}}),e.$on("changed",n[20]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s&32768&&(l.disabled=t[15]),s&1&&(l.settingValue=t[0].type),s&524288&&(l.options=t[19]),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function is(n){let e,i,t,s,l,a,r,o=n[4]&&Ht(n),f=n[5]&&Ut(n),d=n[6]&&zt(n),g=n[7]&&Gt(n),b=n[8]&&qt(n),_=n[9]&&Yt(n);return{c(){o&&o.c(),e=W(),f&&f.c(),i=W(),d&&d.c(),t=W(),g&&g.c(),s=W(),b&&b.c(),l=W(),_&&_.c(),a=pe()},m(u,c){o&&o.m(u,c),E(u,e,c),f&&f.m(u,c),E(u,i,c),d&&d.m(u,c),E(u,t,c),g&&g.m(u,c),E(u,s,c),b&&b.m(u,c),E(u,l,c),_&&_.m(u,c),E(u,a,c),r=!0},p(u,c){u[4]?o?(o.p(u,c),c&16&&p(o,1)):(o=Ht(u),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(Z(),m(o,1,1,()=>{o=null}),J()),u[5]?f?(f.p(u,c),c&32&&p(f,1)):(f=Ut(u),f.c(),p(f,1),f.m(i.parentNode,i)):f&&(Z(),m(f,1,1,()=>{f=null}),J()),u[6]?d?(d.p(u,c),c&64&&p(d,1)):(d=zt(u),d.c(),p(d,1),d.m(t.parentNode,t)):d&&(Z(),m(d,1,1,()=>{d=null}),J()),u[7]?g?(g.p(u,c),c&128&&p(g,1)):(g=Gt(u),g.c(),p(g,1),g.m(s.parentNode,s)):g&&(Z(),m(g,1,1,()=>{g=null}),J()),u[8]?b?(b.p(u,c),c&256&&p(b,1)):(b=qt(u),b.c(),p(b,1),b.m(l.parentNode,l)):b&&(Z(),m(b,1,1,()=>{b=null}),J()),u[9]?_?(_.p(u,c),c&512&&p(_,1)):(_=Yt(u),_.c(),p(_,1),_.m(a.parentNode,a)):_&&(Z(),m(_,1,1,()=>{_=null}),J())},i(u){r||(p(o),p(f),p(d),p(g),p(b),p(_),r=!0)},o(u){m(o),m(f),m(d),m(g),m(b),m(_),r=!1},d(u){o&&o.d(u),u&&M(e),f&&f.d(u),u&&M(i),d&&d.d(u),u&&M(t),g&&g.d(u),u&&M(s),b&&b.d(u),u&&M(l),_&&_.d(u),u&&M(a)}}}function ss(n){let e,i;return e=new Ze({props:{title:n[1],$$slots:{default:[is]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,[s]){const l={};s&2&&(l.title=t[1]),s&5242877&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function ls(n,e,i){let{title:t}=e,{shortcut:s}=e,{minWidth:l=void 0}=e,{marginRight:a=void 0}=e,{displayCtrlKey:r=!0}=e,{displayShiftKey:o=!0}=e,{displayAltKey:f=!0}=e,{displayMetaKey:d=!0}=e,{displayMouseButton:g=!0}=e,{displayMouseEvent:b=!0}=e,{disabledCtrlKey:_=!1}=e,{disabledShiftKey:u=!1}=e,{disabledAltKey:c=!1}=e,{disabledMetaKey:w=!1}=e,{disabledMouseButton:O=!1}=e,{disabledMouseEvent:U=!1}=e,{mouseButtonTitle:j="Mouse Button"}=e,{mouseEventTitle:R="Mouse Event"}=e,{mouseButtonOptions:N=[{key:_e.Left,text:"Left"},{key:_e.Middle,text:"Middle"},{key:_e.Right,text:"Right"},{key:_e.Back,text:"Back"},{key:_e.Forward,text:"Forward"}]}=e,{mouseEventOptions:D=[{key:q.click,text:q.click},{key:q.dblclick,text:q.dblclick},{key:q.mousedown,text:q.mousedown},{key:q.mouseup,text:q.mouseup},{key:q.mouseenter,text:q.mouseenter},{key:q.mouseleave,text:q.mouseleave},{key:q.mousewheel,text:q.mousewheel},{key:q.mouseover,text:q.mouseover},{key:q.mousemove,text:q.mousemove},{key:q.mouseout,text:q.mouseout}]}=e;const C=Ie();function z(h){s.hasOwnProperty(h.detail.key)&&i(0,s[h.detail.key]=h.detail.value,s),C("changed",{shortcut:s})}return n.$$set=h=>{"title"in h&&i(1,t=h.title),"shortcut"in h&&i(0,s=h.shortcut),"minWidth"in h&&i(2,l=h.minWidth),"marginRight"in h&&i(3,a=h.marginRight),"displayCtrlKey"in h&&i(4,r=h.displayCtrlKey),"displayShiftKey"in h&&i(5,o=h.displayShiftKey),"displayAltKey"in h&&i(6,f=h.displayAltKey),"displayMetaKey"in h&&i(7,d=h.displayMetaKey),"displayMouseButton"in h&&i(8,g=h.displayMouseButton),"displayMouseEvent"in h&&i(9,b=h.displayMouseEvent),"disabledCtrlKey"in h&&i(10,_=h.disabledCtrlKey),"disabledShiftKey"in h&&i(11,u=h.disabledShiftKey),"disabledAltKey"in h&&i(12,c=h.disabledAltKey),"disabledMetaKey"in h&&i(13,w=h.disabledMetaKey),"disabledMouseButton"in h&&i(14,O=h.disabledMouseButton),"disabledMouseEvent"in h&&i(15,U=h.disabledMouseEvent),"mouseButtonTitle"in h&&i(16,j=h.mouseButtonTitle),"mouseEventTitle"in h&&i(17,R=h.mouseEventTitle),"mouseButtonOptions"in h&&i(18,N=h.mouseButtonOptions),"mouseEventOptions"in h&&i(19,D=h.mouseEventOptions)},[s,t,l,a,r,o,f,d,g,b,_,u,c,w,O,U,j,R,N,D,z]}class an extends ae{constructor(e){super(),re(this,e,ls,ss,oe,{title:1,shortcut:0,minWidth:2,marginRight:3,displayCtrlKey:4,displayShiftKey:5,displayAltKey:6,displayMetaKey:7,displayMouseButton:8,displayMouseEvent:9,disabledCtrlKey:10,disabledShiftKey:11,disabledAltKey:12,disabledMetaKey:13,disabledMouseButton:14,disabledMouseEvent:15,mouseButtonTitle:16,mouseEventTitle:17,mouseButtonOptions:18,mouseEventOptions:19})}}function os(n,e=!0){const i=[{role:"about"},...n?[{type:"separator"},{role:"help"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"}]:[],{type:"separator"},{role:"quit"}],t=[...n?[{role:"recentDocuments"},{role:"clearRecentDocuments"},{type:"separator"}]:[],{role:"close"}],s=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteAndMatchStyle"},{role:"delete"},{type:"separator"},{role:"selectAll"},{type:"separator"},{role:"toggleSpellChecker"},...n?[{type:"separator"},{role:"showSubstitutions"},{role:"toggleTextReplacement"},{type:"separator"},{role:"toggleSmartQuotes"},{role:"toggleSmartDashes"},{type:"separator"},{role:"startSpeaking"},{role:"stopSpeaking"}]:[]],l=[{role:"reload"},{role:"forceReload"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn",accelerator:"CmdOrCtrl+="},{role:"zoomOut"},...n?[{role:"zoom"},{type:"separator"},{role:"front"}]:[{type:"separator"},{label:"Toggle On Top",click:(o,f,d)=>{f&&f.setAlwaysOnTop(!f.isAlwaysOnTop())},type:"checkbox",checked:e,accelerator:"CmdOrCtrl+Shift+Space"}],{role:"togglefullscreen"},{type:"separator"},{role:"toggleDevTools"}],a=[...n?[{role:"window"},{type:"separator"},{role:"toggleTabBar"},{role:"selectNextTab"},{role:"selectPreviousTab"},{role:"mergeAllWindows"},{role:"moveTabToNewWindow"},{type:"separator"}]:[],{role:"minimize"},{role:"close"}],r=[{role:"appMenu",submenu:i},{role:"fileMenu",submenu:t},{role:"editMenu",submenu:s},{role:"viewMenu",submenu:l},{role:"windowMenu",submenu:a}];return n&&r.push({role:"shareMenu"}),r}var te=(n=>(n[n.AlwaysShow=0]="AlwaysShow",n[n.AutoHide=1]="AutoHide",n[n.Disabled=2]="Disabled",n))(te||{});function rs(n,e,i,t,s){i.webPreferences=De(i.webPreferences||{},t);const l=De(e,i);if(ze())try{const{BrowserWindow:a,Menu:r}=globalThis.require("@electron/remote"),o=new a(l);if(l.enableMenuBar){const f=r.buildFromTemplate(os(globalThis.process.platform==="darwin",l.alwaysOnTop));o.setMenu(f)}else o.removeMenu();return l.enableElectron&&globalThis.require("@electron/remote").require("@electron/remote/main").enable(o.webContents),o.loadURL(n.href,{userAgent:s.useragent}),o}catch(a){s.logger.warn(a)}return globalThis.open(n.href,n.href,["popup = true",`width = ${l.width}`,`height = ${l.height}`,`left = ${l.x}`,`top = ${l.y}`].join(","))}function Xt(n,e,i){const t=n.slice();return t[29]=e[i][0],t[30]=e[i][1],t[31]=e,t[32]=i,t}function Qt(n,e,i){const t=n.slice();return t[29]=e[i][0],t[30]=e[i][1],t[33]=e,t[34]=i,t}function as(n){let e,i;return e=new P({props:{slot:"input",type:F.text,block:!0,placeholder:globalThis.navigator.userAgent,settingKey:"Text",settingValue:n[0].general.useragent}}),e.$on("changed",n[7]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].general.useragent),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function us(n){let e,i;return e=new P({props:{slot:"input",type:F.button,settingKey:"Reset",settingValue:n[2].settings.generalSettings.reset.text}}),e.$on("clicked",n[4]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p:G,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function fs(n){let e,i,t,s;return e=new Y({props:{title:n[2].settings.generalSettings.useragent.title,text:n[2].settings.generalSettings.useragent.description,block:!0,$$slots:{input:[as]},$$scope:{ctx:n}}}),t=new Y({props:{title:n[2].settings.generalSettings.reset.title,text:n[2].settings.generalSettings.reset.description,$$slots:{input:[us]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment),i=W(),v(t.$$.fragment)},m(l,a){k(e,l,a),E(l,i,a),k(t,l,a),s=!0},p(l,a){const r={};a[0]&1|a[1]&16&&(r.$$scope={dirty:a,ctx:l}),e.$set(r);const o={};a[1]&16&&(o.$$scope={dirty:a,ctx:l}),t.$set(o)},i(l){s||(p(e.$$.fragment,l),p(t.$$.fragment,l),s=!0)},o(l){m(e.$$.fragment,l),m(t.$$.fragment,l),s=!1},d(l){y(e,l),l&&M(i),y(t,l)}}}function cs(n){let e,i;return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:n[0].tab.enable}}),e.$on("changed",n[8]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].tab.enable),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function _s(n){let e,i;return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:n[0].tab.open.targets.hyperlink.editor}}),e.$on("changed",n[9]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].tab.open.targets.hyperlink.editor),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function gs(n){let e,i;return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:n[0].tab.open.targets.hyperlink.other}}),e.$on("changed",n[10]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].tab.open.targets.hyperlink.other),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function ps(n){let e,i=n[30].prefix+"",t;return{c(){e=A("code"),t=ce(i),$(e,"slot","title"),$(e,"class","fn__code")},m(s,l){E(s,e,l),S(e,t)},p(s,l){l[0]&1&&i!==(i=s[30].prefix+"")&&Ke(t,i)},d(s){s&&M(e)}}}function ms(n){let e,i;function t(...s){return n[11](n[30],n[33],n[34],...s)}return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:n[30].enable}}),e.$on("changed",t),{c(){v(e.$$.fragment)},m(s,l){k(e,s,l),i=!0},p(s,l){n=s;const a={};l[0]&1&&(a.settingValue=n[30].enable),e.$set(a)},i(s){i||(p(e.$$.fragment,s),i=!0)},o(s){m(e.$$.fragment,s),i=!1},d(s){y(e,s)}}}function Zt(n,e){let i,t,s;return t=new be({props:{minWidth:"8em",$$slots:{input:[ms],title:[ps]},$$scope:{ctx:e}}}),{key:n,first:null,c(){i=pe(),v(t.$$.fragment),this.first=i},m(l,a){E(l,i,a),k(t,l,a),s=!0},p(l,a){e=l;const r={};a[0]&1|a[1]&16&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(l){s||(p(t.$$.fragment,l),s=!0)},o(l){m(t.$$.fragment,l),s=!1},d(l){l&&M(i),y(t,l)}}}function ds(n){let e=[],i=new Map,t,s,l=Object.entries(n[0].tab.open.protocols);const a=r=>r[29];for(let r=0;r<l.length;r+=1){let o=Qt(n,l,r),f=a(o);i.set(f,e[r]=Zt(f,o))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=pe()},m(r,o){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,o);E(r,t,o),s=!0},p(r,o){o[0]&9&&(l=Object.entries(r[0].tab.open.protocols),Z(),e=Be(e,o,a,1,r,l,i,t.parentNode,Pe,Zt,t,Qt),J())},i(r){if(!s){for(let o=0;o<l.length;o+=1)p(e[o]);s=!0}},o(r){for(let o=0;o<e.length;o+=1)m(e[o]);s=!1},d(r){for(let o=0;o<e.length;o+=1)e[o].d(r);r&&M(t)}}}function hs(n){let e,i,t,s,l,a,r,o,f,d,g,b,_;return i=new Y({props:{title:n[2].settings.open.enable.tab.title,text:n[2].settings.open.enable.tab.description,$$slots:{input:[cs]},$$scope:{ctx:n}}}),s=new Y({props:{title:n[2].settings.open.editorHyperlink.title,text:n[2].settings.open.editorHyperlink.description,$$slots:{input:[_s]},$$scope:{ctx:n}}}),a=new Y({props:{title:n[2].settings.open.otherHyperlink.title,text:n[2].settings.open.otherHyperlink.description,$$slots:{input:[gs]},$$scope:{ctx:n}}}),f=new Ze({props:{title:n[2].settings.protocols.title,$$slots:{default:[ds]},$$scope:{ctx:n}}}),b=new an({props:{minWidth:"16em",title:n[2].settings.open.shortcut.title,shortcut:n[0].tab.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:n[2].settings.mouse.button,mouseButtonOptions:[{key:_e.Left,text:n[2].settings.mouse.left}]}}),b.$on("changed",n[3]),{c(){e=A("div"),v(i.$$.fragment),t=W(),v(s.$$.fragment),l=W(),v(a.$$.fragment),r=W(),o=A("div"),v(f.$$.fragment),d=W(),g=A("div"),v(b.$$.fragment),$(e,"data-type",n[6].tab[0].name),L(e,"fn__none",n[6].tab[0].key!==n[28]),$(o,"data-type",n[6].tab[1].name),L(o,"fn__none",n[6].tab[1].key!==n[28]),$(g,"data-type",n[6].tab[2].name),L(g,"fn__none",n[6].tab[2].key!==n[28])},m(u,c){E(u,e,c),k(i,e,null),S(e,t),k(s,e,null),S(e,l),k(a,e,null),E(u,r,c),E(u,o,c),k(f,o,null),E(u,d,c),E(u,g,c),k(b,g,null),_=!0},p(u,c){const w={};c[0]&1|c[1]&16&&(w.$$scope={dirty:c,ctx:u}),i.$set(w);const O={};c[0]&1|c[1]&16&&(O.$$scope={dirty:c,ctx:u}),s.$set(O);const U={};c[0]&1|c[1]&16&&(U.$$scope={dirty:c,ctx:u}),a.$set(U),(!_||c[0]&268435520)&&L(e,"fn__none",u[6].tab[0].key!==u[28]);const j={};c[0]&1|c[1]&16&&(j.$$scope={dirty:c,ctx:u}),f.$set(j),(!_||c[0]&268435520)&&L(o,"fn__none",u[6].tab[1].key!==u[28]);const R={};c[0]&1&&(R.shortcut=u[0].tab.open.mouse),b.$set(R),(!_||c[0]&268435520)&&L(g,"fn__none",u[6].tab[2].key!==u[28])},i(u){_||(p(i.$$.fragment,u),p(s.$$.fragment,u),p(a.$$.fragment,u),p(f.$$.fragment,u),p(b.$$.fragment,u),_=!0)},o(u){m(i.$$.fragment,u),m(s.$$.fragment,u),m(a.$$.fragment,u),m(f.$$.fragment,u),m(b.$$.fragment,u),_=!1},d(u){u&&M(e),y(i),y(s),y(a),u&&M(r),u&&M(o),y(f),u&&M(d),u&&M(g),y(b)}}}function bs(n){let e,i;return e=new rn({props:{focus:Fs,tabs:n[6].tab,$$slots:{default:[hs,({focus:t})=>({28:t}),({focus:t})=>[t?268435456:0]]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&268435457|s[1]&16&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function ws(n){let e,i;return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"enable",settingValue:n[0].window.enable}}),e.$on("changed",n[12]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.enable),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function $s(n){let e,i;return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"editorHyperlink",settingValue:n[0].window.open.targets.hyperlink.editor}}),e.$on("changed",n[13]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.open.targets.hyperlink.editor),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function ks(n){let e,i;return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"otherHyperlink",settingValue:n[0].window.open.targets.hyperlink.other}}),e.$on("changed",n[14]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.open.targets.hyperlink.other),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function ys(n){let e,i;return e=new P({props:{slot:"input",type:F.number,settingKey:"width",settingValue:n[0].window.params.width,limits:{min:320,max:15360,step:40}}}),e.$on("changed",n[15]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.params.width),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function vs(n){let e,i;return e=new P({props:{slot:"input",type:F.number,settingKey:"height",settingValue:n[0].window.params.height,limits:{min:240,max:8640,step:40}}}),e.$on("changed",n[16]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.params.height),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Ts(n){let e,i;return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"top",settingValue:n[0].window.params.alwaysOnTop}}),e.$on("changed",n[17]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.params.alwaysOnTop),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Ms(n){let e,i;return e=new P({props:{slot:"input",type:F.select,settingKey:"menuBar",settingValue:n[0].window.params.enableMenuBar?n[0].window.params.autoHideMenuBar?te.AutoHide:te.AlwaysShow:te.Disabled,options:[{key:te.AutoHide,text:n[2].settings.window.menuBar.options.autoHide},{key:te.AlwaysShow,text:n[2].settings.window.menuBar.options.alwaysShow},{key:te.Disabled,text:n[2].settings.window.menuBar.options.disabled}]}}),e.$on("changed",n[18]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.params.enableMenuBar?t[0].window.params.autoHideMenuBar?te.AutoHide:te.AlwaysShow:te.Disabled),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Es(n){let e,i=n[30].prefix+"",t;return{c(){e=A("code"),t=ce(i),$(e,"slot","title"),$(e,"class","fn__code")},m(s,l){E(s,e,l),S(e,t)},p(s,l){l[0]&1&&i!==(i=s[30].prefix+"")&&Ke(t,i)},d(s){s&&M(e)}}}function Ks(n){let e,i;function t(...s){return n[19](n[30],n[31],n[32],...s)}return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:n[30].enable}}),e.$on("changed",t),{c(){v(e.$$.fragment)},m(s,l){k(e,s,l),i=!0},p(s,l){n=s;const a={};l[0]&1&&(a.settingValue=n[30].enable),e.$set(a)},i(s){i||(p(e.$$.fragment,s),i=!0)},o(s){m(e.$$.fragment,s),i=!1},d(s){y(e,s)}}}function Jt(n,e){let i,t,s;return t=new be({props:{minWidth:"8em",$$slots:{input:[Ks],title:[Es]},$$scope:{ctx:e}}}),{key:n,first:null,c(){i=pe(),v(t.$$.fragment),this.first=i},m(l,a){E(l,i,a),k(t,l,a),s=!0},p(l,a){e=l;const r={};a[0]&1|a[1]&16&&(r.$$scope={dirty:a,ctx:e}),t.$set(r)},i(l){s||(p(t.$$.fragment,l),s=!0)},o(l){m(t.$$.fragment,l),s=!1},d(l){l&&M(i),y(t,l)}}}function Ls(n){let e=[],i=new Map,t,s,l=Object.entries(n[0].window.open.protocols);const a=r=>r[29];for(let r=0;r<l.length;r+=1){let o=Xt(n,l,r),f=a(o);i.set(f,e[r]=Jt(f,o))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=pe()},m(r,o){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,o);E(r,t,o),s=!0},p(r,o){o[0]&9&&(l=Object.entries(r[0].window.open.protocols),Z(),e=Be(e,o,a,1,r,l,i,t.parentNode,Pe,Jt,t,Xt),J())},i(r){if(!s){for(let o=0;o<l.length;o+=1)p(e[o]);s=!0}},o(r){for(let o=0;o<e.length;o+=1)m(e[o]);s=!1},d(r){for(let o=0;o<e.length;o+=1)e[o].d(r);r&&M(t)}}}function Ss(n){let e,i;return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"enable",settingValue:n[0].window.siyuan.enable}}),e.$on("changed",n[20]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.siyuan.enable),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Os(n){let e,i;return e=new P({props:{slot:"input",type:F.button,settingKey:"Reset",settingValue:n[2].settings.siyuan.open.desktop.text}}),e.$on("clicked",n[21]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p:G,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function As(n){let e,i;return e=new P({props:{slot:"input",type:F.button,settingKey:"Reset",settingValue:n[2].settings.siyuan.open.mobile.text}}),e.$on("clicked",n[22]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p:G,i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Ws(n){let e,i;return e=new P({props:{slot:"input",type:F.checkbox,settingKey:"focus",settingValue:n[0].window.siyuan.focus}}),e.$on("changed",n[23]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.siyuan.focus),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Bs(n){let e,i;return e=new P({props:{slot:"input",type:F.select,settingKey:"menuBar",settingValue:n[0].window.siyuan.editorType,options:[{key:ge.mobile,text:n[2].settings.siyuan.editorType.options.mobile},{key:ge.desktop,text:n[2].settings.siyuan.editorType.options.desktop}]}}),e.$on("changed",n[24]),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&1&&(l.settingValue=t[0].window.siyuan.editorType),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Vs(n){let e,i,t,s,l,a,r,o,f,d,g,b,_,u,c,w,O,U,j,R,N,D,C,z,h,I,x,V,X,K,Q,ue;return i=new Y({props:{title:n[2].settings.open.enable.window.title,text:n[2].settings.open.enable.window.description,$$slots:{input:[ws]},$$scope:{ctx:n}}}),s=new Y({props:{title:n[2].settings.open.editorHyperlink.title,text:n[2].settings.open.editorHyperlink.description,$$slots:{input:[$s]},$$scope:{ctx:n}}}),a=new Y({props:{title:n[2].settings.open.otherHyperlink.title,text:n[2].settings.open.otherHyperlink.description,$$slots:{input:[ks]},$$scope:{ctx:n}}}),o=new Y({props:{title:n[2].settings.window.width.title,text:n[2].settings.window.width.description,$$slots:{input:[ys]},$$scope:{ctx:n}}}),d=new Y({props:{title:n[2].settings.window.height.title,text:n[2].settings.window.height.description,$$slots:{input:[vs]},$$scope:{ctx:n}}}),b=new Y({props:{title:n[2].settings.window.top.title,text:n[2].settings.window.top.description,$$slots:{input:[Ts]},$$scope:{ctx:n}}}),u=new Y({props:{title:n[2].settings.window.menuBar.title,text:n[2].settings.window.menuBar.description,$$slots:{input:[Ms]},$$scope:{ctx:n}}}),O=new Ze({props:{title:n[2].settings.protocols.title,$$slots:{default:[Ls]},$$scope:{ctx:n}}}),R=new an({props:{minWidth:"16em",title:n[2].settings.open.shortcut.title,shortcut:n[0].window.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:n[2].settings.mouse.button,mouseButtonOptions:[{key:_e.Middle,text:n[2].settings.mouse.middle}]}}),R.$on("changed",n[3]),C=new Y({props:{title:n[2].settings.siyuan.enable.title,text:n[2].settings.siyuan.enable.description,$$slots:{input:[Ss]},$$scope:{ctx:n}}}),h=new Y({props:{title:n[2].settings.siyuan.open.desktop.title,text:n[2].settings.siyuan.open.desktop.description,$$slots:{input:[Os]},$$scope:{ctx:n}}}),x=new Y({props:{title:n[2].settings.siyuan.open.mobile.title,text:n[2].settings.siyuan.open.mobile.description,$$slots:{input:[As]},$$scope:{ctx:n}}}),X=new Y({props:{title:n[2].settings.siyuan.focus.title,text:n[2].settings.siyuan.focus.description,$$slots:{input:[Ws]},$$scope:{ctx:n}}}),Q=new Y({props:{title:n[2].settings.siyuan.editorType.title,text:n[2].settings.siyuan.editorType.description,$$slots:{input:[Bs]},$$scope:{ctx:n}}}),{c(){e=A("div"),v(i.$$.fragment),t=W(),v(s.$$.fragment),l=W(),v(a.$$.fragment),r=W(),v(o.$$.fragment),f=W(),v(d.$$.fragment),g=W(),v(b.$$.fragment),_=W(),v(u.$$.fragment),c=W(),w=A("div"),v(O.$$.fragment),U=W(),j=A("div"),v(R.$$.fragment),N=W(),D=A("div"),v(C.$$.fragment),z=W(),v(h.$$.fragment),I=W(),v(x.$$.fragment),V=W(),v(X.$$.fragment),K=W(),v(Q.$$.fragment),$(e,"data-type",n[6].window[0].name),L(e,"fn__none",n[6].window[0].key!==n[28]),$(w,"data-type",n[6].window[1].name),L(w,"fn__none",n[6].window[1].key!==n[28]),$(j,"data-type",n[6].window[2].name),L(j,"fn__none",n[6].window[2].key!==n[28]),$(D,"data-type",n[6].window[3].name),L(D,"fn__none",n[6].window[3].key!==n[28])},m(T,B){E(T,e,B),k(i,e,null),S(e,t),k(s,e,null),S(e,l),k(a,e,null),S(e,r),k(o,e,null),S(e,f),k(d,e,null),S(e,g),k(b,e,null),S(e,_),k(u,e,null),E(T,c,B),E(T,w,B),k(O,w,null),E(T,U,B),E(T,j,B),k(R,j,null),E(T,N,B),E(T,D,B),k(C,D,null),S(D,z),k(h,D,null),S(D,I),k(x,D,null),S(D,V),k(X,D,null),S(D,K),k(Q,D,null),ue=!0},p(T,B){const Je={};B[0]&1|B[1]&16&&(Je.$$scope={dirty:B,ctx:T}),i.$set(Je);const xe={};B[0]&1|B[1]&16&&(xe.$$scope={dirty:B,ctx:T}),s.$set(xe);const et={};B[0]&1|B[1]&16&&(et.$$scope={dirty:B,ctx:T}),a.$set(et);const tt={};B[0]&1|B[1]&16&&(tt.$$scope={dirty:B,ctx:T}),o.$set(tt);const nt={};B[0]&1|B[1]&16&&(nt.$$scope={dirty:B,ctx:T}),d.$set(nt);const it={};B[0]&1|B[1]&16&&(it.$$scope={dirty:B,ctx:T}),b.$set(it);const st={};B[0]&1|B[1]&16&&(st.$$scope={dirty:B,ctx:T}),u.$set(st),(!ue||B[0]&268435520)&&L(e,"fn__none",T[6].window[0].key!==T[28]);const lt={};B[0]&1|B[1]&16&&(lt.$$scope={dirty:B,ctx:T}),O.$set(lt),(!ue||B[0]&268435520)&&L(w,"fn__none",T[6].window[1].key!==T[28]);const ot={};B[0]&1&&(ot.shortcut=T[0].window.open.mouse),R.$set(ot),(!ue||B[0]&268435520)&&L(j,"fn__none",T[6].window[2].key!==T[28]);const rt={};B[0]&1|B[1]&16&&(rt.$$scope={dirty:B,ctx:T}),C.$set(rt);const at={};B[0]&2|B[1]&16&&(at.$$scope={dirty:B,ctx:T}),h.$set(at);const ut={};B[0]&2|B[1]&16&&(ut.$$scope={dirty:B,ctx:T}),x.$set(ut);const ft={};B[0]&1|B[1]&16&&(ft.$$scope={dirty:B,ctx:T}),X.$set(ft);const ct={};B[0]&1|B[1]&16&&(ct.$$scope={dirty:B,ctx:T}),Q.$set(ct),(!ue||B[0]&268435520)&&L(D,"fn__none",T[6].window[3].key!==T[28])},i(T){ue||(p(i.$$.fragment,T),p(s.$$.fragment,T),p(a.$$.fragment,T),p(o.$$.fragment,T),p(d.$$.fragment,T),p(b.$$.fragment,T),p(u.$$.fragment,T),p(O.$$.fragment,T),p(R.$$.fragment,T),p(C.$$.fragment,T),p(h.$$.fragment,T),p(x.$$.fragment,T),p(X.$$.fragment,T),p(Q.$$.fragment,T),ue=!0)},o(T){m(i.$$.fragment,T),m(s.$$.fragment,T),m(a.$$.fragment,T),m(o.$$.fragment,T),m(d.$$.fragment,T),m(b.$$.fragment,T),m(u.$$.fragment,T),m(O.$$.fragment,T),m(R.$$.fragment,T),m(C.$$.fragment,T),m(h.$$.fragment,T),m(x.$$.fragment,T),m(X.$$.fragment,T),m(Q.$$.fragment,T),ue=!1},d(T){T&&M(e),y(i),y(s),y(a),y(o),y(d),y(b),y(u),T&&M(c),T&&M(w),y(O),T&&M(U),T&&M(j),y(R),T&&M(N),T&&M(D),y(C),y(h),y(x),y(X),y(Q)}}}function Ns(n){let e,i;return e=new rn({props:{focus:js,tabs:n[6].window,$$slots:{default:[Vs,({focus:t})=>({28:t}),({focus:t})=>[t?268435456:0]]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&268435459|s[1]&16&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}function Rs(n){let e,i,t,s,l,a;return e=new Ue({props:{display:n[5][0].key===n[27],$$slots:{default:[fs]},$$scope:{ctx:n}}}),t=new Ue({props:{display:n[5][1].key===n[27],$$slots:{default:[bs]},$$scope:{ctx:n}}}),l=new Ue({props:{display:n[5][2].key===n[27],$$slots:{default:[Ns]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment),i=W(),v(t.$$.fragment),s=W(),v(l.$$.fragment)},m(r,o){k(e,r,o),E(r,i,o),k(t,r,o),E(r,s,o),k(l,r,o),a=!0},p(r,o){const f={};o[0]&134217728&&(f.display=r[5][0].key===r[27]),o[0]&1|o[1]&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const d={};o[0]&134217728&&(d.display=r[5][1].key===r[27]),o[0]&1|o[1]&16&&(d.$$scope={dirty:o,ctx:r}),t.$set(d);const g={};o[0]&134217728&&(g.display=r[5][2].key===r[27]),o[0]&3|o[1]&16&&(g.$$scope={dirty:o,ctx:r}),l.$set(g)},i(r){a||(p(e.$$.fragment,r),p(t.$$.fragment,r),p(l.$$.fragment,r),a=!0)},o(r){m(e.$$.fragment,r),m(t.$$.fragment,r),m(l.$$.fragment,r),a=!1},d(r){y(e,r),r&&M(i),y(t,r),r&&M(s),y(l,r)}}}function Cs(n){let e,i;return e=new Jn({props:{panels:n[5],focus:Ds,$$slots:{default:[Rs,({focus:t})=>({27:t}),({focus:t})=>[t?134217728:0]]},$$scope:{ctx:n}}}),{c(){v(e.$$.fragment)},m(t,s){k(e,t,s),i=!0},p(t,s){const l={};s[0]&134217731|s[1]&16&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){i||(p(e.$$.fragment,t),i=!0)},o(t){m(e.$$.fragment,t),i=!1},d(t){y(e,t)}}}let Ds=0,Fs=0,js=0;function Is(n,e,i){let{config:t}=e,{plugin:s}=e;const l=s.i18n;function a(){s.updateConfig(t)}function r(){s.siyuan.confirm(l.settings.generalSettings.reset.title,l.settings.generalSettings.reset.description,async()=>{await s.resetConfig(),globalThis.location.reload()})}var o=(K=>(K[K.general=0]="general",K[K.openTab=1]="openTab",K[K.openWindow=2]="openWindow",K))(o||{}),f=(K=>(K[K.general=0]="general",K[K.protocol=1]="protocol",K[K.shortcut=2]="shortcut",K[K.siyuan=3]="siyuan",K))(f||{});const d=[{key:0,text:l.settings.generalSettings.title,name:l.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:l.settings.openTab,name:l.settings.openTab,icon:"#iconBoth"},{key:2,text:l.settings.openWindow,name:l.settings.openWindow,icon:"#iconOpenWindow"}],g={tab:[{key:0,text:l.settings.general,name:l.settings.general,icon:"⚙"},{key:1,text:l.settings.protocol,name:l.settings.protocol,icon:"🌐"},{key:2,text:l.settings.shortcut,name:l.settings.shortcut,icon:"⌨"}],window:[{key:0,text:l.settings.general,name:l.settings.general,icon:"⚙"},{key:1,text:l.settings.protocol,name:l.settings.protocol,icon:"🌐"},{key:2,text:l.settings.shortcut,name:l.settings.shortcut,icon:"⌨"},{key:3,text:l.settings.siyuan.title,name:l.settings.siyuan.title,icon:"📝"}]},b=K=>{i(0,t.general.useragent=K.detail.value,t),a()},_=K=>{i(0,t.tab.enable=K.detail.value,t),a()},u=K=>{i(0,t.tab.open.targets.hyperlink.editor=K.detail.value,t),a()},c=K=>{i(0,t.tab.open.targets.hyperlink.other=K.detail.value,t),a()},w=(K,Q,ue,T)=>{i(0,Q[ue][1].enable=T.detail.value,t),a()},O=K=>{i(0,t.window.enable=K.detail.value,t),a()},U=K=>{i(0,t.window.open.targets.hyperlink.editor=K.detail.value,t),a()},j=K=>{i(0,t.window.open.targets.hyperlink.other=K.detail.value,t),a()},R=K=>{i(0,t.window.params.width=K.detail.value,t),a()},N=K=>{i(0,t.window.params.height=K.detail.value,t),a()},D=K=>{i(0,t.window.params.alwaysOnTop=K.detail.value,t),a()},C=K=>{switch(K.detail.value){case te.AutoHide:i(0,t.window.params.enableMenuBar=!0,t),i(0,t.window.params.autoHideMenuBar=!0,t);break;case te.AlwaysShow:i(0,t.window.params.enableMenuBar=!0,t),i(0,t.window.params.autoHideMenuBar=!1,t);break;case te.Disabled:i(0,t.window.params.enableMenuBar=!1,t);break}a()},z=(K,Q,ue,T)=>{i(0,Q[ue][1].enable=T.detail.value,t),a()},h=K=>{i(0,t.window.siyuan.enable=K.detail.value,t),a()},I=K=>s.openSiyuanDesktopWindow(K.detail.event),x=K=>s.openSiyuanMobileWindow(K.detail.event),V=K=>{i(0,t.window.siyuan.focus=K.detail.value,t),a()},X=K=>{i(0,t.window.siyuan.editorType=K.detail.value,t),a()};return n.$$set=K=>{"config"in K&&i(0,t=K.config),"plugin"in K&&i(1,s=K.plugin)},[t,s,l,a,r,d,g,b,_,u,c,w,O,U,j,R,N,D,C,z,h,I,x,V,X]}class Ps extends ae{constructor(e){super(),re(this,e,Is,Cs,oe,{config:0,plugin:1},null,[-1,-1])}}var he=(n=>(n.n="b3-tooltips__n",n.ne="b3-tooltips__ne",n.e="b3-tooltips__e",n.se="b3-tooltips__se",n.s="b3-tooltips__s",n.sw="b3-tooltips__sw",n.w="b3-tooltips__w",n.nw="b3-tooltips__nw",n))(he||{});function Hs(n){let e,i,t,s,l,a;return i=new me({props:{icon:n[0]}}),{c(){e=A("button"),v(i.$$.fragment),$(e,"aria-label",n[1]),$(e,"class",t="block__icon block__icon--show fn__flex-center b3-tooltips "+n[4]),L(e,"toolbar__item--active",n[2]),L(e,"toolbar__item--disabled",n[3])},m(r,o){E(r,e,o),k(i,e,null),s=!0,l||(a=H(e,"click",n[5]),l=!0)},p(r,[o]){const f={};o&1&&(f.icon=r[0]),i.$set(f),(!s||o&2)&&$(e,"aria-label",r[1]),(!s||o&16&&t!==(t="block__icon block__icon--show fn__flex-center b3-tooltips "+r[4]))&&$(e,"class",t),(!s||o&20)&&L(e,"toolbar__item--active",r[2]),(!s||o&24)&&L(e,"toolbar__item--disabled",r[3])},i(r){s||(p(i.$$.fragment,r),s=!0)},o(r){m(i.$$.fragment,r),s=!1},d(r){r&&M(e),y(i),l=!1,a()}}}function Us(n,e,i){let{icon:t}=e,{ariaLabel:s=void 0}=e,{active:l=!1}=e,{disabled:a=!1}=e,{tooltipsDirection:r=he.s}=e;function o(f){Fn.call(this,n,f)}return n.$$set=f=>{"icon"in f&&i(0,t=f.icon),"ariaLabel"in f&&i(1,s=f.ariaLabel),"active"in f&&i(2,l=f.active),"disabled"in f&&i(3,a=f.disabled),"tooltipsDirection"in f&&i(4,r=f.tooltipsDirection)},[t,s,l,a,r,o]}class we extends ae{constructor(e){super(),re(this,e,Us,Hs,oe,{icon:0,ariaLabel:1,active:2,disabled:3,tooltipsDirection:4})}}function zs(n){let e,i,t,s,l,a,r,o,f,d,g,b,_,u,c,w,O,U,j,R,N,D,C,z;return t=new we({props:{icon:"#iconLeft",ariaLabel:n[10].webview.goForwardOnePage,disabled:!n[3],tooltipsDirection:he.se}}),t.$on("click",n[11]),l=new we({props:{icon:"#iconRight",ariaLabel:n[10].webview.goBackOnePage,disabled:!n[4],tooltipsDirection:he.se}}),l.$on("click",n[12]),r=new we({props:{icon:n[5]?"#iconClose":"#iconRefresh",ariaLabel:n[5]?n[10].webview.stopLoadingThisPage:n[10].webview.reloadCurrentPage,tooltipsDirection:he.se}}),r.$on("click",n[13]),g=new we({props:{icon:"#iconLanguage",ariaLabel:n[10].webview.openWithDefaultProgram,tooltipsDirection:he.sw}}),g.$on("click",n[15]),_=new we({props:{icon:"#iconOpenWindow",ariaLabel:n[10].webview.openWithNewWindow,tooltipsDirection:he.sw}}),_.$on("click",n[16]),c=new we({props:{icon:n[2]?"#iconFullscreenExit":"#iconFullscreen",ariaLabel:n[2]?n[10].webview.exitFullscreen:n[10].webview.enterFullscreen,active:n[2],tooltipsDirection:he.sw}}),c.$on("click",n[17]),O=new we({props:{icon:"#iconBug",ariaLabel:n[7]?n[10].webview.closeDevTools:n[10].webview.openDevTools,active:n[7],tooltipsDirection:he.sw}}),O.$on("click",n[18]),{c(){e=A("div"),i=A("div"),v(t.$$.fragment),s=W(),v(l.$$.fragment),a=W(),v(r.$$.fragment),o=W(),f=A("input"),d=W(),v(g.$$.fragment),b=W(),v(_.$$.fragment),u=W(),v(c.$$.fragment),w=W(),v(O.$$.fragment),U=W(),j=A("div"),R=A("webview"),$(f,"class","b3-text-field fn__flex-1 address-field svelte-vxr0um"),$(f,"type","url"),$(i,"class","protyle-breadcrumb svelte-vxr0um"),bt(R.src,N=n[0])||$(R,"src",N),$(R,"useragent",n[1]),$(R,"class","fn__flex-1 svelte-vxr0um"),$(R,"allowpopups",""),L(R,"pointer-events-disable",n[9]),$(j,"class","protyle-preview svelte-vxr0um"),$(e,"class","fn__flex fn__flex-1 fn__flex-column content svelte-vxr0um"),L(e,"fullscreen",n[2])},m(h,I){E(h,e,I),S(e,i),k(t,i,null),S(i,s),k(l,i,null),S(i,a),k(r,i,null),S(i,o),S(i,f),fe(f,n[6]),S(i,d),k(g,i,null),S(i,b),k(_,i,null),S(i,u),k(c,i,null),S(i,w),k(O,i,null),S(e,U),S(e,j),S(j,R),n[22](R),D=!0,C||(z=[H(f,"change",n[14]),H(f,"input",n[21]),H(j,"mouseenter",n[23]),H(j,"mouseleave",n[24])],C=!0)},p(h,[I]){const x={};I&8&&(x.disabled=!h[3]),t.$set(x);const V={};I&16&&(V.disabled=!h[4]),l.$set(V);const X={};I&32&&(X.icon=h[5]?"#iconClose":"#iconRefresh"),I&32&&(X.ariaLabel=h[5]?h[10].webview.stopLoadingThisPage:h[10].webview.reloadCurrentPage),r.$set(X),I&64&&f.value!==h[6]&&fe(f,h[6]);const K={};I&4&&(K.icon=h[2]?"#iconFullscreenExit":"#iconFullscreen"),I&4&&(K.ariaLabel=h[2]?h[10].webview.exitFullscreen:h[10].webview.enterFullscreen),I&4&&(K.active=h[2]),c.$set(K);const Q={};I&128&&(Q.ariaLabel=h[7]?h[10].webview.closeDevTools:h[10].webview.openDevTools),I&128&&(Q.active=h[7]),O.$set(Q),(!D||I&1&&!bt(R.src,N=h[0]))&&$(R,"src",N),(!D||I&2)&&$(R,"useragent",h[1]),(!D||I&512)&&L(R,"pointer-events-disable",h[9]),(!D||I&4)&&L(e,"fullscreen",h[2])},i(h){D||(p(t.$$.fragment,h),p(l.$$.fragment,h),p(r.$$.fragment,h),p(g.$$.fragment,h),p(_.$$.fragment,h),p(c.$$.fragment,h),p(O.$$.fragment,h),D=!0)},o(h){m(t.$$.fragment,h),m(l.$$.fragment,h),m(r.$$.fragment,h),m(g.$$.fragment,h),m(_.$$.fragment,h),m(c.$$.fragment,h),m(O.$$.fragment,h),D=!1},d(h){h&&M(e),y(t),y(l),y(r),y(g),y(_),y(c),y(O),n[22](null),C=!1,ee(z)}}}function Gs(n,e,i){let{src:t}=e,{tab:s}=e,{plugin:l}=e,{useragent:a=l.useragent}=e;const r=l.i18n;let o=!1,f=!1,d=!1,g=!1,b=decodeURI(t),_=!1,u,c=!1;function w(){f&&(u==null||u.goBack())}function O(){f&&(u==null||u.goBack())}function U(){g?u==null||u.stop():u==null||u.reload()}function j(V){if(b)try{const X=new URL(b);u.loadURL(X.href)}catch{try{const K=new URL(`http://${b}`);u.loadURL(K.href.replace(/^http:/,""))}catch{l.siyuan.showMessage(`${l.name}:
URL <code class="fn__code">${b}</code> ${r.message.nonStandardURL}
`,void 0,"error",globalThis.crypto.randomUUID())}}}function R(){global.open(s.data.href,"_blank")}function N(V){l.openWindow(s.data.href,{x:V.screenX,y:V.screenY,title:s.data.title})}function D(){i(2,o=!o)}function C(){u&&(u.isDevToolsOpened()?(u.closeDevTools(),i(7,_=!1)):(u.openDevTools(),i(7,_=!0)))}Dn(()=>{u.addEventListener("load-commit",V=>{V.isMainFrame&&(i(6,b=decodeURI(V.url)),i(19,s.data.href=V.url,s)),i(3,f=u.canGoBack()),i(4,d=u.canGoForward())}),u.addEventListener("page-title-updated",V=>{i(19,s.data.title=V.title,s),s.tab.updateTitle(V.title),i(19,s.tab.headElement.ariaLabel=V.title,s)}),u.addEventListener("did-start-loading",V=>{i(5,g=!0)}),u.addEventListener("did-stop-loading",V=>{i(5,g=!1)}),u.addEventListener("devtools-open-url",V=>{l.openWebviewTab(V.url)}),u.addEventListener("context-menu",V=>{l.logger.debug(V),V.params.linkURL&&l.openWebviewTab(V.params.linkURL,V.params.titleText||V.params.linkText||V.params.altText)})});function z(){b=this.value,i(6,b)}function h(V){Xe[V?"unshift":"push"](()=>{u=V,i(8,u)})}const I=V=>i(9,c=V.button!==0),x=()=>i(9,c=!0);return n.$$set=V=>{"src"in V&&i(0,t=V.src),"tab"in V&&i(19,s=V.tab),"plugin"in V&&i(20,l=V.plugin),"useragent"in V&&i(1,a=V.useragent)},[t,a,o,f,d,g,b,_,u,c,r,w,O,U,j,R,N,D,C,s,l,z,h,I,x]}class qs extends ae{constructor(e){super(),re(this,e,Gs,zs,oe,{src:0,tab:19,plugin:20,useragent:1})}}const xt={general:{useragent:""},tab:{enable:!0,open:{mouse:{type:"click",button:_e.Left,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!0}}},protocols:{https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}}},window:{enable:!0,open:{mouse:{type:"mousedown",button:_e.Middle,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!1}}},protocols:{siyuan:{enable:!0,prefix:"siyuan://"},https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}},params:{width:800,height:600,frame:!0,alwaysOnTop:!0,autoHideMenuBar:!0,enableMenuBar:!0},siyuan:{enable:!0,focus:!1,editorType:ge.mobile}}},je=class extends ve.Plugin{constructor(i){super(i);de(this,"siyuan",ve);de(this,"logger");de(this,"SETTINGS_DIALOG_ID");de(this,"webview_tab");de(this,"config");de(this,"openTabEventListener",i=>{try{if(!this.config.tab.enable||!pt(i,this.config.tab.open.mouse))return;const t=this.parseHyperlinkMeta(i.target,this.config.tab.open.targets);if(t.valid&&(this.logger.info(t.href),this.isUrlSchemeAvailable(t.href,this.config.tab.open.protocols)))try{i.preventDefault(),i.stopPropagation(),this.openWebviewTab(t.href,t.title)}catch(s){this.logger.warn(s)}}catch(t){this.logger.warn(t)}});de(this,"openWindowEventListener",i=>{try{if(!this.config.window.enable||!pt(i,this.config.window.open.mouse))return;const t=this.parseHyperlinkMeta(i.target,this.config.window.open.targets);if(t.valid){if(this.logger.info(t.href),t.enabled&&this.isUrlSchemeAvailable(t.href,this.config.window.open.protocols))if(i.preventDefault(),i.stopPropagation(),t.href.startsWith("siyuan://")){if(this.config.window.siyuan.enable){const s=Ve(dt(this.config.window.siyuan.editorType),An(new URL(t.href)));this.openSiyuanWindow(s,i)}}else this.openWindow(t.href,{x:i.screenX,y:i.screenY,title:t.title||this.name})}else if(this.config.window.siyuan.enable){const s=On(i);if(s){i.preventDefault(),i.stopPropagation();const l=Ve(dt(this.config.window.siyuan.editorType),{id:s,focus:this.config.window.siyuan.focus});this.openSiyuanWindow(l,i)}}}catch(t){this.logger.warn(t)}});this.logger=new gn(this.name),this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`;const t=this;this.webview_tab=this.addTab({type:"-webview-tag",init(){const s=this;new qs({target:s.element,props:{src:s.data.href,tab:s,plugin:t}})}})}onload(){this.loadData(je.GLOBAL_CONFIG_NAME).then(i=>{this.config=De(xt,i||{})}).catch(i=>this.logger.error(i)).finally(()=>{ze()&&_t()&&globalThis.addEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.addEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0)})}onLayoutReady(){}onunload(){ze()&&_t()&&globalThis.removeEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.removeEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0)}openSetting(){const i=this;globalThis.crypto.randomUUID();const t=new ve.Dialog({title:i.name,content:`<div id="${i.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:gt()?"92vw":"720px",height:gt()?void 0:"640px"});new Ps({target:t.element.querySelector(`#${i.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(De(xt))}async updateConfig(i){return i&&i!==this.config&&(this.config=i),this.saveData(je.GLOBAL_CONFIG_NAME,this.config)}get useragent(){return this.config.general.useragent||global.navigator.userAgent}openWebviewTab(i,t,s="iconLanguage"){ve.openTab({app:this.app,custom:{icon:s,title:t||this.name,fn:this.webview_tab,data:{href:i,title:t||this.name}}})}openWindow(i,t={x:0,y:0,title:null},s={defaultFontSize:globalThis.siyuan.config.editor.fontSize,defaultFontFamily:{standard:globalThis.siyuan.config.editor.fontFamily}}){try{const l=new URL(i),a=rs(l,this.config.window.params,t,s,this)}catch(l){this.logger.warn(l)}}openSiyuanDesktopWindow(i,t){const s={x:(i==null?void 0:i.screenX)|0,y:(i==null?void 0:i.screenY)|0,title:"desktop",alwaysOnTop:!1,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(t||Ve(Ge.desktop).href,s)}openSiyuanMobileWindow(i,t){const s={x:(i==null?void 0:i.screenX)|0,y:(i==null?void 0:i.screenY)|0,title:"mobile",alwaysOnTop:!0,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(t||Ve(Ge.mobile).href,s)}openSiyuanWindow(i,t){switch(this.config.window.siyuan.editorType){case ge.desktop:this.openSiyuanDesktopWindow(t,i.href);break;case ge.mobile:this.openSiyuanMobileWindow(t,i.href);break}}isUrlSchemeAvailable(i,t){for(const s in t){const l=t[s];if(l.enable&&i.startsWith(l.prefix))return!0}return!1}parseHyperlinkMeta(i,t){const s={valid:!1,enabled:!1,href:void 0,title:void 0};switch(i.localName){case"a":s.valid=!0,s.enabled=t.hyperlink.other.enable,s.href=i.href,s.title=i.title||i.innerText;break;case"span":/\ba\b/.test(i.dataset.type)&&(s.valid=!0,s.enabled=t.hyperlink.editor.enable,s.href=i.dataset.href,s.title=i.dataset.title||i.innerText);break}return s}};let Ce=je;de(Ce,"GLOBAL_CONFIG_NAME","global-config");module.exports=Ce;
