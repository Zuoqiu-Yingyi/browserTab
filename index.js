"use strict";var ei=Object.defineProperty;var ti=(t,e,n)=>e in t?ei(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Y=(t,e,n)=>(ti(t,typeof e!="symbol"?e+"":e,n),n);const ge=require("siyuan"),Et=Zo(),ht=si();ri();const Cn=ii();function ni(){return!!globalThis.require}function oi(){return!!globalThis.process}function Zo(){return oi()&&ni()}function si(){switch(ge.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function ii(){switch(ge.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function ri(){switch(ge.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}class ai{constructor(e,n=!0){this.label=e,this.collapsed=n}stdout(e,n,...o){const s=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${e.name.toUpperCase()}\x1B[0m>`;if(this.collapsed?globalThis.console.groupCollapsed(s):globalThis.console.group(s),n)for(const i of o)Array.isArray(i)?e(...i):e(i);else e(...o);globalThis.console.trace(),globalThis.console.groupEnd()}dir(...e){this.stdout(globalThis.console.dir,!1,...e)}dirs(...e){this.stdout(globalThis.console.dir,!0,...e)}table(...e){this.stdout(globalThis.console.table,!1,...e)}tables(...e){this.stdout(globalThis.console.table,!0,...e)}debug(...e){this.stdout(globalThis.console.debug,!1,...e)}debugs(...e){this.stdout(globalThis.console.debug,!0,...e)}info(...e){this.stdout(globalThis.console.info,!1,...e)}infos(...e){this.stdout(globalThis.console.info,!0,...e)}log(...e){this.stdout(globalThis.console.log,!1,...e)}logs(...e){this.stdout(globalThis.console.log,!0,...e)}warn(...e){this.stdout(globalThis.console.warn,!1,...e)}warns(...e){this.stdout(globalThis.console.warn,!0,...e)}error(...e){this.stdout(globalThis.console.error,!1,...e)}errors(...e){this.stdout(globalThis.console.error,!0,...e)}}function Nn(t,e){return t.button===e.button&&t.type===e.type&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey&&t.shiftKey===e.shiftKey}function li(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ui=function(e){return ci(e)&&!fi(e)};function ci(t){return!!t&&typeof t=="object"}function fi(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||di(t)}var pi=typeof Symbol=="function"&&Symbol.for,hi=pi?Symbol.for("react.element"):60103;function di(t){return t.$$typeof===hi}function mi(t){return Array.isArray(t)?[]:{}}function yt(t,e){return e.clone!==!1&&e.isMergeableObject(t)?tt(mi(t),t,e):t}function gi(t,e,n){return t.concat(e).map(function(o){return yt(o,n)})}function bi(t,e){if(!e.customMerge)return tt;var n=e.customMerge(t);return typeof n=="function"?n:tt}function _i(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function Rn(t){return Object.keys(t).concat(_i(t))}function xo(t,e){try{return e in t}catch{return!1}}function yi(t,e){return xo(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function ki(t,e,n){var o={};return n.isMergeableObject(t)&&Rn(t).forEach(function(s){o[s]=yt(t[s],n)}),Rn(e).forEach(function(s){yi(t,s)||(xo(t,s)&&n.isMergeableObject(e[s])?o[s]=bi(s,n)(t[s],e[s],n):o[s]=yt(e[s],n))}),o}function tt(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||gi,n.isMergeableObject=n.isMergeableObject||ui,n.cloneUnlessOtherwiseSpecified=yt;var o=Array.isArray(e),s=Array.isArray(t),i=o===s;return i?o?n.arrayMerge(t,e,n):ki(t,e,n):yt(e,n)}tt.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(o,s){return tt(o,s,n)},{})};var wi=tt,Si=wi;const Ti=li(Si);function Pt(...t){return Ti.all(t)}const Re={id:/^\d{14}-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}-[0-9a-z]{7})/,snippet:/^\d{14}-[0-9a-z]{7}$/,created:/^\d{10}$/,history:/[\/\\]history[\/\\]\d{4}-\d{2}-\d{2}-\d{6}-(clean|update|delete|format|sync|replace)([\/\\]\d{14}-[0-9a-z]{7})+\.sy$/,snapshot:/^[0-9a-f]{40}$/,shorthand:/^\d{13}$/};function $i(t){const e=t.composedPath();for(let n=0;n<e.length;++n){const o=e[n].dataset;if(o)switch(!0){case(o.nodeId&&Re.id.test(o.nodeId)):return o.nodeId;case(o.id&&Re.id.test(o.id)):return o.id;case(o.oid&&Re.id.test(o.oid)):return o.oid;case(o.rootId&&Re.id.test(o.rootId)):return o.rootId}}}var ye=(t=>(t[t.window=0]="window",t[t.app=1]="app",t[t.desktop=2]="desktop",t[t.mobile=3]="mobile",t))(ye||{}),sn=(t=>(t.window="/stage/build/app/window.html",t.app="/stage/build/app",t.desktop="/stage/build/desktop",t.mobile="/stage/build/mobile",t))(sn||{});function Jt(t){switch(t){case ye.window:return"/stage/build/app/window.html";case ye.app:return"/stage/build/app";case ye.desktop:return"/stage/build/desktop";case ye.mobile:return"/stage/build/mobile"}}function dt(t,e,n=globalThis.origin){const o=new URL(n);return o.pathname=t,e!=null&&e.id&&o.searchParams.set("id",e.id),(e==null?void 0:e.focus)!==void 0&&o.searchParams.set("focus",e.focus?"1":"0"),e!=null&&e.url&&o.searchParams.set("url",e.url),o}function Dn(t){return Re.url.test(t.href)?{id:Re.url.exec(t.href)[1],focus:t.searchParams.get("focus")==="1"}:null}function vi(t){return Re.id.test(t.searchParams.get("id"))?{id:t.searchParams.get("id"),focus:t.searchParams.get("focus")==="1"}:null}function es(t,e=!0){switch(t.startsWith("/")&&(t=t.substring(1)),!0){case t.startsWith("stage/"):return!e;case t.startsWith("appearance/"):case t.startsWith("export/"):case t.startsWith("history/"):case t.startsWith("assets/"):case t.startsWith("emojies/"):case t.startsWith("plugins/"):case t.startsWith("public/"):case t.startsWith("snippets/"):case t.startsWith("templates/"):case t.startsWith("widgets/"):return!0;default:return!1}}var Ei=Object.defineProperty,Oi=(t,e,n)=>e in t?Ei(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ne=(t,e,n)=>(Oi(t,typeof e!="symbol"?e+"":e,n),n);const Ai=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Bi=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Ci=/^\s*["[{]|^\s*-?\d[\d.]{0,14}\s*$/;function Ni(t,e){if(t==="__proto__"||t==="constructor"&&e&&typeof e=="object"&&"prototype"in e){Ri(t);return}return e}function Ri(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}function Di(t,e={}){if(typeof t!="string")return t;const n=t.trim();if(t[0]==='"'&&t[t.length-1]==='"')return n.slice(1,-1);if(n.length<=9){const o=n.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!Ci.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(Ai.test(t)||Bi.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,Ni)}return JSON.parse(t)}catch(o){if(e.strict)throw o;return t}}const Pi=/#/g,Mi=/&/g,Li=/=/g,bn=/\+/g,Ii=/%5e/gi,Wi=/%60/gi,ji=/%7c/gi,Fi=/%20/gi;function qi(t){return encodeURI(""+t).replace(ji,"|")}function rn(t){return qi(typeof t=="string"?t:JSON.stringify(t)).replace(bn,"%2B").replace(Fi,"+").replace(Pi,"%23").replace(Mi,"%26").replace(Wi,"`").replace(Ii,"^")}function Yt(t){return rn(t).replace(Li,"%3D")}function ts(t=""){try{return decodeURIComponent(""+t)}catch{return""+t}}function Ui(t){return ts(t.replace(bn," "))}function Ki(t){return ts(t.replace(bn," "))}function Hi(t=""){const e={};t[0]==="?"&&(t=t.slice(1));for(const n of t.split("&")){const o=n.match(/([^=]+)=?(.*)/)||[];if(o.length<2)continue;const s=Ui(o[1]);if(s==="__proto__"||s==="constructor")continue;const i=Ki(o[2]||"");e[s]===void 0?e[s]=i:Array.isArray(e[s])?e[s].push(i):e[s]=[e[s],i]}return e}function Vi(t,e){return(typeof e=="number"||typeof e=="boolean")&&(e=String(e)),e?Array.isArray(e)?e.map(n=>`${Yt(t)}=${rn(n)}`).join("&"):`${Yt(t)}=${rn(e)}`:Yt(t)}function zi(t){return Object.keys(t).filter(e=>t[e]!==void 0).map(e=>Vi(e,t[e])).filter(Boolean).join("&")}const Gi=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,Ji=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,Yi=/^([/\\]\s*){2,}[^/\\]/;function ns(t,e={}){return typeof e=="boolean"&&(e={acceptRelative:e}),e.strict?Gi.test(t):Ji.test(t)||(e.acceptRelative?Yi.test(t):!1)}const Xi=/\/$|\/\?/;function an(t="",e=!1){return e?Xi.test(t):t.endsWith("/")}function Qi(t="",e=!1){if(!e)return(an(t)?t.slice(0,-1):t)||"/";if(!an(t,!0))return t||"/";const[n,...o]=t.split("?");return(n.slice(0,-1)||"/")+(o.length>0?`?${o.join("?")}`:"")}function Zi(t="",e=!1){if(!e)return t.endsWith("/")?t:t+"/";if(an(t,!0))return t||"/";const[n,...o]=t.split("?");return n+"/"+(o.length>0?`?${o.join("?")}`:"")}function xi(t,e){if(tr(e)||ns(t))return t;const n=Qi(e);return t.startsWith(n)?t:sr(n,t)}function er(t,e){const n=os(t),o={...Hi(n.search),...e};return n.search=zi(o),ir(n)}function tr(t){return!t||t==="/"}function nr(t){return t&&t!=="/"}const or=/^\.?\//;function sr(t,...e){let n=t||"";for(const o of e.filter(s=>nr(s)))if(n){const s=o.replace(or,"");n=Zi(n)+s}else n=o;return n}function os(t="",e){const n=t.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/);if(n){const[,p,d=""]=n;return{protocol:p,pathname:d,href:p+d,auth:"",host:"",search:"",hash:""}}if(!ns(t,{acceptRelative:!0}))return e?os(e+t):Pn(t);const[,o="",s,i=""]=t.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,r="",a=""]=i.match(/([^#/?]*)(.*)?/)||[],{pathname:l,search:c,hash:u}=Pn(a.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:o,auth:s?s.slice(0,Math.max(0,s.length-1)):"",host:r,pathname:l,search:c,hash:u}}function Pn(t=""){const[e="",n="",o=""]=(t.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:e,search:n,hash:o}}function ir(t){const e=t.pathname||"",n=t.search?(t.search.startsWith("?")?"":"?")+t.search:"",o=t.hash||"",s=t.auth?t.auth+"@":"",i=t.host||"";return(t.protocol?t.protocol+"//":"")+s+i+e+n+o}class rr extends Error{constructor(e,n){super(e,n),this.name="FetchError",n!=null&&n.cause&&!this.cause&&(this.cause=n.cause)}}function ar(t){var e,n,o,s,i;const r=((e=t.error)==null?void 0:e.message)||((n=t.error)==null?void 0:n.toString())||"",a=((o=t.request)==null?void 0:o.method)||((s=t.options)==null?void 0:s.method)||"GET",l=((i=t.request)==null?void 0:i.url)||String(t.request)||"/",c=`[${a}] ${JSON.stringify(l)}`,u=t.response?`${t.response.status} ${t.response.statusText}`:"<no response>",p=`${c}: ${u}${r?` ${r}`:""}`,d=new rr(p,t.error?{cause:t.error}:void 0);for(const h of["request","options","response"])Object.defineProperty(d,h,{get(){return t[h]}});for(const[h,f]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(d,h,{get(){return t.response&&t.response[f]}});return d}const lr=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function Mn(t="GET"){return lr.has(t.toUpperCase())}function ur(t){if(t===void 0)return!1;const e=typeof t;return e==="string"||e==="number"||e==="boolean"||e===null?!0:e!=="object"?!1:Array.isArray(t)?!0:t.buffer?!1:t.constructor&&t.constructor.name==="Object"||typeof t.toJSON=="function"}const cr=new Set(["image/svg","application/xml","application/xhtml","application/html"]),fr=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function pr(t=""){if(!t)return"json";const e=t.split(";").shift()||"";return fr.test(e)?"json":cr.has(e)||e.startsWith("text/")?"text":"blob"}function hr(t,e,n=globalThis.Headers){const o={...e,...t};if(e!=null&&e.params&&t!=null&&t.params&&(o.params={...e==null?void 0:e.params,...t==null?void 0:t.params}),e!=null&&e.query&&t!=null&&t.query&&(o.query={...e==null?void 0:e.query,...t==null?void 0:t.query}),e!=null&&e.headers&&t!=null&&t.headers){o.headers=new n((e==null?void 0:e.headers)||{});for(const[s,i]of new n((t==null?void 0:t.headers)||{}))o.headers.set(s,i)}return o}const dr=new Set([408,409,425,429,500,502,503,504]),mr=new Set([101,204,205,304]);function ss(t={}){const{fetch:e=globalThis.fetch,Headers:n=globalThis.Headers,AbortController:o=globalThis.AbortController}=t;async function s(a){const l=a.error&&a.error.name==="AbortError"&&!a.options.timeout||!1;if(a.options.retry!==!1&&!l){let u;typeof a.options.retry=="number"?u=a.options.retry:u=Mn(a.options.method)?0:1;const p=a.response&&a.response.status||500;if(u>0&&(Array.isArray(a.options.retryStatusCodes)?a.options.retryStatusCodes.includes(p):dr.has(p))){const d=a.options.retryDelay||0;return d>0&&await new Promise(h=>setTimeout(h,d)),i(a.request,{...a.options,retry:u-1,timeout:a.options.timeout})}}const c=ar(a);throw Error.captureStackTrace&&Error.captureStackTrace(c,i),c}const i=async function(a,l={}){var c;const u={request:a,options:hr(l,t.defaults,n),response:void 0,error:void 0};if(u.options.method=(c=u.options.method)==null?void 0:c.toUpperCase(),u.options.onRequest&&await u.options.onRequest(u),typeof u.request=="string"&&(u.options.baseURL&&(u.request=xi(u.request,u.options.baseURL)),(u.options.query||u.options.params)&&(u.request=er(u.request,{...u.options.params,...u.options.query}))),u.options.body&&Mn(u.options.method)&&(ur(u.options.body)?(u.options.body=typeof u.options.body=="string"?u.options.body:JSON.stringify(u.options.body),u.options.headers=new n(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json")):("pipeTo"in u.options.body&&typeof u.options.body.pipeTo=="function"||typeof u.options.body.pipe=="function")&&("duplex"in u.options||(u.options.duplex="half"))),!u.options.signal&&u.options.timeout){const p=new o;setTimeout(()=>p.abort(),u.options.timeout),u.options.signal=p.signal}try{u.response=await e(u.request,u.options)}catch(p){return u.error=p,u.options.onRequestError&&await u.options.onRequestError(u),await s(u)}if(u.response.body&&!mr.has(u.response.status)&&u.options.method!=="HEAD"){const p=(u.options.parseResponse?"json":u.options.responseType)||pr(u.response.headers.get("content-type")||"");switch(p){case"json":{const d=await u.response.text(),h=u.options.parseResponse||Di;u.response._data=h(d);break}case"stream":{u.response._data=u.response.body;break}default:u.response._data=await u.response[p]()}}return u.options.onResponse&&await u.options.onResponse(u),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await u.options.onResponseError(u),await s(u)):u.response},r=async function(a,l){return(await i(a,l))._data};return r.raw=i,r.native=(...a)=>e(...a),r.create=(a={})=>ss({...t,defaults:{...t.defaults,...a}}),r}const _n=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),gr=_n.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),br=_n.Headers,_r=_n.AbortController,yr=ss({fetch:gr,Headers:br,AbortController:_r});class kr extends Error{constructor(e){super(e.statusText),Ne(this,"status"),this.response=e,this.status=e.status}}class Ln extends Error{constructor(e,n){super(e.msg),Ne(this,"code"),this.body=e,this.response=n,this.code=e.code}}function Ae(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function In(t,e){for(var n="",o=0,s=-1,i=0,r,a=0;a<=t.length;++a){if(a<t.length)r=t.charCodeAt(a);else{if(r===47)break;r=47}if(r===47){if(!(s===a-1||i===1))if(s!==a-1&&i===2){if(n.length<2||o!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",o=0):(n=n.slice(0,l),o=n.length-1-n.lastIndexOf("/")),s=a,i=0;continue}}else if(n.length===2||n.length===1){n="",o=0,s=a,i=0;continue}}e&&(n.length>0?n+="/..":n="..",o=2)}else n.length>0?n+="/"+t.slice(s+1,a):n=t.slice(s+1,a),o=a-s-1;s=a,i=0}else r===46&&i!==-1?++i:i=-1}return n}function wr(t,e){var n=e.dir||e.root,o=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+o:n+t+o:o}var bt={resolve:function(){for(var t="",e=!1,n,o=arguments.length-1;o>=-1&&!e;o--){var s;o>=0?s=arguments[o]:(n===void 0&&(n=process.cwd()),s=n),Ae(s),s.length!==0&&(t=s+"/"+t,e=s.charCodeAt(0)===47)}return t=In(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(Ae(t),t.length===0)return".";var e=t.charCodeAt(0)===47,n=t.charCodeAt(t.length-1)===47;return t=In(t,!e),t.length===0&&!e&&(t="."),t.length>0&&n&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return Ae(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var n=arguments[e];Ae(n),n.length>0&&(t===void 0?t=n:t+="/"+n)}return t===void 0?".":bt.normalize(t)},relative:function(t,e){if(Ae(t),Ae(e),t===e||(t=bt.resolve(t),e=bt.resolve(e),t===e))return"";for(var n=1;n<t.length&&t.charCodeAt(n)===47;++n);for(var o=t.length,s=o-n,i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var r=e.length,a=r-i,l=s<a?s:a,c=-1,u=0;u<=l;++u){if(u===l){if(a>l){if(e.charCodeAt(i+u)===47)return e.slice(i+u+1);if(u===0)return e.slice(i+u)}else s>l&&(t.charCodeAt(n+u)===47?c=u:u===0&&(c=0));break}var p=t.charCodeAt(n+u),d=e.charCodeAt(i+u);if(p!==d)break;p===47&&(c=u)}var h="";for(u=n+c+1;u<=o;++u)(u===o||t.charCodeAt(u)===47)&&(h.length===0?h+="..":h+="/..");return h.length>0?h+e.slice(i+c):(i+=c,e.charCodeAt(i)===47&&++i,e.slice(i))},_makeLong:function(t){return t},dirname:function(t){if(Ae(t),t.length===0)return".";for(var e=t.charCodeAt(0),n=e===47,o=-1,s=!0,i=t.length-1;i>=1;--i)if(e=t.charCodeAt(i),e===47){if(!s){o=i;break}}else s=!1;return o===-1?n?"/":".":n&&o===1?"//":t.slice(0,o)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Ae(t);var n=0,o=-1,s=!0,i;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var r=e.length-1,a=-1;for(i=t.length-1;i>=0;--i){var l=t.charCodeAt(i);if(l===47){if(!s){n=i+1;break}}else a===-1&&(s=!1,a=i+1),r>=0&&(l===e.charCodeAt(r)?--r===-1&&(o=i):(r=-1,o=a))}return n===o?o=a:o===-1&&(o=t.length),t.slice(n,o)}else{for(i=t.length-1;i>=0;--i)if(t.charCodeAt(i)===47){if(!s){n=i+1;break}}else o===-1&&(s=!1,o=i+1);return o===-1?"":t.slice(n,o)}},extname:function(t){Ae(t);for(var e=-1,n=0,o=-1,s=!0,i=0,r=t.length-1;r>=0;--r){var a=t.charCodeAt(r);if(a===47){if(!s){n=r+1;break}continue}o===-1&&(s=!1,o=r+1),a===46?e===-1?e=r:i!==1&&(i=1):e!==-1&&(i=-1)}return e===-1||o===-1||i===0||i===1&&e===o-1&&e===n+1?"":t.slice(e,o)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return wr("/",t)},parse:function(t){Ae(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var n=t.charCodeAt(0),o=n===47,s;o?(e.root="/",s=1):s=0;for(var i=-1,r=0,a=-1,l=!0,c=t.length-1,u=0;c>=s;--c){if(n=t.charCodeAt(c),n===47){if(!l){r=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===46?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}return i===-1||a===-1||u===0||u===1&&i===a-1&&i===r+1?a!==-1&&(r===0&&o?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(r,a)):(r===0&&o?(e.name=t.slice(1,i),e.base=t.slice(1,a)):(e.name=t.slice(r,i),e.base=t.slice(r,a)),e.ext=t.slice(i,a)),r>0?e.dir=t.slice(0,r-1):o&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};bt.posix=bt;function is(t,e){return function(){return t.apply(e,arguments)}}const{toString:Sr}=Object.prototype,{getPrototypeOf:yn}=Object,Ft=(t=>e=>{const n=Sr.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ce=t=>(t=t.toLowerCase(),e=>Ft(e)===t),qt=t=>e=>typeof e===t,{isArray:ot}=Array,kt=qt("undefined");function Tr(t){return t!==null&&!kt(t)&&t.constructor!==null&&!kt(t.constructor)&&ke(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const rs=Ce("ArrayBuffer");function $r(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&rs(t.buffer),e}const vr=qt("string"),ke=qt("function"),as=qt("number"),Ut=t=>t!==null&&typeof t=="object",Er=t=>t===!0||t===!1,Bt=t=>{if(Ft(t)!=="object")return!1;const e=yn(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Or=Ce("Date"),Ar=Ce("File"),Br=Ce("Blob"),Cr=Ce("FileList"),Nr=t=>Ut(t)&&ke(t.pipe),Rr=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ke(t.append)&&((e=Ft(t))==="formdata"||e==="object"&&ke(t.toString)&&t.toString()==="[object FormData]"))},Dr=Ce("URLSearchParams"),Pr=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Tt(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let o,s;if(typeof t!="object"&&(t=[t]),ot(t))for(o=0,s=t.length;o<s;o++)e.call(null,t[o],o,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),r=i.length;let a;for(o=0;o<r;o++)a=i[o],e.call(null,t[a],a,t)}}function ls(t,e){e=e.toLowerCase();const n=Object.keys(t);let o=n.length,s;for(;o-- >0;)if(s=n[o],e===s.toLowerCase())return s;return null}const us=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),cs=t=>!kt(t)&&t!==us;function ln(){const{caseless:t}=cs(this)&&this||{},e={},n=(o,s)=>{const i=t&&ls(e,s)||s;Bt(e[i])&&Bt(o)?e[i]=ln(e[i],o):Bt(o)?e[i]=ln({},o):ot(o)?e[i]=o.slice():e[i]=o};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&Tt(arguments[o],n);return e}const Mr=(t,e,n,{allOwnKeys:o}={})=>(Tt(e,(s,i)=>{n&&ke(s)?t[i]=is(s,n):t[i]=s},{allOwnKeys:o}),t),Lr=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ir=(t,e,n,o)=>{t.prototype=Object.create(e.prototype,o),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Wr=(t,e,n,o)=>{let s,i,r;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)r=s[i],(!o||o(r,t,e))&&!a[r]&&(e[r]=t[r],a[r]=!0);t=n!==!1&&yn(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},jr=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const o=t.indexOf(e,n);return o!==-1&&o===n},Fr=t=>{if(!t)return null;if(ot(t))return t;let e=t.length;if(!as(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},qr=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&yn(Uint8Array)),Ur=(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=n.next())&&!o.done;){const s=o.value;e.call(t,s[0],s[1])}},Kr=(t,e)=>{let n;const o=[];for(;(n=t.exec(e))!==null;)o.push(n);return o},Hr=Ce("HTMLFormElement"),Vr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,n,o){return n.toUpperCase()+o}),Wn=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),zr=Ce("RegExp"),fs=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),o={};Tt(n,(s,i)=>{let r;(r=e(s,i,t))!==!1&&(o[i]=r||s)}),Object.defineProperties(t,o)},Gr=t=>{fs(t,(e,n)=>{if(ke(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=t[n];if(ke(o)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Jr=(t,e)=>{const n={},o=s=>{s.forEach(i=>{n[i]=!0})};return ot(t)?o(t):o(String(t).split(e)),n},Yr=()=>{},Xr=(t,e)=>(t=+t,Number.isFinite(t)?t:e),Xt="abcdefghijklmnopqrstuvwxyz",jn="0123456789",ps={DIGIT:jn,ALPHA:Xt,ALPHA_DIGIT:Xt+Xt.toUpperCase()+jn},Qr=(t=16,e=ps.ALPHA_DIGIT)=>{let n="";const{length:o}=e;for(;t--;)n+=e[Math.random()*o|0];return n};function Zr(t){return!!(t&&ke(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const xr=t=>{const e=new Array(10),n=(o,s)=>{if(Ut(o)){if(e.indexOf(o)>=0)return;if(!("toJSON"in o)){e[s]=o;const i=ot(o)?[]:{};return Tt(o,(r,a)=>{const l=n(r,s+1);!kt(l)&&(i[a]=l)}),e[s]=void 0,i}}return o};return n(t,0)},ea=Ce("AsyncFunction"),ta=t=>t&&(Ut(t)||ke(t))&&ke(t.then)&&ke(t.catch),S={isArray:ot,isArrayBuffer:rs,isBuffer:Tr,isFormData:Rr,isArrayBufferView:$r,isString:vr,isNumber:as,isBoolean:Er,isObject:Ut,isPlainObject:Bt,isUndefined:kt,isDate:Or,isFile:Ar,isBlob:Br,isRegExp:zr,isFunction:ke,isStream:Nr,isURLSearchParams:Dr,isTypedArray:qr,isFileList:Cr,forEach:Tt,merge:ln,extend:Mr,trim:Pr,stripBOM:Lr,inherits:Ir,toFlatObject:Wr,kindOf:Ft,kindOfTest:Ce,endsWith:jr,toArray:Fr,forEachEntry:Ur,matchAll:Kr,isHTMLForm:Hr,hasOwnProperty:Wn,hasOwnProp:Wn,reduceDescriptors:fs,freezeMethods:Gr,toObjectSet:Jr,toCamelCase:Vr,noop:Yr,toFiniteNumber:Xr,findKey:ls,global:us,isContextDefined:cs,ALPHABET:ps,generateString:Qr,isSpecCompliantForm:Zr,toJSONObject:xr,isAsyncFn:ea,isThenable:ta};function U(t,e,n,o,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),o&&(this.request=o),s&&(this.response=s)}S.inherits(U,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:S.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const hs=U.prototype,ds={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{ds[t]={value:t}});Object.defineProperties(U,ds);Object.defineProperty(hs,"isAxiosError",{value:!0});U.from=(t,e,n,o,s,i)=>{const r=Object.create(hs);return S.toFlatObject(t,r,function(a){return a!==Error.prototype},a=>a!=="isAxiosError"),U.call(r,t.message,e,n,o,s),r.cause=t,r.name=t.name,i&&Object.assign(r,i),r};const na=null;function un(t){return S.isPlainObject(t)||S.isArray(t)}function ms(t){return S.endsWith(t,"[]")?t.slice(0,-2):t}function Fn(t,e,n){return t?t.concat(e).map(function(o,s){return o=ms(o),!n&&s?"["+o+"]":o}).join(n?".":""):e}function oa(t){return S.isArray(t)&&!t.some(un)}const sa=S.toFlatObject(S,{},null,function(t){return/^is[A-Z]/.test(t)});function Kt(t,e,n){if(!S.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=S.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(h,f){return!S.isUndefined(f[h])});const o=n.metaTokens,s=n.visitor||c,i=n.dots,r=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&S.isSpecCompliantForm(e);if(!S.isFunction(s))throw new TypeError("visitor must be a function");function l(h){if(h===null)return"";if(S.isDate(h))return h.toISOString();if(!a&&S.isBlob(h))throw new U("Blob is not supported. Use a Buffer instead.");return S.isArrayBuffer(h)||S.isTypedArray(h)?a&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function c(h,f,m){let b=h;if(h&&!m&&typeof h=="object"){if(S.endsWith(f,"{}"))f=o?f:f.slice(0,-2),h=JSON.stringify(h);else if(S.isArray(h)&&oa(h)||(S.isFileList(h)||S.endsWith(f,"[]"))&&(b=S.toArray(h)))return f=ms(f),b.forEach(function(g,W){!(S.isUndefined(g)||g===null)&&e.append(r===!0?Fn([f],W,i):r===null?f:f+"[]",l(g))}),!1}return un(h)?!0:(e.append(Fn(m,f,i),l(h)),!1)}const u=[],p=Object.assign(sa,{defaultVisitor:c,convertValue:l,isVisitable:un});function d(h,f){if(!S.isUndefined(h)){if(u.indexOf(h)!==-1)throw Error("Circular reference detected in "+f.join("."));u.push(h),S.forEach(h,function(m,b){(!(S.isUndefined(m)||m===null)&&s.call(e,m,S.isString(b)?b.trim():b,f,p))===!0&&d(m,f?f.concat(b):[b])}),u.pop()}}if(!S.isObject(t))throw new TypeError("data must be an object");return d(t),e}function qn(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function kn(t,e){this._pairs=[],t&&Kt(t,this,e)}const gs=kn.prototype;gs.append=function(t,e){this._pairs.push([t,e])};gs.toString=function(t){const e=t?function(n){return t.call(this,n,qn)}:qn;return this._pairs.map(function(n){return e(n[0])+"="+e(n[1])},"").join("&")};function ia(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bs(t,e,n){if(!e)return t;const o=n&&n.encode||ia,s=n&&n.serialize;let i;if(s?i=s(e,n):i=S.isURLSearchParams(e)?e.toString():new kn(e,n).toString(o),i){const r=t.indexOf("#");r!==-1&&(t=t.slice(0,r)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class ra{constructor(){this.handlers=[]}use(e,n,o){return this.handlers.push({fulfilled:e,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){S.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Un=ra,_s={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},aa=typeof URLSearchParams<"u"?URLSearchParams:kn,la=typeof FormData<"u"?FormData:null,ua=typeof Blob<"u"?Blob:null,ca=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),fa=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ve={isBrowser:!0,classes:{URLSearchParams:aa,FormData:la,Blob:ua},isStandardBrowserEnv:ca,isStandardBrowserWebWorkerEnv:fa,protocols:["http","https","file","blob","url","data"]};function pa(t,e){return Kt(t,new ve.classes.URLSearchParams,Object.assign({visitor:function(n,o,s,i){return ve.isNode&&S.isBuffer(n)?(this.append(o,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function ha(t){return S.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function da(t){const e={},n=Object.keys(t);let o;const s=n.length;let i;for(o=0;o<s;o++)i=n[o],e[i]=t[i];return e}function ys(t){function e(n,o,s,i){let r=n[i++];const a=Number.isFinite(+r),l=i>=n.length;return r=!r&&S.isArray(s)?s.length:r,l?(S.hasOwnProp(s,r)?s[r]=[s[r],o]:s[r]=o,!a):((!s[r]||!S.isObject(s[r]))&&(s[r]=[]),e(n,o,s[r],i)&&S.isArray(s[r])&&(s[r]=da(s[r])),!a)}if(S.isFormData(t)&&S.isFunction(t.entries)){const n={};return S.forEachEntry(t,(o,s)=>{e(ha(o),s,n,0)}),n}return null}function ma(t,e,n){if(S.isString(t))try{return(e||JSON.parse)(t),S.trim(t)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(t)}const wn={transitional:_s,adapter:ve.isNode?"http":"xhr",transformRequest:[function(t,e){const n=e.getContentType()||"",o=n.indexOf("application/json")>-1,s=S.isObject(t);if(s&&S.isHTMLForm(t)&&(t=new FormData(t)),S.isFormData(t))return o&&o?JSON.stringify(ys(t)):t;if(S.isArrayBuffer(t)||S.isBuffer(t)||S.isStream(t)||S.isFile(t)||S.isBlob(t))return t;if(S.isArrayBufferView(t))return t.buffer;if(S.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return pa(t,this.formSerializer).toString();if((i=S.isFileList(t))||n.indexOf("multipart/form-data")>-1){const r=this.env&&this.env.FormData;return Kt(i?{"files[]":t}:t,r&&new r,this.formSerializer)}}return s||o?(e.setContentType("application/json",!1),ma(t)):t}],transformResponse:[function(t){const e=this.transitional||wn.transitional,n=e&&e.forcedJSONParsing,o=this.responseType==="json";if(t&&S.isString(t)&&(n&&!this.responseType||o)){const s=!(e&&e.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(i){if(s)throw i.name==="SyntaxError"?U.from(i,U.ERR_BAD_RESPONSE,this,null,this.response):i}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ve.classes.FormData,Blob:ve.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};S.forEach(["delete","get","head","post","put","patch"],t=>{wn.headers[t]={}});const Sn=wn,ga=S.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ba=t=>{const e={};let n,o,s;return t&&t.split(`
`).forEach(function(i){s=i.indexOf(":"),n=i.substring(0,s).trim().toLowerCase(),o=i.substring(s+1).trim(),!(!n||e[n]&&ga[n])&&(n==="set-cookie"?e[n]?e[n].push(o):e[n]=[o]:e[n]=e[n]?e[n]+", "+o:o)}),e},Kn=Symbol("internals");function mt(t){return t&&String(t).trim().toLowerCase()}function Ct(t){return t===!1||t==null?t:S.isArray(t)?t.map(Ct):String(t)}function _a(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(t);)e[o[1]]=o[2];return e}const ya=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Qt(t,e,n,o,s){if(S.isFunction(o))return o.call(this,e,n);if(s&&(e=n),!!S.isString(e)){if(S.isString(o))return e.indexOf(o)!==-1;if(S.isRegExp(o))return o.test(e)}}function ka(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,o)=>n.toUpperCase()+o)}function wa(t,e){const n=S.toCamelCase(" "+e);["get","set","has"].forEach(o=>{Object.defineProperty(t,o+n,{value:function(s,i,r){return this[o].call(this,e,s,i,r)},configurable:!0})})}let Ht=class{constructor(t){t&&this.set(t)}set(t,e,n){const o=this;function s(r,a,l){const c=mt(a);if(!c)throw new Error("header name must be a non-empty string");const u=S.findKey(o,c);(!u||o[u]===void 0||l===!0||l===void 0&&o[u]!==!1)&&(o[u||a]=Ct(r))}const i=(r,a)=>S.forEach(r,(l,c)=>s(l,c,a));return S.isPlainObject(t)||t instanceof this.constructor?i(t,e):S.isString(t)&&(t=t.trim())&&!ya(t)?i(ba(t),e):t!=null&&s(e,t,n),this}get(t,e){if(t=mt(t),t){const n=S.findKey(this,t);if(n){const o=this[n];if(!e)return o;if(e===!0)return _a(o);if(S.isFunction(e))return e.call(this,o,n);if(S.isRegExp(e))return e.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=mt(t),t){const n=S.findKey(this,t);return!!(n&&this[n]!==void 0&&(!e||Qt(this,this[n],n,e)))}return!1}delete(t,e){const n=this;let o=!1;function s(i){if(i=mt(i),i){const r=S.findKey(n,i);r&&(!e||Qt(n,n[r],r,e))&&(delete n[r],o=!0)}}return S.isArray(t)?t.forEach(s):s(t),o}clear(t){const e=Object.keys(this);let n=e.length,o=!1;for(;n--;){const s=e[n];(!t||Qt(this,this[s],s,t,!0))&&(delete this[s],o=!0)}return o}normalize(t){const e=this,n={};return S.forEach(this,(o,s)=>{const i=S.findKey(n,s);if(i){e[i]=Ct(o),delete e[s];return}const r=t?ka(s):String(s).trim();r!==s&&delete e[s],e[r]=Ct(o),n[r]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return S.forEach(this,(n,o)=>{n!=null&&n!==!1&&(e[o]=t&&S.isArray(n)?n.join(", "):n)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach(o=>n.set(o)),n}static accessor(t){const e=(this[Kn]=this[Kn]={accessors:{}}).accessors,n=this.prototype;function o(s){const i=mt(s);e[i]||(wa(n,s),e[i]=!0)}return S.isArray(t)?t.forEach(o):o(t),this}};Ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);S.reduceDescriptors(Ht.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(o){this[n]=o}}});S.freezeMethods(Ht);const De=Ht;function Zt(t,e){const n=this||Sn,o=e||n,s=De.from(o.headers);let i=o.data;return S.forEach(t,function(r){i=r.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function ks(t){return!!(t&&t.__CANCEL__)}function $t(t,e,n){U.call(this,t??"canceled",U.ERR_CANCELED,e,n),this.name="CanceledError"}S.inherits($t,U,{__CANCEL__:!0});function Sa(t,e,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):e(new U("Request failed with status code "+n.status,[U.ERR_BAD_REQUEST,U.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Ta=ve.isStandardBrowserEnv?function(){return{write:function(t,e,n,o,s,i){const r=[];r.push(t+"="+encodeURIComponent(e)),S.isNumber(n)&&r.push("expires="+new Date(n).toGMTString()),S.isString(o)&&r.push("path="+o),S.isString(s)&&r.push("domain="+s),i===!0&&r.push("secure"),document.cookie=r.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function $a(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function va(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function ws(t,e){return t&&!$a(e)?va(t,e):e}const Ea=ve.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function o(s){let i=s;return t&&(e.setAttribute("href",i),i=e.href),e.setAttribute("href",i),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:e.pathname.charAt(0)==="/"?e.pathname:"/"+e.pathname}}return n=o(window.location.href),function(s){const i=S.isString(s)?o(s):s;return i.protocol===n.protocol&&i.host===n.host}}():function(){return function(){return!0}}();function Oa(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Aa(t,e){t=t||10;const n=new Array(t),o=new Array(t);let s=0,i=0,r;return e=e!==void 0?e:1e3,function(a){const l=Date.now(),c=o[i];r||(r=l),n[s]=a,o[s]=l;let u=i,p=0;for(;u!==s;)p+=n[u++],u=u%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),l-r<e)return;const d=c&&l-c;return d?Math.round(p*1e3/d):void 0}}function Hn(t,e){let n=0;const o=Aa(50,250);return s=>{const i=s.loaded,r=s.lengthComputable?s.total:void 0,a=i-n,l=o(a),c=i<=r;n=i;const u={loaded:i,total:r,progress:r?i/r:void 0,bytes:a,rate:l||void 0,estimated:l&&r&&c?(r-i)/l:void 0,event:s};u[e?"download":"upload"]=!0,t(u)}}const Ba=typeof XMLHttpRequest<"u",Ca=Ba&&function(t){return new Promise(function(e,n){let o=t.data;const s=De.from(t.headers).normalize(),i=t.responseType;let r;function a(){t.cancelToken&&t.cancelToken.unsubscribe(r),t.signal&&t.signal.removeEventListener("abort",r)}S.isFormData(o)&&(ve.isStandardBrowserEnv||ve.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(t.auth){const d=t.auth.username||"",h=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(d+":"+h))}const c=ws(t.baseURL,t.url);l.open(t.method.toUpperCase(),bs(c,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function u(){if(!l)return;const d=De.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders()),h={data:!i||i==="text"||i==="json"?l.responseText:l.response,status:l.status,statusText:l.statusText,headers:d,config:t,request:l};Sa(function(f){e(f),a()},function(f){n(f),a()},h),l=null}if("onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(u)},l.onabort=function(){l&&(n(new U("Request aborted",U.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new U("Network Error",U.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let d=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const h=t.transitional||_s;t.timeoutErrorMessage&&(d=t.timeoutErrorMessage),n(new U(d,h.clarifyTimeoutError?U.ETIMEDOUT:U.ECONNABORTED,t,l)),l=null},ve.isStandardBrowserEnv){const d=(t.withCredentials||Ea(c))&&t.xsrfCookieName&&Ta.read(t.xsrfCookieName);d&&s.set(t.xsrfHeaderName,d)}o===void 0&&s.setContentType(null),"setRequestHeader"in l&&S.forEach(s.toJSON(),function(d,h){l.setRequestHeader(h,d)}),S.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),i&&i!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",Hn(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",Hn(t.onUploadProgress)),(t.cancelToken||t.signal)&&(r=d=>{l&&(n(!d||d.type?new $t(null,t,l):d),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(r),t.signal&&(t.signal.aborted?r():t.signal.addEventListener("abort",r)));const p=Oa(c);if(p&&ve.protocols.indexOf(p)===-1){n(new U("Unsupported protocol "+p+":",U.ERR_BAD_REQUEST,t));return}l.send(o||null)})},Nt={http:na,xhr:Ca};S.forEach(Nt,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Ss={getAdapter:t=>{t=S.isArray(t)?t:[t];const{length:e}=t;let n,o;for(let s=0;s<e&&(n=t[s],!(o=S.isString(n)?Nt[n.toLowerCase()]:n));s++);if(!o)throw o===!1?new U(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(S.hasOwnProp(Nt,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!S.isFunction(o))throw new TypeError("adapter is not a function");return o},adapters:Nt};function xt(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $t(null,t)}function Vn(t){return xt(t),t.headers=De.from(t.headers),t.data=Zt.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ss.getAdapter(t.adapter||Sn.adapter)(t).then(function(e){return xt(t),e.data=Zt.call(t,t.transformResponse,e),e.headers=De.from(e.headers),e},function(e){return ks(e)||(xt(t),e&&e.response&&(e.response.data=Zt.call(t,t.transformResponse,e.response),e.response.headers=De.from(e.response.headers))),Promise.reject(e)})}const zn=t=>t instanceof De?t.toJSON():t;function nt(t,e){e=e||{};const n={};function o(c,u,p){return S.isPlainObject(c)&&S.isPlainObject(u)?S.merge.call({caseless:p},c,u):S.isPlainObject(u)?S.merge({},u):S.isArray(u)?u.slice():u}function s(c,u,p){if(S.isUndefined(u)){if(!S.isUndefined(c))return o(void 0,c,p)}else return o(c,u,p)}function i(c,u){if(!S.isUndefined(u))return o(void 0,u)}function r(c,u){if(S.isUndefined(u)){if(!S.isUndefined(c))return o(void 0,c)}else return o(void 0,u)}function a(c,u,p){if(p in e)return o(c,u);if(p in t)return o(void 0,c)}const l={url:i,method:i,data:i,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(c,u)=>s(zn(c),zn(u),!0)};return S.forEach(Object.keys(Object.assign({},t,e)),function(c){const u=l[c]||s,p=u(t[c],e[c],c);S.isUndefined(p)&&u!==a||(n[c]=p)}),n}const Ts="1.5.0",Tn={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Tn[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const Gn={};Tn.transitional=function(t,e,n){function o(s,i){return"[Axios v"+Ts+"] Transitional option '"+s+"'"+i+(n?". "+n:"")}return(s,i,r)=>{if(t===!1)throw new U(o(i," has been removed"+(e?" in "+e:"")),U.ERR_DEPRECATED);return e&&!Gn[i]&&(Gn[i]=!0,console.warn(o(i," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(s,i,r):!0}};function Na(t,e,n){if(typeof t!="object")throw new U("options must be an object",U.ERR_BAD_OPTION_VALUE);const o=Object.keys(t);let s=o.length;for(;s-- >0;){const i=o[s],r=e[i];if(r){const a=t[i],l=a===void 0||r(a,i,t);if(l!==!0)throw new U("option "+i+" must be "+l,U.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new U("Unknown option "+i,U.ERR_BAD_OPTION)}}const cn={assertOptions:Na,validators:Tn},Ie=cn.validators;let Mt=class{constructor(t){this.defaults=t,this.interceptors={request:new Un,response:new Un}}request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=nt(this.defaults,e);const{transitional:n,paramsSerializer:o,headers:s}=e;n!==void 0&&cn.assertOptions(n,{silentJSONParsing:Ie.transitional(Ie.boolean),forcedJSONParsing:Ie.transitional(Ie.boolean),clarifyTimeoutError:Ie.transitional(Ie.boolean)},!1),o!=null&&(S.isFunction(o)?e.paramsSerializer={serialize:o}:cn.assertOptions(o,{encode:Ie.function,serialize:Ie.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let i=s&&S.merge(s.common,s[e.method]);s&&S.forEach(["delete","get","head","post","put","patch","common"],h=>{delete s[h]}),e.headers=De.concat(i,s);const r=[];let a=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(e)===!1||(a=a&&h.synchronous,r.unshift(h.fulfilled,h.rejected))});const l=[];this.interceptors.response.forEach(function(h){l.push(h.fulfilled,h.rejected)});let c,u=0,p;if(!a){const h=[Vn.bind(this),void 0];for(h.unshift.apply(h,r),h.push.apply(h,l),p=h.length,c=Promise.resolve(e);u<p;)c=c.then(h[u++],h[u++]);return c}p=r.length;let d=e;for(u=0;u<p;){const h=r[u++],f=r[u++];try{d=h(d)}catch(m){f.call(this,m);break}}try{c=Vn.call(this,d)}catch(h){return Promise.reject(h)}for(u=0,p=l.length;u<p;)c=c.then(l[u++],l[u++]);return c}getUri(t){t=nt(this.defaults,t);const e=ws(t.baseURL,t.url);return bs(e,t.params,t.paramsSerializer)}};S.forEach(["delete","get","head","options"],function(t){Mt.prototype[t]=function(e,n){return this.request(nt(n||{},{method:t,url:e,data:(n||{}).data}))}});S.forEach(["post","put","patch"],function(t){function e(n){return function(o,s,i){return this.request(nt(i||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Mt.prototype[t]=e(),Mt.prototype[t+"Form"]=e(!0)});const Rt=Mt;let Ra=class $s{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const o=this;this.promise.then(s=>{if(!o._listeners)return;let i=o._listeners.length;for(;i-- >0;)o._listeners[i](s);o._listeners=null}),this.promise.then=s=>{let i;const r=new Promise(a=>{o.subscribe(a),i=a}).then(s);return r.cancel=function(){o.unsubscribe(i)},r},e(function(s,i,r){o.reason||(o.reason=new $t(s,i,r),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new $s(function(n){e=n}),cancel:e}}};const Da=Ra;function Pa(t){return function(e){return t.apply(null,e)}}function Ma(t){return S.isObject(t)&&t.isAxiosError===!0}const fn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(fn).forEach(([t,e])=>{fn[e]=t});const La=fn;function vs(t){const e=new Rt(t),n=is(Rt.prototype.request,e);return S.extend(n,Rt.prototype,e,{allOwnKeys:!0}),S.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return vs(nt(t,o))},n}const x=vs(Sn);x.Axios=Rt;x.CanceledError=$t;x.CancelToken=Da;x.isCancel=ks;x.VERSION=Ts;x.toFormData=Kt;x.AxiosError=U;x.Cancel=x.CanceledError;x.all=function(t){return Promise.all(t)};x.spread=Pa;x.isAxiosError=Ma;x.mergeConfig=nt;x.AxiosHeaders=De;x.formToJSON=t=>ys(S.isHTMLForm(t)?new FormData(t):t);x.getAdapter=Ss.getAdapter;x.HttpStatusCode=La;x.default=x;const Es=x,{Axios:Qc,AxiosError:Zc,CanceledError:xc,isCancel:ef,CancelToken:tf,VERSION:nf,all:of,Cancel:sf,isAxiosError:rf,spread:af,toFormData:lf,AxiosHeaders:uf,HttpStatusCode:Ot,formToJSON:cf,getAdapter:ff,mergeConfig:pf}=Es;var Qe=null;typeof WebSocket<"u"?Qe=WebSocket:typeof MozWebSocket<"u"?Qe=MozWebSocket:typeof global<"u"?Qe=global.WebSocket||global.MozWebSocket:typeof window<"u"?Qe=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Qe=self.WebSocket||self.MozWebSocket);const Ia=Qe,en={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};var Jn,Yn,Xn,Qn,Zn;const xn=class k{constructor(e={},n="xhr"){Ne(this,"_type","xhr"),Ne(this,"_baseURL",((Yn=(Jn=globalThis.top)==null?void 0:Jn.document)==null?void 0:Yn.baseURI)??((Qn=(Xn=globalThis.parent)==null?void 0:Xn.document)==null?void 0:Qn.baseURI)??((Zn=globalThis.location)==null?void 0:Zn.origin)??en.SIYUAN_DEFAULT_BASE_URL),Ne(this,"_token",en.SIYUAN_DEFAULT_TOKEN),Ne(this,"_axios",Es.create({baseURL:this._baseURL,timeout:en.REQUEST_TIMEOUT,headers:{Authorization:`Token ${this._token}`}})),Ne(this,"_fetch",yr.create({baseURL:this._baseURL,headers:{Authorization:`Token ${this._token}`}})),this._setClientType(n),this._updateOptions(e,n)}_setClientType(e){this._type=e}_updateOptions(e,n=this._type){switch(this._token=e.token??this._token,this._baseURL=e.baseURL??this._baseURL,n){case"fetch":const o=e;if(o.token){const s="Authorization",i=`Token ${e.token}`;Array.isArray(o.headers)?o.headers.push([s,i]):o.headers instanceof Headers?o.headers.set(s,i):typeof o.headers=="object"?o.headers[s]=i:o.headers={[s]:i},delete e.token}this._fetch=this._fetch.create(o);break;case"xhr":default:for(const[s,i]of Object.entries(e))switch(s){case"token":this._axios.defaults.headers.Authorization=`Token ${this._token}`;break;default:this._axios.defaults[s]=i;break}break}this._baseURL=e.baseURL??this._baseURL}broadcast(e,n,o){const s=(o==null?void 0:o.baseURL)??this._baseURL,i=(o==null?void 0:o.token)??this._token,r=new URLSearchParams(e);r.set("token",i);const a=new URL(s);return a.protocol=a.protocol.replace(/^http/,"ws"),a.pathname=a.pathname.endsWith("/")?`${a.pathname}${k.ws.broadcast.pathname.substring(1)}`:`${a.pathname}${k.ws.broadcast.pathname}`,a.search=r.toString(),new Ia(a,n)}async fullTextSearchBlock(e,n){return await this._request(k.api.search.fullTextSearchBlock.pathname,k.api.search.fullTextSearchBlock.method,e,n)}async getConf(e){return await this._request(k.api.system.getConf.pathname,k.api.system.getConf.method,void 0,e)}async upload(e,n){const o=new FormData;return o.append("assetsDirPath",e.assetsDirPath??"/assets/"),e.files.forEach(s=>o.append("file[]",s)),await this._request(k.api.asset.upload.pathname,k.api.asset.upload.method,o,n)}async getBlockAttrs(e,n){return await this._request(k.api.attr.getBlockAttrs.pathname,k.api.attr.getBlockAttrs.method,e,n)}async getBookmarkLabels(e){return await this._request(k.api.attr.getBookmarkLabels.pathname,k.api.attr.getBookmarkLabels.method,void 0,e)}async setBlockAttrs(e,n){return await this._request(k.api.attr.setBlockAttrs.pathname,k.api.attr.setBlockAttrs.method,e,n)}async appendBlock(e,n){return await this._request(k.api.block.appendBlock.pathname,k.api.block.appendBlock.method,e,n)}async deleteBlock(e,n){return await this._request(k.api.block.deleteBlock.pathname,k.api.block.deleteBlock.method,e,n)}async getBlockBreadcrumb(e,n){return await this._request(k.api.block.getBlockBreadcrumb.pathname,k.api.block.getBlockBreadcrumb.method,e,n)}async getBlockDOM(e,n){return await this._request(k.api.block.getBlockDOM.pathname,k.api.block.getBlockDOM.method,e,n)}async getBlockInfo(e,n){return await this._request(k.api.block.getBlockInfo.pathname,k.api.block.getBlockInfo.method,e,n)}async getBlockKramdown(e,n){return await this._request(k.api.block.getBlockKramdown.pathname,k.api.block.getBlockKramdown.method,e,n)}async getChildBlocks(e,n){return await this._request(k.api.block.getChildBlocks.pathname,k.api.block.getChildBlocks.method,e,n)}async getDocInfo(e,n){return await this._request(k.api.block.getDocInfo.pathname,k.api.block.getDocInfo.method,e,n)}async insertBlock(e,n){return await this._request(k.api.block.insertBlock.pathname,k.api.block.insertBlock.method,e,n)}async moveBlock(e,n){return await this._request(k.api.block.moveBlock.pathname,k.api.block.moveBlock.method,e,n)}async prependBlock(e,n){return await this._request(k.api.block.prependBlock.pathname,k.api.block.prependBlock.method,e,n)}async transferBlockRef(e,n){return await this._request(k.api.block.transferBlockRef.pathname,k.api.block.transferBlockRef.method,e,n)}async updateBlock(e,n){return await this._request(k.api.block.updateBlock.pathname,k.api.block.updateBlock.method,e,n)}async channels(e){return await this._request(k.api.broadcast.channels.pathname,k.api.broadcast.channels.method,void 0,e)}async getChannelInfo(e,n){return await this._request(k.api.broadcast.getChannelInfo.pathname,k.api.broadcast.getChannelInfo.method,e,n)}async postMessage(e,n){return await this._request(k.api.broadcast.postMessage.pathname,k.api.broadcast.postMessage.method,e,n)}async pandoc(e,n){return await this._request(k.api.convert.pandoc.pathname,k.api.convert.pandoc.method,e,n)}async exportResources(e,n){return await this._request(k.api.export.exportResources.pathname,k.api.export.exportResources.method,e,n)}async exportMdContent(e,n){return await this._request(k.api.export.exportMdContent.pathname,k.api.export.exportMdContent.method,e,n)}async getFile(e,n="text",o){return await this._request(k.api.file.getFile.pathname,k.api.file.getFile.method,e,o,!1,n)}async putFile(e,n){e.file!==void 0&&!(e.file instanceof File)&&(e.file=new File([e.file],e.path.split("/").pop()));const o=new FormData;for(const[s,i]of Object.entries(e))e.hasOwnProperty(s)&&(i instanceof Blob?o.append(s,i):o.append(s,String(i)));return await this._request(k.api.file.putFile.pathname,k.api.file.putFile.method,o,n)}async readDir(e,n){return await this._request(k.api.file.readDir.pathname,k.api.file.readDir.method,e,n)}async removeFile(e,n){return await this._request(k.api.file.removeFile.pathname,k.api.file.removeFile.method,e,n)}async renameFile(e,n){return await this._request(k.api.file.renameFile.pathname,k.api.file.renameFile.method,e,n)}async createDocWithMd(e,n){return await this._request(k.api.filetree.createDocWithMd.pathname,k.api.filetree.createDocWithMd.method,e,n)}async getDoc(e,n){return await this._request(k.api.filetree.getDoc.pathname,k.api.filetree.getDoc.method,e,n)}async getHPathByID(e,n){return await this._request(k.api.filetree.getHPathByID.pathname,k.api.filetree.getHPathByID.method,e,n)}async getHPathByPath(e,n){return await this._request(k.api.filetree.getHPathByPath.pathname,k.api.filetree.getHPathByPath.method,e,n)}async listDocsByPath(e,n){return await this._request(k.api.filetree.listDocsByPath.pathname,k.api.filetree.listDocsByPath.method,e,n)}async moveDocs(e,n){return await this._request(k.api.filetree.moveDocs.pathname,k.api.filetree.moveDocs.method,e,n)}async removeDoc(e,n){return await this._request(k.api.filetree.removeDoc.pathname,k.api.filetree.removeDoc.method,e,n)}async renameDoc(e,n){return await this._request(k.api.filetree.renameDoc.pathname,k.api.filetree.renameDoc.method,e,n)}async searchDocs(e,n){return await this._request(k.api.filetree.searchDocs.pathname,k.api.filetree.searchDocs.method,e,n)}async getDocHistoryContent(e,n){return await this._request(k.api.history.getDocHistoryContent.pathname,k.api.history.getDocHistoryContent.method,e,n)}async getHistoryItems(e,n){return await this._request(k.api.history.getHistoryItems.pathname,k.api.history.getHistoryItems.method,e,n)}async getShorthand(e,n){return await this._request(k.api.inbox.getShorthand.pathname,k.api.inbox.getShorthand.method,e,n)}async forwardProxy(e,n){return await this._request(k.api.network.forwardProxy.pathname,k.api.network.forwardProxy.method,e,n)}async closeNotebook(e,n){return await this._request(k.api.notebook.closeNotebook.pathname,k.api.notebook.closeNotebook.method,e,n)}async createNotebook(e,n){return await this._request(k.api.notebook.createNotebook.pathname,k.api.notebook.createNotebook.method,e,n)}async getNotebookConf(e,n){return await this._request(k.api.notebook.getNotebookConf.pathname,k.api.notebook.getNotebookConf.method,e,n)}async lsNotebooks(e){return await this._request(k.api.notebook.lsNotebooks.pathname,k.api.notebook.lsNotebooks.method,void 0,e)}async openNotebook(e,n){return await this._request(k.api.notebook.openNotebook.pathname,k.api.notebook.openNotebook.method,e,n)}async removeNotebook(e,n){return await this._request(k.api.notebook.removeNotebook.pathname,k.api.notebook.removeNotebook.method,e,n)}async renameNotebook(e,n){return await this._request(k.api.notebook.renameNotebook.pathname,k.api.notebook.renameNotebook.method,e,n)}async setNotebookConf(e,n){return await this._request(k.api.notebook.setNotebookConf.pathname,k.api.notebook.setNotebookConf.method,e,n)}async pushErrMsg(e,n){return await this._request(k.api.notification.pushErrMsg.pathname,k.api.notification.pushErrMsg.method,e,n)}async pushMsg(e,n){return await this._request(k.api.notification.pushMsg.pathname,k.api.notification.pushMsg.method,e,n)}async sql(e,n){return await this._request(k.api.query.sql.pathname,k.api.query.sql.method,e,n)}async openRepoSnapshotDoc(e,n){return await this._request(k.api.repo.openRepoSnapshotDoc.pathname,k.api.repo.openRepoSnapshotDoc.method,e,n)}async getSnippet(e,n){return await this._request(k.api.snippet.getSnippet.pathname,k.api.snippet.getSnippet.method,e,n)}async setSnippet(e,n){return await this._request(k.api.snippet.setSnippet.pathname,k.api.snippet.setSnippet.method,e,n)}async getRecentDocs(e){return await this._request(k.api.storage.getRecentDocs.pathname,k.api.storage.getRecentDocs.method,void 0,e)}async bootProgress(e){return await this._request(k.api.system.bootProgress.pathname,k.api.system.bootProgress.method,void 0,e)}async currentTime(e){return await this._request(k.api.system.currentTime.pathname,k.api.system.currentTime.method,void 0,e)}async version(e){return await this._request(k.api.system.version.pathname,k.api.system.version.method,void 0,e)}async render(e,n){return await this._request(k.api.template.render.pathname,k.api.template.render.method,e,n)}async renderSprig(e,n){return await this._request(k.api.template.renderSprig.pathname,k.api.template.renderSprig.method,e,n)}async _request(e,n,o,s,i=!0,r="json"){try{switch((s==null?void 0:s.type)??this._type){case"fetch":{const a=s==null?void 0:s.options;r=(()=>{switch(r){case"arraybuffer":return"arrayBuffer";case"document":return"text";default:return r}})();const l=await this._fetch(e,{method:n,body:o,responseType:r,onResponse:async c=>{switch(c.response.status){case Ot.Ok:break;case Ot.Accepted:e===k.api.file.getFile.pathname&&this._parseFetchResponse(c.response._data);break;default:break}},...a});return i&&r==="json"&&typeof l=="object"?this._parseFetchResponse(l):l}case"xhr":default:{const a=s==null?void 0:s.options;r=(()=>{switch(r){case"arrayBuffer":return"arraybuffer";default:return r}})();const l=await this._axios.request({url:e,method:n,data:o,responseType:r,...a});switch(l.status){case Ot.Ok:return i&&r==="json"&&typeof l.data=="object"?this._parseAxiosResponse(l):l.data;case Ot.Accepted:return e===k.api.file.getFile.pathname?this._parseAxiosResponse(l):l.data;default:throw new kr(l)}}}}catch(a){throw a}}_parseFetchResponse(e){if(e.code===0)return e;throw new Ln(e)}_parseAxiosResponse(e){if(e.data.code===0)return e.data;throw new Ln(e.data,e)}};Ne(xn,"ws",{broadcast:{pathname:"/ws/broadcast"}}),Ne(xn,"api",{search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getBlockDOM:{pathname:"/api/block/getBlockDOM",method:"POST"},getBlockInfo:{pathname:"/api/block/getBlockInfo",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"}},broadcast:{channels:{pathname:"/api/broadcast/channels",method:"GET"},getChannelInfo:{pathname:"/api/broadcast/getChannelInfo",method:"POST"},postMessage:{pathname:"/api/broadcast/postMessage",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"},exportResources:{pathname:"/api/export/exportResources",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getDoc:{pathname:"/api/filetree/getDoc",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},history:{getDocHistoryContent:{pathname:"/api/history/getDocHistoryContent",method:"POST"},getHistoryItems:{pathname:"/api/history/getHistoryItems",method:"POST"}},inbox:{getShorthand:{pathname:"/api/inbox/getShorthand",method:"POST"}},network:{forwardProxy:{pathname:"/api/network/forwardProxy",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},repo:{openRepoSnapshotDoc:{pathname:"/api/repo/openRepoSnapshotDoc",method:"POST"}},snippet:{getSnippet:{pathname:"/api/snippet/getSnippet",method:"POST"},setSnippet:{pathname:"/api/snippet/setSnippet",method:"POST"}},storage:{getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},version:{pathname:"/api/system/version",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});var Os=(t=>(t.NodeNotebook="NodeNotebook",t.NodeFolder="NodeFolder",t.NodeDocument="NodeDocument",t.NodeSuperBlock="NodeSuperBlock",t.NodeBlockquote="NodeBlockquote",t.NodeList="NodeList",t.NodeListItem="NodeListItem",t.NodeHeading="NodeHeading",t.NodeParagraph="NodeParagraph",t.NodeMathBlock="NodeMathBlock",t.NodeTable="NodeTable",t.NodeCodeBlock="NodeCodeBlock",t.NodeHTMLBlock="NodeHTMLBlock",t.NodeThematicBreak="NodeThematicBreak",t.NodeAudio="NodeAudio",t.NodeVideo="NodeVideo",t.NodeIFrame="NodeIFrame",t.NodeWidget="NodeWidget",t.NodeBlockQueryEmbed="NodeBlockQueryEmbed",t))(Os||{}),As=(t=>(t.d="d",t.s="s",t.b="b",t.l="l",t.i="i",t.h="h",t.p="p",t.m="m",t.t="t",t.c="c",t.html="html",t.query_embed="query_embed",t.tb="tb",t.audio="audio",t.video="video",t.iframe="iframe",t.widget="widget",t))(As||{}),Bs=(t=>(t.d="d",t.s="s",t.b="b",t.l="l",t.i="i",t))(Bs||{}),Cs=(t=>(t.h="h",t.p="p",t.m="m",t.t="t",t.c="c",t.html="html",t.query_embed="query_embed",t.tb="tb",t.audio="audio",t.video="video",t.iframe="iframe",t.widget="widget",t))(Cs||{}),Ns=(t=>(t.h1="h1",t.h2="h2",t.h3="h3",t.h4="h4",t.h5="h5",t.h6="h6",t.u="u",t.o="o",t.t="t",t.none="",t))(Ns||{}),Rs=(t=>(t.u="u",t.o="o",t.t="t",t))(Rs||{}),Ds=(t=>(t.h1="h1",t.h2="h2",t.h3="h3",t.h4="h4",t.h5="h5",t.h6="h6",t))(Ds||{}),Ps=(t=>(t[t.keyword=0]="keyword",t[t.querySyntax=1]="querySyntax",t[t.sql=2]="sql",t[t.regex=3]="regex",t))(Ps||{}),Ms=(t=>(t[t.noGroupBy=0]="noGroupBy",t[t.group=1]="group",t))(Ms||{}),Ls=(t=>(t[t.type=0]="type",t[t.createdASC=1]="createdASC",t[t.createdDESC=2]="createdDESC",t[t.modifiedASC=3]="modifiedASC",t[t.modifiedDESC=4]="modifiedDESC",t[t.sortByContent=5]="sortByContent",t[t.sortByRankAsc=6]="sortByRankAsc",t[t.sortByRankDesc=7]="sortByRankDesc",t))(Ls||{}),Is=(t=>(t[t.SortModeNameASC=0]="SortModeNameASC",t[t.SortModeNameDESC=1]="SortModeNameDESC",t[t.SortModeUpdatedASC=2]="SortModeUpdatedASC",t[t.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",t[t.SortModeAlphanumASC=4]="SortModeAlphanumASC",t[t.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",t[t.SortModeCustom=6]="SortModeCustom",t[t.SortModeRefCountASC=7]="SortModeRefCountASC",t[t.SortModeRefCountDESC=8]="SortModeRefCountDESC",t[t.SortModeCreatedASC=9]="SortModeCreatedASC",t[t.SortModeCreatedDESC=10]="SortModeCreatedDESC",t[t.SortModeSizeASC=11]="SortModeSizeASC",t[t.SortModeSizeDESC=12]="SortModeSizeDESC",t[t.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",t[t.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",t))(Is||{});const Wa=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:Ns,BlockType:As,Container:Bs,GroupBy:Ms,Leaf:Cs,Method:Ps,NodeHeadingSubType:Ds,NodeListSubType:Rs,NodeType:Os,OrderBy:Ls,SortMode:Is},Symbol.toStringTag,{value:"Module"}));function ja(t){const{protyle:e,data:n,blockElements:o}=t;if(n){const s={element:e.wysiwyg.element,id:n.id,type:Wa.NodeType.NodeDocument};return{...s,isDocumentBlock:!0,isMultiBlock:!1,blocks:[s],protyle:e,data:n}}else if(o&&o.length>0){const s=[];return o.forEach(i=>{s.push({element:i,id:i.dataset.nodeId,type:i.dataset.type,subtype:i.dataset.subtype})}),{...s[0],isDocumentBlock:!1,isMultiBlock:s.length>1,blocks:s,protyle:e}}return null}function V(){}const $n=t=>t;function Vt(t,e){for(const n in e)t[n]=e[n];return t}function Ws(t){return t()}function eo(){return Object.create(null)}function ae(t){t.forEach(Ws)}function zt(t){return typeof t=="function"}function ie(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let At;function Lt(t,e){return t===e?!0:(At||(At=document.createElement("a")),At.href=e,t===At.href)}function Fa(t){return Object.keys(t).length===0}function te(t,e,n,o){if(t){const s=js(t,e,n,o);return t[0](s)}}function js(t,e,n,o){return t[1]&&o?Vt(n.ctx.slice(),t[1](o(e))):n.ctx}function ne(t,e,n,o){if(t[2]&&o){const s=t[2](o(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],r=Math.max(e.dirty.length,s.length);for(let a=0;a<r;a+=1)i[a]=e.dirty[a]|s[a];return i}return e.dirty|s}return e.dirty}function oe(t,e,n,o,s,i){if(s){const r=js(e,n,o,i);t.p(r,s)}}function se(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let o=0;o<n;o++)e[o]=-1;return e}return-1}function qa(t){const e={};for(const n in t)e[n]=!0;return e}const Fs=typeof window<"u";let qs=Fs?()=>window.performance.now():()=>Date.now(),vn=Fs?t=>requestAnimationFrame(t):V;const xe=new Set;function Us(t){xe.forEach(e=>{e.c(t)||(xe.delete(e),e.f())}),xe.size!==0&&vn(Us)}function Ks(t){let e;return xe.size===0&&vn(Us),{promise:new Promise(n=>{xe.add(e={c:t,f:n})}),abort(){xe.delete(e)}}}function D(t,e){t.appendChild(e)}function Hs(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Ua(t){const e=P("style");return e.textContent="/* empty */",Ka(Hs(t),e),e.sheet}function Ka(t,e){return D(t.head||t,e),e.sheet}function B(t,e,n){t.insertBefore(e,n||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function P(t){return document.createElement(t)}function pn(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function _e(t){return document.createTextNode(t)}function M(){return _e(" ")}function re(){return _e("")}function J(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function w(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Ha=["width","height"];function Va(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const o in e)e[o]==null?t.removeAttribute(o):o==="style"?t.style.cssText=e[o]:o==="__value"?t.value=t[o]=e[o]:n[o]&&n[o].set&&Ha.indexOf(o)===-1?t[o]=e[o]:w(t,o,e[o])}function za(t,e){Object.keys(e).forEach(n=>{Ga(t,n,e[n])})}function Ga(t,e,n){e in t?t[e]=typeof t[e]=="boolean"&&n===""?!0:n:w(t,e,n)}function to(t){return/-/.test(t)?za:Va}function no(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function hn(t){return t===""?null:+t}function Ja(t){return Array.from(t.childNodes)}function Ue(t,e){e=""+e,t.data!==e&&(t.data=e)}function pe(t,e){t.value=e??""}function Ee(t,e,n,o){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function oo(t,e,n){for(let o=0;o<t.options.length;o+=1){const s=t.options[o];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function Ya(t){const e=t.querySelector(":checked");return e&&e.__value}function C(t,e,n){t.classList.toggle(e,!!n)}function Vs(t,e,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:o})}class vt{constructor(e=!1){Y(this,"is_svg",!1);Y(this,"e");Y(this,"n");Y(this,"t");Y(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,o=null){this.e||(this.is_svg?this.e=pn(n.nodeName):this.e=P(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(o)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)B(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(O)}}const It=new Map;let Wt=0;function Xa(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Qa(t,e){const n={stylesheet:Ua(e),rules:{}};return It.set(t,n),n}function zs(t,e,n,o,s,i,r,a=0){const l=16.666/o;let c=`{
`;for(let b=0;b<=1;b+=l){const g=e+(n-e)*i(b);c+=b*100+`%{${r(g,1-g)}}
`}const u=c+`100% {${r(n,1-n)}}
}`,p=`__svelte_${Xa(u)}_${a}`,d=Hs(t),{stylesheet:h,rules:f}=It.get(d)||Qa(d,t);f[p]||(f[p]=!0,h.insertRule(`@keyframes ${p} ${u}`,h.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${p} ${o}ms linear ${s}ms 1 both`,Wt+=1,p}function dn(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-o.length;s&&(t.style.animation=o.join(", "),Wt-=s,Wt||Za())}function Za(){vn(()=>{Wt||(It.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&O(e)}),It.clear())})}let wt;function _t(t){wt=t}function En(){if(!wt)throw new Error("Function called outside component initialization");return wt}function xa(t){En().$$.on_mount.push(t)}function el(t){En().$$.on_destroy.push(t)}function Gt(){const t=En();return(e,n,{cancelable:o=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=Vs(e,n,{cancelable:o});return s.slice().forEach(r=>{r.call(t,i)}),!i.defaultPrevented}return!0}}function so(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(o=>o.call(this,e))}const Ze=[],St=[];let et=[];const io=[],tl=Promise.resolve();let mn=!1;function nl(){mn||(mn=!0,tl.then(Gs))}function He(t){et.push(t)}const tn=new Set;let Ye=0;function Gs(){if(Ye!==0)return;const t=wt;do{try{for(;Ye<Ze.length;){const e=Ze[Ye];Ye++,_t(e),ol(e.$$)}}catch(e){throw Ze.length=0,Ye=0,e}for(_t(null),Ze.length=0,Ye=0;St.length;)St.pop()();for(let e=0;e<et.length;e+=1){const n=et[e];tn.has(n)||(tn.add(n),n())}et.length=0}while(Ze.length);for(;io.length;)io.pop()();mn=!1,tn.clear(),_t(t)}function ol(t){if(t.fragment!==null){t.update(),ae(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(He)}}function sl(t){const e=[],n=[];et.forEach(o=>t.indexOf(o)===-1?e.push(o):n.push(o)),n.forEach(o=>o()),et=e}let gt;function Js(){return gt||(gt=Promise.resolve(),gt.then(()=>{gt=null})),gt}function jt(t,e,n){t.dispatchEvent(Vs(`${e?"intro":"outro"}${n}`))}const Dt=new Set;let qe;function Q(){qe={r:0,c:[],p:qe}}function Z(){qe.r||ae(qe.c),qe=qe.p}function _(t,e){t&&t.i&&(Dt.delete(t),t.i(e))}function y(t,e,n,o){if(t&&t.o){if(Dt.has(t))return;Dt.add(t),qe.c.push(()=>{Dt.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}else o&&o()}const Ys={duration:0};function il(t,e,n){const o={direction:"in"};let s=e(t,n,o),i=!1,r,a,l=0;function c(){r&&dn(t,r)}function u(){const{delay:d=0,duration:h=300,easing:f=$n,tick:m=V,css:b}=s||Ys;b&&(r=zs(t,0,1,h,d,f,b,l++)),m(0,1);const g=qs()+d,W=g+h;a&&a.abort(),i=!0,He(()=>jt(t,!0,"start")),a=Ks(q=>{if(i){if(q>=W)return m(1,0),jt(t,!0,"end"),c(),i=!1;if(q>=g){const $=f((q-g)/h);m($,1-$)}}return i})}let p=!1;return{start(){p||(p=!0,dn(t),zt(s)?(s=s(o),Js().then(u)):u())},invalidate(){p=!1},end(){i&&(c(),i=!1)}}}function rl(t,e,n){const o={direction:"out"};let s=e(t,n,o),i=!0,r;const a=qe;a.r+=1;let l;function c(){const{delay:u=0,duration:p=300,easing:d=$n,tick:h=V,css:f}=s||Ys;f&&(r=zs(t,1,0,p,u,d,f));const m=qs()+u,b=m+p;He(()=>jt(t,!1,"start")),"inert"in t&&(l=t.inert,t.inert=!0),Ks(g=>{if(i){if(g>=b)return h(0,1),jt(t,!1,"end"),--a.r||ae(a.c),!1;if(g>=m){const W=d((g-m)/p);h(1-W,W)}}return i})}return zt(s)?Js().then(()=>{s=s(o),c()}):c(),{end(u){u&&"inert"in t&&(t.inert=l),u&&s.tick&&s.tick(1,0),i&&(r&&dn(t,r),i=!1)}}}function he(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function al(t,e){t.d(1),e.delete(t.key)}function st(t,e){y(t,1,1,()=>{e.delete(t.key)})}function Ve(t,e,n,o,s,i,r,a,l,c,u,p){let d=t.length,h=i.length,f=d;const m={};for(;f--;)m[t[f].key]=f;const b=[],g=new Map,W=new Map,q=[];for(f=h;f--;){const H=p(s,i,f),j=n(H);let N=r.get(j);N?o&&q.push(()=>N.p(H,e)):(N=c(j,H),N.c()),g.set(j,b[f]=N),j in m&&W.set(j,Math.abs(f-m[j]))}const $=new Set,K=new Set;function L(H){_(H,1),H.m(a,u),r.set(H.key,H),u=H.first,h--}for(;d&&h;){const H=b[h-1],j=t[d-1],N=H.key,ce=j.key;H===j?(u=H.first,d--,h--):g.has(ce)?!r.has(N)||$.has(N)?L(H):K.has(ce)?d--:W.get(N)>W.get(ce)?(K.add(N),L(H)):($.add(ce),d--):(l(j,r),d--)}for(;d--;){const H=t[d];g.has(H.key)||l(H,r)}for(;h;)L(b[h-1]);return ae(q),b}function On(t,e){const n={},o={},s={$$scope:1};let i=t.length;for(;i--;){const r=t[i],a=e[i];if(a){for(const l in r)l in a||(o[l]=1);for(const l in a)s[l]||(n[l]=a[l],s[l]=1);t[i]=a}else for(const l in r)s[l]=1}for(const r in o)r in n||(n[r]=void 0);return n}function Xs(t){return typeof t=="object"&&t!==null?t:{}}function A(t){t&&t.c()}function v(t,e,n){const{fragment:o,after_update:s}=t.$$;o&&o.m(e,n),He(()=>{const i=t.$$.on_mount.map(Ws).filter(zt);t.$$.on_destroy?t.$$.on_destroy.push(...i):ae(i),t.$$.on_mount=[]}),s.forEach(He)}function E(t,e){const n=t.$$;n.fragment!==null&&(sl(n.after_update),ae(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ll(t,e){t.$$.dirty[0]===-1&&(Ze.push(t),nl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function le(t,e,n,o,s,i,r,a=[-1]){const l=wt;_t(t);const c=t.$$={fragment:null,ctx:[],props:i,update:V,not_equal:s,bound:eo(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:eo(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};r&&r(c.root);let u=!1;if(c.ctx=n?n(t,e.props||{},(p,d,...h)=>{const f=h.length?h[0]:d;return c.ctx&&s(c.ctx[p],c.ctx[p]=f)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](f),u&&ll(t,p)),d}):[],c.update(),u=!0,ae(c.before_update),c.fragment=o?o(c.ctx):!1,e.target){if(e.hydrate){const p=Ja(e.target);c.fragment&&c.fragment.l(p),p.forEach(O)}else c.fragment&&c.fragment.c();e.intro&&_(t.$$.fragment),v(t,e.target,e.anchor),Gs()}_t(l)}class ue{constructor(){Y(this,"$$");Y(this,"$$set")}$destroy(){E(this,1),this.$destroy=V}$on(e,n){if(!zt(n))return V;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const s=o.indexOf(n);s!==-1&&o.splice(s,1)}}$set(e){this.$$set&&!Fa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ul="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ul);function cl(t){let e,n;return{c(){e=pn("svg"),n=pn("use"),no(n,"xlink:href",t[0]),w(e,"style",t[3]),w(e,"data-id",t[1]),w(e,"class",t[2]),C(e,"popover__block",Re.id.test(t[1]))},m(o,s){B(o,e,s),D(e,n)},p(o,[s]){s&1&&no(n,"xlink:href",o[0]),s&8&&w(e,"style",o[3]),s&2&&w(e,"data-id",o[1]),s&4&&w(e,"class",o[2]),s&6&&C(e,"popover__block",Re.id.test(o[1]))},i:V,o:V,d(o){o&&O(e)}}}function fl(t,e,n){let{icon:o}=e,{id:s=""}=e,{className:i=""}=e,{style:r=""}=e;return t.$$set=a=>{"icon"in a&&n(0,o=a.icon),"id"in a&&n(1,s=a.id),"className"in a&&n(2,i=a.className),"style"in a&&n(3,r=a.style)},[o,s,i,r]}class we extends ue{constructor(e){super(),le(this,e,fl,cl,ie,{icon:0,id:1,className:2,style:3})}}const pl=t=>({focus:t&1}),ro=t=>({focus:t[0]});function ao(t,e,n){const o=t.slice();return o[13]=e[n],o}function lo(t){let e,n,o,s,i,r,a;return n=new we({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){e=P("div"),A(n.$$.fragment),o=M(),s=P("input"),w(s,"placeholder",t[4]),w(s,"class","b3-text-field fn__block b3-form__icon-input"),w(e,"class","b3-form__icon")},m(l,c){B(l,e,c),v(n,e,null),D(e,o),D(e,s),pe(s,t[1]),i=!0,r||(a=[J(s,"input",t[9]),J(s,"change",t[5])],r=!0)},p(l,c){(!i||c&16)&&w(s,"placeholder",l[4]),c&2&&s.value!==l[1]&&pe(s,l[1])},i(l){i||(_(n.$$.fragment,l),i=!0)},o(l){y(n.$$.fragment,l),i=!1},d(l){l&&O(e),E(n),r=!1,ae(a)}}}function uo(t,e){let n,o,s,i,r=e[13].text+"",a,l,c,u,p;o=new we({props:{icon:e[13].icon,className:"b3-list-item__graphic"}});function d(){return e[10](e[13])}function h(){return e[11](e[13])}return{key:t,first:null,c(){n=P("li"),A(o.$$.fragment),s=M(),i=P("span"),a=M(),w(i,"class","b3-list-item__text svelte-15drd7h"),w(n,"role","button"),w(n,"data-name",l=e[13].name),w(n,"class","b3-list-item"),C(n,"b3-list-item--focus",e[13].key===e[0]),this.first=n},m(f,m){B(f,n,m),v(o,n,null),D(n,s),D(n,i),i.innerHTML=r,D(n,a),c=!0,u||(p=[J(n,"click",d),J(n,"keyup",h)],u=!0)},p(f,m){e=f;const b={};m&4&&(b.icon=e[13].icon),o.$set(b),(!c||m&4)&&r!==(r=e[13].text+"")&&(i.innerHTML=r),(!c||m&4&&l!==(l=e[13].name))&&w(n,"data-name",l),(!c||m&5)&&C(n,"b3-list-item--focus",e[13].key===e[0])},i(f){c||(_(o.$$.fragment,f),c=!0)},o(f){y(o.$$.fragment,f),c=!1},d(f){f&&O(n),E(o),u=!1,ae(p)}}}function hl(t){let e;return{c(){e=_e("Container")},m(n,o){B(n,e,o)},d(n){n&&O(e)}}}function dl(t){let e,n,o,s=[],i=new Map,r,a,l,c=t[3]&&lo(t),u=he(t[2]);const p=m=>m[13].key;for(let m=0;m<u.length;m+=1){let b=ao(t,u,m),g=p(b);i.set(g,s[m]=uo(g,b))}const d=t[8].default,h=te(d,t,t[7],ro),f=h||hl();return{c(){e=P("div"),n=P("ul"),c&&c.c(),o=M();for(let m=0;m<s.length;m+=1)s[m].c();r=M(),a=P("div"),f&&f.c(),w(n,"class","b3-tab-bar b3-list b3-list--background"),w(a,"class","config__tab-wrap"),w(e,"class","fn__flex-1 fn__flex config__panel")},m(m,b){B(m,e,b),D(e,n),c&&c.m(n,null),D(n,o);for(let g=0;g<s.length;g+=1)s[g]&&s[g].m(n,null);D(e,r),D(e,a),f&&f.m(a,null),l=!0},p(m,[b]){m[3]?c?(c.p(m,b),b&8&&_(c,1)):(c=lo(m),c.c(),_(c,1),c.m(n,o)):c&&(Q(),y(c,1,1,()=>{c=null}),Z()),b&69&&(u=he(m[2]),Q(),s=Ve(s,b,p,1,m,u,i,n,st,uo,null,ao),Z()),h&&h.p&&(!l||b&129)&&oe(h,d,m,m[7],l?ne(d,m[7],b,pl):se(m[7]),ro)},i(m){if(!l){_(c);for(let b=0;b<u.length;b+=1)_(s[b]);_(f,m),l=!0}},o(m){y(c);for(let b=0;b<s.length;b+=1)y(s[b]);y(f,m),l=!1},d(m){m&&O(e),c&&c.d();for(let b=0;b<s.length;b+=1)s[b].d();f&&f.d(m)}}}function ml(t,e,n){let{$$slots:o={},$$scope:s}=e,{panels:i}=e,{focus:r}=e,{searchEnable:a=!1}=e,{searchPlaceholder:l=""}=e,{searchValue:c=""}=e;const u=Gt();function p(){u("search-changed",{value:c})}function d(b){u("changed",{key:b}),n(0,r=b)}function h(){c=this.value,n(1,c)}const f=b=>d(b.key),m=b=>d(b.key);return t.$$set=b=>{"panels"in b&&n(2,i=b.panels),"focus"in b&&n(0,r=b.focus),"searchEnable"in b&&n(3,a=b.searchEnable),"searchPlaceholder"in b&&n(4,l=b.searchPlaceholder),"searchValue"in b&&n(1,c=b.searchValue),"$$scope"in b&&n(7,s=b.$$scope)},[r,c,i,a,l,p,d,s,o,h,f,m]}class gl extends ue{constructor(e){super(),le(this,e,ml,dl,ie,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function bl(t){let e,n;const o=t[4].default,s=te(o,t,t[3],null);return{c(){e=P("div"),s&&s.c(),w(e,"data-name",t[2]),w(e,"class","config__tab-container"),C(e,"fn__none",!t[0]),C(e,"config__tab-container--top",t[1])},m(i,r){B(i,e,r),s&&s.m(e,null),n=!0},p(i,[r]){s&&s.p&&(!n||r&8)&&oe(s,o,i,i[3],n?ne(o,i[3],r,null):se(i[3]),null),(!n||r&4)&&w(e,"data-name",i[2]),(!n||r&1)&&C(e,"fn__none",!i[0]),(!n||r&2)&&C(e,"config__tab-container--top",i[1])},i(i){n||(_(s,i),n=!0)},o(i){y(s,i),n=!1},d(i){i&&O(e),s&&s.d(i)}}}function _l(t,e,n){let{$$slots:o={},$$scope:s}=e,{display:i=!0}=e,{top:r=!0}=e,{name:a=""}=e;return t.$$set=l=>{"display"in l&&n(0,i=l.display),"top"in l&&n(1,r=l.top),"name"in l&&n(2,a=l.name),"$$scope"in l&&n(3,s=l.$$scope)},[i,r,a,s,o]}class nn extends ue{constructor(e){super(),le(this,e,_l,bl,ie,{display:0,top:1,name:2})}}const yl=t=>({}),co=t=>({}),kl=t=>({}),fo=t=>({});function po(t){let e,n;const o=t[7].icon,s=te(o,t,t[6],fo);return{c(){e=P("span"),s&&s.c(),w(e,"class","item__icon")},m(i,r){B(i,e,r),s&&s.m(e,null),n=!0},p(i,r){s&&s.p&&(!n||r&64)&&oe(s,o,i,i[6],n?ne(o,i[6],r,kl):se(i[6]),fo)},i(i){n||(_(s,i),n=!0)},o(i){y(s,i),n=!1},d(i){i&&O(e),s&&s.d(i)}}}function wl(t){let e;return{c(){e=_e("text")},m(n,o){B(n,e,o)},d(n){n&&O(e)}}}function Sl(t){let e,n,o,s,i,r,a,l,c,u,p=t[0]&&t[4].icon&&po(t);const d=t[7].text,h=te(d,t,t[6],co),f=h||wl();return{c(){e=P("div"),n=P("span"),o=M(),p&&p.c(),s=M(),i=P("span"),f&&f.c(),r=M(),a=P("span"),w(n,"class","fn__flex-1"),w(i,"class","item__text"),w(a,"class","fn__flex-1"),w(e,"role","button"),w(e,"data-type",t[1]),w(e,"class","item item--full"),C(e,"item--focus",t[2])},m(m,b){B(m,e,b),D(e,n),D(e,o),p&&p.m(e,null),D(e,s),D(e,i),f&&f.m(i,null),D(e,r),D(e,a),l=!0,c||(u=J(e,"click",t[3]),c=!0)},p(m,[b]){m[0]&&m[4].icon?p?(p.p(m,b),b&17&&_(p,1)):(p=po(m),p.c(),_(p,1),p.m(e,s)):p&&(Q(),y(p,1,1,()=>{p=null}),Z()),h&&h.p&&(!l||b&64)&&oe(h,d,m,m[6],l?ne(d,m[6],b,yl):se(m[6]),co),(!l||b&2)&&w(e,"data-type",m[1]),(!l||b&4)&&C(e,"item--focus",m[2])},i(m){l||(_(p),_(f,m),l=!0)},o(m){y(p),y(f,m),l=!1},d(m){m&&O(e),p&&p.d(),f&&f.d(m),c=!1,u()}}}function Tl(t,e,n){let{$$slots:o={},$$scope:s}=e;const i=qa(o);let{key:r}=e,{icon:a}=e,{name:l=""}=e,{focus:c=!1}=e;const u=Gt();function p(){c||u("changed",{key:r})}return t.$$set=d=>{"key"in d&&n(5,r=d.key),"icon"in d&&n(0,a=d.icon),"name"in d&&n(1,l=d.name),"focus"in d&&n(2,c=d.focus),"$$scope"in d&&n(6,s=d.$$scope)},[a,l,c,p,i,r,s,o]}let $l=class extends ue{constructor(e){super(),le(this,e,Tl,Sl,ie,{key:5,icon:0,name:1,focus:2})}};const vl=t=>({focus:t&1}),ho=t=>({focus:t[0]});function mo(t,e,n){const o=t.slice();return o[5]=e[n],o}function El(t){let e,n=t[5].icon+"",o;return{c(){e=new vt(!1),o=re(),e.a=o},m(s,i){e.m(n,s,i),B(s,o,i)},p(s,i){i&2&&n!==(n=s[5].icon+"")&&e.p(n)},i:V,o:V,d(s){s&&(O(o),e.d())}}}function Ol(t){let e,n;return e=new we({props:{icon:t[5].icon}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&2&&(i.icon=o[5].icon),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Al(t){let e,n,o,s,i,r;const a=[Ol,El],l=[];function c(u,p){var d;return p&2&&(n=null),n==null&&(n=!!((d=u[5].icon)!=null&&d.startsWith("#"))),n?0:u[5].icon?1:-1}return~(o=c(t,-1))&&(s=l[o]=a[o](t)),{c(){e=P("span"),s&&s.c(),i=M(),w(e,"slot","icon")},m(u,p){B(u,e,p),~o&&l[o].m(e,null),D(e,i),r=!0},p(u,p){let d=o;o=c(u,p),o===d?~o&&l[o].p(u,p):(s&&(Q(),y(l[d],1,1,()=>{l[d]=null}),Z()),~o?(s=l[o],s?s.p(u,p):(s=l[o]=a[o](u),s.c()),_(s,1),s.m(e,i)):s=null)},i(u){r||(_(s),r=!0)},o(u){y(s),r=!1},d(u){u&&O(e),~o&&l[o].d()}}}function Bl(t){let e,n,o=t[5].text+"",s;return{c(){e=P("span"),n=new vt(!1),s=M(),n.a=s,w(e,"slot","text")},m(i,r){B(i,e,r),n.m(o,e),D(e,s)},p(i,r){r&2&&o!==(o=i[5].text+"")&&n.p(o)},d(i){i&&O(e)}}}function go(t,e){let n,o,s;return o=new $l({props:{key:e[5].key,icon:!!e[5].icon,name:e[5].name,focus:e[5].key===e[0],$$slots:{text:[Bl],icon:[Al]},$$scope:{ctx:e}}}),o.$on("changed",e[2]),{key:t,first:null,c(){n=re(),A(o.$$.fragment),this.first=n},m(i,r){B(i,n,r),v(o,i,r),s=!0},p(i,r){e=i;const a={};r&2&&(a.key=e[5].key),r&2&&(a.icon=!!e[5].icon),r&2&&(a.name=e[5].name),r&3&&(a.focus=e[5].key===e[0]),r&18&&(a.$$scope={dirty:r,ctx:e}),o.$set(a)},i(i){s||(_(o.$$.fragment,i),s=!0)},o(i){y(o.$$.fragment,i),s=!1},d(i){i&&O(n),E(o,i)}}}function Cl(t){let e;return{c(){e=_e("Container")},m(n,o){B(n,e,o)},d(n){n&&O(e)}}}function Nl(t){let e,n,o=[],s=new Map,i,r,a,l=he(t[1]);const c=h=>h[5].key;for(let h=0;h<l.length;h+=1){let f=mo(t,l,h),m=c(f);s.set(m,o[h]=go(m,f))}const u=t[3].default,p=te(u,t,t[4],ho),d=p||Cl();return{c(){e=P("div"),n=P("div");for(let h=0;h<o.length;h+=1)o[h].c();i=M(),r=P("div"),d&&d.c(),w(n,"class","layout-tab-bar fn__flex"),w(r,"class","fn__flex-1"),w(e,"class","fn__flex-column"),Ee(e,"height","100%")},m(h,f){B(h,e,f),D(e,n);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(n,null);D(e,i),D(e,r),d&&d.m(r,null),a=!0},p(h,[f]){f&7&&(l=he(h[1]),Q(),o=Ve(o,f,c,1,h,l,s,n,st,go,null,mo),Z()),p&&p.p&&(!a||f&17)&&oe(p,u,h,h[4],a?ne(u,h[4],f,vl):se(h[4]),ho)},i(h){if(!a){for(let f=0;f<l.length;f+=1)_(o[f]);_(d,h),a=!0}},o(h){for(let f=0;f<o.length;f+=1)y(o[f]);y(d,h),a=!1},d(h){h&&O(e);for(let f=0;f<o.length;f+=1)o[f].d();d&&d.d(h)}}}function Rl(t,e,n){let{$$slots:o={},$$scope:s}=e,{tabs:i}=e,{focus:r}=e;function a(l){n(0,r=l.detail.key)}return t.$$set=l=>{"tabs"in l&&n(1,i=l.tabs),"focus"in l&&n(0,r=l.focus),"$$scope"in l&&n(4,s=l.$$scope)},[r,i,a,o,s]}class Qs extends ue{constructor(e){super(),le(this,e,Rl,Nl,ie,{tabs:1,focus:0})}}const Dl=t=>({}),bo=t=>({}),Pl=t=>({}),_o=t=>({}),Ml=t=>({}),yo=t=>({}),Ll=t=>({}),ko=t=>({});function Il(t){let e,n;return{c(){e=new vt(!1),n=re(),e.a=n},m(o,s){e.m(t[0],o,s),B(o,n,s)},p(o,s){s&1&&e.p(o[0])},d(o){o&&(O(n),e.d())}}}function Wl(t){let e,n;return{c(){e=new vt(!1),n=re(),e.a=n},m(o,s){e.m(t[1],o,s),B(o,n,s)},p(o,s){s&2&&e.p(o[1])},d(o){o&&(O(n),e.d())}}}function wo(t){let e,n,o;const s=t[4].input,i=te(s,t,t[3],_o);return{c(){e=P("div"),n=M(),i&&i.c(),w(e,"class","fn__hr")},m(r,a){B(r,e,a),B(r,n,a),i&&i.m(r,a),o=!0},p(r,a){i&&i.p&&(!o||a&8)&&oe(i,s,r,r[3],o?ne(s,r[3],a,Pl):se(r[3]),_o)},i(r){o||(_(i,r),o=!0)},o(r){y(i,r),o=!1},d(r){r&&(O(e),O(n)),i&&i.d(r)}}}function So(t){let e,n,o;const s=t[4].input,i=te(s,t,t[3],bo);return{c(){e=P("span"),n=M(),i&&i.c(),w(e,"class","fn__space")},m(r,a){B(r,e,a),B(r,n,a),i&&i.m(r,a),o=!0},p(r,a){i&&i.p&&(!o||a&8)&&oe(i,s,r,r[3],o?ne(s,r[3],a,Dl):se(r[3]),bo)},i(r){o||(_(i,r),o=!0)},o(r){y(i,r),o=!1},d(r){r&&(O(e),O(n)),i&&i.d(r)}}}function jl(t){let e,n,o,s,i,r,a;const l=t[4].title,c=te(l,t,t[3],ko),u=c||Il(t),p=t[4].text,d=te(p,t,t[3],yo),h=d||Wl(t);let f=t[2]&&wo(t),m=!t[2]&&So(t);return{c(){e=P("label"),n=P("div"),u&&u.c(),o=M(),s=P("div"),h&&h.c(),i=M(),f&&f.c(),r=M(),m&&m.c(),w(s,"class","b3-label__text"),w(n,"class","fn__flex-1 svelte-2m76cy"),C(n,"visible",t[2]),w(e,"class","fn__flex b3-label")},m(b,g){B(b,e,g),D(e,n),u&&u.m(n,null),D(n,o),D(n,s),h&&h.m(s,null),D(n,i),f&&f.m(n,null),D(e,r),m&&m.m(e,null),a=!0},p(b,[g]){c?c.p&&(!a||g&8)&&oe(c,l,b,b[3],a?ne(l,b[3],g,Ll):se(b[3]),ko):u&&u.p&&(!a||g&1)&&u.p(b,a?g:-1),d?d.p&&(!a||g&8)&&oe(d,p,b,b[3],a?ne(p,b[3],g,Ml):se(b[3]),yo):h&&h.p&&(!a||g&2)&&h.p(b,a?g:-1),b[2]?f?(f.p(b,g),g&4&&_(f,1)):(f=wo(b),f.c(),_(f,1),f.m(n,null)):f&&(Q(),y(f,1,1,()=>{f=null}),Z()),(!a||g&4)&&C(n,"visible",b[2]),b[2]?m&&(Q(),y(m,1,1,()=>{m=null}),Z()):m?(m.p(b,g),g&4&&_(m,1)):(m=So(b),m.c(),_(m,1),m.m(e,null))},i(b){a||(_(u,b),_(h,b),_(f),_(m),a=!0)},o(b){y(u,b),y(h,b),y(f),y(m),a=!1},d(b){b&&O(e),u&&u.d(b),h&&h.d(b),f&&f.d(),m&&m.d()}}}function Fl(t,e,n){let{$$slots:o={},$$scope:s}=e,{title:i=""}=e,{text:r=""}=e,{block:a=!1}=e;return t.$$set=l=>{"title"in l&&n(0,i=l.title),"text"in l&&n(1,r=l.text),"block"in l&&n(2,a=l.block),"$$scope"in l&&n(3,s=l.$$scope)},[i,r,a,s,o]}let ee=class extends ue{constructor(e){super(),le(this,e,Fl,jl,ie,{title:0,text:1,block:2})}};var F=(t=>(t[t.checkbox=0]="checkbox",t[t.text=1]="text",t[t.number=2]="number",t[t.slider=3]="slider",t[t.button=4]="button",t[t.select=5]="select",t[t.textarea=6]="textarea",t))(F||{});function To(t,e,n){const o=t.slice();return o[19]=e[n],o}function ql(t){let e,n,o;return{c(){e=P("textarea"),e.disabled=t[2],w(e,"class","b3-text-field"),w(e,"placeholder",t[5]),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),Ee(e,"height",t[8]>0?`${t[8]}px`:void 0)},m(s,i){B(s,e,i),pe(e,t[0]),n||(o=[J(e,"input",t[17]),J(e,"change",t[10])],n=!0)},p(s,i){i&4&&(e.disabled=s[2]),i&32&&w(e,"placeholder",s[5]),i&65&&pe(e,s[0]),i&8&&C(e,"fn__block",s[3]),i&24&&C(e,"fn__size200",!s[3]&&s[4]),i&256&&Ee(e,"height",s[8]>0?`${s[8]}px`:void 0)},d(s){s&&O(e),n=!1,ae(o)}}}function Ul(t){let e,n=[],o=new Map,s,i,r=he(t[6]);const a=l=>l[19].key;for(let l=0;l<r.length;l+=1){let c=To(t,r,l),u=a(c);o.set(u,n[l]=$o(u,c))}return{c(){e=P("select");for(let l=0;l<n.length;l+=1)n[l].c();e.disabled=t[2],w(e,"class","b3-select"),t[0]===void 0&&He(()=>t[16].call(e)),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),C(e,"fn__flex-center",!t[3])},m(l,c){B(l,e,c);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);oo(e,t[0],!0),s||(i=[J(e,"change",t[16]),J(e,"change",t[10])],s=!0)},p(l,c){c&64&&(r=he(l[6]),n=Ve(n,c,a,1,l,r,o,e,al,$o,null,To)),c&4&&(e.disabled=l[2]),c&65&&oo(e,l[0]),c&8&&C(e,"fn__block",l[3]),c&24&&C(e,"fn__size200",!l[3]&&l[4]),c&8&&C(e,"fn__flex-center",!l[3])},d(l){l&&O(e);for(let c=0;c<n.length;c+=1)n[c].d();s=!1,ae(i)}}}function Kl(t){let e,n,o,s;return{c(){e=P("button"),n=_e(t[0]),e.disabled=t[2],w(e,"class","b3-button b3-button--outline"),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),C(e,"fn__flex-center",!t[3])},m(i,r){B(i,e,r),D(e,n),o||(s=J(e,"click",t[9]),o=!0)},p(i,r){r&1&&Ue(n,i[0]),r&4&&(e.disabled=i[2]),r&8&&C(e,"fn__block",i[3]),r&24&&C(e,"fn__size200",!i[3]&&i[4]),r&8&&C(e,"fn__flex-center",!i[3])},d(i){i&&O(e),o=!1,s()}}}function Hl(t){let e,n,o,s,i,r;return{c(){e=P("input"),e.disabled=t[2],w(e,"class","b3-slider svelte-edt8og"),w(e,"type","range"),w(e,"min",n=t[7].min),w(e,"max",o=t[7].max),w(e,"step",s=t[7].step),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4])},m(a,l){B(a,e,l),pe(e,t[0]),i||(r=[J(e,"change",t[15]),J(e,"input",t[15]),J(e,"change",t[10])],i=!0)},p(a,l){l&4&&(e.disabled=a[2]),l&128&&n!==(n=a[7].min)&&w(e,"min",n),l&128&&o!==(o=a[7].max)&&w(e,"max",o),l&128&&s!==(s=a[7].step)&&w(e,"step",s),l&65&&pe(e,a[0]),l&8&&C(e,"fn__block",a[3]),l&24&&C(e,"fn__size200",!a[3]&&a[4])},d(a){a&&O(e),i=!1,ae(r)}}}function Vl(t){let e,n,o,s,i,r;return{c(){e=P("input"),e.disabled=t[2],w(e,"class","b3-text-field"),w(e,"type","number"),w(e,"placeholder",t[5]),w(e,"min",n=t[7].min),w(e,"max",o=t[7].max),w(e,"step",s=t[7].step),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),C(e,"fn__flex-center",!t[3])},m(a,l){B(a,e,l),pe(e,t[0]),i||(r=[J(e,"input",t[14]),J(e,"change",t[10])],i=!0)},p(a,l){l&4&&(e.disabled=a[2]),l&32&&w(e,"placeholder",a[5]),l&128&&n!==(n=a[7].min)&&w(e,"min",n),l&128&&o!==(o=a[7].max)&&w(e,"max",o),l&128&&s!==(s=a[7].step)&&w(e,"step",s),l&65&&hn(e.value)!==a[0]&&pe(e,a[0]),l&8&&C(e,"fn__block",a[3]),l&24&&C(e,"fn__size200",!a[3]&&a[4]),l&8&&C(e,"fn__flex-center",!a[3])},d(a){a&&O(e),i=!1,ae(r)}}}function zl(t){let e,n,o;return{c(){e=P("input"),e.disabled=t[2],w(e,"class","b3-text-field"),w(e,"placeholder",t[5]),C(e,"fn__block",t[3]),C(e,"fn__size200",!t[3]&&t[4]),C(e,"fn__flex-center",!t[3])},m(s,i){B(s,e,i),pe(e,t[0]),n||(o=[J(e,"input",t[13]),J(e,"change",t[10])],n=!0)},p(s,i){i&4&&(e.disabled=s[2]),i&32&&w(e,"placeholder",s[5]),i&65&&e.value!==s[0]&&pe(e,s[0]),i&8&&C(e,"fn__block",s[3]),i&24&&C(e,"fn__size200",!s[3]&&s[4]),i&8&&C(e,"fn__flex-center",!s[3])},d(s){s&&O(e),n=!1,ae(o)}}}function Gl(t){let e,n,o;return{c(){e=P("input"),e.disabled=t[2],w(e,"class","b3-switch svelte-edt8og"),w(e,"type","checkbox"),C(e,"fn__block",t[3]),C(e,"fn__flex-center",!t[3])},m(s,i){B(s,e,i),e.checked=t[0],n||(o=[J(e,"change",t[12]),J(e,"change",t[10])],n=!0)},p(s,i){i&4&&(e.disabled=s[2]),i&65&&(e.checked=s[0]),i&8&&C(e,"fn__block",s[3]),i&8&&C(e,"fn__flex-center",!s[3])},d(s){s&&O(e),n=!1,ae(o)}}}function $o(t,e){let n,o=e[19].text+"",s,i;return{key:t,first:null,c(){n=P("option"),s=_e(o),n.__value=i=e[19].key,pe(n,n.__value),this.first=n},m(r,a){B(r,n,a),D(n,s)},p(r,a){e=r,a&64&&o!==(o=e[19].text+"")&&Ue(s,o),a&64&&i!==(i=e[19].key)&&(n.__value=i,pe(n,n.__value))},d(r){r&&O(n)}}}function Jl(t){let e;function n(i,r){if(i[1]===F.checkbox)return Gl;if(i[1]===F.text)return zl;if(i[1]===F.number)return Vl;if(i[1]===F.slider)return Hl;if(i[1]===F.button)return Kl;if(i[1]===F.select)return Ul;if(i[1]===F.textarea)return ql}let o=n(t),s=o&&o(t);return{c(){s&&s.c(),e=re()},m(i,r){s&&s.m(i,r),B(i,e,r)},p(i,[r]){o===(o=n(i))&&s?s.p(i,r):(s&&s.d(1),s=o&&o(i),s&&(s.c(),s.m(e.parentNode,e)))},i:V,o:V,d(i){i&&O(e),s&&s.d(i)}}}function Yl(t,e,n){let{type:o}=e,{settingKey:s}=e,{settingValue:i}=e,{disabled:r=!1}=e,{block:a=!1}=e,{normal:l=!0}=e,{placeholder:c=""}=e,{options:u=[]}=e,{limits:p={min:0,max:100,step:1}}=e,{height:d=0}=e;const h=Gt();function f(L){h("clicked",{event:L})}function m(L){h("changed",{key:s,value:i,event:L})}function b(){i=this.checked,n(0,i),n(6,u)}function g(){i=this.value,n(0,i),n(6,u)}function W(){i=hn(this.value),n(0,i),n(6,u)}function q(){i=hn(this.value),n(0,i),n(6,u)}function $(){i=Ya(this),n(0,i),n(6,u)}function K(){i=this.value,n(0,i),n(6,u)}return t.$$set=L=>{"type"in L&&n(1,o=L.type),"settingKey"in L&&n(11,s=L.settingKey),"settingValue"in L&&n(0,i=L.settingValue),"disabled"in L&&n(2,r=L.disabled),"block"in L&&n(3,a=L.block),"normal"in L&&n(4,l=L.normal),"placeholder"in L&&n(5,c=L.placeholder),"options"in L&&n(6,u=L.options),"limits"in L&&n(7,p=L.limits),"height"in L&&n(8,d=L.height)},[i,o,r,a,l,c,u,p,d,f,m,s,b,g,W,q,$,K]}class z extends ue{constructor(e){super(),le(this,e,Yl,Jl,ie,{type:1,settingKey:11,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8})}}function Xl(t){let e,n,o,s,i;const r=t[2].default,a=te(r,t,t[1],null);return{c(){e=P("div"),n=new vt(!1),o=M(),s=P("div"),a&&a.c(),n.a=o,w(s,"class","config-query"),w(e,"class","b3-label")},m(l,c){B(l,e,c),n.m(t[0],e),D(e,o),D(e,s),a&&a.m(s,null),i=!0},p(l,[c]){(!i||c&1)&&n.p(l[0]),a&&a.p&&(!i||c&2)&&oe(a,r,l,l[1],i?ne(r,l[1],c,null):se(l[1]),null)},i(l){i||(_(a,l),i=!0)},o(l){y(a,l),i=!1},d(l){l&&O(e),a&&a.d(l)}}}function Ql(t,e,n){let{$$slots:o={},$$scope:s}=e,{title:i}=e;return t.$$set=r=>{"title"in r&&n(0,i=r.title),"$$scope"in r&&n(1,s=r.$$scope)},[i,s,o]}class An extends ue{constructor(e){super(),le(this,e,Ql,Xl,ie,{title:0})}}const Zl=t=>({}),vo=t=>({}),xl=t=>({}),Eo=t=>({}),eu=t=>({}),Oo=t=>({});function tu(t){let e,n,o,s,i,r,a,l,c;const u=t[3].icon,p=te(u,t,t[2],Oo),d=t[3].title,h=te(d,t,t[2],Eo),f=t[3].input,m=te(f,t,t[2],vo);return{c(){e=P("label"),p&&p.c(),n=M(),o=P("span"),s=M(),i=P("div"),h&&h.c(),r=M(),a=P("span"),l=M(),m&&m.c(),w(o,"class","fn__space"),w(i,"class","fn__flex-1"),w(a,"class","fn__space"),Ee(e,"min-width",t[0]),Ee(e,"margin-right",t[1]),w(e,"class","fn__flex svelte-1l7osn9")},m(b,g){B(b,e,g),p&&p.m(e,null),D(e,n),D(e,o),D(e,s),D(e,i),h&&h.m(i,null),D(e,r),D(e,a),D(e,l),m&&m.m(e,null),c=!0},p(b,[g]){p&&p.p&&(!c||g&4)&&oe(p,u,b,b[2],c?ne(u,b[2],g,eu):se(b[2]),Oo),h&&h.p&&(!c||g&4)&&oe(h,d,b,b[2],c?ne(d,b[2],g,xl):se(b[2]),Eo),m&&m.p&&(!c||g&4)&&oe(m,f,b,b[2],c?ne(f,b[2],g,Zl):se(b[2]),vo),(!c||g&1)&&Ee(e,"min-width",b[0]),(!c||g&2)&&Ee(e,"margin-right",b[1])},i(b){c||(_(p,b),_(h,b),_(m,b),c=!0)},o(b){y(p,b),y(h,b),y(m,b),c=!1},d(b){b&&O(e),p&&p.d(b),h&&h.d(b),m&&m.d(b)}}}function nu(t,e,n){let{$$slots:o={},$$scope:s}=e,{minWidth:i="24em"}=e,{marginRight:r="2em"}=e;return t.$$set=a=>{"minWidth"in a&&n(0,i=a.minWidth),"marginRight"in a&&n(1,r=a.marginRight),"$$scope"in a&&n(2,s=a.$$scope)},[i,r,s,o]}class Ke extends ue{constructor(e){super(),le(this,e,nu,tu,ie,{minWidth:0,marginRight:1})}}var Be=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(Be||{}),X=(t=>(t.click="click",t.dblclick="dblclick",t.contextmenu="contextmenu",t.mousedown="mousedown",t.mouseup="mouseup",t.mouseenter="mouseenter",t.mouseleave="mouseleave",t.mousewheel="mousewheel",t.mouseover="mouseover",t.mousemove="mousemove",t.mouseout="mouseout",t))(X||{});function Ao(t){let e,n;return e=new Ke({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[iu],title:[su],default:[ou]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&4&&(i.minWidth=o[2]),s&8&&(i.marginRight=o[3]),s&4195329&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function ou(t){let e,n;return e=new we({props:{icon:"#iconKeymap",className:"svg"}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p:V,i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function su(t){let e;return{c(){e=P("kbd"),e.textContent="Ctrl",w(e,"slot","title")},m(n,o){B(n,e,o)},p:V,d(n){n&&O(e)}}}function iu(t){let e,n;return e=new z({props:{slot:"input",normal:!1,disabled:t[10],type:F.checkbox,settingKey:"ctrlKey",settingValue:t[0].ctrlKey}}),e.$on("changed",t[20]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&1024&&(i.disabled=o[10]),s&1&&(i.settingValue=o[0].ctrlKey),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Bo(t){let e,n;return e=new Ke({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[lu],title:[au],default:[ru]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&4&&(i.minWidth=o[2]),s&8&&(i.marginRight=o[3]),s&4196353&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function ru(t){let e,n;return e=new we({props:{icon:"#iconKeymap",className:"svg"}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p:V,i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function au(t){let e;return{c(){e=P("kbd"),e.textContent="Shift",w(e,"slot","title")},m(n,o){B(n,e,o)},p:V,d(n){n&&O(e)}}}function lu(t){let e,n;return e=new z({props:{slot:"input",normal:!1,disabled:t[11],type:F.checkbox,settingKey:"shiftKey",settingValue:t[0].shiftKey}}),e.$on("changed",t[20]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&2048&&(i.disabled=o[11]),s&1&&(i.settingValue=o[0].shiftKey),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Co(t){let e,n;return e=new Ke({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[fu],title:[cu],default:[uu]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&4&&(i.minWidth=o[2]),s&8&&(i.marginRight=o[3]),s&4198401&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function uu(t){let e,n;return e=new we({props:{icon:"#iconKeymap",className:"svg"}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p:V,i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function cu(t){let e;return{c(){e=P("kbd"),e.textContent="Alt",w(e,"slot","title")},m(n,o){B(n,e,o)},p:V,d(n){n&&O(e)}}}function fu(t){let e,n;return e=new z({props:{slot:"input",normal:!1,disabled:t[12],type:F.checkbox,settingKey:"altKey",settingValue:t[0].altKey}}),e.$on("changed",t[20]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&4096&&(i.disabled=o[12]),s&1&&(i.settingValue=o[0].altKey),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function No(t){let e,n;return e=new Ke({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[du],title:[hu],default:[pu]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&4&&(i.minWidth=o[2]),s&8&&(i.marginRight=o[3]),s&4202497&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function pu(t){let e,n;return e=new we({props:{icon:"#iconKeymap",className:"svg"}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p:V,i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function hu(t){let e;return{c(){e=P("kbd"),e.textContent="Meta",w(e,"slot","title")},m(n,o){B(n,e,o)},p:V,d(n){n&&O(e)}}}function du(t){let e,n;return e=new z({props:{slot:"input",normal:!1,disabled:t[13],type:F.checkbox,settingKey:"metaKey",settingValue:t[0].metaKey}}),e.$on("changed",t[20]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&8192&&(i.disabled=o[13]),s&1&&(i.settingValue=o[0].metaKey),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Ro(t){let e,n;return e=new Ke({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[bu],title:[gu],default:[mu]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&4&&(i.minWidth=o[2]),s&8&&(i.marginRight=o[3]),s&4538369&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function mu(t){let e,n;return e=new we({props:{icon:"#iconSelectText",className:"svg"}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p:V,i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function gu(t){let e,n;return{c(){e=P("span"),n=_e(t[16]),w(e,"slot","title")},m(o,s){B(o,e,s),D(e,n)},p(o,s){s&65536&&Ue(n,o[16])},d(o){o&&O(e)}}}function bu(t){let e,n;return e=new z({props:{slot:"input",normal:!1,disabled:t[14],type:F.select,settingKey:"button",settingValue:t[0].button,options:t[18]}}),e.$on("changed",t[20]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&16384&&(i.disabled=o[14]),s&1&&(i.settingValue=o[0].button),s&262144&&(i.options=o[18]),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Do(t){let e,n;return e=new Ke({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[ku],title:[yu],default:[_u]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&4&&(i.minWidth=o[2]),s&8&&(i.marginRight=o[3]),s&4882433&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function _u(t){let e,n;return e=new we({props:{icon:"#iconSelectText",className:"svg"}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p:V,i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function yu(t){let e,n;return{c(){e=P("span"),n=_e(t[17]),w(e,"slot","title")},m(o,s){B(o,e,s),D(e,n)},p(o,s){s&131072&&Ue(n,o[17])},d(o){o&&O(e)}}}function ku(t){let e,n;return e=new z({props:{slot:"input",normal:!1,disabled:t[15],type:F.select,settingKey:"type",settingValue:t[0].type,options:t[19]}}),e.$on("changed",t[20]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&32768&&(i.disabled=o[15]),s&1&&(i.settingValue=o[0].type),s&524288&&(i.options=o[19]),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function wu(t){let e,n,o,s,i,r,a,l=t[4]&&Ao(t),c=t[5]&&Bo(t),u=t[6]&&Co(t),p=t[7]&&No(t),d=t[8]&&Ro(t),h=t[9]&&Do(t);return{c(){l&&l.c(),e=M(),c&&c.c(),n=M(),u&&u.c(),o=M(),p&&p.c(),s=M(),d&&d.c(),i=M(),h&&h.c(),r=re()},m(f,m){l&&l.m(f,m),B(f,e,m),c&&c.m(f,m),B(f,n,m),u&&u.m(f,m),B(f,o,m),p&&p.m(f,m),B(f,s,m),d&&d.m(f,m),B(f,i,m),h&&h.m(f,m),B(f,r,m),a=!0},p(f,m){f[4]?l?(l.p(f,m),m&16&&_(l,1)):(l=Ao(f),l.c(),_(l,1),l.m(e.parentNode,e)):l&&(Q(),y(l,1,1,()=>{l=null}),Z()),f[5]?c?(c.p(f,m),m&32&&_(c,1)):(c=Bo(f),c.c(),_(c,1),c.m(n.parentNode,n)):c&&(Q(),y(c,1,1,()=>{c=null}),Z()),f[6]?u?(u.p(f,m),m&64&&_(u,1)):(u=Co(f),u.c(),_(u,1),u.m(o.parentNode,o)):u&&(Q(),y(u,1,1,()=>{u=null}),Z()),f[7]?p?(p.p(f,m),m&128&&_(p,1)):(p=No(f),p.c(),_(p,1),p.m(s.parentNode,s)):p&&(Q(),y(p,1,1,()=>{p=null}),Z()),f[8]?d?(d.p(f,m),m&256&&_(d,1)):(d=Ro(f),d.c(),_(d,1),d.m(i.parentNode,i)):d&&(Q(),y(d,1,1,()=>{d=null}),Z()),f[9]?h?(h.p(f,m),m&512&&_(h,1)):(h=Do(f),h.c(),_(h,1),h.m(r.parentNode,r)):h&&(Q(),y(h,1,1,()=>{h=null}),Z())},i(f){a||(_(l),_(c),_(u),_(p),_(d),_(h),a=!0)},o(f){y(l),y(c),y(u),y(p),y(d),y(h),a=!1},d(f){f&&(O(e),O(n),O(o),O(s),O(i),O(r)),l&&l.d(f),c&&c.d(f),u&&u.d(f),p&&p.d(f),d&&d.d(f),h&&h.d(f)}}}function Su(t){let e,n;return e=new An({props:{title:t[1],$$slots:{default:[wu]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,[s]){const i={};s&2&&(i.title=o[1]),s&5242877&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Tu(t,e,n){let{title:o}=e,{shortcut:s}=e,{minWidth:i=void 0}=e,{marginRight:r=void 0}=e,{displayCtrlKey:a=!0}=e,{displayShiftKey:l=!0}=e,{displayAltKey:c=!0}=e,{displayMetaKey:u=!0}=e,{displayMouseButton:p=!0}=e,{displayMouseEvent:d=!0}=e,{disabledCtrlKey:h=!1}=e,{disabledShiftKey:f=!1}=e,{disabledAltKey:m=!1}=e,{disabledMetaKey:b=!1}=e,{disabledMouseButton:g=!1}=e,{disabledMouseEvent:W=!1}=e,{mouseButtonTitle:q="Mouse Button"}=e,{mouseEventTitle:$="Mouse Event"}=e,{mouseButtonOptions:K=[{key:Be.Left,text:"Left"},{key:Be.Middle,text:"Middle"},{key:Be.Right,text:"Right"},{key:Be.Back,text:"Back"},{key:Be.Forward,text:"Forward"}]}=e,{mouseEventOptions:L=[{key:X.click,text:X.click},{key:X.dblclick,text:X.dblclick},{key:X.mousedown,text:X.mousedown},{key:X.mouseup,text:X.mouseup},{key:X.mouseenter,text:X.mouseenter},{key:X.mouseleave,text:X.mouseleave},{key:X.mousewheel,text:X.mousewheel},{key:X.mouseover,text:X.mouseover},{key:X.mousemove,text:X.mousemove},{key:X.mouseout,text:X.mouseout}]}=e;const H=Gt();function j(N){s.hasOwnProperty(N.detail.key)&&n(0,s[N.detail.key]=N.detail.value,s),H("changed",{shortcut:s})}return t.$$set=N=>{"title"in N&&n(1,o=N.title),"shortcut"in N&&n(0,s=N.shortcut),"minWidth"in N&&n(2,i=N.minWidth),"marginRight"in N&&n(3,r=N.marginRight),"displayCtrlKey"in N&&n(4,a=N.displayCtrlKey),"displayShiftKey"in N&&n(5,l=N.displayShiftKey),"displayAltKey"in N&&n(6,c=N.displayAltKey),"displayMetaKey"in N&&n(7,u=N.displayMetaKey),"displayMouseButton"in N&&n(8,p=N.displayMouseButton),"displayMouseEvent"in N&&n(9,d=N.displayMouseEvent),"disabledCtrlKey"in N&&n(10,h=N.disabledCtrlKey),"disabledShiftKey"in N&&n(11,f=N.disabledShiftKey),"disabledAltKey"in N&&n(12,m=N.disabledAltKey),"disabledMetaKey"in N&&n(13,b=N.disabledMetaKey),"disabledMouseButton"in N&&n(14,g=N.disabledMouseButton),"disabledMouseEvent"in N&&n(15,W=N.disabledMouseEvent),"mouseButtonTitle"in N&&n(16,q=N.mouseButtonTitle),"mouseEventTitle"in N&&n(17,$=N.mouseEventTitle),"mouseButtonOptions"in N&&n(18,K=N.mouseButtonOptions),"mouseEventOptions"in N&&n(19,L=N.mouseEventOptions)},[s,o,i,r,a,l,c,u,p,d,h,f,m,b,g,W,q,$,K,L,j]}class Zs extends ue{constructor(e){super(),le(this,e,Tu,Su,ie,{title:1,shortcut:0,minWidth:2,marginRight:3,displayCtrlKey:4,displayShiftKey:5,displayAltKey:6,displayMetaKey:7,displayMouseButton:8,displayMouseEvent:9,disabledCtrlKey:10,disabledShiftKey:11,disabledAltKey:12,disabledMetaKey:13,disabledMouseButton:14,disabledMouseEvent:15,mouseButtonTitle:16,mouseEventTitle:17,mouseButtonOptions:18,mouseEventOptions:19})}}function $u(t,e=!0){const n=[{role:"about"},...t?[{type:"separator"},{role:"help"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"}]:[],{type:"separator"},{role:"quit"}],o=[...t?[{role:"recentDocuments"},{role:"clearRecentDocuments"},{type:"separator"}]:[],{role:"close"}],s=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteAndMatchStyle"},{role:"delete"},{type:"separator"},{role:"selectAll"},{type:"separator"},{role:"toggleSpellChecker"},...t?[{type:"separator"},{role:"showSubstitutions"},{role:"toggleTextReplacement"},{type:"separator"},{role:"toggleSmartQuotes"},{role:"toggleSmartDashes"},{type:"separator"},{role:"startSpeaking"},{role:"stopSpeaking"}]:[]],i=[{role:"reload"},{role:"forceReload"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn",accelerator:"CmdOrCtrl+="},{role:"zoomOut"},...t?[{role:"zoom"},{type:"separator"},{role:"front"}]:[{type:"separator"},{label:"Toggle On Top",click:(l,c,u)=>{c&&c.setAlwaysOnTop(!c.isAlwaysOnTop())},type:"checkbox",checked:e,accelerator:"CmdOrCtrl+Shift+Space"}],{role:"togglefullscreen"},{type:"separator"},{role:"toggleDevTools"}],r=[...t?[{role:"window"},{type:"separator"},{role:"toggleTabBar"},{role:"selectNextTab"},{role:"selectPreviousTab"},{role:"mergeAllWindows"},{role:"moveTabToNewWindow"},{type:"separator"}]:[],{role:"minimize"},{role:"close"}],a=[{role:"appMenu",submenu:n},{role:"fileMenu",submenu:o},{role:"editMenu",submenu:s},{role:"viewMenu",submenu:i},{role:"windowMenu",submenu:r}];return t&&a.push({role:"shareMenu"}),a}var be=(t=>(t[t.AlwaysShow=0]="AlwaysShow",t[t.AutoHide=1]="AutoHide",t[t.Disabled=2]="Disabled",t))(be||{});function vu(t,e,n,o,s){n.webPreferences=Pt(n.webPreferences||{},o);const i=Pt(e,n);if(Zo())try{i.center&&(delete i.x,delete i.y);const{BrowserWindow:r,Menu:a}=globalThis.require("@electron/remote"),l=new r(i);if(i.enableMenuBar){const c=a.buildFromTemplate($u(globalThis.process.platform==="darwin",i.alwaysOnTop));l.setMenu(c)}else l.removeMenu();return i.enableElectron&&globalThis.require("@electron/remote").require("@electron/remote/main").enable(l.webContents),l.loadURL(t.href,{userAgent:s.useragent}),l}catch(r){s.logger.warn(r)}else return i.center&&(i.x=(globalThis.screen.width-i.width)/2,i.y=(globalThis.screen.height-i.height)/2),console.debug(globalThis.screen,i),globalThis.open(t.href,t.href,["popup = true",`width = ${i.width}`,`height = ${i.height}`,`left = ${i.x}`,`top = ${i.y}`].join(", "))}function Po(t,e,n){const o=t.slice();return o[31]=e[n][0],o[32]=e[n][1],o[33]=e,o[34]=n,o}function Mo(t,e,n){const o=t.slice();return o[31]=e[n][0],o[32]=e[n][1],o[35]=e,o[36]=n,o}function Eu(t){let e,n;return e=new z({props:{slot:"input",type:F.text,block:!0,placeholder:globalThis.navigator.userAgent,settingKey:"Text",settingValue:t[0].general.useragent}}),e.$on("changed",t[7]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].general.useragent),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Ou(t){let e,n;return e=new z({props:{slot:"input",type:F.text,settingKey:"text",settingValue:t[0].general.background}}),e.$on("changed",t[8]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].general.background),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Au(t){let e,n;return e=new z({props:{slot:"input",type:F.button,settingKey:"Reset",settingValue:t[2].settings.generalSettings.reset.text}}),e.$on("clicked",t[4]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p:V,i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Bu(t){let e,n,o,s,i,r;return e=new ee({props:{title:t[2].settings.generalSettings.useragent.title,text:t[2].settings.generalSettings.useragent.description,block:!0,$$slots:{input:[Eu]},$$scope:{ctx:t}}}),o=new ee({props:{title:t[2].settings.background.title,text:t[2].settings.background.description,$$slots:{input:[Ou]},$$scope:{ctx:t}}}),i=new ee({props:{title:t[2].settings.generalSettings.reset.title,text:t[2].settings.generalSettings.reset.description,$$slots:{input:[Au]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment),n=M(),A(o.$$.fragment),s=M(),A(i.$$.fragment)},m(a,l){v(e,a,l),B(a,n,l),v(o,a,l),B(a,s,l),v(i,a,l),r=!0},p(a,l){const c={};l[0]&1|l[1]&64&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const u={};l[0]&1|l[1]&64&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const p={};l[1]&64&&(p.$$scope={dirty:l,ctx:a}),i.$set(p)},i(a){r||(_(e.$$.fragment,a),_(o.$$.fragment,a),_(i.$$.fragment,a),r=!0)},o(a){y(e.$$.fragment,a),y(o.$$.fragment,a),y(i.$$.fragment,a),r=!1},d(a){a&&(O(n),O(s)),E(e,a),E(o,a),E(i,a)}}}function Cu(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.enable}}),e.$on("changed",t[9]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].tab.enable),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Nu(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.open.targets.hyperlink.editor.enable}}),e.$on("changed",t[10]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].tab.open.targets.hyperlink.editor.enable),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Ru(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.open.targets.hyperlink.other.enable}}),e.$on("changed",t[11]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].tab.open.targets.hyperlink.other.enable),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Du(t){let e,n=t[32].prefix+"",o;return{c(){e=P("code"),o=_e(n),w(e,"slot","title"),w(e,"class","fn__code")},m(s,i){B(s,e,i),D(e,o)},p(s,i){i[0]&1&&n!==(n=s[32].prefix+"")&&Ue(o,n)},d(s){s&&O(e)}}}function Pu(t){let e,n;function o(...s){return t[12](t[32],t[35],t[36],...s)}return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:t[32].enable}}),e.$on("changed",o),{c(){A(e.$$.fragment)},m(s,i){v(e,s,i),n=!0},p(s,i){t=s;const r={};i[0]&1&&(r.settingValue=t[32].enable),e.$set(r)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function Lo(t,e){let n,o,s;return o=new Ke({props:{minWidth:"8em",$$slots:{input:[Pu],title:[Du]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=re(),A(o.$$.fragment),this.first=n},m(i,r){B(i,n,r),v(o,i,r),s=!0},p(i,r){e=i;const a={};r[0]&1|r[1]&64&&(a.$$scope={dirty:r,ctx:e}),o.$set(a)},i(i){s||(_(o.$$.fragment,i),s=!0)},o(i){y(o.$$.fragment,i),s=!1},d(i){i&&O(n),E(o,i)}}}function Mu(t){let e=[],n=new Map,o,s,i=he(Object.entries(t[0].tab.open.protocols));const r=a=>a[31];for(let a=0;a<i.length;a+=1){let l=Mo(t,i,a),c=r(l);n.set(c,e[a]=Lo(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();o=re()},m(a,l){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,l);B(a,o,l),s=!0},p(a,l){l[0]&9&&(i=he(Object.entries(a[0].tab.open.protocols)),Q(),e=Ve(e,l,r,1,a,i,n,o.parentNode,st,Lo,o,Mo),Z())},i(a){if(!s){for(let l=0;l<i.length;l+=1)_(e[l]);s=!0}},o(a){for(let l=0;l<e.length;l+=1)y(e[l]);s=!1},d(a){a&&O(o);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Lu(t){let e,n,o,s,i,r,a,l,c,u,p,d,h;return n=new ee({props:{title:t[2].settings.open.enable.tab.title,text:t[2].settings.open.enable.tab.description,$$slots:{input:[Cu]},$$scope:{ctx:t}}}),s=new ee({props:{title:t[2].settings.open.editorHyperlink.title,text:t[2].settings.open.editorHyperlink.description,$$slots:{input:[Nu]},$$scope:{ctx:t}}}),r=new ee({props:{title:t[2].settings.open.otherHyperlink.title,text:t[2].settings.open.otherHyperlink.description,$$slots:{input:[Ru]},$$scope:{ctx:t}}}),c=new An({props:{title:t[2].settings.protocols.title,$$slots:{default:[Mu]},$$scope:{ctx:t}}}),d=new Zs({props:{minWidth:"16em",title:t[2].settings.open.shortcut.title,shortcut:t[0].tab.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:t[2].settings.mouse.button,mouseButtonOptions:[{key:Be.Left,text:t[2].settings.mouse.left}]}}),d.$on("changed",t[3]),{c(){e=P("div"),A(n.$$.fragment),o=M(),A(s.$$.fragment),i=M(),A(r.$$.fragment),a=M(),l=P("div"),A(c.$$.fragment),u=M(),p=P("div"),A(d.$$.fragment),w(e,"data-type",t[6].tab[0].name),C(e,"fn__none",t[6].tab[0].key!==t[30]),w(l,"data-type",t[6].tab[1].name),C(l,"fn__none",t[6].tab[1].key!==t[30]),w(p,"data-type",t[6].tab[2].name),C(p,"fn__none",t[6].tab[2].key!==t[30])},m(f,m){B(f,e,m),v(n,e,null),D(e,o),v(s,e,null),D(e,i),v(r,e,null),B(f,a,m),B(f,l,m),v(c,l,null),B(f,u,m),B(f,p,m),v(d,p,null),h=!0},p(f,m){const b={};m[0]&1|m[1]&64&&(b.$$scope={dirty:m,ctx:f}),n.$set(b);const g={};m[0]&1|m[1]&64&&(g.$$scope={dirty:m,ctx:f}),s.$set(g);const W={};m[0]&1|m[1]&64&&(W.$$scope={dirty:m,ctx:f}),r.$set(W),(!h||m[0]&1073741888)&&C(e,"fn__none",f[6].tab[0].key!==f[30]);const q={};m[0]&1|m[1]&64&&(q.$$scope={dirty:m,ctx:f}),c.$set(q),(!h||m[0]&1073741888)&&C(l,"fn__none",f[6].tab[1].key!==f[30]);const $={};m[0]&1&&($.shortcut=f[0].tab.open.mouse),d.$set($),(!h||m[0]&1073741888)&&C(p,"fn__none",f[6].tab[2].key!==f[30])},i(f){h||(_(n.$$.fragment,f),_(s.$$.fragment,f),_(r.$$.fragment,f),_(c.$$.fragment,f),_(d.$$.fragment,f),h=!0)},o(f){y(n.$$.fragment,f),y(s.$$.fragment,f),y(r.$$.fragment,f),y(c.$$.fragment,f),y(d.$$.fragment,f),h=!1},d(f){f&&(O(e),O(a),O(l),O(u),O(p)),E(n),E(s),E(r),E(c),E(d)}}}function Iu(t){let e,n;return e=new Qs({props:{focus:ic,tabs:t[6].tab,$$slots:{default:[Lu,({focus:o})=>({30:o}),({focus:o})=>[o?1073741824:0]]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1073741825|s[1]&64&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Wu(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"enable",settingValue:t[0].window.enable}}),e.$on("changed",t[13]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.enable),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function ju(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"editorHyperlink",settingValue:t[0].window.open.targets.hyperlink.editor}}),e.$on("changed",t[14]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.open.targets.hyperlink.editor),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Fu(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"otherHyperlink",settingValue:t[0].window.open.targets.hyperlink.other}}),e.$on("changed",t[15]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.open.targets.hyperlink.other),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function qu(t){let e,n;return e=new z({props:{slot:"input",type:F.number,settingKey:"width",settingValue:t[0].window.params.width,limits:{min:320,max:15360,step:40}}}),e.$on("changed",t[16]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.params.width),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Uu(t){let e,n;return e=new z({props:{slot:"input",type:F.number,settingKey:"height",settingValue:t[0].window.params.height,limits:{min:240,max:8640,step:40}}}),e.$on("changed",t[17]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.params.height),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Ku(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"center",settingValue:t[0].window.params.center}}),e.$on("changed",t[18]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.params.center),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Hu(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"top",settingValue:t[0].window.params.alwaysOnTop}}),e.$on("changed",t[19]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.params.alwaysOnTop),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Vu(t){let e,n;return e=new z({props:{slot:"input",type:F.select,settingKey:"menuBar",settingValue:t[0].window.params.enableMenuBar?t[0].window.params.autoHideMenuBar?be.AutoHide:be.AlwaysShow:be.Disabled,options:[{key:be.AutoHide,text:t[2].settings.window.menuBar.options.autoHide},{key:be.AlwaysShow,text:t[2].settings.window.menuBar.options.alwaysShow},{key:be.Disabled,text:t[2].settings.window.menuBar.options.disabled}]}}),e.$on("changed",t[20]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.params.enableMenuBar?o[0].window.params.autoHideMenuBar?be.AutoHide:be.AlwaysShow:be.Disabled),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function zu(t){let e,n=t[32].prefix+"",o;return{c(){e=P("code"),o=_e(n),w(e,"slot","title"),w(e,"class","fn__code")},m(s,i){B(s,e,i),D(e,o)},p(s,i){i[0]&1&&n!==(n=s[32].prefix+"")&&Ue(o,n)},d(s){s&&O(e)}}}function Gu(t){let e,n;function o(...s){return t[21](t[32],t[33],t[34],...s)}return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"Checkbox",settingValue:t[32].enable}}),e.$on("changed",o),{c(){A(e.$$.fragment)},m(s,i){v(e,s,i),n=!0},p(s,i){t=s;const r={};i[0]&1&&(r.settingValue=t[32].enable),e.$set(r)},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){E(e,s)}}}function Io(t,e){let n,o,s;return o=new Ke({props:{minWidth:"8em",$$slots:{input:[Gu],title:[zu]},$$scope:{ctx:e}}}),{key:t,first:null,c(){n=re(),A(o.$$.fragment),this.first=n},m(i,r){B(i,n,r),v(o,i,r),s=!0},p(i,r){e=i;const a={};r[0]&1|r[1]&64&&(a.$$scope={dirty:r,ctx:e}),o.$set(a)},i(i){s||(_(o.$$.fragment,i),s=!0)},o(i){y(o.$$.fragment,i),s=!1},d(i){i&&O(n),E(o,i)}}}function Ju(t){let e=[],n=new Map,o,s,i=he(Object.entries(t[0].window.open.protocols));const r=a=>a[31];for(let a=0;a<i.length;a+=1){let l=Po(t,i,a),c=r(l);n.set(c,e[a]=Io(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();o=re()},m(a,l){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,l);B(a,o,l),s=!0},p(a,l){l[0]&9&&(i=he(Object.entries(a[0].window.open.protocols)),Q(),e=Ve(e,l,r,1,a,i,n,o.parentNode,st,Io,o,Po),Z())},i(a){if(!s){for(let l=0;l<i.length;l+=1)_(e[l]);s=!0}},o(a){for(let l=0;l<e.length;l+=1)y(e[l]);s=!1},d(a){a&&O(o);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Yu(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"enable",settingValue:t[0].window.siyuan.enable}}),e.$on("changed",t[22]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.siyuan.enable),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Xu(t){let e,n;return e=new z({props:{slot:"input",type:F.button,settingKey:"open-desktop-window",settingValue:t[2].settings.siyuan.open.desktop.text}}),e.$on("clicked",t[23]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p:V,i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Qu(t){let e,n;return e=new z({props:{slot:"input",type:F.button,settingKey:"open-mobile-window",settingValue:t[2].settings.siyuan.open.mobile.text}}),e.$on("clicked",t[24]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p:V,i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Zu(t){let e,n;return e=new z({props:{slot:"input",type:F.checkbox,settingKey:"focus",settingValue:t[0].window.siyuan.focus}}),e.$on("changed",t[25]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.siyuan.focus),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function xu(t){let e,n;return e=new z({props:{slot:"input",type:F.select,settingKey:"menuBar",settingValue:t[0].window.siyuan.editorType,options:[{key:ye.mobile,text:t[2].settings.siyuan.editorType.options.mobile},{key:ye.desktop,text:t[2].settings.siyuan.editorType.options.desktop},{key:ye.window,text:t[2].settings.siyuan.editorType.options.window}]}}),e.$on("changed",t[26]),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1&&(i.settingValue=o[0].window.siyuan.editorType),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function ec(t){let e,n,o,s,i,r,a,l,c,u,p,d,h,f,m,b,g,W,q,$,K,L,H,j,N,ce,Se,ze,Te,I,de,Pe,me,Oe;return n=new ee({props:{title:t[2].settings.open.enable.window.title,text:t[2].settings.open.enable.window.description,$$slots:{input:[Wu]},$$scope:{ctx:t}}}),s=new ee({props:{title:t[2].settings.open.editorHyperlink.title,text:t[2].settings.open.editorHyperlink.description,$$slots:{input:[ju]},$$scope:{ctx:t}}}),r=new ee({props:{title:t[2].settings.open.otherHyperlink.title,text:t[2].settings.open.otherHyperlink.description,$$slots:{input:[Fu]},$$scope:{ctx:t}}}),l=new ee({props:{title:t[2].settings.window.width.title,text:t[2].settings.window.width.description,$$slots:{input:[qu]},$$scope:{ctx:t}}}),u=new ee({props:{title:t[2].settings.window.height.title,text:t[2].settings.window.height.description,$$slots:{input:[Uu]},$$scope:{ctx:t}}}),d=new ee({props:{title:t[2].settings.window.center.title,text:t[2].settings.window.center.description,$$slots:{input:[Ku]},$$scope:{ctx:t}}}),f=new ee({props:{title:t[2].settings.window.top.title,text:t[2].settings.window.top.description,$$slots:{input:[Hu]},$$scope:{ctx:t}}}),b=new ee({props:{title:t[2].settings.window.menuBar.title,text:t[2].settings.window.menuBar.description,$$slots:{input:[Vu]},$$scope:{ctx:t}}}),q=new An({props:{title:t[2].settings.protocols.title,$$slots:{default:[Ju]},$$scope:{ctx:t}}}),L=new Zs({props:{minWidth:"16em",title:t[2].settings.open.shortcut.title,shortcut:t[0].window.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:t[2].settings.mouse.button,mouseButtonOptions:[{key:Be.Middle,text:t[2].settings.mouse.middle}]}}),L.$on("changed",t[3]),N=new ee({props:{title:t[2].settings.siyuan.enable.title,text:t[2].settings.siyuan.enable.description,$$slots:{input:[Yu]},$$scope:{ctx:t}}}),Se=new ee({props:{title:t[2].settings.siyuan.open.desktop.title,text:t[2].settings.siyuan.open.desktop.description,$$slots:{input:[Xu]},$$scope:{ctx:t}}}),Te=new ee({props:{title:t[2].settings.siyuan.open.mobile.title,text:t[2].settings.siyuan.open.mobile.description,$$slots:{input:[Qu]},$$scope:{ctx:t}}}),de=new ee({props:{title:t[2].settings.siyuan.focus.title,text:t[2].settings.siyuan.focus.description,$$slots:{input:[Zu]},$$scope:{ctx:t}}}),me=new ee({props:{title:t[2].settings.siyuan.editorType.title,text:t[2].settings.siyuan.editorType.description,$$slots:{input:[xu]},$$scope:{ctx:t}}}),{c(){e=P("div"),A(n.$$.fragment),o=M(),A(s.$$.fragment),i=M(),A(r.$$.fragment),a=M(),A(l.$$.fragment),c=M(),A(u.$$.fragment),p=M(),A(d.$$.fragment),h=M(),A(f.$$.fragment),m=M(),A(b.$$.fragment),g=M(),W=P("div"),A(q.$$.fragment),$=M(),K=P("div"),A(L.$$.fragment),H=M(),j=P("div"),A(N.$$.fragment),ce=M(),A(Se.$$.fragment),ze=M(),A(Te.$$.fragment),I=M(),A(de.$$.fragment),Pe=M(),A(me.$$.fragment),w(e,"data-type",t[6].window[0].name),C(e,"fn__none",t[6].window[0].key!==t[30]),w(W,"data-type",t[6].window[1].name),C(W,"fn__none",t[6].window[1].key!==t[30]),w(K,"data-type",t[6].window[2].name),C(K,"fn__none",t[6].window[2].key!==t[30]),w(j,"data-type",t[6].window[3].name),C(j,"fn__none",t[6].window[3].key!==t[30])},m(T,R){B(T,e,R),v(n,e,null),D(e,o),v(s,e,null),D(e,i),v(r,e,null),D(e,a),v(l,e,null),D(e,c),v(u,e,null),D(e,p),v(d,e,null),D(e,h),v(f,e,null),D(e,m),v(b,e,null),B(T,g,R),B(T,W,R),v(q,W,null),B(T,$,R),B(T,K,R),v(L,K,null),B(T,H,R),B(T,j,R),v(N,j,null),D(j,ce),v(Se,j,null),D(j,ze),v(Te,j,null),D(j,I),v(de,j,null),D(j,Pe),v(me,j,null),Oe=!0},p(T,R){const fe={};R[0]&1|R[1]&64&&(fe.$$scope={dirty:R,ctx:T}),n.$set(fe);const it={};R[0]&1|R[1]&64&&(it.$$scope={dirty:R,ctx:T}),s.$set(it);const rt={};R[0]&1|R[1]&64&&(rt.$$scope={dirty:R,ctx:T}),r.$set(rt);const at={};R[0]&1|R[1]&64&&(at.$$scope={dirty:R,ctx:T}),l.$set(at);const lt={};R[0]&1|R[1]&64&&(lt.$$scope={dirty:R,ctx:T}),u.$set(lt);const ut={};R[0]&1|R[1]&64&&(ut.$$scope={dirty:R,ctx:T}),d.$set(ut);const ct={};R[0]&1|R[1]&64&&(ct.$$scope={dirty:R,ctx:T}),f.$set(ct);const ft={};R[0]&1|R[1]&64&&(ft.$$scope={dirty:R,ctx:T}),b.$set(ft),(!Oe||R[0]&1073741888)&&C(e,"fn__none",T[6].window[0].key!==T[30]);const G={};R[0]&1|R[1]&64&&(G.$$scope={dirty:R,ctx:T}),q.$set(G),(!Oe||R[0]&1073741888)&&C(W,"fn__none",T[6].window[1].key!==T[30]);const Me={};R[0]&1&&(Me.shortcut=T[0].window.open.mouse),L.$set(Me),(!Oe||R[0]&1073741888)&&C(K,"fn__none",T[6].window[2].key!==T[30]);const Le={};R[0]&1|R[1]&64&&(Le.$$scope={dirty:R,ctx:T}),N.$set(Le);const Ge={};R[0]&2|R[1]&64&&(Ge.$$scope={dirty:R,ctx:T}),Se.$set(Ge);const Je={};R[0]&2|R[1]&64&&(Je.$$scope={dirty:R,ctx:T}),Te.$set(Je);const pt={};R[0]&1|R[1]&64&&(pt.$$scope={dirty:R,ctx:T}),de.$set(pt);const Bn={};R[0]&1|R[1]&64&&(Bn.$$scope={dirty:R,ctx:T}),me.$set(Bn),(!Oe||R[0]&1073741888)&&C(j,"fn__none",T[6].window[3].key!==T[30])},i(T){Oe||(_(n.$$.fragment,T),_(s.$$.fragment,T),_(r.$$.fragment,T),_(l.$$.fragment,T),_(u.$$.fragment,T),_(d.$$.fragment,T),_(f.$$.fragment,T),_(b.$$.fragment,T),_(q.$$.fragment,T),_(L.$$.fragment,T),_(N.$$.fragment,T),_(Se.$$.fragment,T),_(Te.$$.fragment,T),_(de.$$.fragment,T),_(me.$$.fragment,T),Oe=!0)},o(T){y(n.$$.fragment,T),y(s.$$.fragment,T),y(r.$$.fragment,T),y(l.$$.fragment,T),y(u.$$.fragment,T),y(d.$$.fragment,T),y(f.$$.fragment,T),y(b.$$.fragment,T),y(q.$$.fragment,T),y(L.$$.fragment,T),y(N.$$.fragment,T),y(Se.$$.fragment,T),y(Te.$$.fragment,T),y(de.$$.fragment,T),y(me.$$.fragment,T),Oe=!1},d(T){T&&(O(e),O(g),O(W),O($),O(K),O(H),O(j)),E(n),E(s),E(r),E(l),E(u),E(d),E(f),E(b),E(q),E(L),E(N),E(Se),E(Te),E(de),E(me)}}}function tc(t){let e,n;return e=new Qs({props:{focus:rc,tabs:t[6].window,$$slots:{default:[ec,({focus:o})=>({30:o}),({focus:o})=>[o?1073741824:0]]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&1073741827|s[1]&64&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function nc(t){let e,n,o,s,i,r;return e=new nn({props:{display:t[5][0].key===t[29],$$slots:{default:[Bu]},$$scope:{ctx:t}}}),o=new nn({props:{display:t[5][1].key===t[29],$$slots:{default:[Iu]},$$scope:{ctx:t}}}),i=new nn({props:{display:t[5][2].key===t[29],$$slots:{default:[tc]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment),n=M(),A(o.$$.fragment),s=M(),A(i.$$.fragment)},m(a,l){v(e,a,l),B(a,n,l),v(o,a,l),B(a,s,l),v(i,a,l),r=!0},p(a,l){const c={};l[0]&536870912&&(c.display=a[5][0].key===a[29]),l[0]&1|l[1]&64&&(c.$$scope={dirty:l,ctx:a}),e.$set(c);const u={};l[0]&536870912&&(u.display=a[5][1].key===a[29]),l[0]&1|l[1]&64&&(u.$$scope={dirty:l,ctx:a}),o.$set(u);const p={};l[0]&536870912&&(p.display=a[5][2].key===a[29]),l[0]&3|l[1]&64&&(p.$$scope={dirty:l,ctx:a}),i.$set(p)},i(a){r||(_(e.$$.fragment,a),_(o.$$.fragment,a),_(i.$$.fragment,a),r=!0)},o(a){y(e.$$.fragment,a),y(o.$$.fragment,a),y(i.$$.fragment,a),r=!1},d(a){a&&(O(n),O(s)),E(e,a),E(o,a),E(i,a)}}}function oc(t){let e,n;return e=new gl({props:{panels:t[5],focus:sc,$$slots:{default:[nc,({focus:o})=>({29:o}),({focus:o})=>[o?536870912:0]]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&536870915|s[1]&64&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}let sc=0,ic=0,rc=0;function ac(t,e,n){let{config:o}=e,{plugin:s}=e;const i=s.i18n;function r(){s.updateConfig(o)}function a(){s.siyuan.confirm(i.settings.generalSettings.reset.title,i.settings.generalSettings.reset.description,async()=>{await s.resetConfig(),globalThis.location.reload()})}const l=[{key:0,text:i.settings.generalSettings.title,name:i.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:i.settings.openTab,name:i.settings.openTab,icon:"#iconBoth"},{key:2,text:i.settings.openWindow,name:i.settings.openWindow,icon:"#iconOpenWindow"}],c={tab:[{key:0,text:i.settings.general,name:i.settings.general,icon:""},{key:1,text:i.settings.protocol,name:i.settings.protocol,icon:""},{key:2,text:i.settings.shortcut,name:i.settings.shortcut,icon:""}],window:[{key:0,text:i.settings.general,name:i.settings.general,icon:""},{key:1,text:i.settings.protocol,name:i.settings.protocol,icon:""},{key:2,text:i.settings.shortcut,name:i.settings.shortcut,icon:""},{key:3,text:i.settings.siyuan.title,name:i.settings.siyuan.title,icon:""}]},u=I=>{n(0,o.general.useragent=I.detail.value,o),r()},p=I=>{n(0,o.general.background=I.detail.value,o),r()},d=I=>{n(0,o.tab.enable=I.detail.value,o),r()},h=I=>{n(0,o.tab.open.targets.hyperlink.editor.enable=I.detail.value,o),r()},f=I=>{n(0,o.tab.open.targets.hyperlink.other.enable=I.detail.value,o),r()},m=(I,de,Pe,me)=>{n(0,de[Pe][1].enable=me.detail.value,o),r()},b=I=>{n(0,o.window.enable=I.detail.value,o),r()},g=I=>{n(0,o.window.open.targets.hyperlink.editor=I.detail.value,o),r()},W=I=>{n(0,o.window.open.targets.hyperlink.other=I.detail.value,o),r()},q=I=>{n(0,o.window.params.width=I.detail.value,o),r()},$=I=>{n(0,o.window.params.height=I.detail.value,o),r()},K=I=>{n(0,o.window.params.center=I.detail.value,o),r()},L=I=>{n(0,o.window.params.alwaysOnTop=I.detail.value,o),r()},H=I=>{switch(I.detail.value){case be.AutoHide:n(0,o.window.params.enableMenuBar=!0,o),n(0,o.window.params.autoHideMenuBar=!0,o);break;case be.AlwaysShow:n(0,o.window.params.enableMenuBar=!0,o),n(0,o.window.params.autoHideMenuBar=!1,o);break;case be.Disabled:n(0,o.window.params.enableMenuBar=!1,o);break}r()},j=(I,de,Pe,me)=>{n(0,de[Pe][1].enable=me.detail.value,o),r()},N=I=>{n(0,o.window.siyuan.enable=I.detail.value,o),r()},ce=I=>s.openSiyuanDesktopWindow(I.detail.event),Se=I=>s.openSiyuanMobileWindow(I.detail.event),ze=I=>{n(0,o.window.siyuan.focus=I.detail.value,o),r()},Te=I=>{n(0,o.window.siyuan.editorType=I.detail.value,o),r()};return t.$$set=I=>{"config"in I&&n(0,o=I.config),"plugin"in I&&n(1,s=I.plugin)},[o,s,i,r,a,l,c,u,p,d,h,f,m,b,g,W,q,$,K,L,H,j,N,ce,Se,ze,Te]}class lc extends ue{constructor(e){super(),le(this,e,ac,oc,ie,{config:0,plugin:1},null,[-1,-1])}}function Wo(t,{delay:e=0,duration:n=400,easing:o=$n}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:o,css:i=>`opacity: ${i*s}`}}const uc=t=>({}),jo=t=>({});function Fo(t){let e,n;return e=new we({props:{id:t[1],icon:t[2]}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&2&&(i.id=o[1]),s&4&&(i.icon=o[2]),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function cc(t){let e,n,o=t[2]&&Fo(t);return{c(){o&&o.c(),e=re()},m(s,i){o&&o.m(s,i),B(s,e,i),n=!0},p(s,i){s[2]?o?(o.p(s,i),i&4&&_(o,1)):(o=Fo(s),o.c(),_(o,1),o.m(e.parentNode,e)):o&&(Q(),y(o,1,1,()=>{o=null}),Z())},i(s){n||(_(o),n=!0)},o(s){y(o),n=!1},d(s){s&&O(e),o&&o.d(s)}}}function fc(t){let e,n,o,s,i;const r=t[8].svg,a=te(r,t,t[7],jo),l=a||cc(t);return{c(){e=P("span"),l&&l.c(),n=M(),o=P("span"),s=_e(t[3]),w(o,"title",t[4]),w(o,"class","protyle-breadcrumb__text"),C(o,"protyle-breadcrumb__text--ellipsis",t[5]),w(e,"data-node-id",t[0]),w(e,"class","protyle-breadcrumb__item"),C(e,"protyle-breadcrumb__item--active",t[6])},m(c,u){B(c,e,u),l&&l.m(e,null),D(e,n),D(e,o),D(o,s),i=!0},p(c,[u]){a?a.p&&(!i||u&128)&&oe(a,r,c,c[7],i?ne(r,c[7],u,uc):se(c[7]),jo):l&&l.p&&(!i||u&6)&&l.p(c,i?u:-1),(!i||u&8)&&Ue(s,c[3]),(!i||u&16)&&w(o,"title",c[4]),(!i||u&32)&&C(o,"protyle-breadcrumb__text--ellipsis",c[5]),(!i||u&1)&&w(e,"data-node-id",c[0]),(!i||u&64)&&C(e,"protyle-breadcrumb__item--active",c[6])},i(c){i||(_(l,c),i=!0)},o(c){y(l,c),i=!1},d(c){c&&O(e),l&&l.d(c)}}}function pc(t,e,n){let{$$slots:o={},$$scope:s}=e,{itemId:i=""}=e,{iconId:r=""}=e,{icon:a=""}=e,{text:l=""}=e,{textTitle:c=""}=e,{textEllipsis:u=!0}=e,{active:p=!1}=e;return t.$$set=d=>{"itemId"in d&&n(0,i=d.itemId),"iconId"in d&&n(1,r=d.iconId),"icon"in d&&n(2,a=d.icon),"text"in d&&n(3,l=d.text),"textTitle"in d&&n(4,c=d.textTitle),"textEllipsis"in d&&n(5,u=d.textEllipsis),"active"in d&&n(6,p=d.active),"$$scope"in d&&n(7,s=d.$$scope)},[i,r,a,l,c,u,p,s,o]}class hc extends ue{constructor(e){super(),le(this,e,pc,fc,ie,{itemId:0,iconId:1,icon:2,text:3,textTitle:4,textEllipsis:5,active:6})}}function qo(t,e,n){const o=t.slice();return o[3]=e[n],o[5]=n,o}function dc(t){let e,n;return e=new we({props:{className:"protyle-breadcrumb__arrow",icon:t[3].icon||"#iconRight"}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&1&&(i.icon=o[3].icon||"#iconRight"),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function mc(t){let e,n;const o=[t[3]];let s={};for(let i=0;i<o.length;i+=1)s=Vt(s,o[i]);return e=new hc({props:s}),{c(){A(e.$$.fragment)},m(i,r){v(e,i,r),n=!0},p(i,r){const a=r&1?On(o,[Xs(i[3])]):{};e.$set(a)},i(i){n||(_(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){E(e,i)}}}function Uo(t,e){let n,o,s,i,r;const a=[mc,dc],l=[];function c(u,p){return u[3].type==="item"?0:u[3].type==="arrow"?1:-1}return~(o=c(e))&&(s=l[o]=a[o](e)),{key:t,first:null,c(){n=re(),s&&s.c(),i=re(),this.first=n},m(u,p){B(u,n,p),~o&&l[o].m(u,p),B(u,i,p),r=!0},p(u,p){e=u;let d=o;o=c(e),o===d?~o&&l[o].p(e,p):(s&&(Q(),y(l[d],1,1,()=>{l[d]=null}),Z()),~o?(s=l[o],s?s.p(e,p):(s=l[o]=a[o](e),s.c()),_(s,1),s.m(i.parentNode,i)):s=null)},i(u){r||(_(s),r=!0)},o(u){y(s),r=!1},d(u){u&&(O(n),O(i)),~o&&l[o].d(u)}}}function gc(t){let e=[],n=new Map,o,s,i=he(t[0]);const r=a=>a[5];for(let a=0;a<i.length;a+=1){let l=qo(t,i,a),c=r(l);n.set(c,e[a]=Uo(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();o=re()},m(a,l){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,l);B(a,o,l),s=!0},p(a,l){l&1&&(i=he(a[0]),Q(),e=Ve(e,l,r,1,a,i,n,o.parentNode,st,Uo,o,qo),Z())},i(a){if(!s){for(let l=0;l<i.length;l+=1)_(e[l]);s=!0}},o(a){for(let l=0;l<e.length;l+=1)y(e[l]);s=!1},d(a){a&&O(o);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function bc(t){let e,n;const o=t[2].default,s=te(o,t,t[1],null),i=s||gc(t);return{c(){e=P("div"),i&&i.c(),w(e,"class","protyle-breadcrumb__bar protyle-breadcrumb__bar--nowrap")},m(r,a){B(r,e,a),i&&i.m(e,null),n=!0},p(r,[a]){s?s.p&&(!n||a&2)&&oe(s,o,r,r[1],n?ne(o,r[1],a,null):se(r[1]),null):i&&i.p&&(!n||a&1)&&i.p(r,n?a:-1)},i(r){n||(_(i,r),n=!0)},o(r){y(i,r),n=!1},d(r){r&&O(e),i&&i.d(r)}}}function _c(t,e,n){let{$$slots:o={},$$scope:s}=e,{items:i=[]}=e;return t.$$set=r=>{"items"in r&&n(0,i=r.items),"$$scope"in r&&n(1,s=r.$$scope)},[i,s,o]}class yc extends ue{constructor(e){super(),le(this,e,_c,bc,ie,{items:0})}}const Xe=[];function We(t,e=V){let n;const o=new Set;function s(a){if(ie(t,a)&&(t=a,n)){const l=!Xe.length;for(const c of o)c[1](),Xe.push(c,t);if(l){for(let c=0;c<Xe.length;c+=2)Xe[c][0](Xe[c+1]);Xe.length=0}}}function i(a){s(a(t))}function r(a,l=V){const c=[a,l];return o.add(c),o.size===1&&(n=e(s,i)||V),a(t),()=>{o.delete(c),o.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:r}}var $e=(t=>(t.none="",t.n="b3-tooltips__n",t.ne="b3-tooltips__ne",t.e="b3-tooltips__e",t.se="b3-tooltips__se",t.s="b3-tooltips__s",t.sw="b3-tooltips__sw",t.w="b3-tooltips__w",t.nw="b3-tooltips__nw",t))($e||{});function on(t){let e,n,o,s,i,r;n=new we({props:{icon:t[0]}});let a=[{role:"button"},{"data-type":t[5]},{"aria-label":t[6]},{class:o="block__icon fn__flex-center "+t[7]}],l={};for(let c=0;c<a.length;c+=1)l=Vt(l,a[c]);return{c(){e=P(t[8]),A(n.$$.fragment),to(t[8])(e,l),C(e,"fn__none",t[2]),C(e,"block__icon--show",t[1]),C(e,"toolbar__item--active",t[3]),C(e,"toolbar__item--disabled",t[4]),C(e,"b3-tooltips",t[7]!==$e.none)},m(c,u){B(c,e,u),v(n,e,null),t[14](e),s=!0,i||(r=[J(e,"click",t[12]),J(e,"dblclick",t[13]),J(e,"click",t[15])],i=!0)},p(c,u){const p={};u&1&&(p.icon=c[0]),n.$set(p),to(c[8])(e,l=On(a,[{role:"button"},(!s||u&32)&&{"data-type":c[5]},(!s||u&64)&&{"aria-label":c[6]},(!s||u&128&&o!==(o="block__icon fn__flex-center "+c[7]))&&{class:o}])),C(e,"fn__none",c[2]),C(e,"block__icon--show",c[1]),C(e,"toolbar__item--active",c[3]),C(e,"toolbar__item--disabled",c[4]),C(e,"b3-tooltips",c[7]!==$e.none)},i(c){s||(_(n.$$.fragment,c),s=!0)},o(c){y(n.$$.fragment,c),s=!1},d(c){c&&O(e),E(n),t[14](null),i=!1,ae(r)}}}function kc(t){let e=t[8],n,o=t[8]&&on(t);return{c(){o&&o.c(),n=re()},m(s,i){o&&o.m(s,i),B(s,n,i)},p(s,[i]){s[8]?e?ie(e,s[8])?(o.d(1),o=on(s),e=s[8],o.c(),o.m(n.parentNode,n)):o.p(s,i):(o=on(s),e=s[8],o.c(),o.m(n.parentNode,n)):e&&(o.d(1),o=null,e=s[8])},i:V,o(s){y(o,s)},d(s){s&&O(n),o&&o.d(s)}}}function wc(t,e,n){let{icon:o="#iconHelp"}=e,{tag:s="button"}=e,{show:i=!0}=e,{none:r=!1}=e,{active:a=!1}=e,{disabled:l=!1}=e,{type:c=""}=e,{ariaLabel:u=""}=e,{tooltipsDirection:p=$e.none}=e,{onClick:d=()=>null}=e,h;const f={icon:We(o),show:We(i),none:We(r),active:We(a),disabled:We(l),type:We(c),ariaLabel:We(u),tooltipsDirection:We(p)},m=[f.icon.subscribe($=>n(0,o=$)),f.show.subscribe($=>n(1,i=$)),f.none.subscribe($=>n(2,r=$)),f.active.subscribe($=>n(3,a=$)),f.disabled.subscribe($=>n(4,l=$)),f.type.subscribe($=>n(5,c=$)),f.ariaLabel.subscribe($=>n(6,u=$)),f.tooltipsDirection.subscribe($=>n(7,p=$))];el(()=>{m.forEach($=>$())});function b($){so.call(this,t,$)}function g($){so.call(this,t,$)}function W($){St[$?"unshift":"push"](()=>{h=$,n(10,h)})}const q=$=>d($,h,f);return t.$$set=$=>{"icon"in $&&n(0,o=$.icon),"tag"in $&&n(8,s=$.tag),"show"in $&&n(1,i=$.show),"none"in $&&n(2,r=$.none),"active"in $&&n(3,a=$.active),"disabled"in $&&n(4,l=$.disabled),"type"in $&&n(5,c=$.type),"ariaLabel"in $&&n(6,u=$.ariaLabel),"tooltipsDirection"in $&&n(7,p=$.tooltipsDirection),"onClick"in $&&n(9,d=$.onClick)},t.$$.update=()=>{t.$$.dirty&1&&f.icon.set(o),t.$$.dirty&2&&f.show.set(i),t.$$.dirty&4&&f.none.set(r),t.$$.dirty&8&&f.active.set(a),t.$$.dirty&16&&f.disabled.set(l),t.$$.dirty&32&&f.type.set(c),t.$$.dirty&64&&f.ariaLabel.set(u),t.$$.dirty&128&&f.tooltipsDirection.set(p)},[o,i,r,a,l,c,u,p,s,d,h,f,b,g,W,q]}class je extends ue{constructor(e){super(),le(this,e,wc,kc,ie,{icon:0,tag:8,show:1,none:2,active:3,disabled:4,type:5,ariaLabel:6,tooltipsDirection:7,onClick:9})}}function Ko(t,e,n){const o=t.slice();return o[4]=e[n],o[6]=n,o}const Sc=t=>({}),Ho=t=>({}),Tc=t=>({}),Vo=t=>({});function $c(t){let e,n;return e=new yc({props:{items:t[0]}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&1&&(i.items=o[0]),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function vc(t){let e;return{c(){e=P("span"),w(e,"class","fn__space")},m(n,o){B(n,e,o)},d(n){n&&O(e)}}}function Ec(t){let e;return{c(){e=P("span"),w(e,"class","protyle-breadcrumb__space")},m(n,o){B(n,e,o)},d(n){n&&O(e)}}}function zo(t,e){let n,o,s,i;function r(p,d){return p[6]===0?Ec:vc}let a=r(e),l=a(e);const c=[e[4]];let u={};for(let p=0;p<c.length;p+=1)u=Vt(u,c[p]);return s=new je({props:u}),{key:t,first:null,c(){n=re(),l.c(),o=M(),A(s.$$.fragment),this.first=n},m(p,d){B(p,n,d),l.m(p,d),B(p,o,d),v(s,p,d),i=!0},p(p,d){e=p,a!==(a=r(e))&&(l.d(1),l=a(e),l&&(l.c(),l.m(o.parentNode,o)));const h=d&2?On(c,[Xs(e[4])]):{};s.$set(h)},i(p){i||(_(s.$$.fragment,p),i=!0)},o(p){y(s.$$.fragment,p),i=!1},d(p){p&&(O(n),O(o)),l.d(p),E(s,p)}}}function Oc(t){let e=[],n=new Map,o,s,i=he(t[1]);const r=a=>a[6];for(let a=0;a<i.length;a+=1){let l=Ko(t,i,a),c=r(l);n.set(c,e[a]=zo(c,l))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();o=re()},m(a,l){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,l);B(a,o,l),s=!0},p(a,l){l&2&&(i=he(a[1]),Q(),e=Ve(e,l,r,1,a,i,n,o.parentNode,st,zo,o,Ko),Z())},i(a){if(!s){for(let l=0;l<i.length;l+=1)_(e[l]);s=!0}},o(a){for(let l=0;l<e.length;l+=1)y(e[l]);s=!1},d(a){a&&O(o);for(let l=0;l<e.length;l+=1)e[l].d(a)}}}function Ac(t){let e,n,o;const s=t[3].bar,i=te(s,t,t[2],Vo),r=i||$c(t),a=t[3].icons,l=te(a,t,t[2],Ho),c=l||Oc(t);return{c(){e=P("div"),r&&r.c(),n=M(),c&&c.c(),w(e,"class","protyle-breadcrumb")},m(u,p){B(u,e,p),r&&r.m(e,null),D(e,n),c&&c.m(e,null),o=!0},p(u,[p]){i?i.p&&(!o||p&4)&&oe(i,s,u,u[2],o?ne(s,u[2],p,Tc):se(u[2]),Vo):r&&r.p&&(!o||p&1)&&r.p(u,o?p:-1),l?l.p&&(!o||p&4)&&oe(l,a,u,u[2],o?ne(a,u[2],p,Sc):se(u[2]),Ho):c&&c.p&&(!o||p&2)&&c.p(u,o?p:-1)},i(u){o||(_(r,u),_(c,u),o=!0)},o(u){y(r,u),y(c,u),o=!1},d(u){u&&O(e),r&&r.d(u),c&&c.d(u)}}}function Bc(t,e,n){let{$$slots:o={},$$scope:s}=e,{items:i=[]}=e,{icons:r=[]}=e;return t.$$set=a=>{"items"in a&&n(0,i=a.items),"icons"in a&&n(1,r=a.icons),"$$scope"in a&&n(2,s=a.$$scope)},[i,r,s,o]}class Cc extends ue{constructor(e){super(),le(this,e,Bc,Ac,ie,{items:0,icons:1})}}const Nc=t=>({}),Go=t=>({}),Rc=t=>({}),Jo=t=>({});function Yo(t){let e,n;return e=new Cc({props:{items:t[2],icons:t[3]}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s&4&&(i.items=o[2]),s&8&&(i.icons=o[3]),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Dc(t){let e,n,o=t[1]&&Yo(t);return{c(){o&&o.c(),e=re()},m(s,i){o&&o.m(s,i),B(s,e,i),n=!0},p(s,i){s[1]?o?(o.p(s,i),i&2&&_(o,1)):(o=Yo(s),o.c(),_(o,1),o.m(e.parentNode,e)):o&&(Q(),y(o,1,1,()=>{o=null}),Z())},i(s){n||(_(o),n=!0)},o(s){y(o),n=!1},d(s){s&&O(e),o&&o.d(s)}}}function Pc(t){let e,n,o,s;const i=t[5].breadcrumb,r=te(i,t,t[4],Jo),a=r||Dc(t),l=t[5].content,c=te(l,t,t[4],Go);return{c(){e=P("div"),a&&a.c(),n=M(),o=P("div"),c&&c.c(),w(o,"class","protyle-preview"),w(e,"class","fn__flex-column"),C(e,"fullscreen",t[0])},m(u,p){B(u,e,p),a&&a.m(e,null),D(e,n),D(e,o),c&&c.m(o,null),s=!0},p(u,[p]){r?r.p&&(!s||p&16)&&oe(r,i,u,u[4],s?ne(i,u[4],p,Rc):se(u[4]),Jo):a&&a.p&&(!s||p&14)&&a.p(u,s?p:-1),c&&c.p&&(!s||p&16)&&oe(c,l,u,u[4],s?ne(l,u[4],p,Nc):se(u[4]),Go),(!s||p&1)&&C(e,"fullscreen",u[0])},i(u){s||(_(a,u),_(c,u),s=!0)},o(u){y(a,u),y(c,u),s=!1},d(u){u&&O(e),a&&a.d(u),c&&c.d(u)}}}function Mc(t,e,n){let{$$slots:o={},$$scope:s}=e,{fullscreen:i=!1}=e,{breadcrumb:r=!0}=e,{breadcrumbItems:a=[]}=e,{breadcrumbIcons:l=[]}=e;return t.$$set=c=>{"fullscreen"in c&&n(0,i=c.fullscreen),"breadcrumb"in c&&n(1,r=c.breadcrumb),"breadcrumbItems"in c&&n(2,a=c.breadcrumbItems),"breadcrumbIcons"in c&&n(3,l=c.breadcrumbIcons),"$$scope"in c&&n(4,s=c.$$scope)},[i,r,a,l,s,o]}class Lc extends ue{constructor(e){super(),le(this,e,Mc,Pc,ie,{fullscreen:0,breadcrumb:1,breadcrumbItems:2,breadcrumbIcons:3})}}const xs=Fc();qc();Uc();function Ic(){return!!globalThis.require}function Wc(){return!!globalThis.process}function jc(){var t,e;return!!((e=(t=globalThis.process)==null?void 0:t.versions)!=null&&e.hasOwnProperty("electron"))}function Fc(){return Wc()&&Ic()&&jc()}function qc(){var t,e,n;return((n=(e=(t=globalThis.siyuan)==null?void 0:t.config)==null?void 0:e.appearance)==null?void 0:n.mode)===0}function Uc(){var t,e,n;return((n=(e=(t=globalThis.siyuan)==null?void 0:t.config)==null?void 0:e.appearance)==null?void 0:n.mode)===1}function Kc(t){let e,n,o,s,i,r,a,l,c,u,p,d,h,f,m,b,g,W,q;return n=new je({props:{icon:"#iconLeft",ariaLabel:t[15].webview.goForwardOnePage,disabled:!t[5],tooltipsDirection:$e.se}}),n.$on("click",t[16]),s=new je({props:{icon:"#iconRight",ariaLabel:t[15].webview.goBackOnePage,disabled:!t[6],tooltipsDirection:$e.se}}),s.$on("click",t[17]),r=new je({props:{icon:t[7]?"#iconClose":"#iconRefresh",ariaLabel:t[7]?t[15].webview.stopLoadingThisPage:t[15].webview.reloadCurrentPage,tooltipsDirection:$e.se}}),r.$on("click",t[18]),u=new je({props:{icon:"#iconLanguage",ariaLabel:t[15].webview.openWithDefaultProgram,tooltipsDirection:$e.sw}}),u.$on("click",t[20]),d=new je({props:{icon:"#iconOpenWindow",ariaLabel:t[15].webview.openWithNewWindow,tooltipsDirection:$e.sw}}),d.$on("click",t[21]),f=new je({props:{icon:t[4]?"#iconFullscreenExit":"#iconFullscreen",ariaLabel:t[4]?t[15].webview.exitFullscreen:t[15].webview.enterFullscreen,active:t[4],tooltipsDirection:$e.sw}}),f.$on("click",t[22]),b=new je({props:{icon:"#iconBug",ariaLabel:t[9]?t[15].webview.closeDevTools:t[15].webview.openDevTools,active:t[9],tooltipsDirection:$e.sw}}),b.$on("click",t[23]),{c(){e=P("div"),A(n.$$.fragment),o=M(),A(s.$$.fragment),i=M(),A(r.$$.fragment),a=M(),l=P("input"),c=M(),A(u.$$.fragment),p=M(),A(d.$$.fragment),h=M(),A(f.$$.fragment),m=M(),A(b.$$.fragment),w(l,"class","b3-text-field fn__flex-1 address-field svelte-11juv7b"),w(l,"type","url"),w(e,"slot","breadcrumb"),w(e,"class","protyle-breadcrumb svelte-11juv7b")},m($,K){B($,e,K),v(n,e,null),D(e,o),v(s,e,null),D(e,i),v(r,e,null),D(e,a),D(e,l),pe(l,t[8]),D(e,c),v(u,e,null),D(e,p),v(d,e,null),D(e,h),v(f,e,null),D(e,m),v(b,e,null),g=!0,W||(q=[J(l,"change",t[19]),J(l,"input",t[30])],W=!0)},p($,K){const L={};K[0]&32&&(L.disabled=!$[5]),n.$set(L);const H={};K[0]&64&&(H.disabled=!$[6]),s.$set(H);const j={};K[0]&128&&(j.icon=$[7]?"#iconClose":"#iconRefresh"),K[0]&128&&(j.ariaLabel=$[7]?$[15].webview.stopLoadingThisPage:$[15].webview.reloadCurrentPage),r.$set(j),K[0]&256&&l.value!==$[8]&&pe(l,$[8]);const N={};K[0]&16&&(N.icon=$[4]?"#iconFullscreenExit":"#iconFullscreen"),K[0]&16&&(N.ariaLabel=$[4]?$[15].webview.exitFullscreen:$[15].webview.enterFullscreen),K[0]&16&&(N.active=$[4]),f.$set(N);const ce={};K[0]&512&&(ce.ariaLabel=$[9]?$[15].webview.closeDevTools:$[15].webview.openDevTools),K[0]&512&&(ce.active=$[9]),b.$set(ce)},i($){g||(_(n.$$.fragment,$),_(s.$$.fragment,$),_(r.$$.fragment,$),_(u.$$.fragment,$),_(d.$$.fragment,$),_(f.$$.fragment,$),_(b.$$.fragment,$),g=!0)},o($){y(n.$$.fragment,$),y(s.$$.fragment,$),y(r.$$.fragment,$),y(u.$$.fragment,$),y(d.$$.fragment,$),y(f.$$.fragment,$),y(b.$$.fragment,$),g=!1},d($){$&&O(e),E(n),E(s),E(r),E(u),E(d),E(f),E(b),W=!1,ae(q)}}}function Hc(t){let e,n;return{c(){e=P("iframe"),Lt(e.src,n=t[0])||w(e,"src",n),w(e,"title",t[1]),w(e,"class","fn__flex-1"),e.allowFullscreen=!0,Ee(e,"background",t[3])},m(o,s){B(o,e,s),t[27](e)},p(o,s){s[0]&1&&!Lt(e.src,n=o[0])&&w(e,"src",n),s[0]&2&&w(e,"title",o[1]),s[0]&8&&Ee(e,"background",o[3])},d(o){o&&O(e),t[27](null)}}}function Vc(t){let e,n;return{c(){e=P("webview"),Lt(e.src,n=t[0])||w(e,"src",n),w(e,"title",t[1]),w(e,"useragent",t[2]),w(e,"class","webview fn__flex-1 svelte-11juv7b"),w(e,"allowpopups",""),C(e,"pointer-events-disable",t[12]),Ee(e,"background",t[3])},m(o,s){B(o,e,s),t[26](e)},p(o,s){s[0]&1&&!Lt(e.src,n=o[0])&&w(e,"src",n),s[0]&2&&w(e,"title",o[1]),s[0]&4&&w(e,"useragent",o[2]),s[0]&4096&&C(e,"pointer-events-disable",o[12]),s[0]&8&&Ee(e,"background",o[3])},d(o){o&&O(e),t[26](null)}}}function Xo(t){let e,n,o,s,i,r;return{c(){e=P("div"),n=P("span"),o=_e(t[14]),w(e,"class","webview-status tooltip svelte-11juv7b")},m(a,l){B(a,e,l),D(e,n),D(n,o),r=!0},p(a,l){(!r||l[0]&16384)&&Ue(o,a[14])},i(a){r||(a&&He(()=>{r&&(i&&i.end(1),s=il(e,Wo,{delay:0,duration:125}),s.start())}),r=!0)},o(a){s&&s.invalidate(),a&&(i=rl(e,Wo,{delay:500,duration:250})),r=!1},d(a){a&&O(e),a&&i&&i.end()}}}function zc(t){let e,n,o,s;function i(c,u){return xs?Vc:Hc}let a=i()(t),l=t[13]&&Xo(t);return{c(){e=P("div"),a.c(),n=M(),l&&l.c(),w(e,"slot","content"),w(e,"class","content fn__flex fn__flex-1 svelte-11juv7b")},m(c,u){B(c,e,u),a.m(e,null),D(e,n),l&&l.m(e,null),o||(s=[J(e,"mouseenter",t[28]),J(e,"mouseleave",t[29])],o=!0)},p(c,u){a.p(c,u),c[13]?l?(l.p(c,u),u[0]&8192&&_(l,1)):(l=Xo(c),l.c(),_(l,1),l.m(e,null)):l&&(Q(),y(l,1,1,()=>{l=null}),Z())},d(c){c&&O(e),a.d(),l&&l.d(),o=!1,ae(s)}}}function Gc(t){let e,n;return e=new Lc({props:{fullscreen:t[4],$$slots:{content:[zc],breadcrumb:[Kc]},$$scope:{ctx:t}}}),{c(){A(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const i={};s[0]&16&&(i.fullscreen=o[4]),s[0]&32767|s[1]&2&&(i.$$scope={dirty:s,ctx:o}),e.$set(i)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){y(e.$$.fragment,o),n=!1},d(o){E(e,o)}}}function Jc(t,e,n){let{src:o}=e,{tab:s}=e,{plugin:i}=e,{title:r=""}=e,{useragent:a=i.useragent}=e,{background:l=i.background}=e;const c=i.i18n;let u=!1,p=!1,d=!1,h=!1,f=decodeURI(o),m=!1,b,g,W=!1,q=!1,$="";function K(T){var R;if(xs)try{(R=g==null?void 0:g.loadURL)==null||R.call(g,T,{userAgent:a})}catch{n(0,o=T)}else n(0,o=T)}function L(){var T;p&&((T=g==null?void 0:g.goBack)==null||T.call(g))}function H(){var T;p&&((T=g==null?void 0:g.goBack)==null||T.call(g))}function j(){var T,R;h?(T=g==null?void 0:g.stop)==null||T.call(g):(R=g==null?void 0:g.reload)==null||R.call(g)}function N(T){if(f)try{try{const R=new URL(f);n(8,f=R.href)}catch{switch(!0){case f.startsWith("//"):{const fe=new URL(`https:${f}`);n(8,f=fe.href);break}case es(f,!1):{const fe=new URL(`${globalThis.document.baseURI}${f}`);n(8,f=fe.href);break}default:{const fe=new URL(`https://${f}`);n(8,f=fe.href);break}}}K(f)}catch(R){i.logger.warn(R),i.siyuan.showMessage(`${i.name}:
URL <code class="fn__code">${f}</code> ${c.message.nonStandardURL}
`,void 0,"error")}}function ce(){global.open(s.data.href,"_blank")}function Se(T){i.openWindow(s.data.href,{x:T.screenX,y:T.screenY,title:s.data.title})}function ze(){n(4,u=!u)}function Te(){var T,R,fe;g&&((T=g==null?void 0:g.isDevToolsOpened)!=null&&T.call(g)?(R=g==null?void 0:g.closeDevTools)==null||R.call(g):(fe=g==null?void 0:g.openDevTools)==null||fe.call(g))}xa(()=>{var T,R,fe,it,rt,at,lt,ut,ct,ft;(T=g==null?void 0:g.addEventListener)==null||T.call(g,"load-commit",G=>{var Me,Le;G.isMainFrame&&(n(8,f=decodeURI(G.url)),n(24,s.data.href=G.url,s)),n(5,p=(Me=g==null?void 0:g.canGoBack)==null?void 0:Me.call(g)),n(6,d=(Le=g==null?void 0:g.canGoForward)==null?void 0:Le.call(g))}),(R=g==null?void 0:g.addEventListener)==null||R.call(g,"page-title-updated",G=>{n(1,r=G.title),n(24,s.data.title=r,s),s.tab.updateTitle(r),n(24,s.tab.headElement.ariaLabel=r,s)}),(fe=g==null?void 0:g.addEventListener)==null||fe.call(g,"page-favicon-updated",G=>{var Le;const Me=G.favicons;if((Le=s.tab.headElement.querySelector(".item__graphic"))==null||Le.remove(),Me.length>0){const Ge=Me[0],Je=s.tab.headElement.querySelector(".item__icon");if(s.tab.docIcon!==Ge||!Je){n(24,s.tab.docIcon=Ge,s);const pt=`<img src="${Ge}" />`;Je?Je.innerHTML=pt:s.tab.headElement.insertAdjacentHTML("afterbegin",`<span class="item__icon">${pt}</span>`)}}else s.tab.setDocIcon("".codePointAt(0).toString(16))}),(it=g==null?void 0:g.addEventListener)==null||it.call(g,"did-start-loading",G=>{n(7,h=!0)}),(rt=g==null?void 0:g.addEventListener)==null||rt.call(g,"did-stop-loading",G=>{n(7,h=!1)}),(at=g==null?void 0:g.addEventListener)==null||at.call(g,"devtools-open-url",G=>{i.openWebviewTab(G.url)}),(lt=g==null?void 0:g.addEventListener)==null||lt.call(g,"devtools-opened",G=>n(9,m=!0)),(ut=g==null?void 0:g.addEventListener)==null||ut.call(g,"devtools-closed",G=>n(9,m=!1)),(ct=g==null?void 0:g.addEventListener)==null||ct.call(g,"update-target-url",G=>{G.url?(n(14,$=G.url),q||n(13,q=!0)):n(13,q=!1)}),(ft=g==null?void 0:g.addEventListener)==null||ft.call(g,"context-menu",G=>{i.logger.debug(G),G.params.linkURL&&i.openWebviewTab(G.params.linkURL,G.params.titleText||G.params.linkText||G.params.altText)})});function I(T){St[T?"unshift":"push"](()=>{g=T,n(11,g)})}function de(T){St[T?"unshift":"push"](()=>{b=T,n(10,b)})}const Pe=T=>n(12,W=T.button!==0),me=()=>n(12,W=!0);function Oe(){f=this.value,n(8,f)}return t.$$set=T=>{"src"in T&&n(0,o=T.src),"tab"in T&&n(24,s=T.tab),"plugin"in T&&n(25,i=T.plugin),"title"in T&&n(1,r=T.title),"useragent"in T&&n(2,a=T.useragent),"background"in T&&n(3,l=T.background)},[o,r,a,l,u,p,d,h,f,m,b,g,W,q,$,c,L,H,j,N,ce,Se,ze,Te,s,i,I,de,Pe,me,Oe]}class Yc extends ue{constructor(e){super(),le(this,e,Jc,Gc,ie,{src:0,tab:24,plugin:25,title:1,useragent:2,background:3},null,[-1,-1])}}const Qo={general:{useragent:"",background:"transparent"},tab:{enable:!0,open:{mouse:{type:"click",button:Be.Left,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!0}}},protocols:{https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"},"#":{enable:!1,prefix:"#"}}}},window:{enable:!0,open:{mouse:{type:"mousedown",button:Be.Middle,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!1}}},protocols:{siyuan:{enable:!0,prefix:"siyuan://"},https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}},params:{width:800,height:600,center:!1,frame:!0,alwaysOnTop:!0,autoHideMenuBar:!0,enableMenuBar:!0},siyuan:{enable:!0,focus:!1,editorType:ye.mobile}}},Fe=class Fe extends ge.Plugin{constructor(n){super(n);Y(this,"siyuan",ge);Y(this,"logger");Y(this,"TOP_BAR_MENU_ID");Y(this,"SETTINGS_DIALOG_ID");Y(this,"WEBVIEW_TAB_ID");Y(this,"webview_tab");Y(this,"tab_bar_item");Y(this,"config");Y(this,"blockRefMenuEventListener",n=>{const s=n.detail.element.dataset.id,i=[];i.push({icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:()=>this.openSiyuanWindowByID(s,!1)}),i.push({icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:()=>this.openSiyuanWindowByID(s,!0)}),n.detail.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:i})});Y(this,"linkMenuEventListener",n=>{const o=[],s=n.detail.element,i=this.parseHyperlinkMeta(s,this.config.tab.open.targets);switch(!0){case i.href.startsWith("siyuan:"):{const r=new URL(i.href),a=Dn(r);o.push({icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>{ge.openTab({app:this.app,doc:{id:a.id,action:["cb-get-focus","cb-get-hl"],zoomIn:a.focus},keepCursor:!1,removeCurrentTab:!1})}}),o.push({icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>{ge.openTab({app:this.app,doc:{id:a.id,action:["cb-get-focus","cb-get-hl"],zoomIn:a.focus},keepCursor:!0,removeCurrentTab:!1})}}),o.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>{ge.openTab({app:this.app,doc:{id:a.id,action:["cb-get-focus","cb-get-hl"],zoomIn:a.focus},position:"right",keepCursor:!1,removeCurrentTab:!1})}}),o.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>{ge.openTab({app:this.app,doc:{id:a.id,action:["cb-get-focus","cb-get-hl"],zoomIn:a.focus},position:"bottom",keepCursor:!1,removeCurrentTab:!1})}}),o.push({icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>this.openSiyuanWindowByID(a.id,a.focus)});break}case es(i.href):{const r=i.href.startsWith("/")?`${globalThis.location.origin}${i.href}`:`${globalThis.document.baseURI}${i.href}`;Et&&ht&&(o.push({icon:"iconAdd",label:this.i18n.menu.openTab.label,click:()=>this.openWebviewTab(r,i.title,void 0,{keepCursor:!1})}),o.push({icon:"iconMin",label:this.i18n.menu.openTabBackground.label,click:()=>this.openWebviewTab(r,i.title,void 0,{keepCursor:!0})}),o.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>this.openWebviewTab(r,i.title,void 0,{position:"right"})}),o.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>this.openWebviewTab(r,i.title,void 0,{position:"bottom"})})),o.push({icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>this.openWebpageWindow(r,i.title,{screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})});break}default:{Et&&ht&&(o.push({icon:"iconFile",label:this.i18n.menu.openTabBackground.label,click:()=>this.openWebviewTab(i.href,i.title,void 0,{keepCursor:!0})}),o.push({icon:"iconLayoutRight",label:this.i18n.menu.openTabRight.label,click:()=>this.openWebviewTab(i.href,i.title,void 0,{position:"right"})}),o.push({icon:"iconLayoutBottom",label:this.i18n.menu.openTabBottom.label,click:()=>this.openWebviewTab(i.href,i.title,void 0,{position:"bottom"})})),o.push({icon:"iconOpenWindow",label:this.i18n.menu.openByNewWindow.label,click:()=>this.openWebpageWindow(i.href,i.title,{screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})});break}}n.detail.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:o})});Y(this,"blockMenuEventListener",n=>{const o=n.detail,s=ja(n.detail);if(s){const i=[];i.push({icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:r=>this.openSiyuanWindowByID(s.id,!1)}),!s.isDocumentBlock&&!s.isMultiBlock&&i.push({icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:r=>this.openSiyuanWindowByID(s.id,!0)}),o.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:i})}});Y(this,"openTabEventListener",n=>{try{if(!this.config.tab.enable||!Nn(n,this.config.tab.open.mouse))return;const o=this.parseHyperlinkMeta(n.target,this.config.tab.open.targets);if(o.valid&&(this.logger.info(o),this.isUrlSchemeAvailable(o.href,this.config.tab.open.protocols)))try{n.preventDefault(),n.stopPropagation(),this.openWebviewTab(o.href,o.title)}catch(s){this.logger.warn(s)}}catch(o){this.logger.warn(o)}});Y(this,"openWindowEventListener",n=>{try{if(!this.config.window.enable||!Nn(n,this.config.window.open.mouse))return;const o=this.parseHyperlinkMeta(n.target,this.config.window.open.targets);if(o.valid){if(this.logger.info(o.href),o.enabled&&this.isUrlSchemeAvailable(o.href,this.config.window.open.protocols))if(n.preventDefault(),n.stopPropagation(),o.href.startsWith("siyuan://")){if(this.config.window.siyuan.enable){const s=dt(Jt(this.config.window.siyuan.editorType),Dn(new URL(o.href)));this.openSiyuanWindow(s,n)}}else this.openWindow(o.href,{x:n.screenX,y:n.screenY,title:o.title||this.name})}else if(this.config.window.siyuan.enable){const s=$i(n);if(s){n.preventDefault(),n.stopPropagation();const i=dt(Jt(this.config.window.siyuan.editorType),{id:s,focus:this.config.window.siyuan.focus});this.openSiyuanWindow(i,n)}}}catch(o){this.logger.warn(o)}});this.logger=new ai(this.name),this.TOP_BAR_MENU_ID=`${this.name}-top-bar-menu`,this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`,this.WEBVIEW_TAB_ID=`${this.name}${Fe.WEBVIEW_TAB_TYPE}`;const o=this;this.webview_tab=this.addTab({type:Fe.WEBVIEW_TAB_TYPE,init(){const s=this;new Yc({target:s.element,props:{src:s.data.href,tab:s,plugin:o,title:s.data.title}})}})}onload(){this.addCommand({langKey:"openDesktopWindow",langText:this.i18n.menu.openDesktopWindow.label,hotkey:"N",customHotkey:"",callback:()=>{this.openSiyuanDesktopWindow()}}),this.addCommand({langKey:"openMobildWindow",langText:this.i18n.menu.openMobildWindow.label,hotkey:"",customHotkey:"",callback:()=>{this.openSiyuanMobileWindow()}}),this.addCommand({langKey:"openNewTab",langText:this.i18n.menu.openNewTab.label,hotkey:"T",customHotkey:"",callback:()=>{this.openWebviewTab("",this.i18n.menu.openNewTab.title)}}),this.loadData(Fe.GLOBAL_CONFIG_NAME).then(n=>{this.config=Pt(Qo,n||{})}).catch(n=>this.logger.error(n)).finally(()=>{Et&&ht&&globalThis.addEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.addEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.on("click-editortitleicon",this.blockMenuEventListener),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("open-menu-blockref",this.blockRefMenuEventListener),this.eventBus.on("open-menu-link",this.linkMenuEventListener)})}onLayoutReady(){ht&&(new ge.Menu(this.TOP_BAR_MENU_ID),this.tab_bar_item=this.addTopBar({icon:"iconOpenWindow",title:this.i18n.displayName,position:"right",callback:n=>{const o=new ge.Menu(this.TOP_BAR_MENU_ID);o.addItem({icon:"iconSiYuan",label:this.i18n.menu.openDesktopWindow.label,click:i=>{this.openSiyuanDesktopWindow({screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})}}),o.addItem({icon:"iconSiYuan",label:this.i18n.menu.openMobildWindow.label,click:i=>{this.openSiyuanDesktopWindow({screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY})}});const s={x:0,y:0,isLeft:!0};if(n.target.classList.contains("fn__none")){const i=document.getElementById("barPlugins");if(i){const r=i.getBoundingClientRect();s.x=r.x+r.width/2,s.y=r.y+r.height/2}}else{const i=this.tab_bar_item.getBoundingClientRect();s.x=i.x+i.width/2,s.y=i.y+i.height/2}o.open(s)}}))}onunload(){Et&&ht&&globalThis.removeEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.removeEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editortitleicon",this.blockMenuEventListener),this.eventBus.off("open-menu-blockref",this.blockRefMenuEventListener),this.eventBus.off("open-menu-link",this.linkMenuEventListener)}openSetting(){const n=this,o=new ge.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${n.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Cn?"92vw":"720px",height:Cn?void 0:"640px"});new lc({target:o.element.querySelector(`#${n.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(Pt(Qo))}async updateConfig(n){return n&&n!==this.config&&(this.config=n),this.saveData(Fe.GLOBAL_CONFIG_NAME,this.config)}get useragent(){return this.config.general.useragent||global.navigator.userAgent}get background(){return this.config.general.background}openWebviewTab(n,o,s="iconLanguage",i={}){ge.openTab({app:this.app,custom:{icon:s,title:o||this.name,id:this.WEBVIEW_TAB_ID,data:{href:n,title:o||this.name}},keepCursor:!1,removeCurrentTab:!1,...i})}openWindow(n,o={x:0,y:0,title:null},s={defaultFontSize:globalThis.siyuan.config.editor.fontSize,defaultFontFamily:{standard:globalThis.siyuan.config.editor.fontFamily}}){try{const i=new URL(n);return vu(i,{backgroundColor:this.background,...this.config.window.params},o,s,this)}catch(i){this.logger.warn(i)}}openWebpageWindow(n,o,s){const i={x:(s==null?void 0:s.screenX)??0,y:(s==null?void 0:s.screenY)??0,title:o,alwaysOnTop:!1,autoHideMenuBar:!0,webPreferences:{nodeIntegration:!1,webviewTag:!1,contextIsolation:!1},enableMenuBar:!0,enableElectron:!1};return this.openWindow(n,i)}openSiyuanDesktopWindow(n,o){const s={x:(n==null?void 0:n.screenX)??0,y:(n==null?void 0:n.screenY)??0,title:"desktop",alwaysOnTop:!1,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(o||dt(sn.desktop).href,s)}openSiyuanMobileWindow(n,o){const s={x:(n==null?void 0:n.screenX)??0,y:(n==null?void 0:n.screenY)??0,title:"mobile",alwaysOnTop:!0,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(o||dt(sn.mobile).href,s)}openSiyuanNativeWindow(n,o){const s=vi(o);if(s){const i={position:this.config.window.params.center?void 0:{x:(n==null?void 0:n.screenX)??0,y:(n==null?void 0:n.screenY)??0},height:this.config.window.params.height,width:this.config.window.params.height,doc:{id:s.id}};this.siyuan.openWindow(i)}}openSiyuanWindow(n,o,s=this.config.window.siyuan.editorType){switch(s){case ye.desktop:this.openSiyuanDesktopWindow(o,n.href);break;case ye.mobile:this.openSiyuanMobileWindow(o,n.href);break;case ye.window:this.openSiyuanNativeWindow(o,n);break}}openSiyuanWindowByID(n,o=!1,s=this.config.window.siyuan.editorType){const i=dt(Jt(s),{id:n,focus:o});this.openSiyuanWindowByURL(i,s)}openSiyuanWindowByURL(n,o=this.config.window.siyuan.editorType){this.openSiyuanWindow(n,{screenX:globalThis.siyuan.coordinates.screenX,screenY:globalThis.siyuan.coordinates.screenY},o)}isUrlSchemeAvailable(n,o){for(const s in o){const i=o[s];if(i.enable&&n.startsWith(i.prefix))return!0}return!1}parseHyperlinkMeta(n,o){const s={valid:!1,enabled:!1,href:void 0,title:void 0};switch(n.localName){case"a":s.valid=!0,s.enabled=o.hyperlink.other.enable,s.href=n.getAttribute("href")||"",s.title=n.title||n.innerText;break;case"span":/\ba\b/.test(n.dataset.type)&&(s.valid=!0,s.enabled=o.hyperlink.editor.enable,s.href=n.dataset.href||"",s.title=n.dataset.title||n.innerText);break}return s}};Y(Fe,"GLOBAL_CONFIG_NAME","global-config"),Y(Fe,"WEBVIEW_TAB_TYPE","-webview-tag");let gn=Fe;module.exports=gn;
