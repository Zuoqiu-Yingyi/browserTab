"use strict";var Kn=Object.defineProperty;var An=(t,e,i)=>e in t?Kn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var fe=(t,e,i)=>(An(t,typeof e!="symbol"?e+"":e,i),i);const be=require("siyuan"),yt=mn(),Qe=Dn();Cn();const vt=Rn();function Bn(){return!!globalThis.require}function Wn(){return!!globalThis.process}function mn(){return Wn()&&Bn()}function Dn(){switch(be.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function Rn(){switch(be.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function Cn(){switch(be.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}class Vn{constructor(e,i=!0){this.label=e,this.collapsed=i}stdout(e,...i){const n=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${e.name.toUpperCase()}\x1B[0m>`;this.collapsed?globalThis.console.groupCollapsed(n):globalThis.console.group(n),e(...i),globalThis.console.trace(),globalThis.console.groupEnd()}dir(...e){this.stdout(globalThis.console.dir,...e)}table(...e){this.stdout(globalThis.console.table,...e)}debug(...e){this.stdout(globalThis.console.debug,...e)}info(...e){this.stdout(globalThis.console.info,...e)}log(...e){this.stdout(globalThis.console.log,...e)}warn(...e){this.stdout(globalThis.console.warn,...e)}error(...e){this.stdout(globalThis.console.error,...e)}}function Mt(t,e){return t.button===e.button&&t.type===e.type&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey&&t.shiftKey===e.shiftKey}function In(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Pn=function(e){return Fn(e)&&!Hn(e)};function Fn(t){return!!t&&typeof t=="object"}function Hn(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||zn(t)}var jn=typeof Symbol=="function"&&Symbol.for,Un=jn?Symbol.for("react.element"):60103;function zn(t){return t.$$typeof===Un}function qn(t){return Array.isArray(t)?[]:{}}function De(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Se(qn(t),t,e):t}function Gn(t,e,i){return t.concat(e).map(function(n){return De(n,i)})}function Yn(t,e){if(!e.customMerge)return Se;var i=e.customMerge(t);return typeof i=="function"?i:Se}function Xn(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function Et(t){return Object.keys(t).concat(Xn(t))}function gn(t,e){try{return e in t}catch{return!1}}function Qn(t,e){return gn(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function Zn(t,e,i){var n={};return i.isMergeableObject(t)&&Et(t).forEach(function(s){n[s]=De(t[s],i)}),Et(e).forEach(function(s){Qn(t,s)||(gn(t,s)&&i.isMergeableObject(e[s])?n[s]=Yn(s,i)(t[s],e[s],i):n[s]=De(e[s],i))}),n}function Se(t,e,i){i=i||{},i.arrayMerge=i.arrayMerge||Gn,i.isMergeableObject=i.isMergeableObject||Pn,i.cloneUnlessOtherwiseSpecified=De;var n=Array.isArray(e),s=Array.isArray(t),l=n===s;return l?n?i.arrayMerge(t,e,i):Zn(t,e,i):De(e,i)}Se.all=function(e,i){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,s){return Se(n,s,i)},{})};var Jn=Se,xn=Jn;const ei=In(xn);function He(...t){return ei.all(t)}function Tt(t){const e=t.getBoundingClientRect(),i=globalThis.mozInnerScreenX??globalThis.screenX,n=globalThis.mozInnerscreenY??globalThis.screenY;return{x:i+e.x,y:n+e.y,centerX:i+e.x+Math.round(e.width/2),centerY:n+e.y+Math.round(e.height/2),left:i+e.left,right:i+e.right,top:n+e.top,bottom:n+e.bottom}}const Te={id:/^\d{14}\-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}\-[0-9a-z]{7})/};function ti(t){const e=t.composedPath();for(let i=0;i<e.length;++i){const n=e[i].dataset;switch(!0){case(n.nodeId&&Te.id.test(n.nodeId)):return n.nodeId;case(n.id&&Te.id.test(n.id)):return n.id;case(n.oid&&Te.id.test(n.oid)):return n.oid;case(n.rootId&&Te.id.test(n.rootId)):return n.rootId}}}var ge=(t=>(t[t.window=0]="window",t[t.app=1]="app",t[t.desktop=2]="desktop",t[t.mobile=3]="mobile",t))(ge||{}),et=(t=>(t.window="/stage/build/app/window.html",t.app="/stage/build/app",t.desktop="/stage/build/desktop",t.mobile="/stage/build/mobile",t))(et||{});function Ze(t){switch(t){case ge.window:return"/stage/build/app/window.html";case ge.app:return"/stage/build/app";case ge.desktop:return"/stage/build/desktop";case ge.mobile:return"/stage/build/mobile"}}function Ke(t,e,i=globalThis.origin){const n=new URL(i);return n.pathname=t,e!=null&&e.id&&n.searchParams.set("id",e.id),(e==null?void 0:e.focus)!==void 0&&n.searchParams.set("focus",e.focus?"1":"0"),e!=null&&e.url&&n.searchParams.set("url",e.url),n}function ni(t){return Te.url.test(t.href)?{id:Te.url.exec(t.href)[1],focus:t.searchParams.get("focus")==="1"}:null}var dn=(t=>(t.NodeDocument="NodeDocument",t.NodeBlockquote="NodeBlockquote",t.NodeList="NodeList",t.NodeListItem="NodeListItem",t.NodeSuperBlock="NodeSuperBlock",t.NodeAudio="NodeAudio",t.NodeBlockQueryEmbed="NodeBlockQueryEmbed",t.NodeCodeBlock="NodeCodeBlock",t.NodeHTMLBlock="NodeHTMLBlock",t.NodeHeading="NodeHeading",t.NodeIFrame="NodeIFrame",t.NodeMathBlock="NodeMathBlock",t.NodeParagraph="NodeParagraph",t.NodeTable="NodeTable",t.NodeThematicBreak="NodeThematicBreak",t.NodeVideo="NodeVideo",t.NodeWidget="NodeWidget",t))(dn||{});function ii(t){const{protyle:e,data:i,blockElements:n}=t;if(i){const s={id:i.id,type:dn.NodeDocument,element:e.wysiwyg.element};return{...s,isDocumentBlock:!0,isMultiBlock:!1,blocks:[s]}}else if(n&&n.length>0){const s=[];return n.forEach(l=>{s.push({id:l.dataset.nodeId,type:l.dataset.type,element:l})}),{...s[0],isDocumentBlock:!1,isMultiBlock:s.length>1,blocks:s}}return null}function j(){}const ot=t=>t;function si(t,e){for(const i in e)t[i]=e[i];return t}function pn(t){return t()}function Lt(){return Object.create(null)}function ee(t){t.forEach(pn)}function Ge(t){return typeof t=="function"}function re(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ie;function Nt(t,e){return Ie||(Ie=document.createElement("a")),Ie.href=e,t===Ie.href}function li(t){return Object.keys(t).length===0}function ie(t,e,i,n){if(t){const s=hn(t,e,i,n);return t[0](s)}}function hn(t,e,i,n){return t[1]&&n?si(i.ctx.slice(),t[1](n(e))):i.ctx}function se(t,e,i,n){if(t[2]&&n){const s=t[2](n(i));if(e.dirty===void 0)return s;if(typeof s=="object"){const l=[],o=Math.max(e.dirty.length,s.length);for(let r=0;r<o;r+=1)l[r]=e.dirty[r]|s[r];return l}return e.dirty|s}return e.dirty}function le(t,e,i,n,s,l){if(s){const o=hn(e,i,n,l);t.p(o,s)}}function oe(t){if(t.ctx.length>32){const e=[],i=t.ctx.length/32;for(let n=0;n<i;n++)e[n]=-1;return e}return-1}function oi(t){const e={};for(const i in t)e[i]=!0;return e}const bn=typeof window<"u";let wn=bn?()=>window.performance.now():()=>Date.now(),rt=bn?t=>requestAnimationFrame(t):j;const Le=new Set;function $n(t){Le.forEach(e=>{e.c(t)||(Le.delete(e),e.f())}),Le.size!==0&&rt($n)}function kn(t){let e;return Le.size===0&&rt($n),{promise:new Promise(i=>{Le.add(e={c:t,f:i})}),abort(){Le.delete(e)}}}function S(t,e){t.appendChild(e)}function yn(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function ri(t){const e=K("style");return ai(yn(t),e),e.sheet}function ai(t,e){return S(t.head||t,e),e.sheet}function N(t,e,i){t.insertBefore(e,i||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function K(t){return document.createElement(t)}function tt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function _e(t){return document.createTextNode(t)}function W(){return _e(" ")}function de(){return _e("")}function Y(t,e,i,n){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i,n)}function $(t,e,i){i==null?t.removeAttribute(e):t.getAttribute(e)!==i&&t.setAttribute(e,i)}function St(t,e,i){t.setAttributeNS("http://www.w3.org/1999/xlink",e,i)}function nt(t){return t===""?null:+t}function ui(t){return Array.from(t.childNodes)}function ve(t,e){e=""+e,t.data!==e&&(t.data=e)}function ce(t,e){t.value=e??""}function Be(t,e,i,n){i==null?t.style.removeProperty(e):t.style.setProperty(e,i,n?"important":"")}function Ot(t,e,i){for(let n=0;n<t.options.length;n+=1){const s=t.options[n];if(s.__value===e){s.selected=!0;return}}(!i||e!==void 0)&&(t.selectedIndex=-1)}function fi(t){const e=t.querySelector(":checked");return e&&e.__value}function O(t,e,i){t.classList[i?"add":"remove"](e)}function vn(t,e,{bubbles:i=!1,cancelable:n=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,i,n,e),s}class Ce{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,i,n=null){this.e||(this.is_svg?this.e=tt(i.nodeName):this.e=K(i.nodeType===11?"TEMPLATE":i.nodeName),this.t=i.tagName!=="TEMPLATE"?i:i.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let i=0;i<this.n.length;i+=1)N(this.t,this.n[i],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(E)}}const je=new Map;let Ue=0;function ci(t){let e=5381,i=t.length;for(;i--;)e=(e<<5)-e^t.charCodeAt(i);return e>>>0}function _i(t,e){const i={stylesheet:ri(e),rules:{}};return je.set(t,i),i}function Mn(t,e,i,n,s,l,o,r=0){const a=16.666/n;let f=`{
`;for(let h=0;h<=1;h+=a){const T=e+(i-e)*l(h);f+=h*100+`%{${o(T,1-T)}}
`}const d=f+`100% {${o(i,1-i)}}
}`,m=`__svelte_${ci(d)}_${r}`,b=yn(t),{stylesheet:_,rules:u}=je.get(b)||_i(b,t);u[m]||(u[m]=!0,_.insertRule(`@keyframes ${m} ${d}`,_.cssRules.length));const c=t.style.animation||"";return t.style.animation=`${c?`${c}, `:""}${m} ${n}ms linear ${s}ms 1 both`,Ue+=1,m}function it(t,e){const i=(t.style.animation||"").split(", "),n=i.filter(e?l=>l.indexOf(e)<0:l=>l.indexOf("__svelte")===-1),s=i.length-n.length;s&&(t.style.animation=n.join(", "),Ue-=s,Ue||mi())}function mi(){rt(()=>{Ue||(je.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&E(e)}),je.clear())})}let Re;function We(t){Re=t}function En(){if(!Re)throw new Error("Function called outside component initialization");return Re}function gi(t){En().$$.on_mount.push(t)}function Ye(){const t=En();return(e,i,{cancelable:n=!1}={})=>{const s=t.$$.callbacks[e];if(s){const l=vn(e,i,{cancelable:n});return s.slice().forEach(o=>{o.call(t,l)}),!l.defaultPrevented}return!0}}function di(t,e){const i=t.$$.callbacks[e.type];i&&i.slice().forEach(n=>n.call(this,e))}const Ee=[],st=[];let Ne=[];const Kt=[],pi=Promise.resolve();let lt=!1;function hi(){lt||(lt=!0,pi.then(Tn))}function ye(t){Ne.push(t)}const Je=new Set;let Me=0;function Tn(){if(Me!==0)return;const t=Re;do{try{for(;Me<Ee.length;){const e=Ee[Me];Me++,We(e),bi(e.$$)}}catch(e){throw Ee.length=0,Me=0,e}for(We(null),Ee.length=0,Me=0;st.length;)st.pop()();for(let e=0;e<Ne.length;e+=1){const i=Ne[e];Je.has(i)||(Je.add(i),i())}Ne.length=0}while(Ee.length);for(;Kt.length;)Kt.pop()();lt=!1,Je.clear(),We(t)}function bi(t){if(t.fragment!==null){t.update(),ee(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ye)}}function wi(t){const e=[],i=[];Ne.forEach(n=>t.indexOf(n)===-1?e.push(n):i.push(n)),i.forEach(n=>n()),Ne=e}let Ae;function Ln(){return Ae||(Ae=Promise.resolve(),Ae.then(()=>{Ae=null})),Ae}function ze(t,e,i){t.dispatchEvent(vn(`${e?"intro":"outro"}${i}`))}const Pe=new Set;let we;function J(){we={r:0,c:[],p:we}}function x(){we.r||ee(we.c),we=we.p}function g(t,e){t&&t.i&&(Pe.delete(t),t.i(e))}function p(t,e,i,n){if(t&&t.o){if(Pe.has(t))return;Pe.add(t),we.c.push(()=>{Pe.delete(t),n&&(i&&t.d(1),n())}),t.o(e)}else n&&n()}const Nn={duration:0};function $i(t,e,i){const n={direction:"in"};let s=e(t,i,n),l=!1,o,r,a=0;function f(){o&&it(t,o)}function d(){const{delay:b=0,duration:_=300,easing:u=ot,tick:c=j,css:h}=s||Nn;h&&(o=Mn(t,0,1,_,b,u,h,a++)),c(0,1);const T=wn()+b,z=T+_;r&&r.abort(),l=!0,ye(()=>ze(t,!0,"start")),r=kn(V=>{if(l){if(V>=z)return c(1,0),ze(t,!0,"end"),f(),l=!1;if(V>=T){const C=u((V-T)/_);c(C,1-C)}}return l})}let m=!1;return{start(){m||(m=!0,it(t),Ge(s)?(s=s(n),Ln().then(d)):d())},invalidate(){m=!1},end(){l&&(f(),l=!1)}}}function ki(t,e,i){const n={direction:"out"};let s=e(t,i,n),l=!0,o;const r=we;r.r+=1;function a(){const{delay:f=0,duration:d=300,easing:m=ot,tick:b=j,css:_}=s||Nn;_&&(o=Mn(t,1,0,d,f,m,_));const u=wn()+f,c=u+d;ye(()=>ze(t,!1,"start")),kn(h=>{if(l){if(h>=c)return b(0,1),ze(t,!1,"end"),--r.r||ee(r.c),!1;if(h>=u){const T=m((h-u)/d);b(1-T,T)}}return l})}return Ge(s)?Ln().then(()=>{s=s(n),a()}):a(),{end(f){f&&s.tick&&s.tick(1,0),l&&(o&&it(t,o),l=!1)}}}function yi(t,e){t.d(1),e.delete(t.key)}function Xe(t,e){p(t,1,1,()=>{e.delete(t.key)})}function Ve(t,e,i,n,s,l,o,r,a,f,d,m){let b=t.length,_=l.length,u=b;const c={};for(;u--;)c[t[u].key]=u;const h=[],T=new Map,z=new Map,V=[];for(u=_;u--;){const R=m(s,l,u),q=i(R);let L=o.get(q);L?n&&V.push(()=>L.p(R,e)):(L=f(q,R),L.c()),T.set(q,h[u]=L),q in c&&z.set(q,Math.abs(u-c[q]))}const C=new Set,D=new Set;function F(R){g(R,1),R.m(r,d),o.set(R.key,R),d=R.first,_--}for(;b&&_;){const R=h[_-1],q=t[b-1],L=R.key,P=q.key;R===q?(d=R.first,b--,_--):T.has(P)?!o.has(L)||C.has(L)?F(R):D.has(P)?b--:z.get(L)>z.get(P)?(D.add(L),F(R)):(C.add(P),b--):(a(q,o),b--)}for(;b--;){const R=t[b];T.has(R.key)||a(R,o)}for(;_;)F(h[_-1]);return ee(V),h}function M(t){t&&t.c()}function y(t,e,i,n){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,i),n||ye(()=>{const o=t.$$.on_mount.map(pn).filter(Ge);t.$$.on_destroy?t.$$.on_destroy.push(...o):ee(o),t.$$.on_mount=[]}),l.forEach(ye)}function v(t,e){const i=t.$$;i.fragment!==null&&(wi(i.after_update),ee(i.on_destroy),i.fragment&&i.fragment.d(e),i.on_destroy=i.fragment=null,i.ctx=[])}function vi(t,e){t.$$.dirty[0]===-1&&(Ee.push(t),hi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ae(t,e,i,n,s,l,o,r=[-1]){const a=Re;We(t);const f=t.$$={fragment:null,ctx:[],props:l,update:j,not_equal:s,bound:Lt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Lt(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};o&&o(f.root);let d=!1;if(f.ctx=i?i(t,e.props||{},(m,b,..._)=>{const u=_.length?_[0]:b;return f.ctx&&s(f.ctx[m],f.ctx[m]=u)&&(!f.skip_bound&&f.bound[m]&&f.bound[m](u),d&&vi(t,m)),b}):[],f.update(),d=!0,ee(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const m=ui(e.target);f.fragment&&f.fragment.l(m),m.forEach(E)}else f.fragment&&f.fragment.c();e.intro&&g(t.$$.fragment),y(t,e.target,e.anchor,e.customElement),Tn()}We(a)}class ue{$destroy(){v(this,1),this.$destroy=j}$on(e,i){if(!Ge(i))return j;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(i),()=>{const s=n.indexOf(i);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!li(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Mi(t){let e,i;return{c(){e=tt("svg"),i=tt("use"),St(i,"xlink:href",t[0]),$(e,"style",t[2]),$(e,"class",t[1])},m(n,s){N(n,e,s),S(e,i)},p(n,[s]){s&1&&St(i,"xlink:href",n[0]),s&4&&$(e,"style",n[2]),s&2&&$(e,"class",n[1])},i:j,o:j,d(n){n&&E(e)}}}function Ei(t,e,i){let{icon:n}=e,{className:s=void 0}=e,{style:l=void 0}=e;return t.$$set=o=>{"icon"in o&&i(0,n=o.icon),"className"in o&&i(1,s=o.className),"style"in o&&i(2,l=o.style)},[n,s,l]}class pe extends ue{constructor(e){super(),ae(this,e,Ei,Mi,re,{icon:0,className:1,style:2})}}const Ti=t=>({focus:t&1}),At=t=>({focus:t[0]});function Bt(t,e,i){const n=t.slice();return n[12]=e[i],n}function Wt(t){let e,i,n,s,l,o,r;return i=new pe({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){e=K("div"),M(i.$$.fragment),n=W(),s=K("input"),$(s,"placeholder",t[4]),$(s,"class","b3-text-field fn__block b3-form__icon-input"),$(e,"class","b3-form__icon")},m(a,f){N(a,e,f),y(i,e,null),S(e,n),S(e,s),ce(s,t[1]),l=!0,o||(r=[Y(s,"input",t[9]),Y(s,"change",t[5])],o=!0)},p(a,f){(!l||f&16)&&$(s,"placeholder",a[4]),f&2&&s.value!==a[1]&&ce(s,a[1])},i(a){l||(g(i.$$.fragment,a),l=!0)},o(a){p(i.$$.fragment,a),l=!1},d(a){a&&E(e),v(i),o=!1,ee(r)}}}function Dt(t,e){let i,n,s,l,o=e[12].text+"",r,a,f,d,m;n=new pe({props:{icon:e[12].icon,className:"b3-list-item__graphic"}});function b(){return e[10](e[12])}return{key:t,first:null,c(){i=K("li"),M(n.$$.fragment),s=W(),l=K("span"),r=W(),$(l,"class","b3-list-item__text svelte-15drd7h"),$(i,"data-name",a=e[12].name),$(i,"class","b3-list-item"),O(i,"b3-list-item--focus",e[12].key===e[0]),this.first=i},m(_,u){N(_,i,u),y(n,i,null),S(i,s),S(i,l),l.innerHTML=o,S(i,r),f=!0,d||(m=Y(i,"click",b),d=!0)},p(_,u){e=_;const c={};u&4&&(c.icon=e[12].icon),n.$set(c),(!f||u&4)&&o!==(o=e[12].text+"")&&(l.innerHTML=o),(!f||u&4&&a!==(a=e[12].name))&&$(i,"data-name",a),(!f||u&5)&&O(i,"b3-list-item--focus",e[12].key===e[0])},i(_){f||(g(n.$$.fragment,_),f=!0)},o(_){p(n.$$.fragment,_),f=!1},d(_){_&&E(i),v(n),d=!1,m()}}}function Li(t){let e;return{c(){e=_e("Container")},m(i,n){N(i,e,n)},d(i){i&&E(e)}}}function Ni(t){let e,i,n,s=[],l=new Map,o,r,a=t[3]&&Wt(t),f=t[2];const d=u=>u[12].key;for(let u=0;u<f.length;u+=1){let c=Bt(t,f,u),h=d(c);l.set(h,s[u]=Dt(h,c))}const m=t[8].default,b=ie(m,t,t[7],At),_=b||Li();return{c(){e=K("div"),i=K("ul"),a&&a.c(),n=W();for(let u=0;u<s.length;u+=1)s[u].c();o=W(),_&&_.c(),$(i,"class","b3-tab-bar b3-list b3-list--background"),$(e,"class","fn__flex-1 fn__flex config__panel")},m(u,c){N(u,e,c),S(e,i),a&&a.m(i,null),S(i,n);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(i,null);S(e,o),_&&_.m(e,null),r=!0},p(u,[c]){u[3]?a?(a.p(u,c),c&8&&g(a,1)):(a=Wt(u),a.c(),g(a,1),a.m(i,n)):a&&(J(),p(a,1,1,()=>{a=null}),x()),c&69&&(f=u[2],J(),s=Ve(s,c,d,1,u,f,l,i,Xe,Dt,null,Bt),x()),b&&b.p&&(!r||c&129)&&le(b,m,u,u[7],r?se(m,u[7],c,Ti):oe(u[7]),At)},i(u){if(!r){g(a);for(let c=0;c<f.length;c+=1)g(s[c]);g(_,u),r=!0}},o(u){p(a);for(let c=0;c<s.length;c+=1)p(s[c]);p(_,u),r=!1},d(u){u&&E(e),a&&a.d();for(let c=0;c<s.length;c+=1)s[c].d();_&&_.d(u)}}}function Si(t,e,i){let{$$slots:n={},$$scope:s}=e,{panels:l}=e,{focus:o}=e,{searchEnable:r=!1}=e,{searchPlaceholder:a=""}=e,{searchValue:f=""}=e;const d=Ye();function m(){d("search-changed",{value:f})}function b(c){d("changed",{key:c}),i(0,o=c)}function _(){f=this.value,i(1,f)}const u=c=>b(c.key);return t.$$set=c=>{"panels"in c&&i(2,l=c.panels),"focus"in c&&i(0,o=c.focus),"searchEnable"in c&&i(3,r=c.searchEnable),"searchPlaceholder"in c&&i(4,a=c.searchPlaceholder),"searchValue"in c&&i(1,f=c.searchValue),"$$scope"in c&&i(7,s=c.$$scope)},[o,f,l,r,a,m,b,s,n,_,u]}class Oi extends ue{constructor(e){super(),ae(this,e,Si,Ni,re,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function Ki(t){let e,i;const n=t[3].default,s=ie(n,t,t[2],null);return{c(){e=K("div"),s&&s.c(),$(e,"data-name",t[1]),$(e,"class","config__tab-container"),O(e,"fn__none",!t[0])},m(l,o){N(l,e,o),s&&s.m(e,null),i=!0},p(l,[o]){s&&s.p&&(!i||o&4)&&le(s,n,l,l[2],i?se(n,l[2],o,null):oe(l[2]),null),(!i||o&2)&&$(e,"data-name",l[1]),(!i||o&1)&&O(e,"fn__none",!l[0])},i(l){i||(g(s,l),i=!0)},o(l){p(s,l),i=!1},d(l){l&&E(e),s&&s.d(l)}}}function Ai(t,e,i){let{$$slots:n={},$$scope:s}=e,{display:l=!0}=e,{name:o=""}=e;return t.$$set=r=>{"display"in r&&i(0,l=r.display),"name"in r&&i(1,o=r.name),"$$scope"in r&&i(2,s=r.$$scope)},[l,o,s,n]}class xe extends ue{constructor(e){super(),ae(this,e,Ai,Ki,re,{display:0,name:1})}}const Bi=t=>({}),Rt=t=>({}),Wi=t=>({}),Ct=t=>({});function Vt(t){let e,i;const n=t[6].icon,s=ie(n,t,t[5],Ct);return{c(){e=K("span"),s&&s.c(),$(e,"class","item__icon")},m(l,o){N(l,e,o),s&&s.m(e,null),i=!0},p(l,o){s&&s.p&&(!i||o&32)&&le(s,n,l,l[5],i?se(n,l[5],o,Wi):oe(l[5]),Ct)},i(l){i||(g(s,l),i=!0)},o(l){p(s,l),i=!1},d(l){l&&E(e),s&&s.d(l)}}}function Di(t){let e;return{c(){e=_e("text")},m(i,n){N(i,e,n)},d(i){i&&E(e)}}}function Ri(t){let e,i,n,s,l,o,r,a,f,d,m=t[3].icon&&Vt(t);const b=t[6].text,_=ie(b,t,t[5],Rt),u=_||Di();return{c(){e=K("div"),i=K("span"),n=W(),m&&m.c(),s=W(),l=K("span"),u&&u.c(),o=W(),r=K("span"),$(i,"class","fn__flex-1"),$(l,"class","item__text"),$(r,"class","fn__flex-1"),$(e,"data-type",t[0]),$(e,"class","item item--full"),O(e,"item--focus",t[1])},m(c,h){N(c,e,h),S(e,i),S(e,n),m&&m.m(e,null),S(e,s),S(e,l),u&&u.m(l,null),S(e,o),S(e,r),a=!0,f||(d=Y(e,"click",t[2]),f=!0)},p(c,[h]){c[3].icon?m?(m.p(c,h),h&8&&g(m,1)):(m=Vt(c),m.c(),g(m,1),m.m(e,s)):m&&(J(),p(m,1,1,()=>{m=null}),x()),_&&_.p&&(!a||h&32)&&le(_,b,c,c[5],a?se(b,c[5],h,Bi):oe(c[5]),Rt),(!a||h&1)&&$(e,"data-type",c[0]),(!a||h&2)&&O(e,"item--focus",c[1])},i(c){a||(g(m),g(u,c),a=!0)},o(c){p(m),p(u,c),a=!1},d(c){c&&E(e),m&&m.d(),u&&u.d(c),f=!1,d()}}}function Ci(t,e,i){let{$$slots:n={},$$scope:s}=e;const l=oi(n);let{key:o}=e,{name:r=""}=e,{focus:a=!1}=e;const f=Ye();function d(){a||f("changed",{key:o})}return t.$$set=m=>{"key"in m&&i(4,o=m.key),"name"in m&&i(0,r=m.name),"focus"in m&&i(1,a=m.focus),"$$scope"in m&&i(5,s=m.$$scope)},[r,a,d,l,o,s,n]}class Vi extends ue{constructor(e){super(),ae(this,e,Ci,Ri,re,{key:4,name:0,focus:1})}}const Ii=t=>({focus:t&1}),It=t=>({focus:t[0]});function Pt(t,e,i){const n=t.slice();return n[5]=e[i],n}function Pi(t){let e,i=t[5].icon+"",n;return{c(){e=new Ce(!1),n=de(),e.a=n},m(s,l){e.m(i,s,l),N(s,n,l)},p(s,l){l&2&&i!==(i=s[5].icon+"")&&e.p(i)},i:j,o:j,d(s){s&&E(n),s&&e.d()}}}function Fi(t){let e,i;return e=new pe({props:{icon:t[5].icon}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&2&&(l.icon=n[5].icon),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Hi(t){let e,i,n,s,l,o;const r=[Fi,Pi],a=[];function f(d,m){return m&2&&(i=null),i==null&&(i=!!d[5].icon.startsWith("#")),i?0:1}return n=f(t,-1),s=a[n]=r[n](t),{c(){e=K("span"),s.c(),l=W(),$(e,"slot","icon")},m(d,m){N(d,e,m),a[n].m(e,null),S(e,l),o=!0},p(d,m){let b=n;n=f(d,m),n===b?a[n].p(d,m):(J(),p(a[b],1,1,()=>{a[b]=null}),x(),s=a[n],s?s.p(d,m):(s=a[n]=r[n](d),s.c()),g(s,1),s.m(e,l))},i(d){o||(g(s),o=!0)},o(d){p(s),o=!1},d(d){d&&E(e),a[n].d()}}}function ji(t){let e,i,n=t[5].text+"",s;return{c(){e=K("span"),i=new Ce(!1),s=W(),i.a=s,$(e,"slot","text")},m(l,o){N(l,e,o),i.m(n,e),S(e,s)},p(l,o){o&2&&n!==(n=l[5].text+"")&&i.p(n)},d(l){l&&E(e)}}}function Ft(t,e){let i,n,s;return n=new Vi({props:{key:e[5].key,name:e[5].name,focus:e[5].key===e[0],$$slots:{text:[ji],icon:[Hi]},$$scope:{ctx:e}}}),n.$on("changed",e[2]),{key:t,first:null,c(){i=de(),M(n.$$.fragment),this.first=i},m(l,o){N(l,i,o),y(n,l,o),s=!0},p(l,o){e=l;const r={};o&2&&(r.key=e[5].key),o&2&&(r.name=e[5].name),o&3&&(r.focus=e[5].key===e[0]),o&18&&(r.$$scope={dirty:o,ctx:e}),n.$set(r)},i(l){s||(g(n.$$.fragment,l),s=!0)},o(l){p(n.$$.fragment,l),s=!1},d(l){l&&E(i),v(n,l)}}}function Ui(t){let e;return{c(){e=_e("Container")},m(i,n){N(i,e,n)},d(i){i&&E(e)}}}function zi(t){let e,i,n=[],s=new Map,l,o,r,a=t[1];const f=_=>_[5].key;for(let _=0;_<a.length;_+=1){let u=Pt(t,a,_),c=f(u);s.set(c,n[_]=Ft(c,u))}const d=t[3].default,m=ie(d,t,t[4],It),b=m||Ui();return{c(){e=K("div"),i=K("div");for(let _=0;_<n.length;_+=1)n[_].c();l=W(),o=K("div"),b&&b.c(),$(i,"class","layout-tab-bar fn__flex"),$(o,"class","fn__flex-1"),$(e,"class","fn__flex-column"),Be(e,"height","100%")},m(_,u){N(_,e,u),S(e,i);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(i,null);S(e,l),S(e,o),b&&b.m(o,null),r=!0},p(_,[u]){u&7&&(a=_[1],J(),n=Ve(n,u,f,1,_,a,s,i,Xe,Ft,null,Pt),x()),m&&m.p&&(!r||u&17)&&le(m,d,_,_[4],r?se(d,_[4],u,Ii):oe(_[4]),It)},i(_){if(!r){for(let u=0;u<a.length;u+=1)g(n[u]);g(b,_),r=!0}},o(_){for(let u=0;u<n.length;u+=1)p(n[u]);p(b,_),r=!1},d(_){_&&E(e);for(let u=0;u<n.length;u+=1)n[u].d();b&&b.d(_)}}}function qi(t,e,i){let{$$slots:n={},$$scope:s}=e,{tabs:l}=e,{focus:o}=e;function r(a){i(0,o=a.detail.key)}return t.$$set=a=>{"tabs"in a&&i(1,l=a.tabs),"focus"in a&&i(0,o=a.focus),"$$scope"in a&&i(4,s=a.$$scope)},[o,l,r,n,s]}class Sn extends ue{constructor(e){super(),ae(this,e,qi,zi,re,{tabs:1,focus:0})}}const Gi=t=>({}),Ht=t=>({}),Yi=t=>({}),jt=t=>({}),Xi=t=>({}),Ut=t=>({}),Qi=t=>({}),zt=t=>({});function Zi(t){let e,i;return{c(){e=new Ce(!1),i=de(),e.a=i},m(n,s){e.m(t[0],n,s),N(n,i,s)},p(n,s){s&1&&e.p(n[0])},d(n){n&&E(i),n&&e.d()}}}function Ji(t){let e,i;return{c(){e=new Ce(!1),i=de(),e.a=i},m(n,s){e.m(t[1],n,s),N(n,i,s)},p(n,s){s&2&&e.p(n[1])},d(n){n&&E(i),n&&e.d()}}}function qt(t){let e,i,n;const s=t[4].input,l=ie(s,t,t[3],jt);return{c(){e=K("div"),i=W(),l&&l.c(),$(e,"class","fn__hr")},m(o,r){N(o,e,r),N(o,i,r),l&&l.m(o,r),n=!0},p(o,r){l&&l.p&&(!n||r&8)&&le(l,s,o,o[3],n?se(s,o[3],r,Yi):oe(o[3]),jt)},i(o){n||(g(l,o),n=!0)},o(o){p(l,o),n=!1},d(o){o&&E(e),o&&E(i),l&&l.d(o)}}}function Gt(t){let e,i,n;const s=t[4].input,l=ie(s,t,t[3],Ht);return{c(){e=K("span"),i=W(),l&&l.c(),$(e,"class","fn__space")},m(o,r){N(o,e,r),N(o,i,r),l&&l.m(o,r),n=!0},p(o,r){l&&l.p&&(!n||r&8)&&le(l,s,o,o[3],n?se(s,o[3],r,Gi):oe(o[3]),Ht)},i(o){n||(g(l,o),n=!0)},o(o){p(l,o),n=!1},d(o){o&&E(e),o&&E(i),l&&l.d(o)}}}function xi(t){let e,i,n,s,l,o,r;const a=t[4].title,f=ie(a,t,t[3],zt),d=f||Zi(t),m=t[4].text,b=ie(m,t,t[3],Ut),_=b||Ji(t);let u=t[2]&&qt(t),c=!t[2]&&Gt(t);return{c(){e=K("label"),i=K("div"),d&&d.c(),n=W(),s=K("div"),_&&_.c(),l=W(),u&&u.c(),o=W(),c&&c.c(),$(s,"class","b3-label__text"),$(i,"class","fn__flex-1 svelte-2m76cy"),O(i,"visible",t[2]),$(e,"class","fn__flex b3-label")},m(h,T){N(h,e,T),S(e,i),d&&d.m(i,null),S(i,n),S(i,s),_&&_.m(s,null),S(i,l),u&&u.m(i,null),S(e,o),c&&c.m(e,null),r=!0},p(h,[T]){f?f.p&&(!r||T&8)&&le(f,a,h,h[3],r?se(a,h[3],T,Qi):oe(h[3]),zt):d&&d.p&&(!r||T&1)&&d.p(h,r?T:-1),b?b.p&&(!r||T&8)&&le(b,m,h,h[3],r?se(m,h[3],T,Xi):oe(h[3]),Ut):_&&_.p&&(!r||T&2)&&_.p(h,r?T:-1),h[2]?u?(u.p(h,T),T&4&&g(u,1)):(u=qt(h),u.c(),g(u,1),u.m(i,null)):u&&(J(),p(u,1,1,()=>{u=null}),x()),(!r||T&4)&&O(i,"visible",h[2]),h[2]?c&&(J(),p(c,1,1,()=>{c=null}),x()):c?(c.p(h,T),T&4&&g(c,1)):(c=Gt(h),c.c(),g(c,1),c.m(e,null))},i(h){r||(g(d,h),g(_,h),g(u),g(c),r=!0)},o(h){p(d,h),p(_,h),p(u),p(c),r=!1},d(h){h&&E(e),d&&d.d(h),_&&_.d(h),u&&u.d(),c&&c.d()}}}function es(t,e,i){let{$$slots:n={},$$scope:s}=e,{title:l=""}=e,{text:o=""}=e,{block:r=!1}=e;return t.$$set=a=>{"title"in a&&i(0,l=a.title),"text"in a&&i(1,o=a.text),"block"in a&&i(2,r=a.block),"$$scope"in a&&i(3,s=a.$$scope)},[l,o,r,s,n]}class Z extends ue{constructor(e){super(),ae(this,e,es,xi,re,{title:0,text:1,block:2})}}var I=(t=>(t[t.checkbox=0]="checkbox",t[t.text=1]="text",t[t.number=2]="number",t[t.slider=3]="slider",t[t.button=4]="button",t[t.select=5]="select",t[t.textarea=6]="textarea",t))(I||{});function Yt(t,e,i){const n=t.slice();return n[18]=e[i],n}function ts(t){let e,i,n;return{c(){e=K("textarea"),e.disabled=t[2],$(e,"class","b3-text-field"),$(e,"placeholder",t[5]),O(e,"fn__block",t[3]),O(e,"fn__size200",!t[3]&&t[4])},m(s,l){N(s,e,l),ce(e,t[0]),i||(n=[Y(e,"input",t[16]),Y(e,"change",t[9])],i=!0)},p(s,l){l&4&&(e.disabled=s[2]),l&32&&$(e,"placeholder",s[5]),l&65&&ce(e,s[0]),l&8&&O(e,"fn__block",s[3]),l&24&&O(e,"fn__size200",!s[3]&&s[4])},d(s){s&&E(e),i=!1,ee(n)}}}function ns(t){let e,i=[],n=new Map,s,l,o=t[6];const r=a=>a[18].key;for(let a=0;a<o.length;a+=1){let f=Yt(t,o,a),d=r(f);n.set(d,i[a]=Xt(d,f))}return{c(){e=K("select");for(let a=0;a<i.length;a+=1)i[a].c();e.disabled=t[2],$(e,"class","b3-select"),t[0]===void 0&&ye(()=>t[15].call(e)),O(e,"fn__block",t[3]),O(e,"fn__size200",!t[3]&&t[4]),O(e,"fn__flex-center",!t[3])},m(a,f){N(a,e,f);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null);Ot(e,t[0],!0),s||(l=[Y(e,"change",t[15]),Y(e,"change",t[9])],s=!0)},p(a,f){f&64&&(o=a[6],i=Ve(i,f,r,1,a,o,n,e,yi,Xt,null,Yt)),f&4&&(e.disabled=a[2]),f&65&&Ot(e,a[0]),f&8&&O(e,"fn__block",a[3]),f&24&&O(e,"fn__size200",!a[3]&&a[4]),f&8&&O(e,"fn__flex-center",!a[3])},d(a){a&&E(e);for(let f=0;f<i.length;f+=1)i[f].d();s=!1,ee(l)}}}function is(t){let e,i,n,s;return{c(){e=K("button"),i=_e(t[0]),e.disabled=t[2],$(e,"class","b3-button b3-button--outline"),O(e,"fn__block",t[3]),O(e,"fn__size200",!t[3]&&t[4]),O(e,"fn__flex-center",!t[3])},m(l,o){N(l,e,o),S(e,i),n||(s=Y(e,"click",t[8]),n=!0)},p(l,o){o&1&&ve(i,l[0]),o&4&&(e.disabled=l[2]),o&8&&O(e,"fn__block",l[3]),o&24&&O(e,"fn__size200",!l[3]&&l[4]),o&8&&O(e,"fn__flex-center",!l[3])},d(l){l&&E(e),n=!1,s()}}}function ss(t){let e,i,n,s,l,o;return{c(){e=K("input"),e.disabled=t[2],$(e,"class","b3-slider svelte-edt8og"),$(e,"type","range"),$(e,"min",i=t[7].min),$(e,"max",n=t[7].max),$(e,"step",s=t[7].step),O(e,"fn__block",t[3]),O(e,"fn__size200",!t[3]&&t[4])},m(r,a){N(r,e,a),ce(e,t[0]),l||(o=[Y(e,"change",t[14]),Y(e,"input",t[14]),Y(e,"change",t[9])],l=!0)},p(r,a){a&4&&(e.disabled=r[2]),a&128&&i!==(i=r[7].min)&&$(e,"min",i),a&128&&n!==(n=r[7].max)&&$(e,"max",n),a&128&&s!==(s=r[7].step)&&$(e,"step",s),a&65&&ce(e,r[0]),a&8&&O(e,"fn__block",r[3]),a&24&&O(e,"fn__size200",!r[3]&&r[4])},d(r){r&&E(e),l=!1,ee(o)}}}function ls(t){let e,i,n,s,l,o;return{c(){e=K("input"),e.disabled=t[2],$(e,"class","b3-text-field"),$(e,"type","number"),$(e,"placeholder",t[5]),$(e,"min",i=t[7].min),$(e,"max",n=t[7].max),$(e,"step",s=t[7].step),O(e,"fn__block",t[3]),O(e,"fn__size200",!t[3]&&t[4]),O(e,"fn__flex-center",!t[3])},m(r,a){N(r,e,a),ce(e,t[0]),l||(o=[Y(e,"input",t[13]),Y(e,"change",t[9])],l=!0)},p(r,a){a&4&&(e.disabled=r[2]),a&32&&$(e,"placeholder",r[5]),a&128&&i!==(i=r[7].min)&&$(e,"min",i),a&128&&n!==(n=r[7].max)&&$(e,"max",n),a&128&&s!==(s=r[7].step)&&$(e,"step",s),a&65&&nt(e.value)!==r[0]&&ce(e,r[0]),a&8&&O(e,"fn__block",r[3]),a&24&&O(e,"fn__size200",!r[3]&&r[4]),a&8&&O(e,"fn__flex-center",!r[3])},d(r){r&&E(e),l=!1,ee(o)}}}function os(t){let e,i,n;return{c(){e=K("input"),e.disabled=t[2],$(e,"class","b3-text-field"),$(e,"placeholder",t[5]),O(e,"fn__block",t[3]),O(e,"fn__size200",!t[3]&&t[4]),O(e,"fn__flex-center",!t[3])},m(s,l){N(s,e,l),ce(e,t[0]),i||(n=[Y(e,"input",t[12]),Y(e,"change",t[9])],i=!0)},p(s,l){l&4&&(e.disabled=s[2]),l&32&&$(e,"placeholder",s[5]),l&65&&e.value!==s[0]&&ce(e,s[0]),l&8&&O(e,"fn__block",s[3]),l&24&&O(e,"fn__size200",!s[3]&&s[4]),l&8&&O(e,"fn__flex-center",!s[3])},d(s){s&&E(e),i=!1,ee(n)}}}function rs(t){let e,i,n;return{c(){e=K("input"),e.disabled=t[2],$(e,"class","b3-switch svelte-edt8og"),$(e,"type","checkbox"),O(e,"fn__block",t[3]),O(e,"fn__flex-center",!t[3])},m(s,l){N(s,e,l),e.checked=t[0],i||(n=[Y(e,"change",t[11]),Y(e,"change",t[9])],i=!0)},p(s,l){l&4&&(e.disabled=s[2]),l&65&&(e.checked=s[0]),l&8&&O(e,"fn__block",s[3]),l&8&&O(e,"fn__flex-center",!s[3])},d(s){s&&E(e),i=!1,ee(n)}}}function Xt(t,e){let i,n=e[18].text+"",s,l;return{key:t,first:null,c(){i=K("option"),s=_e(n),i.__value=l=e[18].key,i.value=i.__value,this.first=i},m(o,r){N(o,i,r),S(i,s)},p(o,r){e=o,r&64&&n!==(n=e[18].text+"")&&ve(s,n),r&64&&l!==(l=e[18].key)&&(i.__value=l,i.value=i.__value)},d(o){o&&E(i)}}}function as(t){let e;function i(l,o){if(l[1]===I.checkbox)return rs;if(l[1]===I.text)return os;if(l[1]===I.number)return ls;if(l[1]===I.slider)return ss;if(l[1]===I.button)return is;if(l[1]===I.select)return ns;if(l[1]===I.textarea)return ts}let n=i(t),s=n&&n(t);return{c(){s&&s.c(),e=de()},m(l,o){s&&s.m(l,o),N(l,e,o)},p(l,[o]){n===(n=i(l))&&s?s.p(l,o):(s&&s.d(1),s=n&&n(l),s&&(s.c(),s.m(e.parentNode,e)))},i:j,o:j,d(l){s&&s.d(l),l&&E(e)}}}function us(t,e,i){let{type:n}=e,{settingKey:s}=e,{settingValue:l}=e,{disabled:o=!1}=e,{block:r=!1}=e,{normal:a=!0}=e,{placeholder:f=""}=e,{options:d=[]}=e,{limits:m={min:0,max:100,step:1}}=e;const b=Ye();function _(D){b("clicked",{event:D})}function u(D){b("changed",{key:s,value:l,event:D})}function c(){l=this.checked,i(0,l),i(6,d)}function h(){l=this.value,i(0,l),i(6,d)}function T(){l=nt(this.value),i(0,l),i(6,d)}function z(){l=nt(this.value),i(0,l),i(6,d)}function V(){l=fi(this),i(0,l),i(6,d)}function C(){l=this.value,i(0,l),i(6,d)}return t.$$set=D=>{"type"in D&&i(1,n=D.type),"settingKey"in D&&i(10,s=D.settingKey),"settingValue"in D&&i(0,l=D.settingValue),"disabled"in D&&i(2,o=D.disabled),"block"in D&&i(3,r=D.block),"normal"in D&&i(4,a=D.normal),"placeholder"in D&&i(5,f=D.placeholder),"options"in D&&i(6,d=D.options),"limits"in D&&i(7,m=D.limits)},[l,n,o,r,a,f,d,m,_,u,s,c,h,T,z,V,C]}class U extends ue{constructor(e){super(),ae(this,e,us,as,re,{type:1,settingKey:10,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7})}}function fs(t){let e,i,n,s,l;const o=t[2].default,r=ie(o,t,t[1],null);return{c(){e=K("div"),i=new Ce(!1),n=W(),s=K("div"),r&&r.c(),i.a=n,$(s,"class","config-query"),$(e,"class","b3-label")},m(a,f){N(a,e,f),i.m(t[0],e),S(e,n),S(e,s),r&&r.m(s,null),l=!0},p(a,[f]){(!l||f&1)&&i.p(a[0]),r&&r.p&&(!l||f&2)&&le(r,o,a,a[1],l?se(o,a[1],f,null):oe(a[1]),null)},i(a){l||(g(r,a),l=!0)},o(a){p(r,a),l=!1},d(a){a&&E(e),r&&r.d(a)}}}function cs(t,e,i){let{$$slots:n={},$$scope:s}=e,{title:l}=e;return t.$$set=o=>{"title"in o&&i(0,l=o.title),"$$scope"in o&&i(1,s=o.$$scope)},[l,s,n]}class at extends ue{constructor(e){super(),ae(this,e,cs,fs,re,{title:0})}}const _s=t=>({}),Qt=t=>({}),ms=t=>({}),Zt=t=>({}),gs=t=>({}),Jt=t=>({});function ds(t){let e,i,n,s,l,o,r,a,f;const d=t[3].icon,m=ie(d,t,t[2],Jt),b=t[3].title,_=ie(b,t,t[2],Zt),u=t[3].input,c=ie(u,t,t[2],Qt);return{c(){e=K("label"),m&&m.c(),i=W(),n=K("span"),s=W(),l=K("div"),_&&_.c(),o=W(),r=K("span"),a=W(),c&&c.c(),$(n,"class","fn__space"),$(l,"class","fn__flex-1"),$(r,"class","fn__space"),Be(e,"min-width",t[0]),Be(e,"margin-right",t[1]),$(e,"class","fn__flex svelte-1l7osn9")},m(h,T){N(h,e,T),m&&m.m(e,null),S(e,i),S(e,n),S(e,s),S(e,l),_&&_.m(l,null),S(e,o),S(e,r),S(e,a),c&&c.m(e,null),f=!0},p(h,[T]){m&&m.p&&(!f||T&4)&&le(m,d,h,h[2],f?se(d,h[2],T,gs):oe(h[2]),Jt),_&&_.p&&(!f||T&4)&&le(_,b,h,h[2],f?se(b,h[2],T,ms):oe(h[2]),Zt),c&&c.p&&(!f||T&4)&&le(c,u,h,h[2],f?se(u,h[2],T,_s):oe(h[2]),Qt),(!f||T&1)&&Be(e,"min-width",h[0]),(!f||T&2)&&Be(e,"margin-right",h[1])},i(h){f||(g(m,h),g(_,h),g(c,h),f=!0)},o(h){p(m,h),p(_,h),p(c,h),f=!1},d(h){h&&E(e),m&&m.d(h),_&&_.d(h),c&&c.d(h)}}}function ps(t,e,i){let{$$slots:n={},$$scope:s}=e,{minWidth:l="24em"}=e,{marginRight:o="2em"}=e;return t.$$set=r=>{"minWidth"in r&&i(0,l=r.minWidth),"marginRight"in r&&i(1,o=r.marginRight),"$$scope"in r&&i(2,s=r.$$scope)},[l,o,s,n]}class $e extends ue{constructor(e){super(),ae(this,e,ps,ds,re,{minWidth:0,marginRight:1})}}var me=(t=>(t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t))(me||{}),Q=(t=>(t.click="click",t.dblclick="dblclick",t.mousedown="mousedown",t.mouseup="mouseup",t.mouseenter="mouseenter",t.mouseleave="mouseleave",t.mousewheel="mousewheel",t.mouseover="mouseover",t.mousemove="mousemove",t.mouseout="mouseout",t))(Q||{});function xt(t){let e,i;return e=new $e({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[ws],title:[bs],default:[hs]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&4&&(l.minWidth=n[2]),s&8&&(l.marginRight=n[3]),s&4195329&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function hs(t){let e,i;return e=new pe({props:{icon:"#iconKeymap",className:"svg"}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p:j,i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function bs(t){let e;return{c(){e=K("kbd"),e.textContent="Ctrl",$(e,"slot","title")},m(i,n){N(i,e,n)},p:j,d(i){i&&E(e)}}}function ws(t){let e,i;return e=new U({props:{slot:"input",normal:!1,disabled:t[10],type:I.checkbox,settingKey:"ctrlKey",settingValue:t[0].ctrlKey}}),e.$on("changed",t[20]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&1024&&(l.disabled=n[10]),s&1&&(l.settingValue=n[0].ctrlKey),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function en(t){let e,i;return e=new $e({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[ys],title:[ks],default:[$s]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&4&&(l.minWidth=n[2]),s&8&&(l.marginRight=n[3]),s&4196353&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function $s(t){let e,i;return e=new pe({props:{icon:"#iconKeymap",className:"svg"}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p:j,i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function ks(t){let e;return{c(){e=K("kbd"),e.textContent="Shift",$(e,"slot","title")},m(i,n){N(i,e,n)},p:j,d(i){i&&E(e)}}}function ys(t){let e,i;return e=new U({props:{slot:"input",normal:!1,disabled:t[11],type:I.checkbox,settingKey:"shiftKey",settingValue:t[0].shiftKey}}),e.$on("changed",t[20]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&2048&&(l.disabled=n[11]),s&1&&(l.settingValue=n[0].shiftKey),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function tn(t){let e,i;return e=new $e({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[Es],title:[Ms],default:[vs]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&4&&(l.minWidth=n[2]),s&8&&(l.marginRight=n[3]),s&4198401&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function vs(t){let e,i;return e=new pe({props:{icon:"#iconKeymap",className:"svg"}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p:j,i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Ms(t){let e;return{c(){e=K("kbd"),e.textContent="Alt",$(e,"slot","title")},m(i,n){N(i,e,n)},p:j,d(i){i&&E(e)}}}function Es(t){let e,i;return e=new U({props:{slot:"input",normal:!1,disabled:t[12],type:I.checkbox,settingKey:"altKey",settingValue:t[0].altKey}}),e.$on("changed",t[20]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&4096&&(l.disabled=n[12]),s&1&&(l.settingValue=n[0].altKey),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function nn(t){let e,i;return e=new $e({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[Ns],title:[Ls],default:[Ts]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&4&&(l.minWidth=n[2]),s&8&&(l.marginRight=n[3]),s&4202497&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Ts(t){let e,i;return e=new pe({props:{icon:"#iconKeymap",className:"svg"}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p:j,i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Ls(t){let e;return{c(){e=K("kbd"),e.textContent="Meta",$(e,"slot","title")},m(i,n){N(i,e,n)},p:j,d(i){i&&E(e)}}}function Ns(t){let e,i;return e=new U({props:{slot:"input",normal:!1,disabled:t[13],type:I.checkbox,settingKey:"metaKey",settingValue:t[0].metaKey}}),e.$on("changed",t[20]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&8192&&(l.disabled=n[13]),s&1&&(l.settingValue=n[0].metaKey),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function sn(t){let e,i;return e=new $e({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[Ks],title:[Os],default:[Ss]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&4&&(l.minWidth=n[2]),s&8&&(l.marginRight=n[3]),s&4538369&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Ss(t){let e,i;return e=new pe({props:{icon:"#iconSelectText",className:"svg"}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p:j,i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Os(t){let e,i;return{c(){e=K("span"),i=_e(t[16]),$(e,"slot","title")},m(n,s){N(n,e,s),S(e,i)},p(n,s){s&65536&&ve(i,n[16])},d(n){n&&E(e)}}}function Ks(t){let e,i;return e=new U({props:{slot:"input",normal:!1,disabled:t[14],type:I.select,settingKey:"button",settingValue:t[0].button,options:t[18]}}),e.$on("changed",t[20]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&16384&&(l.disabled=n[14]),s&1&&(l.settingValue=n[0].button),s&262144&&(l.options=n[18]),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function ln(t){let e,i;return e=new $e({props:{minWidth:t[2],marginRight:t[3],$$slots:{input:[Ws],title:[Bs],default:[As]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&4&&(l.minWidth=n[2]),s&8&&(l.marginRight=n[3]),s&4882433&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function As(t){let e,i;return e=new pe({props:{icon:"#iconSelectText",className:"svg"}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p:j,i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Bs(t){let e,i;return{c(){e=K("span"),i=_e(t[17]),$(e,"slot","title")},m(n,s){N(n,e,s),S(e,i)},p(n,s){s&131072&&ve(i,n[17])},d(n){n&&E(e)}}}function Ws(t){let e,i;return e=new U({props:{slot:"input",normal:!1,disabled:t[15],type:I.select,settingKey:"type",settingValue:t[0].type,options:t[19]}}),e.$on("changed",t[20]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s&32768&&(l.disabled=n[15]),s&1&&(l.settingValue=n[0].type),s&524288&&(l.options=n[19]),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Ds(t){let e,i,n,s,l,o,r,a=t[4]&&xt(t),f=t[5]&&en(t),d=t[6]&&tn(t),m=t[7]&&nn(t),b=t[8]&&sn(t),_=t[9]&&ln(t);return{c(){a&&a.c(),e=W(),f&&f.c(),i=W(),d&&d.c(),n=W(),m&&m.c(),s=W(),b&&b.c(),l=W(),_&&_.c(),o=de()},m(u,c){a&&a.m(u,c),N(u,e,c),f&&f.m(u,c),N(u,i,c),d&&d.m(u,c),N(u,n,c),m&&m.m(u,c),N(u,s,c),b&&b.m(u,c),N(u,l,c),_&&_.m(u,c),N(u,o,c),r=!0},p(u,c){u[4]?a?(a.p(u,c),c&16&&g(a,1)):(a=xt(u),a.c(),g(a,1),a.m(e.parentNode,e)):a&&(J(),p(a,1,1,()=>{a=null}),x()),u[5]?f?(f.p(u,c),c&32&&g(f,1)):(f=en(u),f.c(),g(f,1),f.m(i.parentNode,i)):f&&(J(),p(f,1,1,()=>{f=null}),x()),u[6]?d?(d.p(u,c),c&64&&g(d,1)):(d=tn(u),d.c(),g(d,1),d.m(n.parentNode,n)):d&&(J(),p(d,1,1,()=>{d=null}),x()),u[7]?m?(m.p(u,c),c&128&&g(m,1)):(m=nn(u),m.c(),g(m,1),m.m(s.parentNode,s)):m&&(J(),p(m,1,1,()=>{m=null}),x()),u[8]?b?(b.p(u,c),c&256&&g(b,1)):(b=sn(u),b.c(),g(b,1),b.m(l.parentNode,l)):b&&(J(),p(b,1,1,()=>{b=null}),x()),u[9]?_?(_.p(u,c),c&512&&g(_,1)):(_=ln(u),_.c(),g(_,1),_.m(o.parentNode,o)):_&&(J(),p(_,1,1,()=>{_=null}),x())},i(u){r||(g(a),g(f),g(d),g(m),g(b),g(_),r=!0)},o(u){p(a),p(f),p(d),p(m),p(b),p(_),r=!1},d(u){a&&a.d(u),u&&E(e),f&&f.d(u),u&&E(i),d&&d.d(u),u&&E(n),m&&m.d(u),u&&E(s),b&&b.d(u),u&&E(l),_&&_.d(u),u&&E(o)}}}function Rs(t){let e,i;return e=new at({props:{title:t[1],$$slots:{default:[Ds]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,[s]){const l={};s&2&&(l.title=n[1]),s&5242877&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Cs(t,e,i){let{title:n}=e,{shortcut:s}=e,{minWidth:l=void 0}=e,{marginRight:o=void 0}=e,{displayCtrlKey:r=!0}=e,{displayShiftKey:a=!0}=e,{displayAltKey:f=!0}=e,{displayMetaKey:d=!0}=e,{displayMouseButton:m=!0}=e,{displayMouseEvent:b=!0}=e,{disabledCtrlKey:_=!1}=e,{disabledShiftKey:u=!1}=e,{disabledAltKey:c=!1}=e,{disabledMetaKey:h=!1}=e,{disabledMouseButton:T=!1}=e,{disabledMouseEvent:z=!1}=e,{mouseButtonTitle:V="Mouse Button"}=e,{mouseEventTitle:C="Mouse Event"}=e,{mouseButtonOptions:D=[{key:me.Left,text:"Left"},{key:me.Middle,text:"Middle"},{key:me.Right,text:"Right"},{key:me.Back,text:"Back"},{key:me.Forward,text:"Forward"}]}=e,{mouseEventOptions:F=[{key:Q.click,text:Q.click},{key:Q.dblclick,text:Q.dblclick},{key:Q.mousedown,text:Q.mousedown},{key:Q.mouseup,text:Q.mouseup},{key:Q.mouseenter,text:Q.mouseenter},{key:Q.mouseleave,text:Q.mouseleave},{key:Q.mousewheel,text:Q.mousewheel},{key:Q.mouseover,text:Q.mouseover},{key:Q.mousemove,text:Q.mousemove},{key:Q.mouseout,text:Q.mouseout}]}=e;const R=Ye();function q(L){s.hasOwnProperty(L.detail.key)&&i(0,s[L.detail.key]=L.detail.value,s),R("changed",{shortcut:s})}return t.$$set=L=>{"title"in L&&i(1,n=L.title),"shortcut"in L&&i(0,s=L.shortcut),"minWidth"in L&&i(2,l=L.minWidth),"marginRight"in L&&i(3,o=L.marginRight),"displayCtrlKey"in L&&i(4,r=L.displayCtrlKey),"displayShiftKey"in L&&i(5,a=L.displayShiftKey),"displayAltKey"in L&&i(6,f=L.displayAltKey),"displayMetaKey"in L&&i(7,d=L.displayMetaKey),"displayMouseButton"in L&&i(8,m=L.displayMouseButton),"displayMouseEvent"in L&&i(9,b=L.displayMouseEvent),"disabledCtrlKey"in L&&i(10,_=L.disabledCtrlKey),"disabledShiftKey"in L&&i(11,u=L.disabledShiftKey),"disabledAltKey"in L&&i(12,c=L.disabledAltKey),"disabledMetaKey"in L&&i(13,h=L.disabledMetaKey),"disabledMouseButton"in L&&i(14,T=L.disabledMouseButton),"disabledMouseEvent"in L&&i(15,z=L.disabledMouseEvent),"mouseButtonTitle"in L&&i(16,V=L.mouseButtonTitle),"mouseEventTitle"in L&&i(17,C=L.mouseEventTitle),"mouseButtonOptions"in L&&i(18,D=L.mouseButtonOptions),"mouseEventOptions"in L&&i(19,F=L.mouseEventOptions)},[s,n,l,o,r,a,f,d,m,b,_,u,c,h,T,z,V,C,D,F,q]}class On extends ue{constructor(e){super(),ae(this,e,Cs,Rs,re,{title:1,shortcut:0,minWidth:2,marginRight:3,displayCtrlKey:4,displayShiftKey:5,displayAltKey:6,displayMetaKey:7,displayMouseButton:8,displayMouseEvent:9,disabledCtrlKey:10,disabledShiftKey:11,disabledAltKey:12,disabledMetaKey:13,disabledMouseButton:14,disabledMouseEvent:15,mouseButtonTitle:16,mouseEventTitle:17,mouseButtonOptions:18,mouseEventOptions:19})}}function Vs(t,e=!0){const i=[{role:"about"},...t?[{type:"separator"},{role:"help"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"}]:[],{type:"separator"},{role:"quit"}],n=[...t?[{role:"recentDocuments"},{role:"clearRecentDocuments"},{type:"separator"}]:[],{role:"close"}],s=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteAndMatchStyle"},{role:"delete"},{type:"separator"},{role:"selectAll"},{type:"separator"},{role:"toggleSpellChecker"},...t?[{type:"separator"},{role:"showSubstitutions"},{role:"toggleTextReplacement"},{type:"separator"},{role:"toggleSmartQuotes"},{role:"toggleSmartDashes"},{type:"separator"},{role:"startSpeaking"},{role:"stopSpeaking"}]:[]],l=[{role:"reload"},{role:"forceReload"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn",accelerator:"CmdOrCtrl+="},{role:"zoomOut"},...t?[{role:"zoom"},{type:"separator"},{role:"front"}]:[{type:"separator"},{label:"Toggle On Top",click:(a,f,d)=>{f&&f.setAlwaysOnTop(!f.isAlwaysOnTop())},type:"checkbox",checked:e,accelerator:"CmdOrCtrl+Shift+Space"}],{role:"togglefullscreen"},{type:"separator"},{role:"toggleDevTools"}],o=[...t?[{role:"window"},{type:"separator"},{role:"toggleTabBar"},{role:"selectNextTab"},{role:"selectPreviousTab"},{role:"mergeAllWindows"},{role:"moveTabToNewWindow"},{type:"separator"}]:[],{role:"minimize"},{role:"close"}],r=[{role:"appMenu",submenu:i},{role:"fileMenu",submenu:n},{role:"editMenu",submenu:s},{role:"viewMenu",submenu:l},{role:"windowMenu",submenu:o}];return t&&r.push({role:"shareMenu"}),r}var ne=(t=>(t[t.AlwaysShow=0]="AlwaysShow",t[t.AutoHide=1]="AutoHide",t[t.Disabled=2]="Disabled",t))(ne||{});function Is(t,e,i,n,s){i.webPreferences=He(i.webPreferences||{},n);const l=He(e,i);if(mn())try{const{BrowserWindow:o,Menu:r}=globalThis.require("@electron/remote"),a=new o(l);if(l.enableMenuBar){const f=r.buildFromTemplate(Vs(globalThis.process.platform==="darwin",l.alwaysOnTop));a.setMenu(f)}else a.removeMenu();return l.enableElectron&&globalThis.require("@electron/remote").require("@electron/remote/main").enable(a.webContents),a.loadURL(t.href,{userAgent:s.useragent}),a}catch(o){s.logger.warn(o)}return globalThis.open(t.href,t.href,["popup = true",`width = ${l.width}`,`height = ${l.height}`,`left = ${l.x}`,`top = ${l.y}`].join(","))}function on(t,e,i){const n=t.slice();return n[29]=e[i][0],n[30]=e[i][1],n[31]=e,n[32]=i,n}function rn(t,e,i){const n=t.slice();return n[29]=e[i][0],n[30]=e[i][1],n[33]=e,n[34]=i,n}function Ps(t){let e,i;return e=new U({props:{slot:"input",type:I.text,block:!0,placeholder:globalThis.navigator.userAgent,settingKey:"Text",settingValue:t[0].general.useragent}}),e.$on("changed",t[7]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].general.useragent),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Fs(t){let e,i;return e=new U({props:{slot:"input",type:I.button,settingKey:"Reset",settingValue:t[2].settings.generalSettings.reset.text}}),e.$on("clicked",t[4]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p:j,i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Hs(t){let e,i,n,s;return e=new Z({props:{title:t[2].settings.generalSettings.useragent.title,text:t[2].settings.generalSettings.useragent.description,block:!0,$$slots:{input:[Ps]},$$scope:{ctx:t}}}),n=new Z({props:{title:t[2].settings.generalSettings.reset.title,text:t[2].settings.generalSettings.reset.description,$$slots:{input:[Fs]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment),i=W(),M(n.$$.fragment)},m(l,o){y(e,l,o),N(l,i,o),y(n,l,o),s=!0},p(l,o){const r={};o[0]&1|o[1]&16&&(r.$$scope={dirty:o,ctx:l}),e.$set(r);const a={};o[1]&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){s||(g(e.$$.fragment,l),g(n.$$.fragment,l),s=!0)},o(l){p(e.$$.fragment,l),p(n.$$.fragment,l),s=!1},d(l){v(e,l),l&&E(i),v(n,l)}}}function js(t){let e,i;return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.enable}}),e.$on("changed",t[8]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].tab.enable),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Us(t){let e,i;return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.open.targets.hyperlink.editor}}),e.$on("changed",t[9]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].tab.open.targets.hyperlink.editor),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function zs(t){let e,i;return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:t[0].tab.open.targets.hyperlink.other}}),e.$on("changed",t[10]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].tab.open.targets.hyperlink.other),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function qs(t){let e,i=t[30].prefix+"",n;return{c(){e=K("code"),n=_e(i),$(e,"slot","title"),$(e,"class","fn__code")},m(s,l){N(s,e,l),S(e,n)},p(s,l){l[0]&1&&i!==(i=s[30].prefix+"")&&ve(n,i)},d(s){s&&E(e)}}}function Gs(t){let e,i;function n(...s){return t[11](t[30],t[33],t[34],...s)}return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:t[30].enable}}),e.$on("changed",n),{c(){M(e.$$.fragment)},m(s,l){y(e,s,l),i=!0},p(s,l){t=s;const o={};l[0]&1&&(o.settingValue=t[30].enable),e.$set(o)},i(s){i||(g(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){v(e,s)}}}function an(t,e){let i,n,s;return n=new $e({props:{minWidth:"8em",$$slots:{input:[Gs],title:[qs]},$$scope:{ctx:e}}}),{key:t,first:null,c(){i=de(),M(n.$$.fragment),this.first=i},m(l,o){N(l,i,o),y(n,l,o),s=!0},p(l,o){e=l;const r={};o[0]&1|o[1]&16&&(r.$$scope={dirty:o,ctx:e}),n.$set(r)},i(l){s||(g(n.$$.fragment,l),s=!0)},o(l){p(n.$$.fragment,l),s=!1},d(l){l&&E(i),v(n,l)}}}function Ys(t){let e=[],i=new Map,n,s,l=Object.entries(t[0].tab.open.protocols);const o=r=>r[29];for(let r=0;r<l.length;r+=1){let a=rn(t,l,r),f=o(a);i.set(f,e[r]=an(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();n=de()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,n,a),s=!0},p(r,a){a[0]&9&&(l=Object.entries(r[0].tab.open.protocols),J(),e=Ve(e,a,o,1,r,l,i,n.parentNode,Xe,an,n,rn),x())},i(r){if(!s){for(let a=0;a<l.length;a+=1)g(e[a]);s=!0}},o(r){for(let a=0;a<e.length;a+=1)p(e[a]);s=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&E(n)}}}function Xs(t){let e,i,n,s,l,o,r,a,f,d,m,b,_;return i=new Z({props:{title:t[2].settings.open.enable.tab.title,text:t[2].settings.open.enable.tab.description,$$slots:{input:[js]},$$scope:{ctx:t}}}),s=new Z({props:{title:t[2].settings.open.editorHyperlink.title,text:t[2].settings.open.editorHyperlink.description,$$slots:{input:[Us]},$$scope:{ctx:t}}}),o=new Z({props:{title:t[2].settings.open.otherHyperlink.title,text:t[2].settings.open.otherHyperlink.description,$$slots:{input:[zs]},$$scope:{ctx:t}}}),f=new at({props:{title:t[2].settings.protocols.title,$$slots:{default:[Ys]},$$scope:{ctx:t}}}),b=new On({props:{minWidth:"16em",title:t[2].settings.open.shortcut.title,shortcut:t[0].tab.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:t[2].settings.mouse.button,mouseButtonOptions:[{key:me.Left,text:t[2].settings.mouse.left}]}}),b.$on("changed",t[3]),{c(){e=K("div"),M(i.$$.fragment),n=W(),M(s.$$.fragment),l=W(),M(o.$$.fragment),r=W(),a=K("div"),M(f.$$.fragment),d=W(),m=K("div"),M(b.$$.fragment),$(e,"data-type",t[6].tab[0].name),O(e,"fn__none",t[6].tab[0].key!==t[28]),$(a,"data-type",t[6].tab[1].name),O(a,"fn__none",t[6].tab[1].key!==t[28]),$(m,"data-type",t[6].tab[2].name),O(m,"fn__none",t[6].tab[2].key!==t[28])},m(u,c){N(u,e,c),y(i,e,null),S(e,n),y(s,e,null),S(e,l),y(o,e,null),N(u,r,c),N(u,a,c),y(f,a,null),N(u,d,c),N(u,m,c),y(b,m,null),_=!0},p(u,c){const h={};c[0]&1|c[1]&16&&(h.$$scope={dirty:c,ctx:u}),i.$set(h);const T={};c[0]&1|c[1]&16&&(T.$$scope={dirty:c,ctx:u}),s.$set(T);const z={};c[0]&1|c[1]&16&&(z.$$scope={dirty:c,ctx:u}),o.$set(z),(!_||c[0]&268435520)&&O(e,"fn__none",u[6].tab[0].key!==u[28]);const V={};c[0]&1|c[1]&16&&(V.$$scope={dirty:c,ctx:u}),f.$set(V),(!_||c[0]&268435520)&&O(a,"fn__none",u[6].tab[1].key!==u[28]);const C={};c[0]&1&&(C.shortcut=u[0].tab.open.mouse),b.$set(C),(!_||c[0]&268435520)&&O(m,"fn__none",u[6].tab[2].key!==u[28])},i(u){_||(g(i.$$.fragment,u),g(s.$$.fragment,u),g(o.$$.fragment,u),g(f.$$.fragment,u),g(b.$$.fragment,u),_=!0)},o(u){p(i.$$.fragment,u),p(s.$$.fragment,u),p(o.$$.fragment,u),p(f.$$.fragment,u),p(b.$$.fragment,u),_=!1},d(u){u&&E(e),v(i),v(s),v(o),u&&E(r),u&&E(a),v(f),u&&E(d),u&&E(m),v(b)}}}function Qs(t){let e,i;return e=new Sn({props:{focus:hl,tabs:t[6].tab,$$slots:{default:[Xs,({focus:n})=>({28:n}),({focus:n})=>[n?268435456:0]]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&268435457|s[1]&16&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Zs(t){let e,i;return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"enable",settingValue:t[0].window.enable}}),e.$on("changed",t[12]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.enable),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function Js(t){let e,i;return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"editorHyperlink",settingValue:t[0].window.open.targets.hyperlink.editor}}),e.$on("changed",t[13]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.open.targets.hyperlink.editor),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function xs(t){let e,i;return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"otherHyperlink",settingValue:t[0].window.open.targets.hyperlink.other}}),e.$on("changed",t[14]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.open.targets.hyperlink.other),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function el(t){let e,i;return e=new U({props:{slot:"input",type:I.number,settingKey:"width",settingValue:t[0].window.params.width,limits:{min:320,max:15360,step:40}}}),e.$on("changed",t[15]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.params.width),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function tl(t){let e,i;return e=new U({props:{slot:"input",type:I.number,settingKey:"height",settingValue:t[0].window.params.height,limits:{min:240,max:8640,step:40}}}),e.$on("changed",t[16]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.params.height),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function nl(t){let e,i;return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"top",settingValue:t[0].window.params.alwaysOnTop}}),e.$on("changed",t[17]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.params.alwaysOnTop),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function il(t){let e,i;return e=new U({props:{slot:"input",type:I.select,settingKey:"menuBar",settingValue:t[0].window.params.enableMenuBar?t[0].window.params.autoHideMenuBar?ne.AutoHide:ne.AlwaysShow:ne.Disabled,options:[{key:ne.AutoHide,text:t[2].settings.window.menuBar.options.autoHide},{key:ne.AlwaysShow,text:t[2].settings.window.menuBar.options.alwaysShow},{key:ne.Disabled,text:t[2].settings.window.menuBar.options.disabled}]}}),e.$on("changed",t[18]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.params.enableMenuBar?n[0].window.params.autoHideMenuBar?ne.AutoHide:ne.AlwaysShow:ne.Disabled),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function sl(t){let e,i=t[30].prefix+"",n;return{c(){e=K("code"),n=_e(i),$(e,"slot","title"),$(e,"class","fn__code")},m(s,l){N(s,e,l),S(e,n)},p(s,l){l[0]&1&&i!==(i=s[30].prefix+"")&&ve(n,i)},d(s){s&&E(e)}}}function ll(t){let e,i;function n(...s){return t[19](t[30],t[31],t[32],...s)}return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"Checkbox",settingValue:t[30].enable}}),e.$on("changed",n),{c(){M(e.$$.fragment)},m(s,l){y(e,s,l),i=!0},p(s,l){t=s;const o={};l[0]&1&&(o.settingValue=t[30].enable),e.$set(o)},i(s){i||(g(e.$$.fragment,s),i=!0)},o(s){p(e.$$.fragment,s),i=!1},d(s){v(e,s)}}}function un(t,e){let i,n,s;return n=new $e({props:{minWidth:"8em",$$slots:{input:[ll],title:[sl]},$$scope:{ctx:e}}}),{key:t,first:null,c(){i=de(),M(n.$$.fragment),this.first=i},m(l,o){N(l,i,o),y(n,l,o),s=!0},p(l,o){e=l;const r={};o[0]&1|o[1]&16&&(r.$$scope={dirty:o,ctx:e}),n.$set(r)},i(l){s||(g(n.$$.fragment,l),s=!0)},o(l){p(n.$$.fragment,l),s=!1},d(l){l&&E(i),v(n,l)}}}function ol(t){let e=[],i=new Map,n,s,l=Object.entries(t[0].window.open.protocols);const o=r=>r[29];for(let r=0;r<l.length;r+=1){let a=on(t,l,r),f=o(a);i.set(f,e[r]=un(f,a))}return{c(){for(let r=0;r<e.length;r+=1)e[r].c();n=de()},m(r,a){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(r,a);N(r,n,a),s=!0},p(r,a){a[0]&9&&(l=Object.entries(r[0].window.open.protocols),J(),e=Ve(e,a,o,1,r,l,i,n.parentNode,Xe,un,n,on),x())},i(r){if(!s){for(let a=0;a<l.length;a+=1)g(e[a]);s=!0}},o(r){for(let a=0;a<e.length;a+=1)p(e[a]);s=!1},d(r){for(let a=0;a<e.length;a+=1)e[a].d(r);r&&E(n)}}}function rl(t){let e,i;return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"enable",settingValue:t[0].window.siyuan.enable}}),e.$on("changed",t[20]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.siyuan.enable),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function al(t){let e,i;return e=new U({props:{slot:"input",type:I.button,settingKey:"open-desktop-window",settingValue:t[2].settings.siyuan.open.desktop.text}}),e.$on("clicked",t[21]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p:j,i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function ul(t){let e,i;return e=new U({props:{slot:"input",type:I.button,settingKey:"open-mobile-window",settingValue:t[2].settings.siyuan.open.mobile.text}}),e.$on("clicked",t[22]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p:j,i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function fl(t){let e,i;return e=new U({props:{slot:"input",type:I.checkbox,settingKey:"focus",settingValue:t[0].window.siyuan.focus}}),e.$on("changed",t[23]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.siyuan.focus),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function cl(t){let e,i;return e=new U({props:{slot:"input",type:I.select,settingKey:"menuBar",settingValue:t[0].window.siyuan.editorType,options:[{key:ge.mobile,text:t[2].settings.siyuan.editorType.options.mobile},{key:ge.desktop,text:t[2].settings.siyuan.editorType.options.desktop}]}}),e.$on("changed",t[24]),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&1&&(l.settingValue=n[0].window.siyuan.editorType),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function _l(t){let e,i,n,s,l,o,r,a,f,d,m,b,_,u,c,h,T,z,V,C,D,F,R,q,L,P,A,H,te,w,X,G;return i=new Z({props:{title:t[2].settings.open.enable.window.title,text:t[2].settings.open.enable.window.description,$$slots:{input:[Zs]},$$scope:{ctx:t}}}),s=new Z({props:{title:t[2].settings.open.editorHyperlink.title,text:t[2].settings.open.editorHyperlink.description,$$slots:{input:[Js]},$$scope:{ctx:t}}}),o=new Z({props:{title:t[2].settings.open.otherHyperlink.title,text:t[2].settings.open.otherHyperlink.description,$$slots:{input:[xs]},$$scope:{ctx:t}}}),a=new Z({props:{title:t[2].settings.window.width.title,text:t[2].settings.window.width.description,$$slots:{input:[el]},$$scope:{ctx:t}}}),d=new Z({props:{title:t[2].settings.window.height.title,text:t[2].settings.window.height.description,$$slots:{input:[tl]},$$scope:{ctx:t}}}),b=new Z({props:{title:t[2].settings.window.top.title,text:t[2].settings.window.top.description,$$slots:{input:[nl]},$$scope:{ctx:t}}}),u=new Z({props:{title:t[2].settings.window.menuBar.title,text:t[2].settings.window.menuBar.description,$$slots:{input:[il]},$$scope:{ctx:t}}}),T=new at({props:{title:t[2].settings.protocols.title,$$slots:{default:[ol]},$$scope:{ctx:t}}}),C=new On({props:{minWidth:"16em",title:t[2].settings.open.shortcut.title,shortcut:t[0].window.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:t[2].settings.mouse.button,mouseButtonOptions:[{key:me.Middle,text:t[2].settings.mouse.middle}]}}),C.$on("changed",t[3]),R=new Z({props:{title:t[2].settings.siyuan.enable.title,text:t[2].settings.siyuan.enable.description,$$slots:{input:[rl]},$$scope:{ctx:t}}}),L=new Z({props:{title:t[2].settings.siyuan.open.desktop.title,text:t[2].settings.siyuan.open.desktop.description,$$slots:{input:[al]},$$scope:{ctx:t}}}),A=new Z({props:{title:t[2].settings.siyuan.open.mobile.title,text:t[2].settings.siyuan.open.mobile.description,$$slots:{input:[ul]},$$scope:{ctx:t}}}),te=new Z({props:{title:t[2].settings.siyuan.focus.title,text:t[2].settings.siyuan.focus.description,$$slots:{input:[fl]},$$scope:{ctx:t}}}),X=new Z({props:{title:t[2].settings.siyuan.editorType.title,text:t[2].settings.siyuan.editorType.description,$$slots:{input:[cl]},$$scope:{ctx:t}}}),{c(){e=K("div"),M(i.$$.fragment),n=W(),M(s.$$.fragment),l=W(),M(o.$$.fragment),r=W(),M(a.$$.fragment),f=W(),M(d.$$.fragment),m=W(),M(b.$$.fragment),_=W(),M(u.$$.fragment),c=W(),h=K("div"),M(T.$$.fragment),z=W(),V=K("div"),M(C.$$.fragment),D=W(),F=K("div"),M(R.$$.fragment),q=W(),M(L.$$.fragment),P=W(),M(A.$$.fragment),H=W(),M(te.$$.fragment),w=W(),M(X.$$.fragment),$(e,"data-type",t[6].window[0].name),O(e,"fn__none",t[6].window[0].key!==t[28]),$(h,"data-type",t[6].window[1].name),O(h,"fn__none",t[6].window[1].key!==t[28]),$(V,"data-type",t[6].window[2].name),O(V,"fn__none",t[6].window[2].key!==t[28]),$(F,"data-type",t[6].window[3].name),O(F,"fn__none",t[6].window[3].key!==t[28])},m(k,B){N(k,e,B),y(i,e,null),S(e,n),y(s,e,null),S(e,l),y(o,e,null),S(e,r),y(a,e,null),S(e,f),y(d,e,null),S(e,m),y(b,e,null),S(e,_),y(u,e,null),N(k,c,B),N(k,h,B),y(T,h,null),N(k,z,B),N(k,V,B),y(C,V,null),N(k,D,B),N(k,F,B),y(R,F,null),S(F,q),y(L,F,null),S(F,P),y(A,F,null),S(F,H),y(te,F,null),S(F,w),y(X,F,null),G=!0},p(k,B){const Oe={};B[0]&1|B[1]&16&&(Oe.$$scope={dirty:B,ctx:k}),i.$set(Oe);const ut={};B[0]&1|B[1]&16&&(ut.$$scope={dirty:B,ctx:k}),s.$set(ut);const ft={};B[0]&1|B[1]&16&&(ft.$$scope={dirty:B,ctx:k}),o.$set(ft);const ct={};B[0]&1|B[1]&16&&(ct.$$scope={dirty:B,ctx:k}),a.$set(ct);const _t={};B[0]&1|B[1]&16&&(_t.$$scope={dirty:B,ctx:k}),d.$set(_t);const mt={};B[0]&1|B[1]&16&&(mt.$$scope={dirty:B,ctx:k}),b.$set(mt);const gt={};B[0]&1|B[1]&16&&(gt.$$scope={dirty:B,ctx:k}),u.$set(gt),(!G||B[0]&268435520)&&O(e,"fn__none",k[6].window[0].key!==k[28]);const dt={};B[0]&1|B[1]&16&&(dt.$$scope={dirty:B,ctx:k}),T.$set(dt),(!G||B[0]&268435520)&&O(h,"fn__none",k[6].window[1].key!==k[28]);const pt={};B[0]&1&&(pt.shortcut=k[0].window.open.mouse),C.$set(pt),(!G||B[0]&268435520)&&O(V,"fn__none",k[6].window[2].key!==k[28]);const ht={};B[0]&1|B[1]&16&&(ht.$$scope={dirty:B,ctx:k}),R.$set(ht);const bt={};B[0]&2|B[1]&16&&(bt.$$scope={dirty:B,ctx:k}),L.$set(bt);const wt={};B[0]&2|B[1]&16&&(wt.$$scope={dirty:B,ctx:k}),A.$set(wt);const $t={};B[0]&1|B[1]&16&&($t.$$scope={dirty:B,ctx:k}),te.$set($t);const kt={};B[0]&1|B[1]&16&&(kt.$$scope={dirty:B,ctx:k}),X.$set(kt),(!G||B[0]&268435520)&&O(F,"fn__none",k[6].window[3].key!==k[28])},i(k){G||(g(i.$$.fragment,k),g(s.$$.fragment,k),g(o.$$.fragment,k),g(a.$$.fragment,k),g(d.$$.fragment,k),g(b.$$.fragment,k),g(u.$$.fragment,k),g(T.$$.fragment,k),g(C.$$.fragment,k),g(R.$$.fragment,k),g(L.$$.fragment,k),g(A.$$.fragment,k),g(te.$$.fragment,k),g(X.$$.fragment,k),G=!0)},o(k){p(i.$$.fragment,k),p(s.$$.fragment,k),p(o.$$.fragment,k),p(a.$$.fragment,k),p(d.$$.fragment,k),p(b.$$.fragment,k),p(u.$$.fragment,k),p(T.$$.fragment,k),p(C.$$.fragment,k),p(R.$$.fragment,k),p(L.$$.fragment,k),p(A.$$.fragment,k),p(te.$$.fragment,k),p(X.$$.fragment,k),G=!1},d(k){k&&E(e),v(i),v(s),v(o),v(a),v(d),v(b),v(u),k&&E(c),k&&E(h),v(T),k&&E(z),k&&E(V),v(C),k&&E(D),k&&E(F),v(R),v(L),v(A),v(te),v(X)}}}function ml(t){let e,i;return e=new Sn({props:{focus:bl,tabs:t[6].window,$$slots:{default:[_l,({focus:n})=>({28:n}),({focus:n})=>[n?268435456:0]]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&268435459|s[1]&16&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}function gl(t){let e,i,n,s,l,o;return e=new xe({props:{display:t[5][0].key===t[27],$$slots:{default:[Hs]},$$scope:{ctx:t}}}),n=new xe({props:{display:t[5][1].key===t[27],$$slots:{default:[Qs]},$$scope:{ctx:t}}}),l=new xe({props:{display:t[5][2].key===t[27],$$slots:{default:[ml]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment),i=W(),M(n.$$.fragment),s=W(),M(l.$$.fragment)},m(r,a){y(e,r,a),N(r,i,a),y(n,r,a),N(r,s,a),y(l,r,a),o=!0},p(r,a){const f={};a[0]&134217728&&(f.display=r[5][0].key===r[27]),a[0]&1|a[1]&16&&(f.$$scope={dirty:a,ctx:r}),e.$set(f);const d={};a[0]&134217728&&(d.display=r[5][1].key===r[27]),a[0]&1|a[1]&16&&(d.$$scope={dirty:a,ctx:r}),n.$set(d);const m={};a[0]&134217728&&(m.display=r[5][2].key===r[27]),a[0]&3|a[1]&16&&(m.$$scope={dirty:a,ctx:r}),l.$set(m)},i(r){o||(g(e.$$.fragment,r),g(n.$$.fragment,r),g(l.$$.fragment,r),o=!0)},o(r){p(e.$$.fragment,r),p(n.$$.fragment,r),p(l.$$.fragment,r),o=!1},d(r){v(e,r),r&&E(i),v(n,r),r&&E(s),v(l,r)}}}function dl(t){let e,i;return e=new Oi({props:{panels:t[5],focus:pl,$$slots:{default:[gl,({focus:n})=>({27:n}),({focus:n})=>[n?134217728:0]]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment)},m(n,s){y(e,n,s),i=!0},p(n,s){const l={};s[0]&134217731|s[1]&16&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){i||(g(e.$$.fragment,n),i=!0)},o(n){p(e.$$.fragment,n),i=!1},d(n){v(e,n)}}}let pl=0,hl=0,bl=0;function wl(t,e,i){let{config:n}=e,{plugin:s}=e;const l=s.i18n;function o(){s.updateConfig(n)}function r(){s.siyuan.confirm(l.settings.generalSettings.reset.title,l.settings.generalSettings.reset.description,async()=>{await s.resetConfig(),globalThis.location.reload()})}var a=(w=>(w[w.general=0]="general",w[w.openTab=1]="openTab",w[w.openWindow=2]="openWindow",w))(a||{}),f=(w=>(w[w.general=0]="general",w[w.protocol=1]="protocol",w[w.shortcut=2]="shortcut",w[w.siyuan=3]="siyuan",w))(f||{});const d=[{key:0,text:l.settings.generalSettings.title,name:l.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:l.settings.openTab,name:l.settings.openTab,icon:"#iconBoth"},{key:2,text:l.settings.openWindow,name:l.settings.openWindow,icon:"#iconOpenWindow"}],m={tab:[{key:0,text:l.settings.general,name:l.settings.general,icon:"⚙"},{key:1,text:l.settings.protocol,name:l.settings.protocol,icon:"🌐"},{key:2,text:l.settings.shortcut,name:l.settings.shortcut,icon:"⌨"}],window:[{key:0,text:l.settings.general,name:l.settings.general,icon:"⚙"},{key:1,text:l.settings.protocol,name:l.settings.protocol,icon:"🌐"},{key:2,text:l.settings.shortcut,name:l.settings.shortcut,icon:"⌨"},{key:3,text:l.settings.siyuan.title,name:l.settings.siyuan.title,icon:"📝"}]},b=w=>{i(0,n.general.useragent=w.detail.value,n),o()},_=w=>{i(0,n.tab.enable=w.detail.value,n),o()},u=w=>{i(0,n.tab.open.targets.hyperlink.editor=w.detail.value,n),o()},c=w=>{i(0,n.tab.open.targets.hyperlink.other=w.detail.value,n),o()},h=(w,X,G,k)=>{i(0,X[G][1].enable=k.detail.value,n),o()},T=w=>{i(0,n.window.enable=w.detail.value,n),o()},z=w=>{i(0,n.window.open.targets.hyperlink.editor=w.detail.value,n),o()},V=w=>{i(0,n.window.open.targets.hyperlink.other=w.detail.value,n),o()},C=w=>{i(0,n.window.params.width=w.detail.value,n),o()},D=w=>{i(0,n.window.params.height=w.detail.value,n),o()},F=w=>{i(0,n.window.params.alwaysOnTop=w.detail.value,n),o()},R=w=>{switch(w.detail.value){case ne.AutoHide:i(0,n.window.params.enableMenuBar=!0,n),i(0,n.window.params.autoHideMenuBar=!0,n);break;case ne.AlwaysShow:i(0,n.window.params.enableMenuBar=!0,n),i(0,n.window.params.autoHideMenuBar=!1,n);break;case ne.Disabled:i(0,n.window.params.enableMenuBar=!1,n);break}o()},q=(w,X,G,k)=>{i(0,X[G][1].enable=k.detail.value,n),o()},L=w=>{i(0,n.window.siyuan.enable=w.detail.value,n),o()},P=w=>s.openSiyuanDesktopWindow(w.detail.event),A=w=>s.openSiyuanMobileWindow(w.detail.event),H=w=>{i(0,n.window.siyuan.focus=w.detail.value,n),o()},te=w=>{i(0,n.window.siyuan.editorType=w.detail.value,n),o()};return t.$$set=w=>{"config"in w&&i(0,n=w.config),"plugin"in w&&i(1,s=w.plugin)},[n,s,l,o,r,d,m,b,_,u,c,h,T,z,V,C,D,F,R,q,L,P,A,H,te]}class $l extends ue{constructor(e){super(),ae(this,e,wl,dl,re,{config:0,plugin:1},null,[-1,-1])}}function fn(t,{delay:e=0,duration:i=400,easing:n=ot}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:i,easing:n,css:l=>`opacity: ${l*s}`}}var he=(t=>(t.n="b3-tooltips__n",t.ne="b3-tooltips__ne",t.e="b3-tooltips__e",t.se="b3-tooltips__se",t.s="b3-tooltips__s",t.sw="b3-tooltips__sw",t.w="b3-tooltips__w",t.nw="b3-tooltips__nw",t))(he||{});function kl(t){let e,i,n,s,l,o;return i=new pe({props:{icon:t[0]}}),{c(){e=K("button"),M(i.$$.fragment),$(e,"aria-label",t[1]),$(e,"class",n="block__icon block__icon--show fn__flex-center b3-tooltips "+t[4]),O(e,"toolbar__item--active",t[2]),O(e,"toolbar__item--disabled",t[3])},m(r,a){N(r,e,a),y(i,e,null),s=!0,l||(o=Y(e,"click",t[5]),l=!0)},p(r,[a]){const f={};a&1&&(f.icon=r[0]),i.$set(f),(!s||a&2)&&$(e,"aria-label",r[1]),(!s||a&16&&n!==(n="block__icon block__icon--show fn__flex-center b3-tooltips "+r[4]))&&$(e,"class",n),(!s||a&20)&&O(e,"toolbar__item--active",r[2]),(!s||a&24)&&O(e,"toolbar__item--disabled",r[3])},i(r){s||(g(i.$$.fragment,r),s=!0)},o(r){p(i.$$.fragment,r),s=!1},d(r){r&&E(e),v(i),l=!1,o()}}}function yl(t,e,i){let{icon:n}=e,{ariaLabel:s=void 0}=e,{active:l=!1}=e,{disabled:o=!1}=e,{tooltipsDirection:r=he.s}=e;function a(f){di.call(this,t,f)}return t.$$set=f=>{"icon"in f&&i(0,n=f.icon),"ariaLabel"in f&&i(1,s=f.ariaLabel),"active"in f&&i(2,l=f.active),"disabled"in f&&i(3,o=f.disabled),"tooltipsDirection"in f&&i(4,r=f.tooltipsDirection)},[n,s,l,o,r,a]}class ke extends ue{constructor(e){super(),ae(this,e,yl,kl,re,{icon:0,ariaLabel:1,active:2,disabled:3,tooltipsDirection:4})}}function cn(t){let e,i,n,s,l,o;return{c(){e=K("div"),i=K("span"),n=_e(t[11]),$(e,"class","webview-status tooltip svelte-x3hvqm")},m(r,a){N(r,e,a),S(e,i),S(i,n),o=!0},p(r,a){(!o||a&2048)&&ve(n,r[11])},i(r){o||(ye(()=>{o&&(l&&l.end(1),s=$i(e,fn,{delay:0,duration:125}),s.start())}),o=!0)},o(r){s&&s.invalidate(),l=ki(e,fn,{delay:500,duration:250}),o=!1},d(r){r&&E(e),r&&l&&l.end()}}}function vl(t){let e,i,n,s,l,o,r,a,f,d,m,b,_,u,c,h,T,z,V,C,D,F,R,q,L;n=new ke({props:{icon:"#iconLeft",ariaLabel:t[12].webview.goForwardOnePage,disabled:!t[3],tooltipsDirection:he.se}}),n.$on("click",t[13]),l=new ke({props:{icon:"#iconRight",ariaLabel:t[12].webview.goBackOnePage,disabled:!t[4],tooltipsDirection:he.se}}),l.$on("click",t[14]),r=new ke({props:{icon:t[5]?"#iconClose":"#iconRefresh",ariaLabel:t[5]?t[12].webview.stopLoadingThisPage:t[12].webview.reloadCurrentPage,tooltipsDirection:he.se}}),r.$on("click",t[15]),m=new ke({props:{icon:"#iconLanguage",ariaLabel:t[12].webview.openWithDefaultProgram,tooltipsDirection:he.sw}}),m.$on("click",t[17]),_=new ke({props:{icon:"#iconOpenWindow",ariaLabel:t[12].webview.openWithNewWindow,tooltipsDirection:he.sw}}),_.$on("click",t[18]),c=new ke({props:{icon:t[2]?"#iconFullscreenExit":"#iconFullscreen",ariaLabel:t[2]?t[12].webview.exitFullscreen:t[12].webview.enterFullscreen,active:t[2],tooltipsDirection:he.sw}}),c.$on("click",t[19]),T=new ke({props:{icon:"#iconBug",ariaLabel:t[7]?t[12].webview.closeDevTools:t[12].webview.openDevTools,active:t[7],tooltipsDirection:he.sw}}),T.$on("click",t[20]);let P=t[10]&&cn(t);return{c(){e=K("div"),i=K("div"),M(n.$$.fragment),s=W(),M(l.$$.fragment),o=W(),M(r.$$.fragment),a=W(),f=K("input"),d=W(),M(m.$$.fragment),b=W(),M(_.$$.fragment),u=W(),M(c.$$.fragment),h=W(),M(T.$$.fragment),z=W(),V=K("div"),C=K("webview"),F=W(),P&&P.c(),$(f,"class","b3-text-field fn__flex-1 address-field svelte-x3hvqm"),$(f,"type","url"),$(i,"class","protyle-breadcrumb svelte-x3hvqm"),Nt(C.src,D=t[0])||$(C,"src",D),$(C,"useragent",t[1]),$(C,"class","fn__flex-1 svelte-x3hvqm"),$(C,"allowpopups",""),O(C,"pointer-events-disable",t[9]),$(V,"class","protyle-preview svelte-x3hvqm"),$(e,"class","fn__flex fn__flex-1 fn__flex-column content svelte-x3hvqm"),O(e,"fullscreen",t[2])},m(A,H){N(A,e,H),S(e,i),y(n,i,null),S(i,s),y(l,i,null),S(i,o),y(r,i,null),S(i,a),S(i,f),ce(f,t[6]),S(i,d),y(m,i,null),S(i,b),y(_,i,null),S(i,u),y(c,i,null),S(i,h),y(T,i,null),S(e,z),S(e,V),S(V,C),t[24](C),S(e,F),P&&P.m(e,null),R=!0,q||(L=[Y(f,"change",t[16]),Y(f,"input",t[23]),Y(V,"mouseenter",t[25]),Y(V,"mouseleave",t[26])],q=!0)},p(A,[H]){const te={};H&8&&(te.disabled=!A[3]),n.$set(te);const w={};H&16&&(w.disabled=!A[4]),l.$set(w);const X={};H&32&&(X.icon=A[5]?"#iconClose":"#iconRefresh"),H&32&&(X.ariaLabel=A[5]?A[12].webview.stopLoadingThisPage:A[12].webview.reloadCurrentPage),r.$set(X),H&64&&f.value!==A[6]&&ce(f,A[6]);const G={};H&4&&(G.icon=A[2]?"#iconFullscreenExit":"#iconFullscreen"),H&4&&(G.ariaLabel=A[2]?A[12].webview.exitFullscreen:A[12].webview.enterFullscreen),H&4&&(G.active=A[2]),c.$set(G);const k={};H&128&&(k.ariaLabel=A[7]?A[12].webview.closeDevTools:A[12].webview.openDevTools),H&128&&(k.active=A[7]),T.$set(k),(!R||H&1&&!Nt(C.src,D=A[0]))&&$(C,"src",D),(!R||H&2)&&$(C,"useragent",A[1]),(!R||H&512)&&O(C,"pointer-events-disable",A[9]),A[10]?P?(P.p(A,H),H&1024&&g(P,1)):(P=cn(A),P.c(),g(P,1),P.m(e,null)):P&&(J(),p(P,1,1,()=>{P=null}),x()),(!R||H&4)&&O(e,"fullscreen",A[2])},i(A){R||(g(n.$$.fragment,A),g(l.$$.fragment,A),g(r.$$.fragment,A),g(m.$$.fragment,A),g(_.$$.fragment,A),g(c.$$.fragment,A),g(T.$$.fragment,A),g(P),R=!0)},o(A){p(n.$$.fragment,A),p(l.$$.fragment,A),p(r.$$.fragment,A),p(m.$$.fragment,A),p(_.$$.fragment,A),p(c.$$.fragment,A),p(T.$$.fragment,A),p(P),R=!1},d(A){A&&E(e),v(n),v(l),v(r),v(m),v(_),v(c),v(T),t[24](null),P&&P.d(),q=!1,ee(L)}}}function Ml(t,e,i){let{src:n}=e,{tab:s}=e,{plugin:l}=e,{useragent:o=l.useragent}=e;const r=l.i18n;let a=!1,f=!1,d=!1,m=!1,b=decodeURI(n),_=!1,u,c=!1,h=!1,T="";function z(){f&&(u==null||u.goBack())}function V(){f&&(u==null||u.goBack())}function C(){m?u==null||u.stop():u==null||u.reload()}function D(w){if(b)try{const X=new URL(b);u.loadURL(X.href)}catch{try{const G=new URL(`http://${b}`);u.loadURL(G.href.replace(/^http:/,""))}catch{l.siyuan.showMessage(`${l.name}:
URL <code class="fn__code">${b}</code> ${r.message.nonStandardURL}
`,void 0,"error",globalThis.crypto.randomUUID())}}}function F(){global.open(s.data.href,"_blank")}function R(w){l.openWindow(s.data.href,{x:w.screenX,y:w.screenY,title:s.data.title})}function q(){i(2,a=!a)}function L(){u&&(u.isDevToolsOpened()?(u.closeDevTools(),i(7,_=!1)):(u.openDevTools(),i(7,_=!0)))}gi(()=>{u.addEventListener("load-commit",w=>{w.isMainFrame&&(i(6,b=decodeURI(w.url)),i(21,s.data.href=w.url,s)),i(3,f=u.canGoBack()),i(4,d=u.canGoForward())}),u.addEventListener("page-title-updated",w=>{i(21,s.data.title=w.title,s),s.tab.updateTitle(w.title),i(21,s.tab.headElement.ariaLabel=w.title,s)}),u.addEventListener("page-favicon-updated",w=>{var G;const X=w.favicons;if((G=s.tab.headElement.querySelector(".item__graphic"))==null||G.remove(),X.length>0){const k=X[0],B=s.tab.headElement.querySelector(".item__icon");if(s.tab.docIcon!==k||!B){i(21,s.tab.docIcon=k,s);const Oe=`<img src="${k}" />`;B?B.innerHTML=Oe:s.tab.headElement.insertAdjacentHTML("afterbegin",`<span class="item__icon">${Oe}</span>`)}}else s.tab.setDocIcon("🌐".codePointAt(0).toString(16),!0)}),u.addEventListener("did-start-loading",w=>{i(5,m=!0)}),u.addEventListener("did-stop-loading",w=>{i(5,m=!1)}),u.addEventListener("devtools-open-url",w=>{l.openWebviewTab(w.url)}),u.addEventListener("update-target-url",w=>{w.url?(i(11,T=w.url),h||i(10,h=!0)):i(10,h=!1)}),u.addEventListener("context-menu",w=>{l.logger.debug(w),w.params.linkURL&&l.openWebviewTab(w.params.linkURL,w.params.titleText||w.params.linkText||w.params.altText)})});function P(){b=this.value,i(6,b)}function A(w){st[w?"unshift":"push"](()=>{u=w,i(8,u)})}const H=w=>i(9,c=w.button!==0),te=()=>i(9,c=!0);return t.$$set=w=>{"src"in w&&i(0,n=w.src),"tab"in w&&i(21,s=w.tab),"plugin"in w&&i(22,l=w.plugin),"useragent"in w&&i(1,o=w.useragent)},[n,o,a,f,d,m,b,_,u,c,h,T,r,z,V,C,D,F,R,q,L,s,l,P,A,H,te]}class El extends ue{constructor(e){super(),ae(this,e,Ml,vl,re,{src:0,tab:21,plugin:22,useragent:1})}}const _n={general:{useragent:""},tab:{enable:!0,open:{mouse:{type:"click",button:me.Left,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!0}}},protocols:{https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}}},window:{enable:!0,open:{mouse:{type:"mousedown",button:me.Middle,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!1}}},protocols:{siyuan:{enable:!0,prefix:"siyuan://"},https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}},params:{width:800,height:600,frame:!0,alwaysOnTop:!0,autoHideMenuBar:!0,enableMenuBar:!0},siyuan:{enable:!0,focus:!1,editorType:ge.mobile}}},qe=class extends be.Plugin{constructor(i){super(i);fe(this,"siyuan",be);fe(this,"logger");fe(this,"TOP_BAR_MENU_ID");fe(this,"SETTINGS_DIALOG_ID");fe(this,"webview_tab");fe(this,"tab_bar_item");fe(this,"config");fe(this,"blockMenuEventListener",i=>{const n=i.detail,s=ii(i.detail);if(s){const l=[],o=(r,a)=>{const f=Ke(Ze(this.config.window.siyuan.editorType),{id:s.id,focus:a}),d=r.getBoundingClientRect();this.openSiyuanWindow(f,{screenX:globalThis.screenX+d.x,screenY:globalThis.screenY+d.y})};l.push({icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:r=>o(r,!1)}),!s.isDocumentBlock&&!s.isMultiBlock&&l.push({icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:r=>o(r,!0)}),n.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:l})}});fe(this,"openTabEventListener",i=>{try{if(!this.config.tab.enable||!Mt(i,this.config.tab.open.mouse))return;const n=this.parseHyperlinkMeta(i.target,this.config.tab.open.targets);if(n.valid&&(this.logger.info(n.href),this.isUrlSchemeAvailable(n.href,this.config.tab.open.protocols)))try{i.preventDefault(),i.stopPropagation(),this.openWebviewTab(n.href,n.title)}catch(s){this.logger.warn(s)}}catch(n){this.logger.warn(n)}});fe(this,"openWindowEventListener",i=>{try{if(!this.config.window.enable||!Mt(i,this.config.window.open.mouse))return;const n=this.parseHyperlinkMeta(i.target,this.config.window.open.targets);if(n.valid){if(this.logger.info(n.href),n.enabled&&this.isUrlSchemeAvailable(n.href,this.config.window.open.protocols))if(i.preventDefault(),i.stopPropagation(),n.href.startsWith("siyuan://")){if(this.config.window.siyuan.enable){const s=Ke(Ze(this.config.window.siyuan.editorType),ni(new URL(n.href)));this.openSiyuanWindow(s,i)}}else this.openWindow(n.href,{x:i.screenX,y:i.screenY,title:n.title||this.name})}else if(this.config.window.siyuan.enable){const s=ti(i);if(s){i.preventDefault(),i.stopPropagation();const l=Ke(Ze(this.config.window.siyuan.editorType),{id:s,focus:this.config.window.siyuan.focus});this.openSiyuanWindow(l,i)}}}catch(n){this.logger.warn(n)}});this.logger=new Vn(this.name),this.TOP_BAR_MENU_ID=`${this.name}-top-bar-menu`,this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`;const n=this;this.webview_tab=this.addTab({type:"-webview-tag",init(){const s=this;new El({target:s.element,props:{src:s.data.href,tab:s,plugin:n}})}})}onload(){this.loadData(qe.GLOBAL_CONFIG_NAME).then(i=>{this.config=He(_n,i||{})}).catch(i=>this.logger.error(i)).finally(()=>{yt&&Qe&&globalThis.addEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.addEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("click-editortitleicon",this.blockMenuEventListener)})}onLayoutReady(){Qe&&(new be.Menu(this.TOP_BAR_MENU_ID),this.tab_bar_item=this.addTopBar({icon:"iconOpenWindow",title:this.i18n.displayName,position:"right",callback:i=>{const n=new be.Menu(this.TOP_BAR_MENU_ID);n.addItem({icon:"iconSiYuan",label:this.i18n.menu.openDesktopWindow.label,click:l=>{const o=Tt(l);this.openSiyuanDesktopWindow({screenX:o.centerX,screenY:o.centerY})}}),n.addItem({icon:"iconSiYuan",label:this.i18n.menu.openMobildWindow.label,click:l=>{const o=Tt(l);this.openSiyuanMobileWindow({screenX:o.centerX,screenY:o.centerY})}});const s={x:0,y:0,isLeft:!0};if(i.target.classList.contains("fn__none")){const l=document.getElementById("barPlugins");if(l){const o=l.getBoundingClientRect();s.x=o.x+o.width/2,s.y=o.y+o.height/2}}else{const l=this.tab_bar_item.getBoundingClientRect();s.x=l.x+l.width/2,s.y=l.y+l.height/2}n.open(s)}}))}onunload(){yt&&Qe&&globalThis.removeEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.removeEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editortitleicon",this.blockMenuEventListener)}openSetting(){const i=this;globalThis.crypto.randomUUID();const n=new be.Dialog({title:i.name,content:`<div id="${i.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:vt?"92vw":"720px",height:vt?void 0:"640px"});new $l({target:n.element.querySelector(`#${i.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(He(_n))}async updateConfig(i){return i&&i!==this.config&&(this.config=i),this.saveData(qe.GLOBAL_CONFIG_NAME,this.config)}get useragent(){return this.config.general.useragent||global.navigator.userAgent}openWebviewTab(i,n,s="iconLanguage"){be.openTab({app:this.app,custom:{icon:s,title:n||this.name,fn:this.webview_tab,data:{href:i,title:n||this.name}}})}openWindow(i,n={x:0,y:0,title:null},s={defaultFontSize:globalThis.siyuan.config.editor.fontSize,defaultFontFamily:{standard:globalThis.siyuan.config.editor.fontFamily}}){try{const l=new URL(i),o=Is(l,this.config.window.params,n,s,this)}catch(l){this.logger.warn(l)}}openSiyuanDesktopWindow(i,n){const s={x:(i==null?void 0:i.screenX)??0,y:(i==null?void 0:i.screenY)??0,title:"desktop",alwaysOnTop:!1,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(n||Ke(et.desktop).href,s)}openSiyuanMobileWindow(i,n){const s={x:(i==null?void 0:i.screenX)??0,y:(i==null?void 0:i.screenY)??0,title:"mobile",alwaysOnTop:!0,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(n||Ke(et.mobile).href,s)}openSiyuanWindow(i,n){switch(this.config.window.siyuan.editorType){case ge.desktop:this.openSiyuanDesktopWindow(n,i.href);break;case ge.mobile:this.openSiyuanMobileWindow(n,i.href);break}}isUrlSchemeAvailable(i,n){for(const s in n){const l=n[s];if(l.enable&&i.startsWith(l.prefix))return!0}return!1}parseHyperlinkMeta(i,n){const s={valid:!1,enabled:!1,href:void 0,title:void 0};switch(i.localName){case"a":s.valid=!0,s.enabled=n.hyperlink.other.enable,s.href=i.href,s.title=i.title||i.innerText;break;case"span":/\ba\b/.test(i.dataset.type)&&(s.valid=!0,s.enabled=n.hyperlink.editor.enable,s.href=i.dataset.href,s.title=i.dataset.title||i.innerText);break}return s}};let Fe=qe;fe(Fe,"GLOBAL_CONFIG_NAME","global-config");module.exports=Fe;
