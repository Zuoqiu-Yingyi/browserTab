"use strict";var li=Object.defineProperty;var ui=(e,t,o)=>t in e?li(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var ee=(e,t,o)=>(ui(e,typeof t!="symbol"?t+"":t,o),o);const Te=require("siyuan"),cn=po(),Et=pi();hi();const fn=di();function ci(){return!!globalThis.require}function fi(){return!!globalThis.process}function po(){return fi()&&ci()}function pi(){switch(Te.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function di(){switch(Te.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function hi(){switch(Te.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}class mi{constructor(t,o=!0){this.label=t,this.collapsed=o}stdout(t,...o){const n=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${t.name.toUpperCase()}\x1B[0m>`;this.collapsed?globalThis.console.groupCollapsed(n):globalThis.console.group(n),t(...o),globalThis.console.trace(),globalThis.console.groupEnd()}dir(...t){this.stdout(globalThis.console.dir,...t)}table(...t){this.stdout(globalThis.console.table,...t)}debug(...t){this.stdout(globalThis.console.debug,...t)}info(...t){this.stdout(globalThis.console.info,...t)}log(...t){this.stdout(globalThis.console.log,...t)}warn(...t){this.stdout(globalThis.console.warn,...t)}error(...t){this.stdout(globalThis.console.error,...t)}}function pn(e,t){return e.button===t.button&&e.type===t.type&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey&&e.shiftKey===t.shiftKey}function gi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _i=function(t){return bi(t)&&!wi(t)};function bi(e){return!!e&&typeof e=="object"}function wi(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||$i(e)}var ki=typeof Symbol=="function"&&Symbol.for,yi=ki?Symbol.for("react.element"):60103;function $i(e){return e.$$typeof===yi}function Si(e){return Array.isArray(e)?[]:{}}function Je(e,t){return t.clone!==!1&&t.isMergeableObject(e)?Ue(Si(e),e,t):e}function vi(e,t,o){return e.concat(t).map(function(n){return Je(n,o)})}function Ei(e,t){if(!t.customMerge)return Ue;var o=t.customMerge(e);return typeof o=="function"?o:Ue}function Ti(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function dn(e){return Object.keys(e).concat(Ti(e))}function ho(e,t){try{return t in e}catch{return!1}}function Oi(e,t){return ho(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Bi(e,t,o){var n={};return o.isMergeableObject(e)&&dn(e).forEach(function(i){n[i]=Je(e[i],o)}),dn(t).forEach(function(i){Oi(e,i)||(ho(e,i)&&o.isMergeableObject(t[i])?n[i]=Ei(i,o)(e[i],t[i],o):n[i]=Je(t[i],o))}),n}function Ue(e,t,o){o=o||{},o.arrayMerge=o.arrayMerge||vi,o.isMergeableObject=o.isMergeableObject||_i,o.cloneUnlessOtherwiseSpecified=Je;var n=Array.isArray(t),i=Array.isArray(e),s=n===i;return s?n?o.arrayMerge(e,t,o):Bi(e,t,o):Je(t,o)}Ue.all=function(t,o){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return Ue(n,i,o)},{})};var Ai=Ue,Ni=Ai;const Ci=gi(Ni);function ut(...e){return Ci.all(e)}function hn(e){const t=e.getBoundingClientRect(),o=globalThis.mozInnerScreenX??globalThis.screenX,n=globalThis.mozInnerscreenY??globalThis.screenY;return{x:o+t.x,y:n+t.y,centerX:o+t.x+Math.round(t.width/2),centerY:n+t.y+Math.round(t.height/2),left:o+t.left,right:o+t.right,top:n+t.top,bottom:n+t.bottom}}const je={id:/^\d{14}\-[0-9a-z]{7}$/,url:/^siyuan:\/\/blocks\/(\d{14}\-[0-9a-z]{7})/};function Ri(e){const t=e.composedPath();for(let o=0;o<t.length;++o){const n=t[o].dataset;switch(!0){case(n.nodeId&&je.id.test(n.nodeId)):return n.nodeId;case(n.id&&je.id.test(n.id)):return n.id;case(n.oid&&je.id.test(n.oid)):return n.oid;case(n.rootId&&je.id.test(n.rootId)):return n.rootId}}}var we=(e=>(e[e.window=0]="window",e[e.app=1]="app",e[e.desktop=2]="desktop",e[e.mobile=3]="mobile",e))(we||{}),Dt=(e=>(e.window="/stage/build/app/window.html",e.app="/stage/build/app",e.desktop="/stage/build/desktop",e.mobile="/stage/build/mobile",e))(Dt||{});function Tt(e){switch(e){case we.window:return"/stage/build/app/window.html";case we.app:return"/stage/build/app";case we.desktop:return"/stage/build/desktop";case we.mobile:return"/stage/build/mobile"}}function He(e,t,o=globalThis.origin){const n=new URL(o);return n.pathname=e,t!=null&&t.id&&n.searchParams.set("id",t.id),(t==null?void 0:t.focus)!==void 0&&n.searchParams.set("focus",t.focus?"1":"0"),t!=null&&t.url&&n.searchParams.set("url",t.url),n}function Pi(e){return je.url.test(e.href)?{id:je.url.exec(e.href)[1],focus:e.searchParams.get("focus")==="1"}:null}var Di=Object.defineProperty,Mi=(e,t,o)=>t in e?Di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,mt=(e,t,o)=>(Mi(e,typeof t!="symbol"?t+"":t,o),o);function mo(e,t){return function(){return e.apply(t,arguments)}}const{toString:Li}=Object.prototype,{getPrototypeOf:Vt}=Object,gt=(e=>t=>{const o=Li.call(t);return e[o]||(e[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),$e=e=>(e=e.toLowerCase(),t=>gt(t)===e),_t=e=>t=>typeof t===e,{isArray:We}=Array,Xe=_t("undefined");function Fi(e){return e!==null&&!Xe(e)&&e.constructor!==null&&!Xe(e.constructor)&&me(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const go=$e("ArrayBuffer");function ji(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&go(e.buffer),t}const qi=_t("string"),me=_t("function"),_o=_t("number"),bt=e=>e!==null&&typeof e=="object",Ki=e=>e===!0||e===!1,ot=e=>{if(gt(e)!=="object")return!1;const t=Vt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Ui=$e("Date"),Ii=$e("File"),Wi=$e("Blob"),Vi=$e("FileList"),Hi=e=>bt(e)&&me(e.pipe),zi=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||me(e.append)&&((t=gt(e))==="formdata"||t==="object"&&me(e.toString)&&e.toString()==="[object FormData]"))},Gi=$e("URLSearchParams"),Yi=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ze(e,t,{allOwnKeys:o=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),We(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const s=o?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let l;for(n=0;n<r;n++)l=s[n],t.call(null,e[l],l,e)}}function bo(e,t){t=t.toLowerCase();const o=Object.keys(e);let n=o.length,i;for(;n-- >0;)if(i=o[n],t===i.toLowerCase())return i;return null}const wo=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),ko=e=>!Xe(e)&&e!==wo;function Mt(){const{caseless:e}=ko(this)&&this||{},t={},o=(n,i)=>{const s=e&&bo(t,i)||i;ot(t[s])&&ot(n)?t[s]=Mt(t[s],n):ot(n)?t[s]=Mt({},n):We(n)?t[s]=n.slice():t[s]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Ze(arguments[n],o);return t}const Ji=(e,t,o,{allOwnKeys:n}={})=>(Ze(t,(i,s)=>{o&&me(i)?e[s]=mo(i,o):e[s]=i},{allOwnKeys:n}),e),Xi=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Qi=(e,t,o,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),o&&Object.assign(e.prototype,o)},Zi=(e,t,o,n)=>{let i,s,r;const l={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)r=i[s],(!n||n(r,e,t))&&!l[r]&&(t[r]=e[r],l[r]=!0);e=o!==!1&&Vt(e)}while(e&&(!o||o(e,t))&&e!==Object.prototype);return t},xi=(e,t,o)=>{e=String(e),(o===void 0||o>e.length)&&(o=e.length),o-=t.length;const n=e.indexOf(t,o);return n!==-1&&n===o},es=e=>{if(!e)return null;if(We(e))return e;let t=e.length;if(!_o(t))return null;const o=new Array(t);for(;t-- >0;)o[t]=e[t];return o},ts=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Vt(Uint8Array)),ns=(e,t)=>{const o=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=o.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},os=(e,t)=>{let o;const n=[];for(;(o=e.exec(t))!==null;)n.push(o);return n},is=$e("HTMLFormElement"),ss=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,o,n){return o.toUpperCase()+n}),mn=(({hasOwnProperty:e})=>(t,o)=>e.call(t,o))(Object.prototype),rs=$e("RegExp"),yo=(e,t)=>{const o=Object.getOwnPropertyDescriptors(e),n={};Ze(o,(i,s)=>{t(i,s,e)!==!1&&(n[s]=i)}),Object.defineProperties(e,n)},as=e=>{yo(e,(t,o)=>{if(me(e)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const n=e[o];if(me(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},ls=(e,t)=>{const o={},n=i=>{i.forEach(s=>{o[s]=!0})};return We(e)?n(e):n(String(e).split(t)),o},us=()=>{},cs=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Ot="abcdefghijklmnopqrstuvwxyz",gn="0123456789",$o={DIGIT:gn,ALPHA:Ot,ALPHA_DIGIT:Ot+Ot.toUpperCase()+gn},fs=(e=16,t=$o.ALPHA_DIGIT)=>{let o="";const{length:n}=t;for(;e--;)o+=t[Math.random()*n|0];return o};function ps(e){return!!(e&&me(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const ds=e=>{const t=new Array(10),o=(n,i)=>{if(bt(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const s=We(n)?[]:{};return Ze(n,(r,l)=>{const a=o(r,i+1);!Xe(a)&&(s[l]=a)}),t[i]=void 0,s}}return n};return o(e,0)},hs=$e("AsyncFunction"),ms=e=>e&&(bt(e)||me(e))&&me(e.then)&&me(e.catch),w={isArray:We,isArrayBuffer:go,isBuffer:Fi,isFormData:zi,isArrayBufferView:ji,isString:qi,isNumber:_o,isBoolean:Ki,isObject:bt,isPlainObject:ot,isUndefined:Xe,isDate:Ui,isFile:Ii,isBlob:Wi,isRegExp:rs,isFunction:me,isStream:Hi,isURLSearchParams:Gi,isTypedArray:ts,isFileList:Vi,forEach:Ze,merge:Mt,extend:Ji,trim:Yi,stripBOM:Xi,inherits:Qi,toFlatObject:Zi,kindOf:gt,kindOfTest:$e,endsWith:xi,toArray:es,forEachEntry:ns,matchAll:os,isHTMLForm:is,hasOwnProperty:mn,hasOwnProp:mn,reduceDescriptors:yo,freezeMethods:as,toObjectSet:ls,toCamelCase:ss,noop:us,toFiniteNumber:cs,findKey:bo,global:wo,isContextDefined:ko,ALPHABET:$o,generateString:fs,isSpecCompliantForm:ps,toJSONObject:ds,isAsyncFn:hs,isThenable:ms};function W(e,t,o,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),o&&(this.config=o),n&&(this.request=n),i&&(this.response=i)}w.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:w.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const So=W.prototype,vo={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{vo[e]={value:e}});Object.defineProperties(W,vo);Object.defineProperty(So,"isAxiosError",{value:!0});W.from=(e,t,o,n,i,s)=>{const r=Object.create(So);return w.toFlatObject(e,r,function(l){return l!==Error.prototype},l=>l!=="isAxiosError"),W.call(r,e.message,t,o,n,i),r.cause=e,r.name=e.name,s&&Object.assign(r,s),r};const gs=null;function Lt(e){return w.isPlainObject(e)||w.isArray(e)}function Eo(e){return w.endsWith(e,"[]")?e.slice(0,-2):e}function _n(e,t,o){return e?e.concat(t).map(function(n,i){return n=Eo(n),!o&&i?"["+n+"]":n}).join(o?".":""):t}function _s(e){return w.isArray(e)&&!e.some(Lt)}const bs=w.toFlatObject(w,{},null,function(e){return/^is[A-Z]/.test(e)});function wt(e,t,o){if(!w.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,o=w.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,c){return!w.isUndefined(c[p])});const n=o.metaTokens,i=o.visitor||u,s=o.dots,r=o.indexes,l=(o.Blob||typeof Blob<"u"&&Blob)&&w.isSpecCompliantForm(t);if(!w.isFunction(i))throw new TypeError("visitor must be a function");function a(p){if(p===null)return"";if(w.isDate(p))return p.toISOString();if(!l&&w.isBlob(p))throw new W("Blob is not supported. Use a Buffer instead.");return w.isArrayBuffer(p)||w.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,c,f){let m=p;if(p&&!f&&typeof p=="object"){if(w.endsWith(c,"{}"))c=n?c:c.slice(0,-2),p=JSON.stringify(p);else if(w.isArray(p)&&_s(p)||(w.isFileList(p)||w.endsWith(c,"[]"))&&(m=w.toArray(p)))return c=Eo(c),m.forEach(function(E,V){!(w.isUndefined(E)||E===null)&&t.append(r===!0?_n([c],V,s):r===null?c:c+"[]",a(E))}),!1}return Lt(p)?!0:(t.append(_n(f,c,s),a(p)),!1)}const d=[],h=Object.assign(bs,{defaultVisitor:u,convertValue:a,isVisitable:Lt});function g(p,c){if(!w.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+c.join("."));d.push(p),w.forEach(p,function(f,m){(!(w.isUndefined(f)||f===null)&&i.call(t,f,w.isString(m)?m.trim():m,c,h))===!0&&g(f,c?c.concat(m):[m])}),d.pop()}}if(!w.isObject(e))throw new TypeError("data must be an object");return g(e),t}function bn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function Ht(e,t){this._pairs=[],e&&wt(e,this,t)}const To=Ht.prototype;To.append=function(e,t){this._pairs.push([e,t])};To.toString=function(e){const t=e?function(o){return e.call(this,o,bn)}:bn;return this._pairs.map(function(o){return t(o[0])+"="+t(o[1])},"").join("&")};function ws(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Oo(e,t,o){if(!t)return e;const n=o&&o.encode||ws,i=o&&o.serialize;let s;if(i?s=i(t,o):s=w.isURLSearchParams(t)?t.toString():new Ht(t,o).toString(n),s){const r=e.indexOf("#");r!==-1&&(e=e.slice(0,r)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e}class ks{constructor(){this.handlers=[]}use(t,o,n){return this.handlers.push({fulfilled:t,rejected:o,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){w.forEach(this.handlers,function(o){o!==null&&t(o)})}}const wn=ks,Bo={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ys=typeof URLSearchParams<"u"?URLSearchParams:Ht,$s=typeof FormData<"u"?FormData:null,Ss=typeof Blob<"u"?Blob:null,vs=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Es=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),ke={isBrowser:!0,classes:{URLSearchParams:ys,FormData:$s,Blob:Ss},isStandardBrowserEnv:vs,isStandardBrowserWebWorkerEnv:Es,protocols:["http","https","file","blob","url","data"]};function Ts(e,t){return wt(e,new ke.classes.URLSearchParams,Object.assign({visitor:function(o,n,i,s){return ke.isNode&&w.isBuffer(o)?(this.append(n,o.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}function Os(e){return w.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Bs(e){const t={},o=Object.keys(e);let n;const i=o.length;let s;for(n=0;n<i;n++)s=o[n],t[s]=e[s];return t}function Ao(e){function t(o,n,i,s){let r=o[s++];const l=Number.isFinite(+r),a=s>=o.length;return r=!r&&w.isArray(i)?i.length:r,a?(w.hasOwnProp(i,r)?i[r]=[i[r],n]:i[r]=n,!l):((!i[r]||!w.isObject(i[r]))&&(i[r]=[]),t(o,n,i[r],s)&&w.isArray(i[r])&&(i[r]=Bs(i[r])),!l)}if(w.isFormData(e)&&w.isFunction(e.entries)){const o={};return w.forEachEntry(e,(n,i)=>{t(Os(n),i,o,0)}),o}return null}const As={"Content-Type":void 0};function Ns(e,t,o){if(w.isString(e))try{return(t||JSON.parse)(e),w.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(o||JSON.stringify)(e)}const kt={transitional:Bo,adapter:["xhr","http"],transformRequest:[function(e,t){const o=t.getContentType()||"",n=o.indexOf("application/json")>-1,i=w.isObject(e);if(i&&w.isHTMLForm(e)&&(e=new FormData(e)),w.isFormData(e))return n&&n?JSON.stringify(Ao(e)):e;if(w.isArrayBuffer(e)||w.isBuffer(e)||w.isStream(e)||w.isFile(e)||w.isBlob(e))return e;if(w.isArrayBufferView(e))return e.buffer;if(w.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(o.indexOf("application/x-www-form-urlencoded")>-1)return Ts(e,this.formSerializer).toString();if((s=w.isFileList(e))||o.indexOf("multipart/form-data")>-1){const r=this.env&&this.env.FormData;return wt(s?{"files[]":e}:e,r&&new r,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),Ns(e)):e}],transformResponse:[function(e){const t=this.transitional||kt.transitional,o=t&&t.forcedJSONParsing,n=this.responseType==="json";if(e&&w.isString(e)&&(o&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(s){if(i)throw s.name==="SyntaxError"?W.from(s,W.ERR_BAD_RESPONSE,this,null,this.response):s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ke.classes.FormData,Blob:ke.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};w.forEach(["delete","get","head"],function(e){kt.headers[e]={}});w.forEach(["post","put","patch"],function(e){kt.headers[e]=w.merge(As)});const zt=kt,Cs=w.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Rs=e=>{const t={};let o,n,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),o=s.substring(0,i).trim().toLowerCase(),n=s.substring(i+1).trim(),!(!o||t[o]&&Cs[o])&&(o==="set-cookie"?t[o]?t[o].push(n):t[o]=[n]:t[o]=t[o]?t[o]+", "+n:n)}),t},kn=Symbol("internals");function ze(e){return e&&String(e).trim().toLowerCase()}function it(e){return e===!1||e==null?e:w.isArray(e)?e.map(it):String(e)}function Ps(e){const t=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=o.exec(e);)t[n[1]]=n[2];return t}const Ds=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Bt(e,t,o,n,i){if(w.isFunction(n))return n.call(this,t,o);if(i&&(t=o),!!w.isString(t)){if(w.isString(n))return t.indexOf(n)!==-1;if(w.isRegExp(n))return n.test(t)}}function Ms(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,o,n)=>o.toUpperCase()+n)}function Ls(e,t){const o=w.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+o,{value:function(i,s,r){return this[n].call(this,t,i,s,r)},configurable:!0})})}let yt=class{constructor(e){e&&this.set(e)}set(e,t,o){const n=this;function i(r,l,a){const u=ze(l);if(!u)throw new Error("header name must be a non-empty string");const d=w.findKey(n,u);(!d||n[d]===void 0||a===!0||a===void 0&&n[d]!==!1)&&(n[d||l]=it(r))}const s=(r,l)=>w.forEach(r,(a,u)=>i(a,u,l));return w.isPlainObject(e)||e instanceof this.constructor?s(e,t):w.isString(e)&&(e=e.trim())&&!Ds(e)?s(Rs(e),t):e!=null&&i(t,e,o),this}get(e,t){if(e=ze(e),e){const o=w.findKey(this,e);if(o){const n=this[o];if(!t)return n;if(t===!0)return Ps(n);if(w.isFunction(t))return t.call(this,n,o);if(w.isRegExp(t))return t.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ze(e),e){const o=w.findKey(this,e);return!!(o&&this[o]!==void 0&&(!t||Bt(this,this[o],o,t)))}return!1}delete(e,t){const o=this;let n=!1;function i(s){if(s=ze(s),s){const r=w.findKey(o,s);r&&(!t||Bt(o,o[r],r,t))&&(delete o[r],n=!0)}}return w.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let o=t.length,n=!1;for(;o--;){const i=t[o];(!e||Bt(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const t=this,o={};return w.forEach(this,(n,i)=>{const s=w.findKey(o,i);if(s){t[s]=it(n),delete t[i];return}const r=e?Ms(i):String(i).trim();r!==i&&delete t[i],t[r]=it(n),o[r]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return w.forEach(this,(o,n)=>{o!=null&&o!==!1&&(t[n]=e&&w.isArray(o)?o.join(", "):o)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const o=new this(e);return t.forEach(n=>o.set(n)),o}static accessor(e){const t=(this[kn]=this[kn]={accessors:{}}).accessors,o=this.prototype;function n(i){const s=ze(i);t[s]||(Ls(o,i),t[s]=!0)}return w.isArray(e)?e.forEach(n):n(e),this}};yt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);w.freezeMethods(yt.prototype);w.freezeMethods(yt);const Be=yt;function At(e,t){const o=this||zt,n=t||o,i=Be.from(n.headers);let s=n.data;return w.forEach(e,function(r){s=r.call(o,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function No(e){return!!(e&&e.__CANCEL__)}function xe(e,t,o){W.call(this,e??"canceled",W.ERR_CANCELED,t,o),this.name="CanceledError"}w.inherits(xe,W,{__CANCEL__:!0});function Fs(e,t,o){const n=o.config.validateStatus;!o.status||!n||n(o.status)?e(o):t(new W("Request failed with status code "+o.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}const js=ke.isStandardBrowserEnv?function(){return{write:function(e,t,o,n,i,s){const r=[];r.push(e+"="+encodeURIComponent(t)),w.isNumber(o)&&r.push("expires="+new Date(o).toGMTString()),w.isString(n)&&r.push("path="+n),w.isString(i)&&r.push("domain="+i),s===!0&&r.push("secure"),document.cookie=r.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function qs(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Ks(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Co(e,t){return e&&!qs(t)?Ks(e,t):t}const Us=ke.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let o;function n(i){let s=i;return e&&(t.setAttribute("href",s),s=t.href),t.setAttribute("href",s),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return o=n(window.location.href),function(i){const s=w.isString(i)?n(i):i;return s.protocol===o.protocol&&s.host===o.host}}():function(){return function(){return!0}}();function Is(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ws(e,t){e=e||10;const o=new Array(e),n=new Array(e);let i=0,s=0,r;return t=t!==void 0?t:1e3,function(l){const a=Date.now(),u=n[s];r||(r=a),o[i]=l,n[i]=a;let d=s,h=0;for(;d!==i;)h+=o[d++],d=d%e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),a-r<t)return;const g=u&&a-u;return g?Math.round(h*1e3/g):void 0}}function yn(e,t){let o=0;const n=Ws(50,250);return i=>{const s=i.loaded,r=i.lengthComputable?i.total:void 0,l=s-o,a=n(l),u=s<=r;o=s;const d={loaded:s,total:r,progress:r?s/r:void 0,bytes:l,rate:a||void 0,estimated:a&&r&&u?(r-s)/a:void 0,event:i};d[t?"download":"upload"]=!0,e(d)}}const Vs=typeof XMLHttpRequest<"u",Hs=Vs&&function(e){return new Promise(function(t,o){let n=e.data;const i=Be.from(e.headers).normalize(),s=e.responseType;let r;function l(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}w.isFormData(n)&&(ke.isStandardBrowserEnv||ke.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let a=new XMLHttpRequest;if(e.auth){const g=e.auth.username||"",p=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";i.set("Authorization","Basic "+btoa(g+":"+p))}const u=Co(e.baseURL,e.url);a.open(e.method.toUpperCase(),Oo(u,e.params,e.paramsSerializer),!0),a.timeout=e.timeout;function d(){if(!a)return;const g=Be.from("getAllResponseHeaders"in a&&a.getAllResponseHeaders()),p={data:!s||s==="text"||s==="json"?a.responseText:a.response,status:a.status,statusText:a.statusText,headers:g,config:e,request:a};Fs(function(c){t(c),l()},function(c){o(c),l()},p),a=null}if("onloadend"in a?a.onloadend=d:a.onreadystatechange=function(){!a||a.readyState!==4||a.status===0&&!(a.responseURL&&a.responseURL.indexOf("file:")===0)||setTimeout(d)},a.onabort=function(){a&&(o(new W("Request aborted",W.ECONNABORTED,e,a)),a=null)},a.onerror=function(){o(new W("Network Error",W.ERR_NETWORK,e,a)),a=null},a.ontimeout=function(){let g=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const p=e.transitional||Bo;e.timeoutErrorMessage&&(g=e.timeoutErrorMessage),o(new W(g,p.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,e,a)),a=null},ke.isStandardBrowserEnv){const g=(e.withCredentials||Us(u))&&e.xsrfCookieName&&js.read(e.xsrfCookieName);g&&i.set(e.xsrfHeaderName,g)}n===void 0&&i.setContentType(null),"setRequestHeader"in a&&w.forEach(i.toJSON(),function(g,p){a.setRequestHeader(p,g)}),w.isUndefined(e.withCredentials)||(a.withCredentials=!!e.withCredentials),s&&s!=="json"&&(a.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&a.addEventListener("progress",yn(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&a.upload&&a.upload.addEventListener("progress",yn(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=g=>{a&&(o(!g||g.type?new xe(null,e,a):g),a.abort(),a=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));const h=Is(u);if(h&&ke.protocols.indexOf(h)===-1){o(new W("Unsupported protocol "+h+":",W.ERR_BAD_REQUEST,e));return}a.send(n||null)})},st={http:gs,xhr:Hs};w.forEach(st,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const zs={getAdapter:e=>{e=w.isArray(e)?e:[e];const{length:t}=e;let o,n;for(let i=0;i<t&&(o=e[i],!(n=w.isString(o)?st[o.toLowerCase()]:o));i++);if(!n)throw n===!1?new W(`Adapter ${o} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(w.hasOwnProp(st,o)?`Adapter '${o}' is not available in the build`:`Unknown adapter '${o}'`);if(!w.isFunction(n))throw new TypeError("adapter is not a function");return n},adapters:st};function Nt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xe(null,e)}function $n(e){return Nt(e),e.headers=Be.from(e.headers),e.data=At.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),zs.getAdapter(e.adapter||zt.adapter)(e).then(function(t){return Nt(e),t.data=At.call(e,e.transformResponse,t),t.headers=Be.from(t.headers),t},function(t){return No(t)||(Nt(e),t&&t.response&&(t.response.data=At.call(e,e.transformResponse,t.response),t.response.headers=Be.from(t.response.headers))),Promise.reject(t)})}const Sn=e=>e instanceof Be?e.toJSON():e;function Ie(e,t){t=t||{};const o={};function n(u,d,h){return w.isPlainObject(u)&&w.isPlainObject(d)?w.merge.call({caseless:h},u,d):w.isPlainObject(d)?w.merge({},d):w.isArray(d)?d.slice():d}function i(u,d,h){if(w.isUndefined(d)){if(!w.isUndefined(u))return n(void 0,u,h)}else return n(u,d,h)}function s(u,d){if(!w.isUndefined(d))return n(void 0,d)}function r(u,d){if(w.isUndefined(d)){if(!w.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,h){if(h in t)return n(u,d);if(h in e)return n(void 0,u)}const a={url:s,method:s,data:s,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:l,headers:(u,d)=>i(Sn(u),Sn(d),!0)};return w.forEach(Object.keys(Object.assign({},e,t)),function(u){const d=a[u]||i,h=d(e[u],t[u],u);w.isUndefined(h)&&d!==l||(o[u]=h)}),o}const Ro="1.4.0",Gt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Gt[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const vn={};Gt.transitional=function(e,t,o){function n(i,s){return"[Axios v"+Ro+"] Transitional option '"+i+"'"+s+(o?". "+o:"")}return(i,s,r)=>{if(e===!1)throw new W(n(s," has been removed"+(t?" in "+t:"")),W.ERR_DEPRECATED);return t&&!vn[s]&&(vn[s]=!0,console.warn(n(s," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,s,r):!0}};function Gs(e,t,o){if(typeof e!="object")throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const s=n[i],r=t[s];if(r){const l=e[s],a=l===void 0||r(l,s,e);if(a!==!0)throw new W("option "+s+" must be "+a,W.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new W("Unknown option "+s,W.ERR_BAD_OPTION)}}const Ft={assertOptions:Gs,validators:Gt},Ae=Ft.validators;let ct=class{constructor(e){this.defaults=e,this.interceptors={request:new wn,response:new wn}}request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=Ie(this.defaults,t);const{transitional:o,paramsSerializer:n,headers:i}=t;o!==void 0&&Ft.assertOptions(o,{silentJSONParsing:Ae.transitional(Ae.boolean),forcedJSONParsing:Ae.transitional(Ae.boolean),clarifyTimeoutError:Ae.transitional(Ae.boolean)},!1),n!=null&&(w.isFunction(n)?t.paramsSerializer={serialize:n}:Ft.assertOptions(n,{encode:Ae.function,serialize:Ae.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s;s=i&&w.merge(i.common,i[t.method]),s&&w.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),t.headers=Be.concat(s,i);const r=[];let l=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(t)===!1||(l=l&&p.synchronous,r.unshift(p.fulfilled,p.rejected))});const a=[];this.interceptors.response.forEach(function(p){a.push(p.fulfilled,p.rejected)});let u,d=0,h;if(!l){const p=[$n.bind(this),void 0];for(p.unshift.apply(p,r),p.push.apply(p,a),h=p.length,u=Promise.resolve(t);d<h;)u=u.then(p[d++],p[d++]);return u}h=r.length;let g=t;for(d=0;d<h;){const p=r[d++],c=r[d++];try{g=p(g)}catch(f){c.call(this,f);break}}try{u=$n.call(this,g)}catch(p){return Promise.reject(p)}for(d=0,h=a.length;d<h;)u=u.then(a[d++],a[d++]);return u}getUri(e){e=Ie(this.defaults,e);const t=Co(e.baseURL,e.url);return Oo(t,e.params,e.paramsSerializer)}};w.forEach(["delete","get","head","options"],function(e){ct.prototype[e]=function(t,o){return this.request(Ie(o||{},{method:e,url:t,data:(o||{}).data}))}});w.forEach(["post","put","patch"],function(e){function t(o){return function(n,i,s){return this.request(Ie(s||{},{method:e,headers:o?{"Content-Type":"multipart/form-data"}:{},url:n,data:i}))}}ct.prototype[e]=t(),ct.prototype[e+"Form"]=t(!0)});const rt=ct;let Ys=class Po{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(i){o=i});const n=this;this.promise.then(i=>{if(!n._listeners)return;let s=n._listeners.length;for(;s-- >0;)n._listeners[s](i);n._listeners=null}),this.promise.then=i=>{let s;const r=new Promise(l=>{n.subscribe(l),s=l}).then(i);return r.cancel=function(){n.unsubscribe(s)},r},t(function(i,s,r){n.reason||(n.reason=new xe(i,s,r),o(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const o=this._listeners.indexOf(t);o!==-1&&this._listeners.splice(o,1)}static source(){let t;return{token:new Po(function(o){t=o}),cancel:t}}};const Js=Ys;function Xs(e){return function(t){return e.apply(null,t)}}function Qs(e){return w.isObject(e)&&e.isAxiosError===!0}const jt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jt).forEach(([e,t])=>{jt[t]=e});const Zs=jt;function Do(e){const t=new rt(e),o=mo(rt.prototype.request,t);return w.extend(o,rt.prototype,t,{allOwnKeys:!0}),w.extend(o,t,null,{allOwnKeys:!0}),o.create=function(n){return Do(Ie(e,n))},o}const te=Do(zt);te.Axios=rt;te.CanceledError=xe;te.CancelToken=Js;te.isCancel=No;te.VERSION=Ro;te.toFormData=wt;te.AxiosError=W;te.Cancel=te.CanceledError;te.all=function(e){return Promise.all(e)};te.spread=Xs;te.isAxiosError=Qs;te.mergeConfig=Ie;te.AxiosHeaders=Be;te.formToJSON=e=>Ao(w.isHTMLForm(e)?new FormData(e):e);te.HttpStatusCode=Zs;te.default=te;const Mo=te,{Axios:Nl,AxiosError:Cl,CanceledError:Rl,isCancel:Pl,CancelToken:Dl,VERSION:Ml,all:Ll,Cancel:Fl,isAxiosError:jl,spread:ql,toFormData:Kl,AxiosHeaders:Ul,HttpStatusCode:xs,formToJSON:Il,mergeConfig:Wl}=Mo,Ct={SCHEMA_DIR_RELATIVE_PATH:"./../schemas/",SCHEMA_FILENAME_PAYLOAD:"payload.schema.json",SCHEMA_FILENAME_RESPONSE:"response.schema.json",SIYUAN_DEFAULT_BASE_URL:"http://localhost:6806/",SIYUAN_DEFAULT_TOKEN:"",REQUEST_TIMEOUT:6e4};class er extends Error{constructor(t){super(t.statusText),mt(this,"status"),this.response=t,this.status=t.status}}class tr extends Error{constructor(t,o){super(t.msg),mt(this,"code"),this.body=t,this.response=o,this.code=t.code}}var En,Tn;const y=class{constructor(e={}){mt(this,"_axios",Mo.create({baseURL:((En=globalThis.document)==null?void 0:En.baseURI)??((Tn=globalThis.location)==null?void 0:Tn.origin)??Ct.SIYUAN_DEFAULT_BASE_URL,timeout:Ct.REQUEST_TIMEOUT,headers:{Authorization:`Token ${Ct.SIYUAN_DEFAULT_TOKEN}`}})),this.updateOptions(e)}updateOptions(e){for(const[t,o]of Object.entries(e))switch(t){case"token":this._axios.defaults.headers.Authorization=`Token ${e.token}`;break;default:this._axios.defaults[t]=o;break}}async getBookmarkLabels(e){return await this._request(y.api.attr.getBookmarkLabels.pathname,y.api.attr.getBookmarkLabels.method,void 0,e)}async getBlockBreadcrumb(e,t){return await this._request(y.api.block.getBlockBreadcrumb.pathname,y.api.block.getBlockBreadcrumb.method,e,t)}async getDocInfo(e,t){return await this._request(y.api.block.getDocInfo.pathname,y.api.block.getDocInfo.method,e,t)}async listDocsByPath(e,t){return await this._request(y.api.filetree.listDocsByPath.pathname,y.api.filetree.listDocsByPath.method,e,t)}async searchDocs(e,t){return await this._request(y.api.filetree.searchDocs.pathname,y.api.filetree.searchDocs.method,e,t)}async fullTextSearchBlock(e,t){return await this._request(y.api.search.fullTextSearchBlock.pathname,y.api.search.fullTextSearchBlock.method,e,t)}async getRecentDocs(e){return await this._request(y.api.storage.getRecentDocs.pathname,y.api.storage.getRecentDocs.method,void 0,e)}async getConf(e){return await this._request(y.api.system.getConf.pathname,y.api.system.getConf.method,void 0,e)}async upload(e,t){const o=new FormData;return o.append("assetsDirPath",e.assetsDirPath??"/assets/"),e.files.forEach(n=>o.append("file[]",n)),await this._request(y.api.asset.upload.pathname,y.api.asset.upload.method,o,t)}async getBlockAttrs(e,t){return await this._request(y.api.attr.getBlockAttrs.pathname,y.api.attr.getBlockAttrs.method,e,t)}async setBlockAttrs(e,t){return await this._request(y.api.attr.setBlockAttrs.pathname,y.api.attr.setBlockAttrs.method,e,t)}async appendBlock(e,t){return await this._request(y.api.block.appendBlock.pathname,y.api.block.appendBlock.method,e,t)}async deleteBlock(e,t){return await this._request(y.api.block.deleteBlock.pathname,y.api.block.deleteBlock.method,e,t)}async getBlockKramdown(e,t){return await this._request(y.api.block.getBlockKramdown.pathname,y.api.block.getBlockKramdown.method,e,t)}async getChildBlocks(e,t){return await this._request(y.api.block.getChildBlocks.pathname,y.api.block.getChildBlocks.method,e,t)}async insertBlock(e,t){return await this._request(y.api.block.insertBlock.pathname,y.api.block.insertBlock.method,e,t)}async moveBlock(e,t){return await this._request(y.api.block.moveBlock.pathname,y.api.block.moveBlock.method,e,t)}async prependBlock(e,t){return await this._request(y.api.block.prependBlock.pathname,y.api.block.prependBlock.method,e,t)}async transferBlockRef(e,t){return await this._request(y.api.block.transferBlockRef.pathname,y.api.block.transferBlockRef.method,e,t)}async updateBlock(e,t){return await this._request(y.api.block.updateBlock.pathname,y.api.block.updateBlock.method,e,t)}async pandoc(e,t){return await this._request(y.api.convert.pandoc.pathname,y.api.convert.pandoc.method,e,t)}async exportMdContent(e,t){return await this._request(y.api.export.exportMdContent.pathname,y.api.export.exportMdContent.method,e,t)}async getFile(e,t){return await this._request(y.api.file.getFile.pathname,y.api.file.getFile.method,e,t,!1)}async putFile(e,t){e.file!==void 0&&!(e.file instanceof File)&&(e.file=new File([e.file],e.path.split("/").pop()));const o=new FormData;for(const[n,i]of Object.entries(e))e.hasOwnProperty(n)&&(i instanceof Blob?o.append(n,i):o.append(n,String(i)));return await this._request(y.api.file.putFile.pathname,y.api.file.putFile.method,o,t)}async readDir(e,t){return await this._request(y.api.file.readDir.pathname,y.api.file.readDir.method,e,t)}async removeFile(e,t){return await this._request(y.api.file.removeFile.pathname,y.api.file.removeFile.method,e,t)}async renameFile(e,t){return await this._request(y.api.file.renameFile.pathname,y.api.file.renameFile.method,e,t)}async createDocWithMd(e,t){return await this._request(y.api.filetree.createDocWithMd.pathname,y.api.filetree.createDocWithMd.method,e,t)}async getHPathByID(e,t){return await this._request(y.api.filetree.getHPathByID.pathname,y.api.filetree.getHPathByID.method,e,t)}async getHPathByPath(e,t){return await this._request(y.api.filetree.getHPathByPath.pathname,y.api.filetree.getHPathByPath.method,e,t)}async moveDocs(e,t){return await this._request(y.api.filetree.moveDocs.pathname,y.api.filetree.moveDocs.method,e,t)}async removeDoc(e,t){return await this._request(y.api.filetree.removeDoc.pathname,y.api.filetree.removeDoc.method,e,t)}async renameDoc(e,t){return await this._request(y.api.filetree.renameDoc.pathname,y.api.filetree.renameDoc.method,e,t)}async closeNotebook(e,t){return await this._request(y.api.notebook.closeNotebook.pathname,y.api.notebook.closeNotebook.method,e,t)}async createNotebook(e,t){return await this._request(y.api.notebook.createNotebook.pathname,y.api.notebook.createNotebook.method,e,t)}async getNotebookConf(e,t){return await this._request(y.api.notebook.getNotebookConf.pathname,y.api.notebook.getNotebookConf.method,e,t)}async lsNotebooks(e){return await this._request(y.api.notebook.lsNotebooks.pathname,y.api.notebook.lsNotebooks.method,void 0,e)}async openNotebook(e,t){return await this._request(y.api.notebook.openNotebook.pathname,y.api.notebook.openNotebook.method,e,t)}async removeNotebook(e,t){return await this._request(y.api.notebook.removeNotebook.pathname,y.api.notebook.removeNotebook.method,e,t)}async renameNotebook(e,t){return await this._request(y.api.notebook.renameNotebook.pathname,y.api.notebook.renameNotebook.method,e,t)}async setNotebookConf(e,t){return await this._request(y.api.notebook.setNotebookConf.pathname,y.api.notebook.setNotebookConf.method,e,t)}async pushErrMsg(e,t){return await this._request(y.api.notification.pushErrMsg.pathname,y.api.notification.pushErrMsg.method,e,t)}async pushMsg(e,t){return await this._request(y.api.notification.pushMsg.pathname,y.api.notification.pushMsg.method,e,t)}async sql(e,t){return await this._request(y.api.query.sql.pathname,y.api.query.sql.method,e,t)}async bootProgress(e){return await this._request(y.api.system.bootProgress.pathname,y.api.system.bootProgress.method,void 0,e)}async currentTime(e){return await this._request(y.api.system.currentTime.pathname,y.api.system.currentTime.method,void 0,e)}async version(e){return await this._request(y.api.system.version.pathname,y.api.system.version.method,void 0,e)}async render(e,t){return await this._request(y.api.template.render.pathname,y.api.template.render.method,e,t)}async renderSprig(e,t){return await this._request(y.api.template.renderSprig.pathname,y.api.template.renderSprig.method,e,t)}async _request(e,t,o,n,i=!0){try{const s=await this._axios.request({url:e,method:t,data:o,...n});if(s.status===xs.Ok)return i&&typeof s.data=="object"?this._parseResponse(s):s.data;throw new er(s)}catch(s){throw s}}_parseResponse(e){if(e.data.code===0)return e.data;throw new tr(e.data,e)}};let nr=y;mt(nr,"api",{search:{fullTextSearchBlock:{pathname:"/api/search/fullTextSearchBlock",method:"POST"}},storage:{getRecentDocs:{pathname:"/api/storage/getRecentDocs",method:"POST"}},asset:{upload:{pathname:"/api/asset/upload",method:"POST"}},attr:{getBlockAttrs:{pathname:"/api/attr/getBlockAttrs",method:"POST"},setBlockAttrs:{pathname:"/api/attr/setBlockAttrs",method:"POST"},getBookmarkLabels:{pathname:"/api/attr/getBookmarkLabels",method:"POST"}},block:{appendBlock:{pathname:"/api/block/appendBlock",method:"POST"},deleteBlock:{pathname:"/api/block/deleteBlock",method:"POST"},getBlockKramdown:{pathname:"/api/block/getBlockKramdown",method:"POST"},getChildBlocks:{pathname:"/api/block/getChildBlocks",method:"POST"},insertBlock:{pathname:"/api/block/insertBlock",method:"POST"},moveBlock:{pathname:"/api/block/moveBlock",method:"POST"},prependBlock:{pathname:"/api/block/prependBlock",method:"POST"},transferBlockRef:{pathname:"/api/block/transferBlockRef",method:"POST"},updateBlock:{pathname:"/api/block/updateBlock",method:"POST"},getBlockBreadcrumb:{pathname:"/api/block/getBlockBreadcrumb",method:"POST"},getDocInfo:{pathname:"/api/block/getDocInfo",method:"POST"}},convert:{pandoc:{pathname:"/api/convert/pandoc",method:"POST"}},export:{exportMdContent:{pathname:"/api/export/exportMdContent",method:"POST"}},file:{getFile:{pathname:"/api/file/getFile",method:"POST"},putFile:{pathname:"/api/file/putFile",method:"POST"},readDir:{pathname:"/api/file/readDir",method:"POST"},removeFile:{pathname:"/api/file/removeFile",method:"POST"},renameFile:{pathname:"/api/file/renameFile",method:"POST"}},filetree:{createDocWithMd:{pathname:"/api/filetree/createDocWithMd",method:"POST"},getHPathByID:{pathname:"/api/filetree/getHPathByID",method:"POST"},getHPathByPath:{pathname:"/api/filetree/getHPathByPath",method:"POST"},moveDocs:{pathname:"/api/filetree/moveDocs",method:"POST"},removeDoc:{pathname:"/api/filetree/removeDoc",method:"POST"},renameDoc:{pathname:"/api/filetree/renameDoc",method:"POST"},listDocsByPath:{pathname:"/api/filetree/listDocsByPath",method:"POST"},searchDocs:{pathname:"/api/filetree/searchDocs",method:"POST"}},notebook:{closeNotebook:{pathname:"/api/notebook/closeNotebook",method:"POST"},createNotebook:{pathname:"/api/notebook/createNotebook",method:"POST"},lsNotebooks:{pathname:"/api/notebook/lsNotebooks",method:"POST"},getNotebookConf:{pathname:"/api/notebook/getNotebookConf",method:"POST"},openNotebook:{pathname:"/api/notebook/openNotebook",method:"POST"},removeNotebook:{pathname:"/api/notebook/removeNotebook",method:"POST"},renameNotebook:{pathname:"/api/notebook/renameNotebook",method:"POST"},setNotebookConf:{pathname:"/api/notebook/setNotebookConf",method:"POST"}},notification:{pushErrMsg:{pathname:"/api/notification/pushErrMsg",method:"POST"},pushMsg:{pathname:"/api/notification/pushMsg",method:"POST"}},query:{sql:{pathname:"/api/query/sql",method:"POST"}},system:{bootProgress:{pathname:"/api/system/bootProgress",method:"POST"},currentTime:{pathname:"/api/system/currentTime",method:"POST"},version:{pathname:"/api/system/version",method:"POST"},getConf:{pathname:"/api/system/getConf",method:"POST"}},template:{render:{pathname:"/api/template/render",method:"POST"},renderSprig:{pathname:"/api/template/renderSprig",method:"POST"}}});var Lo=(e=>(e.NodeNotebook="NodeNotebook",e.NodeFolder="NodeFolder",e.NodeDocument="NodeDocument",e.NodeSuperBlock="NodeSuperBlock",e.NodeBlockquote="NodeBlockquote",e.NodeList="NodeList",e.NodeListItem="NodeListItem",e.NodeHeading="NodeHeading",e.NodeParagraph="NodeParagraph",e.NodeMathBlock="NodeMathBlock",e.NodeTable="NodeTable",e.NodeCodeBlock="NodeCodeBlock",e.NodeHTMLBlock="NodeHTMLBlock",e.NodeThematicBreak="NodeThematicBreak",e.NodeAudio="NodeAudio",e.NodeVideo="NodeVideo",e.NodeIFrame="NodeIFrame",e.NodeWidget="NodeWidget",e.NodeBlockQueryEmbed="NodeBlockQueryEmbed",e))(Lo||{}),Fo=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(Fo||{}),jo=(e=>(e.d="d",e.s="s",e.b="b",e.l="l",e.i="i",e))(jo||{}),qo=(e=>(e.h="h",e.p="p",e.m="m",e.t="t",e.c="c",e.html="html",e.query_embed="query_embed",e.tb="tb",e.audio="audio",e.video="video",e.iframe="iframe",e.widget="widget",e))(qo||{}),Ko=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e.u="u",e.o="o",e.t="t",e.none="",e))(Ko||{}),Uo=(e=>(e.u="u",e.o="o",e.t="t",e))(Uo||{}),Io=(e=>(e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.h5="h5",e.h6="h6",e))(Io||{}),Wo=(e=>(e[e.keyword=0]="keyword",e[e.querySyntax=1]="querySyntax",e[e.sql=2]="sql",e[e.regex=3]="regex",e))(Wo||{}),Vo=(e=>(e[e.noGroupBy=0]="noGroupBy",e[e.group=1]="group",e))(Vo||{}),Ho=(e=>(e[e.type=0]="type",e[e.createdASC=1]="createdASC",e[e.createdDESC=2]="createdDESC",e[e.modifiedASC=3]="modifiedASC",e[e.modifiedDESC=4]="modifiedDESC",e[e.sortByContent=5]="sortByContent",e[e.sortByRankAsc=6]="sortByRankAsc",e[e.sortByRankDesc=7]="sortByRankDesc",e))(Ho||{}),zo=(e=>(e[e.SortModeNameASC=0]="SortModeNameASC",e[e.SortModeNameDESC=1]="SortModeNameDESC",e[e.SortModeUpdatedASC=2]="SortModeUpdatedASC",e[e.SortModeUpdatedDESC=3]="SortModeUpdatedDESC",e[e.SortModeAlphanumASC=4]="SortModeAlphanumASC",e[e.SortModeAlphanumDESC=5]="SortModeAlphanumDESC",e[e.SortModeCustom=6]="SortModeCustom",e[e.SortModeRefCountASC=7]="SortModeRefCountASC",e[e.SortModeRefCountDESC=8]="SortModeRefCountDESC",e[e.SortModeCreatedASC=9]="SortModeCreatedASC",e[e.SortModeCreatedDESC=10]="SortModeCreatedDESC",e[e.SortModeSizeASC=11]="SortModeSizeASC",e[e.SortModeSizeDESC=12]="SortModeSizeDESC",e[e.SortModeSubDocCountASC=13]="SortModeSubDocCountASC",e[e.SortModeSubDocCountDESC=14]="SortModeSubDocCountDESC",e))(zo||{});const or=Object.freeze(Object.defineProperty({__proto__:null,BlockSubType:Ko,BlockType:Fo,Container:jo,GroupBy:Vo,Leaf:qo,Method:Wo,NodeHeadingSubType:Io,NodeListSubType:Uo,NodeType:Lo,OrderBy:Ho,SortMode:zo},Symbol.toStringTag,{value:"Module"}));function ir(e){const{protyle:t,data:o,blockElements:n}=e;if(o){const i={element:t.wysiwyg.element,id:o.id,type:or.NodeType.NodeDocument};return{...i,isDocumentBlock:!0,isMultiBlock:!1,blocks:[i]}}else if(n&&n.length>0){const i=[];return n.forEach(s=>{i.push({element:s,id:s.dataset.nodeId,type:s.dataset.type,subtype:s.dataset.subtype})}),{...i[0],isDocumentBlock:!1,isMultiBlock:i.length>1,blocks:i}}return null}function Y(){}const Yt=e=>e;function sr(e,t){for(const o in t)e[o]=t[o];return e}function Go(e){return e()}function On(){return Object.create(null)}function se(e){e.forEach(Go)}function $t(e){return typeof e=="function"}function pe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let nt;function Bn(e,t){return e===t?!0:(nt||(nt=document.createElement("a")),nt.href=t,e===nt.href)}function rr(e){return Object.keys(e).length===0}function le(e,t,o,n){if(e){const i=Yo(e,t,o,n);return e[0](i)}}function Yo(e,t,o,n){return e[1]&&n?sr(o.ctx.slice(),e[1](n(t))):o.ctx}function ue(e,t,o,n){if(e[2]&&n){const i=e[2](n(o));if(t.dirty===void 0)return i;if(typeof i=="object"){const s=[],r=Math.max(t.dirty.length,i.length);for(let l=0;l<r;l+=1)s[l]=t.dirty[l]|i[l];return s}return t.dirty|i}return t.dirty}function ce(e,t,o,n,i,s){if(i){const r=Yo(t,o,n,s);e.p(r,i)}}function fe(e){if(e.ctx.length>32){const t=[],o=e.ctx.length/32;for(let n=0;n<o;n++)t[n]=-1;return t}return-1}function ar(e){const t={};for(const o in e)t[o]=!0;return t}const Jo=typeof window<"u";let Xo=Jo?()=>window.performance.now():()=>Date.now(),Jt=Jo?e=>requestAnimationFrame(e):Y;const qe=new Set;function Qo(e){qe.forEach(t=>{t.c(e)||(qe.delete(t),t.f())}),qe.size!==0&&Jt(Qo)}function Zo(e){let t;return qe.size===0&&Jt(Qo),{promise:new Promise(o=>{qe.add(t={c:e,f:o})}),abort(){qe.delete(t)}}}function N(e,t){e.appendChild(t)}function xo(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function lr(e){const t=R("style");return t.textContent="/* empty */",ur(xo(e),t),t.sheet}function ur(e,t){return N(e.head||e,t),t.sheet}function B(e,t,o){e.insertBefore(t,o||null)}function T(e){e.parentNode&&e.parentNode.removeChild(e)}function R(e){return document.createElement(e)}function qt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ge(e){return document.createTextNode(e)}function L(){return ge(" ")}function Se(){return ge("")}function J(e,t,o,n){return e.addEventListener(t,o,n),()=>e.removeEventListener(t,o,n)}function k(e,t,o){o==null?e.removeAttribute(t):e.getAttribute(t)!==o&&e.setAttribute(t,o)}function An(e,t,o){e.setAttributeNS("http://www.w3.org/1999/xlink",t,o)}function Kt(e){return e===""?null:+e}function cr(e){return Array.from(e.childNodes)}function De(e,t){t=""+t,e.data!==t&&(e.data=t)}function re(e,t){e.value=t??""}function Oe(e,t,o,n){o==null?e.style.removeProperty(t):e.style.setProperty(t,o,n?"important":"")}function Nn(e,t,o){for(let n=0;n<e.options.length;n+=1){const i=e.options[n];if(i.__value===t){i.selected=!0;return}}(!o||t!==void 0)&&(e.selectedIndex=-1)}function fr(e){const t=e.querySelector(":checked");return t&&t.__value}function C(e,t,o){e.classList.toggle(t,!!o)}function ei(e,t,{bubbles:o=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:o,cancelable:n})}class et{constructor(t=!1){ee(this,"is_svg",!1);ee(this,"e");ee(this,"n");ee(this,"t");ee(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,o,n=null){this.e||(this.is_svg?this.e=qt(o.nodeName):this.e=R(o.nodeType===11?"TEMPLATE":o.nodeName),this.t=o.tagName!=="TEMPLATE"?o:o.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let o=0;o<this.n.length;o+=1)B(this.t,this.n[o],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(T)}}const ft=new Map;let pt=0;function pr(e){let t=5381,o=e.length;for(;o--;)t=(t<<5)-t^e.charCodeAt(o);return t>>>0}function dr(e,t){const o={stylesheet:lr(t),rules:{}};return ft.set(e,o),o}function ti(e,t,o,n,i,s,r,l=0){const a=16.666/n;let u=`{
`;for(let m=0;m<=1;m+=a){const E=t+(o-t)*s(m);u+=m*100+`%{${r(E,1-E)}}
`}const d=u+`100% {${r(o,1-o)}}
}`,h=`__svelte_${pr(d)}_${l}`,g=xo(e),{stylesheet:p,rules:c}=ft.get(g)||dr(g,e);c[h]||(c[h]=!0,p.insertRule(`@keyframes ${h} ${d}`,p.cssRules.length));const f=e.style.animation||"";return e.style.animation=`${f?`${f}, `:""}${h} ${n}ms linear ${i}ms 1 both`,pt+=1,h}function Ut(e,t){const o=(e.style.animation||"").split(", "),n=o.filter(t?s=>s.indexOf(t)<0:s=>s.indexOf("__svelte")===-1),i=o.length-n.length;i&&(e.style.animation=n.join(", "),pt-=i,pt||hr())}function hr(){Jt(()=>{pt||(ft.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&T(t)}),ft.clear())})}let Qe;function Ye(e){Qe=e}function ni(){if(!Qe)throw new Error("Function called outside component initialization");return Qe}function mr(e){ni().$$.on_mount.push(e)}function St(){const e=ni();return(t,o,{cancelable:n=!1}={})=>{const i=e.$$.callbacks[t];if(i){const s=ei(t,o,{cancelable:n});return i.slice().forEach(r=>{r.call(e,s)}),!s.defaultPrevented}return!0}}function gr(e,t){const o=e.$$.callbacks[t.type];o&&o.slice().forEach(n=>n.call(this,t))}const Fe=[],It=[];let Ke=[];const Cn=[],_r=Promise.resolve();let Wt=!1;function br(){Wt||(Wt=!0,_r.then(oi))}function Pe(e){Ke.push(e)}const Rt=new Set;let Le=0;function oi(){if(Le!==0)return;const e=Qe;do{try{for(;Le<Fe.length;){const t=Fe[Le];Le++,Ye(t),wr(t.$$)}}catch(t){throw Fe.length=0,Le=0,t}for(Ye(null),Fe.length=0,Le=0;It.length;)It.pop()();for(let t=0;t<Ke.length;t+=1){const o=Ke[t];Rt.has(o)||(Rt.add(o),o())}Ke.length=0}while(Fe.length);for(;Cn.length;)Cn.pop()();Wt=!1,Rt.clear(),Ye(e)}function wr(e){if(e.fragment!==null){e.update(),se(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Pe)}}function kr(e){const t=[],o=[];Ke.forEach(n=>e.indexOf(n)===-1?t.push(n):o.push(n)),o.forEach(n=>n()),Ke=t}let Ge;function ii(){return Ge||(Ge=Promise.resolve(),Ge.then(()=>{Ge=null})),Ge}function dt(e,t,o){e.dispatchEvent(ei(`${t?"intro":"outro"}${o}`))}const at=new Set;let Ne;function oe(){Ne={r:0,c:[],p:Ne}}function ie(){Ne.r||se(Ne.c),Ne=Ne.p}function _(e,t){e&&e.i&&(at.delete(e),e.i(t))}function b(e,t,o,n){if(e&&e.o){if(at.has(e))return;at.add(e),Ne.c.push(()=>{at.delete(e),n&&(o&&e.d(1),n())}),e.o(t)}else n&&n()}const si={duration:0};function yr(e,t,o){const n={direction:"in"};let i=t(e,o,n),s=!1,r,l,a=0;function u(){r&&Ut(e,r)}function d(){const{delay:g=0,duration:p=300,easing:c=Yt,tick:f=Y,css:m}=i||si;m&&(r=ti(e,0,1,p,g,c,m,a++)),f(0,1);const E=Xo()+g,V=E+p;l&&l.abort(),s=!0,Pe(()=>dt(e,!0,"start")),l=Zo(I=>{if(s){if(I>=V)return f(1,0),dt(e,!0,"end"),u(),s=!1;if(I>=E){const q=c((I-E)/p);f(q,1-q)}}return s})}let h=!1;return{start(){h||(h=!0,Ut(e),$t(i)?(i=i(n),ii().then(d)):d())},invalidate(){h=!1},end(){s&&(u(),s=!1)}}}function $r(e,t,o){const n={direction:"out"};let i=t(e,o,n),s=!0,r;const l=Ne;l.r+=1;let a;function u(){const{delay:d=0,duration:h=300,easing:g=Yt,tick:p=Y,css:c}=i||si;c&&(r=ti(e,1,0,h,d,g,c));const f=Xo()+d,m=f+h;Pe(()=>dt(e,!1,"start")),"inert"in e&&(a=e.inert,e.inert=!0),Zo(E=>{if(s){if(E>=m)return p(0,1),dt(e,!1,"end"),--l.r||se(l.c),!1;if(E>=f){const V=g((E-f)/h);p(1-V,V)}}return s})}return $t(i)?ii().then(()=>{i=i(n),u()}):u(),{end(d){d&&"inert"in e&&(e.inert=a),d&&i.tick&&i.tick(1,0),s&&(r&&Ut(e,r),s=!1)}}}function ye(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Sr(e,t){e.d(1),t.delete(e.key)}function vt(e,t){b(e,1,1,()=>{t.delete(e.key)})}function tt(e,t,o,n,i,s,r,l,a,u,d,h){let g=e.length,p=s.length,c=g;const f={};for(;c--;)f[e[c].key]=c;const m=[],E=new Map,V=new Map,I=[];for(c=p;c--;){const K=h(i,s,c),X=o(K);let A=r.get(X);A?n&&I.push(()=>A.p(K,t)):(A=u(X,K),A.c()),E.set(X,m[c]=A),X in f&&V.set(X,Math.abs(c-f[X]))}const q=new Set,x=new Set;function F(K){_(K,1),K.m(l,d),r.set(K.key,K),d=K.first,p--}for(;g&&p;){const K=m[p-1],X=e[g-1],A=K.key,H=X.key;K===X?(d=K.first,g--,p--):E.has(H)?!r.has(A)||q.has(A)?F(K):x.has(H)?g--:V.get(A)>V.get(H)?(x.add(A),F(K)):(q.add(H),g--):(a(X,r),g--)}for(;g--;){const K=e[g];E.has(K.key)||a(K,r)}for(;p;)F(m[p-1]);return se(I),m}function v(e){e&&e.c()}function $(e,t,o){const{fragment:n,after_update:i}=e.$$;n&&n.m(t,o),Pe(()=>{const s=e.$$.on_mount.map(Go).filter($t);e.$$.on_destroy?e.$$.on_destroy.push(...s):se(s),e.$$.on_mount=[]}),i.forEach(Pe)}function S(e,t){const o=e.$$;o.fragment!==null&&(kr(o.after_update),se(o.on_destroy),o.fragment&&o.fragment.d(t),o.on_destroy=o.fragment=null,o.ctx=[])}function vr(e,t){e.$$.dirty[0]===-1&&(Fe.push(e),br(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function de(e,t,o,n,i,s,r,l=[-1]){const a=Qe;Ye(e);const u=e.$$={fragment:null,ctx:[],props:s,update:Y,not_equal:i,bound:On(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(a?a.$$.context:[])),callbacks:On(),dirty:l,skip_bound:!1,root:t.target||a.$$.root};r&&r(u.root);let d=!1;if(u.ctx=o?o(e,t.props||{},(h,g,...p)=>{const c=p.length?p[0]:g;return u.ctx&&i(u.ctx[h],u.ctx[h]=c)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](c),d&&vr(e,h)),g}):[],u.update(),d=!0,se(u.before_update),u.fragment=n?n(u.ctx):!1,t.target){if(t.hydrate){const h=cr(t.target);u.fragment&&u.fragment.l(h),h.forEach(T)}else u.fragment&&u.fragment.c();t.intro&&_(e.$$.fragment),$(e,t.target,t.anchor),oi()}Ye(a)}class he{constructor(){ee(this,"$$");ee(this,"$$set")}$destroy(){S(this,1),this.$destroy=Y}$on(t,o){if(!$t(o))return Y;const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(o),()=>{const i=n.indexOf(o);i!==-1&&n.splice(i,1)}}$set(t){this.$$set&&!rr(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Er="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Er);function Tr(e){let t,o;return{c(){t=qt("svg"),o=qt("use"),An(o,"xlink:href",e[0]),k(t,"style",e[2]),k(t,"class",e[1])},m(n,i){B(n,t,i),N(t,o)},p(n,[i]){i&1&&An(o,"xlink:href",n[0]),i&4&&k(t,"style",n[2]),i&2&&k(t,"class",n[1])},i:Y,o:Y,d(n){n&&T(t)}}}function Or(e,t,o){let{icon:n}=t,{className:i=void 0}=t,{style:s=void 0}=t;return e.$$set=r=>{"icon"in r&&o(0,n=r.icon),"className"in r&&o(1,i=r.className),"style"in r&&o(2,s=r.style)},[n,i,s]}class ve extends he{constructor(t){super(),de(this,t,Or,Tr,pe,{icon:0,className:1,style:2})}}const Br=e=>({focus:e&1}),Rn=e=>({focus:e[0]});function Pn(e,t,o){const n=e.slice();return n[13]=t[o],n}function Dn(e){let t,o,n,i,s,r,l;return o=new ve({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){t=R("div"),v(o.$$.fragment),n=L(),i=R("input"),k(i,"placeholder",e[4]),k(i,"class","b3-text-field fn__block b3-form__icon-input"),k(t,"class","b3-form__icon")},m(a,u){B(a,t,u),$(o,t,null),N(t,n),N(t,i),re(i,e[1]),s=!0,r||(l=[J(i,"input",e[9]),J(i,"change",e[5])],r=!0)},p(a,u){(!s||u&16)&&k(i,"placeholder",a[4]),u&2&&i.value!==a[1]&&re(i,a[1])},i(a){s||(_(o.$$.fragment,a),s=!0)},o(a){b(o.$$.fragment,a),s=!1},d(a){a&&T(t),S(o),r=!1,se(l)}}}function Mn(e,t){let o,n,i,s,r=t[13].text+"",l,a,u,d,h;n=new ve({props:{icon:t[13].icon,className:"b3-list-item__graphic"}});function g(){return t[10](t[13])}function p(){return t[11](t[13])}return{key:e,first:null,c(){o=R("li"),v(n.$$.fragment),i=L(),s=R("span"),l=L(),k(s,"class","b3-list-item__text svelte-15drd7h"),k(o,"role","button"),k(o,"data-name",a=t[13].name),k(o,"class","b3-list-item"),C(o,"b3-list-item--focus",t[13].key===t[0]),this.first=o},m(c,f){B(c,o,f),$(n,o,null),N(o,i),N(o,s),s.innerHTML=r,N(o,l),u=!0,d||(h=[J(o,"click",g),J(o,"keyup",p)],d=!0)},p(c,f){t=c;const m={};f&4&&(m.icon=t[13].icon),n.$set(m),(!u||f&4)&&r!==(r=t[13].text+"")&&(s.innerHTML=r),(!u||f&4&&a!==(a=t[13].name))&&k(o,"data-name",a),(!u||f&5)&&C(o,"b3-list-item--focus",t[13].key===t[0])},i(c){u||(_(n.$$.fragment,c),u=!0)},o(c){b(n.$$.fragment,c),u=!1},d(c){c&&T(o),S(n),d=!1,se(h)}}}function Ar(e){let t;return{c(){t=ge("Container")},m(o,n){B(o,t,n)},d(o){o&&T(t)}}}function Nr(e){let t,o,n,i=[],s=new Map,r,l,a=e[3]&&Dn(e),u=ye(e[2]);const d=c=>c[13].key;for(let c=0;c<u.length;c+=1){let f=Pn(e,u,c),m=d(f);s.set(m,i[c]=Mn(m,f))}const h=e[8].default,g=le(h,e,e[7],Rn),p=g||Ar();return{c(){t=R("div"),o=R("ul"),a&&a.c(),n=L();for(let c=0;c<i.length;c+=1)i[c].c();r=L(),p&&p.c(),k(o,"class","b3-tab-bar b3-list b3-list--background"),k(t,"class","fn__flex-1 fn__flex config__panel")},m(c,f){B(c,t,f),N(t,o),a&&a.m(o,null),N(o,n);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(o,null);N(t,r),p&&p.m(t,null),l=!0},p(c,[f]){c[3]?a?(a.p(c,f),f&8&&_(a,1)):(a=Dn(c),a.c(),_(a,1),a.m(o,n)):a&&(oe(),b(a,1,1,()=>{a=null}),ie()),f&69&&(u=ye(c[2]),oe(),i=tt(i,f,d,1,c,u,s,o,vt,Mn,null,Pn),ie()),g&&g.p&&(!l||f&129)&&ce(g,h,c,c[7],l?ue(h,c[7],f,Br):fe(c[7]),Rn)},i(c){if(!l){_(a);for(let f=0;f<u.length;f+=1)_(i[f]);_(p,c),l=!0}},o(c){b(a);for(let f=0;f<i.length;f+=1)b(i[f]);b(p,c),l=!1},d(c){c&&T(t),a&&a.d();for(let f=0;f<i.length;f+=1)i[f].d();p&&p.d(c)}}}function Cr(e,t,o){let{$$slots:n={},$$scope:i}=t,{panels:s}=t,{focus:r}=t,{searchEnable:l=!1}=t,{searchPlaceholder:a=""}=t,{searchValue:u=""}=t;const d=St();function h(){d("search-changed",{value:u})}function g(m){d("changed",{key:m}),o(0,r=m)}function p(){u=this.value,o(1,u)}const c=m=>g(m.key),f=m=>g(m.key);return e.$$set=m=>{"panels"in m&&o(2,s=m.panels),"focus"in m&&o(0,r=m.focus),"searchEnable"in m&&o(3,l=m.searchEnable),"searchPlaceholder"in m&&o(4,a=m.searchPlaceholder),"searchValue"in m&&o(1,u=m.searchValue),"$$scope"in m&&o(7,i=m.$$scope)},[r,u,s,l,a,h,g,i,n,p,c,f]}class Rr extends he{constructor(t){super(),de(this,t,Cr,Nr,pe,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function Pr(e){let t,o;const n=e[3].default,i=le(n,e,e[2],null);return{c(){t=R("div"),i&&i.c(),k(t,"data-name",e[1]),k(t,"class","config__tab-container"),C(t,"fn__none",!e[0])},m(s,r){B(s,t,r),i&&i.m(t,null),o=!0},p(s,[r]){i&&i.p&&(!o||r&4)&&ce(i,n,s,s[2],o?ue(n,s[2],r,null):fe(s[2]),null),(!o||r&2)&&k(t,"data-name",s[1]),(!o||r&1)&&C(t,"fn__none",!s[0])},i(s){o||(_(i,s),o=!0)},o(s){b(i,s),o=!1},d(s){s&&T(t),i&&i.d(s)}}}function Dr(e,t,o){let{$$slots:n={},$$scope:i}=t,{display:s=!0}=t,{name:r=""}=t;return e.$$set=l=>{"display"in l&&o(0,s=l.display),"name"in l&&o(1,r=l.name),"$$scope"in l&&o(2,i=l.$$scope)},[s,r,i,n]}class Pt extends he{constructor(t){super(),de(this,t,Dr,Pr,pe,{display:0,name:1})}}const Mr=e=>({}),Ln=e=>({}),Lr=e=>({}),Fn=e=>({});function jn(e){let t,o;const n=e[6].icon,i=le(n,e,e[5],Fn);return{c(){t=R("span"),i&&i.c(),k(t,"class","item__icon")},m(s,r){B(s,t,r),i&&i.m(t,null),o=!0},p(s,r){i&&i.p&&(!o||r&32)&&ce(i,n,s,s[5],o?ue(n,s[5],r,Lr):fe(s[5]),Fn)},i(s){o||(_(i,s),o=!0)},o(s){b(i,s),o=!1},d(s){s&&T(t),i&&i.d(s)}}}function Fr(e){let t;return{c(){t=ge("text")},m(o,n){B(o,t,n)},d(o){o&&T(t)}}}function jr(e){let t,o,n,i,s,r,l,a,u,d,h=e[3].icon&&jn(e);const g=e[6].text,p=le(g,e,e[5],Ln),c=p||Fr();return{c(){t=R("div"),o=R("span"),n=L(),h&&h.c(),i=L(),s=R("span"),c&&c.c(),r=L(),l=R("span"),k(o,"class","fn__flex-1"),k(s,"class","item__text"),k(l,"class","fn__flex-1"),k(t,"role","button"),k(t,"data-type",e[0]),k(t,"class","item item--full"),C(t,"item--focus",e[1])},m(f,m){B(f,t,m),N(t,o),N(t,n),h&&h.m(t,null),N(t,i),N(t,s),c&&c.m(s,null),N(t,r),N(t,l),a=!0,u||(d=J(t,"click",e[2]),u=!0)},p(f,[m]){f[3].icon?h?(h.p(f,m),m&8&&_(h,1)):(h=jn(f),h.c(),_(h,1),h.m(t,i)):h&&(oe(),b(h,1,1,()=>{h=null}),ie()),p&&p.p&&(!a||m&32)&&ce(p,g,f,f[5],a?ue(g,f[5],m,Mr):fe(f[5]),Ln),(!a||m&1)&&k(t,"data-type",f[0]),(!a||m&2)&&C(t,"item--focus",f[1])},i(f){a||(_(h),_(c,f),a=!0)},o(f){b(h),b(c,f),a=!1},d(f){f&&T(t),h&&h.d(),c&&c.d(f),u=!1,d()}}}function qr(e,t,o){let{$$slots:n={},$$scope:i}=t;const s=ar(n);let{key:r}=t,{name:l=""}=t,{focus:a=!1}=t;const u=St();function d(){a||u("changed",{key:r})}return e.$$set=h=>{"key"in h&&o(4,r=h.key),"name"in h&&o(0,l=h.name),"focus"in h&&o(1,a=h.focus),"$$scope"in h&&o(5,i=h.$$scope)},[l,a,d,s,r,i,n]}class Kr extends he{constructor(t){super(),de(this,t,qr,jr,pe,{key:4,name:0,focus:1})}}const Ur=e=>({focus:e&1}),qn=e=>({focus:e[0]});function Kn(e,t,o){const n=e.slice();return n[5]=t[o],n}function Ir(e){let t,o=e[5].icon+"",n;return{c(){t=new et(!1),n=Se(),t.a=n},m(i,s){t.m(o,i,s),B(i,n,s)},p(i,s){s&2&&o!==(o=i[5].icon+"")&&t.p(o)},i:Y,o:Y,d(i){i&&(T(n),t.d())}}}function Wr(e){let t,o;return t=new ve({props:{icon:e[5].icon}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&2&&(s.icon=n[5].icon),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Vr(e){let t,o,n,i,s,r;const l=[Wr,Ir],a=[];function u(d,h){return h&2&&(o=null),o==null&&(o=!!d[5].icon.startsWith("#")),o?0:1}return n=u(e,-1),i=a[n]=l[n](e),{c(){t=R("span"),i.c(),s=L(),k(t,"slot","icon")},m(d,h){B(d,t,h),a[n].m(t,null),N(t,s),r=!0},p(d,h){let g=n;n=u(d,h),n===g?a[n].p(d,h):(oe(),b(a[g],1,1,()=>{a[g]=null}),ie(),i=a[n],i?i.p(d,h):(i=a[n]=l[n](d),i.c()),_(i,1),i.m(t,s))},i(d){r||(_(i),r=!0)},o(d){b(i),r=!1},d(d){d&&T(t),a[n].d()}}}function Hr(e){let t,o,n=e[5].text+"",i;return{c(){t=R("span"),o=new et(!1),i=L(),o.a=i,k(t,"slot","text")},m(s,r){B(s,t,r),o.m(n,t),N(t,i)},p(s,r){r&2&&n!==(n=s[5].text+"")&&o.p(n)},d(s){s&&T(t)}}}function Un(e,t){let o,n,i;return n=new Kr({props:{key:t[5].key,name:t[5].name,focus:t[5].key===t[0],$$slots:{text:[Hr],icon:[Vr]},$$scope:{ctx:t}}}),n.$on("changed",t[2]),{key:e,first:null,c(){o=Se(),v(n.$$.fragment),this.first=o},m(s,r){B(s,o,r),$(n,s,r),i=!0},p(s,r){t=s;const l={};r&2&&(l.key=t[5].key),r&2&&(l.name=t[5].name),r&3&&(l.focus=t[5].key===t[0]),r&18&&(l.$$scope={dirty:r,ctx:t}),n.$set(l)},i(s){i||(_(n.$$.fragment,s),i=!0)},o(s){b(n.$$.fragment,s),i=!1},d(s){s&&T(o),S(n,s)}}}function zr(e){let t;return{c(){t=ge("Container")},m(o,n){B(o,t,n)},d(o){o&&T(t)}}}function Gr(e){let t,o,n=[],i=new Map,s,r,l,a=ye(e[1]);const u=p=>p[5].key;for(let p=0;p<a.length;p+=1){let c=Kn(e,a,p),f=u(c);i.set(f,n[p]=Un(f,c))}const d=e[3].default,h=le(d,e,e[4],qn),g=h||zr();return{c(){t=R("div"),o=R("div");for(let p=0;p<n.length;p+=1)n[p].c();s=L(),r=R("div"),g&&g.c(),k(o,"class","layout-tab-bar fn__flex"),k(r,"class","fn__flex-1"),k(t,"class","fn__flex-column"),Oe(t,"height","100%")},m(p,c){B(p,t,c),N(t,o);for(let f=0;f<n.length;f+=1)n[f]&&n[f].m(o,null);N(t,s),N(t,r),g&&g.m(r,null),l=!0},p(p,[c]){c&7&&(a=ye(p[1]),oe(),n=tt(n,c,u,1,p,a,i,o,vt,Un,null,Kn),ie()),h&&h.p&&(!l||c&17)&&ce(h,d,p,p[4],l?ue(d,p[4],c,Ur):fe(p[4]),qn)},i(p){if(!l){for(let c=0;c<a.length;c+=1)_(n[c]);_(g,p),l=!0}},o(p){for(let c=0;c<n.length;c+=1)b(n[c]);b(g,p),l=!1},d(p){p&&T(t);for(let c=0;c<n.length;c+=1)n[c].d();g&&g.d(p)}}}function Yr(e,t,o){let{$$slots:n={},$$scope:i}=t,{tabs:s}=t,{focus:r}=t;function l(a){o(0,r=a.detail.key)}return e.$$set=a=>{"tabs"in a&&o(1,s=a.tabs),"focus"in a&&o(0,r=a.focus),"$$scope"in a&&o(4,i=a.$$scope)},[r,s,l,n,i]}class ri extends he{constructor(t){super(),de(this,t,Yr,Gr,pe,{tabs:1,focus:0})}}const Jr=e=>({}),In=e=>({}),Xr=e=>({}),Wn=e=>({}),Qr=e=>({}),Vn=e=>({}),Zr=e=>({}),Hn=e=>({});function xr(e){let t,o;return{c(){t=new et(!1),o=Se(),t.a=o},m(n,i){t.m(e[0],n,i),B(n,o,i)},p(n,i){i&1&&t.p(n[0])},d(n){n&&(T(o),t.d())}}}function ea(e){let t,o;return{c(){t=new et(!1),o=Se(),t.a=o},m(n,i){t.m(e[1],n,i),B(n,o,i)},p(n,i){i&2&&t.p(n[1])},d(n){n&&(T(o),t.d())}}}function zn(e){let t,o,n;const i=e[4].input,s=le(i,e,e[3],Wn);return{c(){t=R("div"),o=L(),s&&s.c(),k(t,"class","fn__hr")},m(r,l){B(r,t,l),B(r,o,l),s&&s.m(r,l),n=!0},p(r,l){s&&s.p&&(!n||l&8)&&ce(s,i,r,r[3],n?ue(i,r[3],l,Xr):fe(r[3]),Wn)},i(r){n||(_(s,r),n=!0)},o(r){b(s,r),n=!1},d(r){r&&(T(t),T(o)),s&&s.d(r)}}}function Gn(e){let t,o,n;const i=e[4].input,s=le(i,e,e[3],In);return{c(){t=R("span"),o=L(),s&&s.c(),k(t,"class","fn__space")},m(r,l){B(r,t,l),B(r,o,l),s&&s.m(r,l),n=!0},p(r,l){s&&s.p&&(!n||l&8)&&ce(s,i,r,r[3],n?ue(i,r[3],l,Jr):fe(r[3]),In)},i(r){n||(_(s,r),n=!0)},o(r){b(s,r),n=!1},d(r){r&&(T(t),T(o)),s&&s.d(r)}}}function ta(e){let t,o,n,i,s,r,l;const a=e[4].title,u=le(a,e,e[3],Hn),d=u||xr(e),h=e[4].text,g=le(h,e,e[3],Vn),p=g||ea(e);let c=e[2]&&zn(e),f=!e[2]&&Gn(e);return{c(){t=R("label"),o=R("div"),d&&d.c(),n=L(),i=R("div"),p&&p.c(),s=L(),c&&c.c(),r=L(),f&&f.c(),k(i,"class","b3-label__text"),k(o,"class","fn__flex-1 svelte-2m76cy"),C(o,"visible",e[2]),k(t,"class","fn__flex b3-label")},m(m,E){B(m,t,E),N(t,o),d&&d.m(o,null),N(o,n),N(o,i),p&&p.m(i,null),N(o,s),c&&c.m(o,null),N(t,r),f&&f.m(t,null),l=!0},p(m,[E]){u?u.p&&(!l||E&8)&&ce(u,a,m,m[3],l?ue(a,m[3],E,Zr):fe(m[3]),Hn):d&&d.p&&(!l||E&1)&&d.p(m,l?E:-1),g?g.p&&(!l||E&8)&&ce(g,h,m,m[3],l?ue(h,m[3],E,Qr):fe(m[3]),Vn):p&&p.p&&(!l||E&2)&&p.p(m,l?E:-1),m[2]?c?(c.p(m,E),E&4&&_(c,1)):(c=zn(m),c.c(),_(c,1),c.m(o,null)):c&&(oe(),b(c,1,1,()=>{c=null}),ie()),(!l||E&4)&&C(o,"visible",m[2]),m[2]?f&&(oe(),b(f,1,1,()=>{f=null}),ie()):f?(f.p(m,E),E&4&&_(f,1)):(f=Gn(m),f.c(),_(f,1),f.m(t,null))},i(m){l||(_(d,m),_(p,m),_(c),_(f),l=!0)},o(m){b(d,m),b(p,m),b(c),b(f),l=!1},d(m){m&&T(t),d&&d.d(m),p&&p.d(m),c&&c.d(),f&&f.d()}}}function na(e,t,o){let{$$slots:n={},$$scope:i}=t,{title:s=""}=t,{text:r=""}=t,{block:l=!1}=t;return e.$$set=a=>{"title"in a&&o(0,s=a.title),"text"in a&&o(1,r=a.text),"block"in a&&o(2,l=a.block),"$$scope"in a&&o(3,i=a.$$scope)},[s,r,l,i,n]}class ne extends he{constructor(t){super(),de(this,t,na,ta,pe,{title:0,text:1,block:2})}}var U=(e=>(e[e.checkbox=0]="checkbox",e[e.text=1]="text",e[e.number=2]="number",e[e.slider=3]="slider",e[e.button=4]="button",e[e.select=5]="select",e[e.textarea=6]="textarea",e))(U||{});function Yn(e,t,o){const n=e.slice();return n[19]=t[o],n}function oa(e){let t,o,n;return{c(){t=R("textarea"),t.disabled=e[2],k(t,"class","b3-text-field"),k(t,"placeholder",e[5]),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),Oe(t,"height",e[8]>0?`${e[8]}px`:void 0)},m(i,s){B(i,t,s),re(t,e[0]),o||(n=[J(t,"input",e[17]),J(t,"change",e[10])],o=!0)},p(i,s){s&4&&(t.disabled=i[2]),s&32&&k(t,"placeholder",i[5]),s&65&&re(t,i[0]),s&8&&C(t,"fn__block",i[3]),s&24&&C(t,"fn__size200",!i[3]&&i[4]),s&256&&Oe(t,"height",i[8]>0?`${i[8]}px`:void 0)},d(i){i&&T(t),o=!1,se(n)}}}function ia(e){let t,o=[],n=new Map,i,s,r=ye(e[6]);const l=a=>a[19].key;for(let a=0;a<r.length;a+=1){let u=Yn(e,r,a),d=l(u);n.set(d,o[a]=Jn(d,u))}return{c(){t=R("select");for(let a=0;a<o.length;a+=1)o[a].c();t.disabled=e[2],k(t,"class","b3-select"),e[0]===void 0&&Pe(()=>e[16].call(t)),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),C(t,"fn__flex-center",!e[3])},m(a,u){B(a,t,u);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(t,null);Nn(t,e[0],!0),i||(s=[J(t,"change",e[16]),J(t,"change",e[10])],i=!0)},p(a,u){u&64&&(r=ye(a[6]),o=tt(o,u,l,1,a,r,n,t,Sr,Jn,null,Yn)),u&4&&(t.disabled=a[2]),u&65&&Nn(t,a[0]),u&8&&C(t,"fn__block",a[3]),u&24&&C(t,"fn__size200",!a[3]&&a[4]),u&8&&C(t,"fn__flex-center",!a[3])},d(a){a&&T(t);for(let u=0;u<o.length;u+=1)o[u].d();i=!1,se(s)}}}function sa(e){let t,o,n,i;return{c(){t=R("button"),o=ge(e[0]),t.disabled=e[2],k(t,"class","b3-button b3-button--outline"),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),C(t,"fn__flex-center",!e[3])},m(s,r){B(s,t,r),N(t,o),n||(i=J(t,"click",e[9]),n=!0)},p(s,r){r&1&&De(o,s[0]),r&4&&(t.disabled=s[2]),r&8&&C(t,"fn__block",s[3]),r&24&&C(t,"fn__size200",!s[3]&&s[4]),r&8&&C(t,"fn__flex-center",!s[3])},d(s){s&&T(t),n=!1,i()}}}function ra(e){let t,o,n,i,s,r;return{c(){t=R("input"),t.disabled=e[2],k(t,"class","b3-slider svelte-edt8og"),k(t,"type","range"),k(t,"min",o=e[7].min),k(t,"max",n=e[7].max),k(t,"step",i=e[7].step),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4])},m(l,a){B(l,t,a),re(t,e[0]),s||(r=[J(t,"change",e[15]),J(t,"input",e[15]),J(t,"change",e[10])],s=!0)},p(l,a){a&4&&(t.disabled=l[2]),a&128&&o!==(o=l[7].min)&&k(t,"min",o),a&128&&n!==(n=l[7].max)&&k(t,"max",n),a&128&&i!==(i=l[7].step)&&k(t,"step",i),a&65&&re(t,l[0]),a&8&&C(t,"fn__block",l[3]),a&24&&C(t,"fn__size200",!l[3]&&l[4])},d(l){l&&T(t),s=!1,se(r)}}}function aa(e){let t,o,n,i,s,r;return{c(){t=R("input"),t.disabled=e[2],k(t,"class","b3-text-field"),k(t,"type","number"),k(t,"placeholder",e[5]),k(t,"min",o=e[7].min),k(t,"max",n=e[7].max),k(t,"step",i=e[7].step),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),C(t,"fn__flex-center",!e[3])},m(l,a){B(l,t,a),re(t,e[0]),s||(r=[J(t,"input",e[14]),J(t,"change",e[10])],s=!0)},p(l,a){a&4&&(t.disabled=l[2]),a&32&&k(t,"placeholder",l[5]),a&128&&o!==(o=l[7].min)&&k(t,"min",o),a&128&&n!==(n=l[7].max)&&k(t,"max",n),a&128&&i!==(i=l[7].step)&&k(t,"step",i),a&65&&Kt(t.value)!==l[0]&&re(t,l[0]),a&8&&C(t,"fn__block",l[3]),a&24&&C(t,"fn__size200",!l[3]&&l[4]),a&8&&C(t,"fn__flex-center",!l[3])},d(l){l&&T(t),s=!1,se(r)}}}function la(e){let t,o,n;return{c(){t=R("input"),t.disabled=e[2],k(t,"class","b3-text-field"),k(t,"placeholder",e[5]),C(t,"fn__block",e[3]),C(t,"fn__size200",!e[3]&&e[4]),C(t,"fn__flex-center",!e[3])},m(i,s){B(i,t,s),re(t,e[0]),o||(n=[J(t,"input",e[13]),J(t,"change",e[10])],o=!0)},p(i,s){s&4&&(t.disabled=i[2]),s&32&&k(t,"placeholder",i[5]),s&65&&t.value!==i[0]&&re(t,i[0]),s&8&&C(t,"fn__block",i[3]),s&24&&C(t,"fn__size200",!i[3]&&i[4]),s&8&&C(t,"fn__flex-center",!i[3])},d(i){i&&T(t),o=!1,se(n)}}}function ua(e){let t,o,n;return{c(){t=R("input"),t.disabled=e[2],k(t,"class","b3-switch svelte-edt8og"),k(t,"type","checkbox"),C(t,"fn__block",e[3]),C(t,"fn__flex-center",!e[3])},m(i,s){B(i,t,s),t.checked=e[0],o||(n=[J(t,"change",e[12]),J(t,"change",e[10])],o=!0)},p(i,s){s&4&&(t.disabled=i[2]),s&65&&(t.checked=i[0]),s&8&&C(t,"fn__block",i[3]),s&8&&C(t,"fn__flex-center",!i[3])},d(i){i&&T(t),o=!1,se(n)}}}function Jn(e,t){let o,n=t[19].text+"",i,s;return{key:e,first:null,c(){o=R("option"),i=ge(n),o.__value=s=t[19].key,re(o,o.__value),this.first=o},m(r,l){B(r,o,l),N(o,i)},p(r,l){t=r,l&64&&n!==(n=t[19].text+"")&&De(i,n),l&64&&s!==(s=t[19].key)&&(o.__value=s,re(o,o.__value))},d(r){r&&T(o)}}}function ca(e){let t;function o(s,r){if(s[1]===U.checkbox)return ua;if(s[1]===U.text)return la;if(s[1]===U.number)return aa;if(s[1]===U.slider)return ra;if(s[1]===U.button)return sa;if(s[1]===U.select)return ia;if(s[1]===U.textarea)return oa}let n=o(e),i=n&&n(e);return{c(){i&&i.c(),t=Se()},m(s,r){i&&i.m(s,r),B(s,t,r)},p(s,[r]){n===(n=o(s))&&i?i.p(s,r):(i&&i.d(1),i=n&&n(s),i&&(i.c(),i.m(t.parentNode,t)))},i:Y,o:Y,d(s){s&&T(t),i&&i.d(s)}}}function fa(e,t,o){let{type:n}=t,{settingKey:i}=t,{settingValue:s}=t,{disabled:r=!1}=t,{block:l=!1}=t,{normal:a=!0}=t,{placeholder:u=""}=t,{options:d=[]}=t,{limits:h={min:0,max:100,step:1}}=t,{height:g=0}=t;const p=St();function c(F){p("clicked",{event:F})}function f(F){p("changed",{key:i,value:s,event:F})}function m(){s=this.checked,o(0,s),o(6,d)}function E(){s=this.value,o(0,s),o(6,d)}function V(){s=Kt(this.value),o(0,s),o(6,d)}function I(){s=Kt(this.value),o(0,s),o(6,d)}function q(){s=fr(this),o(0,s),o(6,d)}function x(){s=this.value,o(0,s),o(6,d)}return e.$$set=F=>{"type"in F&&o(1,n=F.type),"settingKey"in F&&o(11,i=F.settingKey),"settingValue"in F&&o(0,s=F.settingValue),"disabled"in F&&o(2,r=F.disabled),"block"in F&&o(3,l=F.block),"normal"in F&&o(4,a=F.normal),"placeholder"in F&&o(5,u=F.placeholder),"options"in F&&o(6,d=F.options),"limits"in F&&o(7,h=F.limits),"height"in F&&o(8,g=F.height)},[s,n,r,l,a,u,d,h,g,c,f,i,m,E,V,I,q,x]}class G extends he{constructor(t){super(),de(this,t,fa,ca,pe,{type:1,settingKey:11,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8})}}function pa(e){let t,o,n,i,s;const r=e[2].default,l=le(r,e,e[1],null);return{c(){t=R("div"),o=new et(!1),n=L(),i=R("div"),l&&l.c(),o.a=n,k(i,"class","config-query"),k(t,"class","b3-label")},m(a,u){B(a,t,u),o.m(e[0],t),N(t,n),N(t,i),l&&l.m(i,null),s=!0},p(a,[u]){(!s||u&1)&&o.p(a[0]),l&&l.p&&(!s||u&2)&&ce(l,r,a,a[1],s?ue(r,a[1],u,null):fe(a[1]),null)},i(a){s||(_(l,a),s=!0)},o(a){b(l,a),s=!1},d(a){a&&T(t),l&&l.d(a)}}}function da(e,t,o){let{$$slots:n={},$$scope:i}=t,{title:s}=t;return e.$$set=r=>{"title"in r&&o(0,s=r.title),"$$scope"in r&&o(1,i=r.$$scope)},[s,i,n]}class Xt extends he{constructor(t){super(),de(this,t,da,pa,pe,{title:0})}}const ha=e=>({}),Xn=e=>({}),ma=e=>({}),Qn=e=>({}),ga=e=>({}),Zn=e=>({});function _a(e){let t,o,n,i,s,r,l,a,u;const d=e[3].icon,h=le(d,e,e[2],Zn),g=e[3].title,p=le(g,e,e[2],Qn),c=e[3].input,f=le(c,e,e[2],Xn);return{c(){t=R("label"),h&&h.c(),o=L(),n=R("span"),i=L(),s=R("div"),p&&p.c(),r=L(),l=R("span"),a=L(),f&&f.c(),k(n,"class","fn__space"),k(s,"class","fn__flex-1"),k(l,"class","fn__space"),Oe(t,"min-width",e[0]),Oe(t,"margin-right",e[1]),k(t,"class","fn__flex svelte-1l7osn9")},m(m,E){B(m,t,E),h&&h.m(t,null),N(t,o),N(t,n),N(t,i),N(t,s),p&&p.m(s,null),N(t,r),N(t,l),N(t,a),f&&f.m(t,null),u=!0},p(m,[E]){h&&h.p&&(!u||E&4)&&ce(h,d,m,m[2],u?ue(d,m[2],E,ga):fe(m[2]),Zn),p&&p.p&&(!u||E&4)&&ce(p,g,m,m[2],u?ue(g,m[2],E,ma):fe(m[2]),Qn),f&&f.p&&(!u||E&4)&&ce(f,c,m,m[2],u?ue(c,m[2],E,ha):fe(m[2]),Xn),(!u||E&1)&&Oe(t,"min-width",m[0]),(!u||E&2)&&Oe(t,"margin-right",m[1])},i(m){u||(_(h,m),_(p,m),_(f,m),u=!0)},o(m){b(h,m),b(p,m),b(f,m),u=!1},d(m){m&&T(t),h&&h.d(m),p&&p.d(m),f&&f.d(m)}}}function ba(e,t,o){let{$$slots:n={},$$scope:i}=t,{minWidth:s="24em"}=t,{marginRight:r="2em"}=t;return e.$$set=l=>{"minWidth"in l&&o(0,s=l.minWidth),"marginRight"in l&&o(1,r=l.marginRight),"$$scope"in l&&o(2,i=l.$$scope)},[s,r,i,n]}class Ce extends he{constructor(t){super(),de(this,t,ba,_a,pe,{minWidth:0,marginRight:1})}}var be=(e=>(e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e))(be||{}),Z=(e=>(e.click="click",e.dblclick="dblclick",e.mousedown="mousedown",e.mouseup="mouseup",e.mouseenter="mouseenter",e.mouseleave="mouseleave",e.mousewheel="mousewheel",e.mouseover="mouseover",e.mousemove="mousemove",e.mouseout="mouseout",e))(Z||{});function xn(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[ya],title:[ka],default:[wa]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4195329&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function wa(e){let t,o;return t=new ve({props:{icon:"#iconKeymap",className:"svg"}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function ka(e){let t;return{c(){t=R("kbd"),t.textContent="Ctrl",k(t,"slot","title")},m(o,n){B(o,t,n)},p:Y,d(o){o&&T(t)}}}function ya(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[10],type:U.checkbox,settingKey:"ctrlKey",settingValue:e[0].ctrlKey}}),t.$on("changed",e[20]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&1024&&(s.disabled=n[10]),i&1&&(s.settingValue=n[0].ctrlKey),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function eo(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[va],title:[Sa],default:[$a]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4196353&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function $a(e){let t,o;return t=new ve({props:{icon:"#iconKeymap",className:"svg"}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Sa(e){let t;return{c(){t=R("kbd"),t.textContent="Shift",k(t,"slot","title")},m(o,n){B(o,t,n)},p:Y,d(o){o&&T(t)}}}function va(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[11],type:U.checkbox,settingKey:"shiftKey",settingValue:e[0].shiftKey}}),t.$on("changed",e[20]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&2048&&(s.disabled=n[11]),i&1&&(s.settingValue=n[0].shiftKey),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function to(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[Oa],title:[Ta],default:[Ea]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4198401&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ea(e){let t,o;return t=new ve({props:{icon:"#iconKeymap",className:"svg"}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ta(e){let t;return{c(){t=R("kbd"),t.textContent="Alt",k(t,"slot","title")},m(o,n){B(o,t,n)},p:Y,d(o){o&&T(t)}}}function Oa(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[12],type:U.checkbox,settingKey:"altKey",settingValue:e[0].altKey}}),t.$on("changed",e[20]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&4096&&(s.disabled=n[12]),i&1&&(s.settingValue=n[0].altKey),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function no(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[Na],title:[Aa],default:[Ba]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4202497&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ba(e){let t,o;return t=new ve({props:{icon:"#iconKeymap",className:"svg"}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Aa(e){let t;return{c(){t=R("kbd"),t.textContent="Meta",k(t,"slot","title")},m(o,n){B(o,t,n)},p:Y,d(o){o&&T(t)}}}function Na(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[13],type:U.checkbox,settingKey:"metaKey",settingValue:e[0].metaKey}}),t.$on("changed",e[20]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&8192&&(s.disabled=n[13]),i&1&&(s.settingValue=n[0].metaKey),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function oo(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[Pa],title:[Ra],default:[Ca]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4538369&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ca(e){let t,o;return t=new ve({props:{icon:"#iconSelectText",className:"svg"}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ra(e){let t,o;return{c(){t=R("span"),o=ge(e[16]),k(t,"slot","title")},m(n,i){B(n,t,i),N(t,o)},p(n,i){i&65536&&De(o,n[16])},d(n){n&&T(t)}}}function Pa(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[14],type:U.select,settingKey:"button",settingValue:e[0].button,options:e[18]}}),t.$on("changed",e[20]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&16384&&(s.disabled=n[14]),i&1&&(s.settingValue=n[0].button),i&262144&&(s.options=n[18]),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function io(e){let t,o;return t=new Ce({props:{minWidth:e[2],marginRight:e[3],$$slots:{input:[La],title:[Ma],default:[Da]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&4&&(s.minWidth=n[2]),i&8&&(s.marginRight=n[3]),i&4882433&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Da(e){let t,o;return t=new ve({props:{icon:"#iconSelectText",className:"svg"}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ma(e){let t,o;return{c(){t=R("span"),o=ge(e[17]),k(t,"slot","title")},m(n,i){B(n,t,i),N(t,o)},p(n,i){i&131072&&De(o,n[17])},d(n){n&&T(t)}}}function La(e){let t,o;return t=new G({props:{slot:"input",normal:!1,disabled:e[15],type:U.select,settingKey:"type",settingValue:e[0].type,options:e[19]}}),t.$on("changed",e[20]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i&32768&&(s.disabled=n[15]),i&1&&(s.settingValue=n[0].type),i&524288&&(s.options=n[19]),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Fa(e){let t,o,n,i,s,r,l,a=e[4]&&xn(e),u=e[5]&&eo(e),d=e[6]&&to(e),h=e[7]&&no(e),g=e[8]&&oo(e),p=e[9]&&io(e);return{c(){a&&a.c(),t=L(),u&&u.c(),o=L(),d&&d.c(),n=L(),h&&h.c(),i=L(),g&&g.c(),s=L(),p&&p.c(),r=Se()},m(c,f){a&&a.m(c,f),B(c,t,f),u&&u.m(c,f),B(c,o,f),d&&d.m(c,f),B(c,n,f),h&&h.m(c,f),B(c,i,f),g&&g.m(c,f),B(c,s,f),p&&p.m(c,f),B(c,r,f),l=!0},p(c,f){c[4]?a?(a.p(c,f),f&16&&_(a,1)):(a=xn(c),a.c(),_(a,1),a.m(t.parentNode,t)):a&&(oe(),b(a,1,1,()=>{a=null}),ie()),c[5]?u?(u.p(c,f),f&32&&_(u,1)):(u=eo(c),u.c(),_(u,1),u.m(o.parentNode,o)):u&&(oe(),b(u,1,1,()=>{u=null}),ie()),c[6]?d?(d.p(c,f),f&64&&_(d,1)):(d=to(c),d.c(),_(d,1),d.m(n.parentNode,n)):d&&(oe(),b(d,1,1,()=>{d=null}),ie()),c[7]?h?(h.p(c,f),f&128&&_(h,1)):(h=no(c),h.c(),_(h,1),h.m(i.parentNode,i)):h&&(oe(),b(h,1,1,()=>{h=null}),ie()),c[8]?g?(g.p(c,f),f&256&&_(g,1)):(g=oo(c),g.c(),_(g,1),g.m(s.parentNode,s)):g&&(oe(),b(g,1,1,()=>{g=null}),ie()),c[9]?p?(p.p(c,f),f&512&&_(p,1)):(p=io(c),p.c(),_(p,1),p.m(r.parentNode,r)):p&&(oe(),b(p,1,1,()=>{p=null}),ie())},i(c){l||(_(a),_(u),_(d),_(h),_(g),_(p),l=!0)},o(c){b(a),b(u),b(d),b(h),b(g),b(p),l=!1},d(c){c&&(T(t),T(o),T(n),T(i),T(s),T(r)),a&&a.d(c),u&&u.d(c),d&&d.d(c),h&&h.d(c),g&&g.d(c),p&&p.d(c)}}}function ja(e){let t,o;return t=new Xt({props:{title:e[1],$$slots:{default:[Fa]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,[i]){const s={};i&2&&(s.title=n[1]),i&5242877&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function qa(e,t,o){let{title:n}=t,{shortcut:i}=t,{minWidth:s=void 0}=t,{marginRight:r=void 0}=t,{displayCtrlKey:l=!0}=t,{displayShiftKey:a=!0}=t,{displayAltKey:u=!0}=t,{displayMetaKey:d=!0}=t,{displayMouseButton:h=!0}=t,{displayMouseEvent:g=!0}=t,{disabledCtrlKey:p=!1}=t,{disabledShiftKey:c=!1}=t,{disabledAltKey:f=!1}=t,{disabledMetaKey:m=!1}=t,{disabledMouseButton:E=!1}=t,{disabledMouseEvent:V=!1}=t,{mouseButtonTitle:I="Mouse Button"}=t,{mouseEventTitle:q="Mouse Event"}=t,{mouseButtonOptions:x=[{key:be.Left,text:"Left"},{key:be.Middle,text:"Middle"},{key:be.Right,text:"Right"},{key:be.Back,text:"Back"},{key:be.Forward,text:"Forward"}]}=t,{mouseEventOptions:F=[{key:Z.click,text:Z.click},{key:Z.dblclick,text:Z.dblclick},{key:Z.mousedown,text:Z.mousedown},{key:Z.mouseup,text:Z.mouseup},{key:Z.mouseenter,text:Z.mouseenter},{key:Z.mouseleave,text:Z.mouseleave},{key:Z.mousewheel,text:Z.mousewheel},{key:Z.mouseover,text:Z.mouseover},{key:Z.mousemove,text:Z.mousemove},{key:Z.mouseout,text:Z.mouseout}]}=t;const K=St();function X(A){i.hasOwnProperty(A.detail.key)&&o(0,i[A.detail.key]=A.detail.value,i),K("changed",{shortcut:i})}return e.$$set=A=>{"title"in A&&o(1,n=A.title),"shortcut"in A&&o(0,i=A.shortcut),"minWidth"in A&&o(2,s=A.minWidth),"marginRight"in A&&o(3,r=A.marginRight),"displayCtrlKey"in A&&o(4,l=A.displayCtrlKey),"displayShiftKey"in A&&o(5,a=A.displayShiftKey),"displayAltKey"in A&&o(6,u=A.displayAltKey),"displayMetaKey"in A&&o(7,d=A.displayMetaKey),"displayMouseButton"in A&&o(8,h=A.displayMouseButton),"displayMouseEvent"in A&&o(9,g=A.displayMouseEvent),"disabledCtrlKey"in A&&o(10,p=A.disabledCtrlKey),"disabledShiftKey"in A&&o(11,c=A.disabledShiftKey),"disabledAltKey"in A&&o(12,f=A.disabledAltKey),"disabledMetaKey"in A&&o(13,m=A.disabledMetaKey),"disabledMouseButton"in A&&o(14,E=A.disabledMouseButton),"disabledMouseEvent"in A&&o(15,V=A.disabledMouseEvent),"mouseButtonTitle"in A&&o(16,I=A.mouseButtonTitle),"mouseEventTitle"in A&&o(17,q=A.mouseEventTitle),"mouseButtonOptions"in A&&o(18,x=A.mouseButtonOptions),"mouseEventOptions"in A&&o(19,F=A.mouseEventOptions)},[i,n,s,r,l,a,u,d,h,g,p,c,f,m,E,V,I,q,x,F,X]}class ai extends he{constructor(t){super(),de(this,t,qa,ja,pe,{title:1,shortcut:0,minWidth:2,marginRight:3,displayCtrlKey:4,displayShiftKey:5,displayAltKey:6,displayMetaKey:7,displayMouseButton:8,displayMouseEvent:9,disabledCtrlKey:10,disabledShiftKey:11,disabledAltKey:12,disabledMetaKey:13,disabledMouseButton:14,disabledMouseEvent:15,mouseButtonTitle:16,mouseEventTitle:17,mouseButtonOptions:18,mouseEventOptions:19})}}function Ka(e,t=!0){const o=[{role:"about"},...e?[{type:"separator"},{role:"help"},{type:"separator"},{role:"services"},{type:"separator"},{role:"hide"},{role:"hideOthers"},{role:"unhide"}]:[],{type:"separator"},{role:"quit"}],n=[...e?[{role:"recentDocuments"},{role:"clearRecentDocuments"},{type:"separator"}]:[],{role:"close"}],i=[{role:"undo"},{role:"redo"},{type:"separator"},{role:"cut"},{role:"copy"},{role:"paste"},{role:"pasteAndMatchStyle"},{role:"delete"},{type:"separator"},{role:"selectAll"},{type:"separator"},{role:"toggleSpellChecker"},...e?[{type:"separator"},{role:"showSubstitutions"},{role:"toggleTextReplacement"},{type:"separator"},{role:"toggleSmartQuotes"},{role:"toggleSmartDashes"},{type:"separator"},{role:"startSpeaking"},{role:"stopSpeaking"}]:[]],s=[{role:"reload"},{role:"forceReload"},{type:"separator"},{role:"resetZoom"},{role:"zoomIn",accelerator:"CmdOrCtrl+="},{role:"zoomOut"},...e?[{role:"zoom"},{type:"separator"},{role:"front"}]:[{type:"separator"},{label:"Toggle On Top",click:(a,u,d)=>{u&&u.setAlwaysOnTop(!u.isAlwaysOnTop())},type:"checkbox",checked:t,accelerator:"CmdOrCtrl+Shift+Space"}],{role:"togglefullscreen"},{type:"separator"},{role:"toggleDevTools"}],r=[...e?[{role:"window"},{type:"separator"},{role:"toggleTabBar"},{role:"selectNextTab"},{role:"selectPreviousTab"},{role:"mergeAllWindows"},{role:"moveTabToNewWindow"},{type:"separator"}]:[],{role:"minimize"},{role:"close"}],l=[{role:"appMenu",submenu:o},{role:"fileMenu",submenu:n},{role:"editMenu",submenu:i},{role:"viewMenu",submenu:s},{role:"windowMenu",submenu:r}];return e&&l.push({role:"shareMenu"}),l}var ae=(e=>(e[e.AlwaysShow=0]="AlwaysShow",e[e.AutoHide=1]="AutoHide",e[e.Disabled=2]="Disabled",e))(ae||{});function Ua(e,t,o,n,i){o.webPreferences=ut(o.webPreferences||{},n);const s=ut(t,o);if(po())try{const{BrowserWindow:r,Menu:l}=globalThis.require("@electron/remote"),a=new r(s);if(s.enableMenuBar){const u=l.buildFromTemplate(Ka(globalThis.process.platform==="darwin",s.alwaysOnTop));a.setMenu(u)}else a.removeMenu();return s.enableElectron&&globalThis.require("@electron/remote").require("@electron/remote/main").enable(a.webContents),a.loadURL(e.href,{userAgent:i.useragent}),a}catch(r){i.logger.warn(r)}return globalThis.open(e.href,e.href,["popup = true",`width = ${s.width}`,`height = ${s.height}`,`left = ${s.x}`,`top = ${s.y}`].join(","))}function so(e,t,o){const n=e.slice();return n[30]=t[o][0],n[31]=t[o][1],n[32]=t,n[33]=o,n}function ro(e,t,o){const n=e.slice();return n[30]=t[o][0],n[31]=t[o][1],n[34]=t,n[35]=o,n}function Ia(e){let t,o;return t=new G({props:{slot:"input",type:U.text,block:!0,placeholder:globalThis.navigator.userAgent,settingKey:"Text",settingValue:e[0].general.useragent}}),t.$on("changed",e[7]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].general.useragent),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Wa(e){let t,o;return t=new G({props:{slot:"input",type:U.text,settingKey:"text",settingValue:e[0].general.background}}),t.$on("changed",e[8]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].general.background),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Va(e){let t,o;return t=new G({props:{slot:"input",type:U.button,settingKey:"Reset",settingValue:e[2].settings.generalSettings.reset.text}}),t.$on("clicked",e[4]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ha(e){let t,o,n,i,s,r;return t=new ne({props:{title:e[2].settings.generalSettings.useragent.title,text:e[2].settings.generalSettings.useragent.description,block:!0,$$slots:{input:[Ia]},$$scope:{ctx:e}}}),n=new ne({props:{title:e[2].settings.background.title,text:e[2].settings.background.description,$$slots:{input:[Wa]},$$scope:{ctx:e}}}),s=new ne({props:{title:e[2].settings.generalSettings.reset.title,text:e[2].settings.generalSettings.reset.description,$$slots:{input:[Va]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment),o=L(),v(n.$$.fragment),i=L(),v(s.$$.fragment)},m(l,a){$(t,l,a),B(l,o,a),$(n,l,a),B(l,i,a),$(s,l,a),r=!0},p(l,a){const u={};a[0]&1|a[1]&32&&(u.$$scope={dirty:a,ctx:l}),t.$set(u);const d={};a[0]&1|a[1]&32&&(d.$$scope={dirty:a,ctx:l}),n.$set(d);const h={};a[1]&32&&(h.$$scope={dirty:a,ctx:l}),s.$set(h)},i(l){r||(_(t.$$.fragment,l),_(n.$$.fragment,l),_(s.$$.fragment,l),r=!0)},o(l){b(t.$$.fragment,l),b(n.$$.fragment,l),b(s.$$.fragment,l),r=!1},d(l){l&&(T(o),T(i)),S(t,l),S(n,l),S(s,l)}}}function za(e){let t,o;return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"Checkbox",settingValue:e[0].tab.enable}}),t.$on("changed",e[9]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].tab.enable),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ga(e){let t,o;return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"Checkbox",settingValue:e[0].tab.open.targets.hyperlink.editor}}),t.$on("changed",e[10]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].tab.open.targets.hyperlink.editor),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ya(e){let t,o;return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"Checkbox",settingValue:e[0].tab.open.targets.hyperlink.other}}),t.$on("changed",e[11]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].tab.open.targets.hyperlink.other),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function Ja(e){let t,o=e[31].prefix+"",n;return{c(){t=R("code"),n=ge(o),k(t,"slot","title"),k(t,"class","fn__code")},m(i,s){B(i,t,s),N(t,n)},p(i,s){s[0]&1&&o!==(o=i[31].prefix+"")&&De(n,o)},d(i){i&&T(t)}}}function Xa(e){let t,o;function n(...i){return e[12](e[31],e[34],e[35],...i)}return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"Checkbox",settingValue:e[31].enable}}),t.$on("changed",n),{c(){v(t.$$.fragment)},m(i,s){$(t,i,s),o=!0},p(i,s){e=i;const r={};s[0]&1&&(r.settingValue=e[31].enable),t.$set(r)},i(i){o||(_(t.$$.fragment,i),o=!0)},o(i){b(t.$$.fragment,i),o=!1},d(i){S(t,i)}}}function ao(e,t){let o,n,i;return n=new Ce({props:{minWidth:"8em",$$slots:{input:[Xa],title:[Ja]},$$scope:{ctx:t}}}),{key:e,first:null,c(){o=Se(),v(n.$$.fragment),this.first=o},m(s,r){B(s,o,r),$(n,s,r),i=!0},p(s,r){t=s;const l={};r[0]&1|r[1]&32&&(l.$$scope={dirty:r,ctx:t}),n.$set(l)},i(s){i||(_(n.$$.fragment,s),i=!0)},o(s){b(n.$$.fragment,s),i=!1},d(s){s&&T(o),S(n,s)}}}function Qa(e){let t=[],o=new Map,n,i,s=ye(Object.entries(e[0].tab.open.protocols));const r=l=>l[30];for(let l=0;l<s.length;l+=1){let a=ro(e,s,l),u=r(a);o.set(u,t[l]=ao(u,a))}return{c(){for(let l=0;l<t.length;l+=1)t[l].c();n=Se()},m(l,a){for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(l,a);B(l,n,a),i=!0},p(l,a){a[0]&9&&(s=ye(Object.entries(l[0].tab.open.protocols)),oe(),t=tt(t,a,r,1,l,s,o,n.parentNode,vt,ao,n,ro),ie())},i(l){if(!i){for(let a=0;a<s.length;a+=1)_(t[a]);i=!0}},o(l){for(let a=0;a<t.length;a+=1)b(t[a]);i=!1},d(l){l&&T(n);for(let a=0;a<t.length;a+=1)t[a].d(l)}}}function Za(e){let t,o,n,i,s,r,l,a,u,d,h,g,p;return o=new ne({props:{title:e[2].settings.open.enable.tab.title,text:e[2].settings.open.enable.tab.description,$$slots:{input:[za]},$$scope:{ctx:e}}}),i=new ne({props:{title:e[2].settings.open.editorHyperlink.title,text:e[2].settings.open.editorHyperlink.description,$$slots:{input:[Ga]},$$scope:{ctx:e}}}),r=new ne({props:{title:e[2].settings.open.otherHyperlink.title,text:e[2].settings.open.otherHyperlink.description,$$slots:{input:[Ya]},$$scope:{ctx:e}}}),u=new Xt({props:{title:e[2].settings.protocols.title,$$slots:{default:[Qa]},$$scope:{ctx:e}}}),g=new ai({props:{minWidth:"16em",title:e[2].settings.open.shortcut.title,shortcut:e[0].tab.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:e[2].settings.mouse.button,mouseButtonOptions:[{key:be.Left,text:e[2].settings.mouse.left}]}}),g.$on("changed",e[3]),{c(){t=R("div"),v(o.$$.fragment),n=L(),v(i.$$.fragment),s=L(),v(r.$$.fragment),l=L(),a=R("div"),v(u.$$.fragment),d=L(),h=R("div"),v(g.$$.fragment),k(t,"data-type",e[6].tab[0].name),C(t,"fn__none",e[6].tab[0].key!==e[29]),k(a,"data-type",e[6].tab[1].name),C(a,"fn__none",e[6].tab[1].key!==e[29]),k(h,"data-type",e[6].tab[2].name),C(h,"fn__none",e[6].tab[2].key!==e[29])},m(c,f){B(c,t,f),$(o,t,null),N(t,n),$(i,t,null),N(t,s),$(r,t,null),B(c,l,f),B(c,a,f),$(u,a,null),B(c,d,f),B(c,h,f),$(g,h,null),p=!0},p(c,f){const m={};f[0]&1|f[1]&32&&(m.$$scope={dirty:f,ctx:c}),o.$set(m);const E={};f[0]&1|f[1]&32&&(E.$$scope={dirty:f,ctx:c}),i.$set(E);const V={};f[0]&1|f[1]&32&&(V.$$scope={dirty:f,ctx:c}),r.$set(V),(!p||f[0]&536870976)&&C(t,"fn__none",c[6].tab[0].key!==c[29]);const I={};f[0]&1|f[1]&32&&(I.$$scope={dirty:f,ctx:c}),u.$set(I),(!p||f[0]&536870976)&&C(a,"fn__none",c[6].tab[1].key!==c[29]);const q={};f[0]&1&&(q.shortcut=c[0].tab.open.mouse),g.$set(q),(!p||f[0]&536870976)&&C(h,"fn__none",c[6].tab[2].key!==c[29])},i(c){p||(_(o.$$.fragment,c),_(i.$$.fragment,c),_(r.$$.fragment,c),_(u.$$.fragment,c),_(g.$$.fragment,c),p=!0)},o(c){b(o.$$.fragment,c),b(i.$$.fragment,c),b(r.$$.fragment,c),b(u.$$.fragment,c),b(g.$$.fragment,c),p=!1},d(c){c&&(T(t),T(l),T(a),T(d),T(h)),S(o),S(i),S(r),S(u),S(g)}}}function xa(e){let t,o;return t=new ri({props:{focus:kl,tabs:e[6].tab,$$slots:{default:[Za,({focus:n})=>({29:n}),({focus:n})=>[n?536870912:0]]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&536870913|i[1]&32&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function el(e){let t,o;return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"enable",settingValue:e[0].window.enable}}),t.$on("changed",e[13]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.enable),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function tl(e){let t,o;return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"editorHyperlink",settingValue:e[0].window.open.targets.hyperlink.editor}}),t.$on("changed",e[14]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.open.targets.hyperlink.editor),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function nl(e){let t,o;return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"otherHyperlink",settingValue:e[0].window.open.targets.hyperlink.other}}),t.$on("changed",e[15]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.open.targets.hyperlink.other),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function ol(e){let t,o;return t=new G({props:{slot:"input",type:U.number,settingKey:"width",settingValue:e[0].window.params.width,limits:{min:320,max:15360,step:40}}}),t.$on("changed",e[16]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.width),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function il(e){let t,o;return t=new G({props:{slot:"input",type:U.number,settingKey:"height",settingValue:e[0].window.params.height,limits:{min:240,max:8640,step:40}}}),t.$on("changed",e[17]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.height),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function sl(e){let t,o;return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"top",settingValue:e[0].window.params.alwaysOnTop}}),t.$on("changed",e[18]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.alwaysOnTop),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function rl(e){let t,o;return t=new G({props:{slot:"input",type:U.select,settingKey:"menuBar",settingValue:e[0].window.params.enableMenuBar?e[0].window.params.autoHideMenuBar?ae.AutoHide:ae.AlwaysShow:ae.Disabled,options:[{key:ae.AutoHide,text:e[2].settings.window.menuBar.options.autoHide},{key:ae.AlwaysShow,text:e[2].settings.window.menuBar.options.alwaysShow},{key:ae.Disabled,text:e[2].settings.window.menuBar.options.disabled}]}}),t.$on("changed",e[19]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.params.enableMenuBar?n[0].window.params.autoHideMenuBar?ae.AutoHide:ae.AlwaysShow:ae.Disabled),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function al(e){let t,o=e[31].prefix+"",n;return{c(){t=R("code"),n=ge(o),k(t,"slot","title"),k(t,"class","fn__code")},m(i,s){B(i,t,s),N(t,n)},p(i,s){s[0]&1&&o!==(o=i[31].prefix+"")&&De(n,o)},d(i){i&&T(t)}}}function ll(e){let t,o;function n(...i){return e[20](e[31],e[32],e[33],...i)}return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"Checkbox",settingValue:e[31].enable}}),t.$on("changed",n),{c(){v(t.$$.fragment)},m(i,s){$(t,i,s),o=!0},p(i,s){e=i;const r={};s[0]&1&&(r.settingValue=e[31].enable),t.$set(r)},i(i){o||(_(t.$$.fragment,i),o=!0)},o(i){b(t.$$.fragment,i),o=!1},d(i){S(t,i)}}}function lo(e,t){let o,n,i;return n=new Ce({props:{minWidth:"8em",$$slots:{input:[ll],title:[al]},$$scope:{ctx:t}}}),{key:e,first:null,c(){o=Se(),v(n.$$.fragment),this.first=o},m(s,r){B(s,o,r),$(n,s,r),i=!0},p(s,r){t=s;const l={};r[0]&1|r[1]&32&&(l.$$scope={dirty:r,ctx:t}),n.$set(l)},i(s){i||(_(n.$$.fragment,s),i=!0)},o(s){b(n.$$.fragment,s),i=!1},d(s){s&&T(o),S(n,s)}}}function ul(e){let t=[],o=new Map,n,i,s=ye(Object.entries(e[0].window.open.protocols));const r=l=>l[30];for(let l=0;l<s.length;l+=1){let a=so(e,s,l),u=r(a);o.set(u,t[l]=lo(u,a))}return{c(){for(let l=0;l<t.length;l+=1)t[l].c();n=Se()},m(l,a){for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(l,a);B(l,n,a),i=!0},p(l,a){a[0]&9&&(s=ye(Object.entries(l[0].window.open.protocols)),oe(),t=tt(t,a,r,1,l,s,o,n.parentNode,vt,lo,n,so),ie())},i(l){if(!i){for(let a=0;a<s.length;a+=1)_(t[a]);i=!0}},o(l){for(let a=0;a<t.length;a+=1)b(t[a]);i=!1},d(l){l&&T(n);for(let a=0;a<t.length;a+=1)t[a].d(l)}}}function cl(e){let t,o;return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"enable",settingValue:e[0].window.siyuan.enable}}),t.$on("changed",e[21]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.siyuan.enable),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function fl(e){let t,o;return t=new G({props:{slot:"input",type:U.button,settingKey:"open-desktop-window",settingValue:e[2].settings.siyuan.open.desktop.text}}),t.$on("clicked",e[22]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function pl(e){let t,o;return t=new G({props:{slot:"input",type:U.button,settingKey:"open-mobile-window",settingValue:e[2].settings.siyuan.open.mobile.text}}),t.$on("clicked",e[23]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p:Y,i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function dl(e){let t,o;return t=new G({props:{slot:"input",type:U.checkbox,settingKey:"focus",settingValue:e[0].window.siyuan.focus}}),t.$on("changed",e[24]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.siyuan.focus),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function hl(e){let t,o;return t=new G({props:{slot:"input",type:U.select,settingKey:"menuBar",settingValue:e[0].window.siyuan.editorType,options:[{key:we.mobile,text:e[2].settings.siyuan.editorType.options.mobile},{key:we.desktop,text:e[2].settings.siyuan.editorType.options.desktop}]}}),t.$on("changed",e[25]),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&1&&(s.settingValue=n[0].window.siyuan.editorType),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function ml(e){let t,o,n,i,s,r,l,a,u,d,h,g,p,c,f,m,E,V,I,q,x,F,K,X,A,H,D,z,j,_e,P,Q;return o=new ne({props:{title:e[2].settings.open.enable.window.title,text:e[2].settings.open.enable.window.description,$$slots:{input:[el]},$$scope:{ctx:e}}}),i=new ne({props:{title:e[2].settings.open.editorHyperlink.title,text:e[2].settings.open.editorHyperlink.description,$$slots:{input:[tl]},$$scope:{ctx:e}}}),r=new ne({props:{title:e[2].settings.open.otherHyperlink.title,text:e[2].settings.open.otherHyperlink.description,$$slots:{input:[nl]},$$scope:{ctx:e}}}),a=new ne({props:{title:e[2].settings.window.width.title,text:e[2].settings.window.width.description,$$slots:{input:[ol]},$$scope:{ctx:e}}}),d=new ne({props:{title:e[2].settings.window.height.title,text:e[2].settings.window.height.description,$$slots:{input:[il]},$$scope:{ctx:e}}}),g=new ne({props:{title:e[2].settings.window.top.title,text:e[2].settings.window.top.description,$$slots:{input:[sl]},$$scope:{ctx:e}}}),c=new ne({props:{title:e[2].settings.window.menuBar.title,text:e[2].settings.window.menuBar.description,$$slots:{input:[rl]},$$scope:{ctx:e}}}),E=new Xt({props:{title:e[2].settings.protocols.title,$$slots:{default:[ul]},$$scope:{ctx:e}}}),q=new ai({props:{minWidth:"16em",title:e[2].settings.open.shortcut.title,shortcut:e[0].window.open.mouse,displayMouseEvent:!1,disabledMouseButton:!0,mouseButtonTitle:e[2].settings.mouse.button,mouseButtonOptions:[{key:be.Middle,text:e[2].settings.mouse.middle}]}}),q.$on("changed",e[3]),K=new ne({props:{title:e[2].settings.siyuan.enable.title,text:e[2].settings.siyuan.enable.description,$$slots:{input:[cl]},$$scope:{ctx:e}}}),A=new ne({props:{title:e[2].settings.siyuan.open.desktop.title,text:e[2].settings.siyuan.open.desktop.description,$$slots:{input:[fl]},$$scope:{ctx:e}}}),D=new ne({props:{title:e[2].settings.siyuan.open.mobile.title,text:e[2].settings.siyuan.open.mobile.description,$$slots:{input:[pl]},$$scope:{ctx:e}}}),j=new ne({props:{title:e[2].settings.siyuan.focus.title,text:e[2].settings.siyuan.focus.description,$$slots:{input:[dl]},$$scope:{ctx:e}}}),P=new ne({props:{title:e[2].settings.siyuan.editorType.title,text:e[2].settings.siyuan.editorType.description,$$slots:{input:[hl]},$$scope:{ctx:e}}}),{c(){t=R("div"),v(o.$$.fragment),n=L(),v(i.$$.fragment),s=L(),v(r.$$.fragment),l=L(),v(a.$$.fragment),u=L(),v(d.$$.fragment),h=L(),v(g.$$.fragment),p=L(),v(c.$$.fragment),f=L(),m=R("div"),v(E.$$.fragment),V=L(),I=R("div"),v(q.$$.fragment),x=L(),F=R("div"),v(K.$$.fragment),X=L(),v(A.$$.fragment),H=L(),v(D.$$.fragment),z=L(),v(j.$$.fragment),_e=L(),v(P.$$.fragment),k(t,"data-type",e[6].window[0].name),C(t,"fn__none",e[6].window[0].key!==e[29]),k(m,"data-type",e[6].window[1].name),C(m,"fn__none",e[6].window[1].key!==e[29]),k(I,"data-type",e[6].window[2].name),C(I,"fn__none",e[6].window[2].key!==e[29]),k(F,"data-type",e[6].window[3].name),C(F,"fn__none",e[6].window[3].key!==e[29])},m(O,M){B(O,t,M),$(o,t,null),N(t,n),$(i,t,null),N(t,s),$(r,t,null),N(t,l),$(a,t,null),N(t,u),$(d,t,null),N(t,h),$(g,t,null),N(t,p),$(c,t,null),B(O,f,M),B(O,m,M),$(E,m,null),B(O,V,M),B(O,I,M),$(q,I,null),B(O,x,M),B(O,F,M),$(K,F,null),N(F,X),$(A,F,null),N(F,H),$(D,F,null),N(F,z),$(j,F,null),N(F,_e),$(P,F,null),Q=!0},p(O,M){const Me={};M[0]&1|M[1]&32&&(Me.$$scope={dirty:M,ctx:O}),o.$set(Me);const Ve={};M[0]&1|M[1]&32&&(Ve.$$scope={dirty:M,ctx:O}),i.$set(Ve);const Qt={};M[0]&1|M[1]&32&&(Qt.$$scope={dirty:M,ctx:O}),r.$set(Qt);const Zt={};M[0]&1|M[1]&32&&(Zt.$$scope={dirty:M,ctx:O}),a.$set(Zt);const xt={};M[0]&1|M[1]&32&&(xt.$$scope={dirty:M,ctx:O}),d.$set(xt);const en={};M[0]&1|M[1]&32&&(en.$$scope={dirty:M,ctx:O}),g.$set(en);const tn={};M[0]&1|M[1]&32&&(tn.$$scope={dirty:M,ctx:O}),c.$set(tn),(!Q||M[0]&536870976)&&C(t,"fn__none",O[6].window[0].key!==O[29]);const nn={};M[0]&1|M[1]&32&&(nn.$$scope={dirty:M,ctx:O}),E.$set(nn),(!Q||M[0]&536870976)&&C(m,"fn__none",O[6].window[1].key!==O[29]);const on={};M[0]&1&&(on.shortcut=O[0].window.open.mouse),q.$set(on),(!Q||M[0]&536870976)&&C(I,"fn__none",O[6].window[2].key!==O[29]);const sn={};M[0]&1|M[1]&32&&(sn.$$scope={dirty:M,ctx:O}),K.$set(sn);const rn={};M[0]&2|M[1]&32&&(rn.$$scope={dirty:M,ctx:O}),A.$set(rn);const an={};M[0]&2|M[1]&32&&(an.$$scope={dirty:M,ctx:O}),D.$set(an);const ln={};M[0]&1|M[1]&32&&(ln.$$scope={dirty:M,ctx:O}),j.$set(ln);const un={};M[0]&1|M[1]&32&&(un.$$scope={dirty:M,ctx:O}),P.$set(un),(!Q||M[0]&536870976)&&C(F,"fn__none",O[6].window[3].key!==O[29])},i(O){Q||(_(o.$$.fragment,O),_(i.$$.fragment,O),_(r.$$.fragment,O),_(a.$$.fragment,O),_(d.$$.fragment,O),_(g.$$.fragment,O),_(c.$$.fragment,O),_(E.$$.fragment,O),_(q.$$.fragment,O),_(K.$$.fragment,O),_(A.$$.fragment,O),_(D.$$.fragment,O),_(j.$$.fragment,O),_(P.$$.fragment,O),Q=!0)},o(O){b(o.$$.fragment,O),b(i.$$.fragment,O),b(r.$$.fragment,O),b(a.$$.fragment,O),b(d.$$.fragment,O),b(g.$$.fragment,O),b(c.$$.fragment,O),b(E.$$.fragment,O),b(q.$$.fragment,O),b(K.$$.fragment,O),b(A.$$.fragment,O),b(D.$$.fragment,O),b(j.$$.fragment,O),b(P.$$.fragment,O),Q=!1},d(O){O&&(T(t),T(f),T(m),T(V),T(I),T(x),T(F)),S(o),S(i),S(r),S(a),S(d),S(g),S(c),S(E),S(q),S(K),S(A),S(D),S(j),S(P)}}}function gl(e){let t,o;return t=new ri({props:{focus:yl,tabs:e[6].window,$$slots:{default:[ml,({focus:n})=>({29:n}),({focus:n})=>[n?536870912:0]]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&536870915|i[1]&32&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}function _l(e){let t,o,n,i,s,r;return t=new Pt({props:{display:e[5][0].key===e[28],$$slots:{default:[Ha]},$$scope:{ctx:e}}}),n=new Pt({props:{display:e[5][1].key===e[28],$$slots:{default:[xa]},$$scope:{ctx:e}}}),s=new Pt({props:{display:e[5][2].key===e[28],$$slots:{default:[gl]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment),o=L(),v(n.$$.fragment),i=L(),v(s.$$.fragment)},m(l,a){$(t,l,a),B(l,o,a),$(n,l,a),B(l,i,a),$(s,l,a),r=!0},p(l,a){const u={};a[0]&268435456&&(u.display=l[5][0].key===l[28]),a[0]&1|a[1]&32&&(u.$$scope={dirty:a,ctx:l}),t.$set(u);const d={};a[0]&268435456&&(d.display=l[5][1].key===l[28]),a[0]&1|a[1]&32&&(d.$$scope={dirty:a,ctx:l}),n.$set(d);const h={};a[0]&268435456&&(h.display=l[5][2].key===l[28]),a[0]&3|a[1]&32&&(h.$$scope={dirty:a,ctx:l}),s.$set(h)},i(l){r||(_(t.$$.fragment,l),_(n.$$.fragment,l),_(s.$$.fragment,l),r=!0)},o(l){b(t.$$.fragment,l),b(n.$$.fragment,l),b(s.$$.fragment,l),r=!1},d(l){l&&(T(o),T(i)),S(t,l),S(n,l),S(s,l)}}}function bl(e){let t,o;return t=new Rr({props:{panels:e[5],focus:wl,$$slots:{default:[_l,({focus:n})=>({28:n}),({focus:n})=>[n?268435456:0]]},$$scope:{ctx:e}}}),{c(){v(t.$$.fragment)},m(n,i){$(t,n,i),o=!0},p(n,i){const s={};i[0]&268435459|i[1]&32&&(s.$$scope={dirty:i,ctx:n}),t.$set(s)},i(n){o||(_(t.$$.fragment,n),o=!0)},o(n){b(t.$$.fragment,n),o=!1},d(n){S(t,n)}}}let wl=0,kl=0,yl=0;function $l(e,t,o){let{config:n}=t,{plugin:i}=t;const s=i.i18n;function r(){i.updateConfig(n)}function l(){i.siyuan.confirm(s.settings.generalSettings.reset.title,s.settings.generalSettings.reset.description,async()=>{await i.resetConfig(),globalThis.location.reload()})}const a=[{key:0,text:s.settings.generalSettings.title,name:s.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:s.settings.openTab,name:s.settings.openTab,icon:"#iconBoth"},{key:2,text:s.settings.openWindow,name:s.settings.openWindow,icon:"#iconOpenWindow"}],u={tab:[{key:0,text:s.settings.general,name:s.settings.general,icon:""},{key:1,text:s.settings.protocol,name:s.settings.protocol,icon:""},{key:2,text:s.settings.shortcut,name:s.settings.shortcut,icon:""}],window:[{key:0,text:s.settings.general,name:s.settings.general,icon:""},{key:1,text:s.settings.protocol,name:s.settings.protocol,icon:""},{key:2,text:s.settings.shortcut,name:s.settings.shortcut,icon:""},{key:3,text:s.settings.siyuan.title,name:s.settings.siyuan.title,icon:""}]},d=j=>{o(0,n.general.useragent=j.detail.value,n),r()},h=j=>{o(0,n.general.background=j.detail.value,n),r()},g=j=>{o(0,n.tab.enable=j.detail.value,n),r()},p=j=>{o(0,n.tab.open.targets.hyperlink.editor=j.detail.value,n),r()},c=j=>{o(0,n.tab.open.targets.hyperlink.other=j.detail.value,n),r()},f=(j,_e,P,Q)=>{o(0,_e[P][1].enable=Q.detail.value,n),r()},m=j=>{o(0,n.window.enable=j.detail.value,n),r()},E=j=>{o(0,n.window.open.targets.hyperlink.editor=j.detail.value,n),r()},V=j=>{o(0,n.window.open.targets.hyperlink.other=j.detail.value,n),r()},I=j=>{o(0,n.window.params.width=j.detail.value,n),r()},q=j=>{o(0,n.window.params.height=j.detail.value,n),r()},x=j=>{o(0,n.window.params.alwaysOnTop=j.detail.value,n),r()},F=j=>{switch(j.detail.value){case ae.AutoHide:o(0,n.window.params.enableMenuBar=!0,n),o(0,n.window.params.autoHideMenuBar=!0,n);break;case ae.AlwaysShow:o(0,n.window.params.enableMenuBar=!0,n),o(0,n.window.params.autoHideMenuBar=!1,n);break;case ae.Disabled:o(0,n.window.params.enableMenuBar=!1,n);break}r()},K=(j,_e,P,Q)=>{o(0,_e[P][1].enable=Q.detail.value,n),r()},X=j=>{o(0,n.window.siyuan.enable=j.detail.value,n),r()},A=j=>i.openSiyuanDesktopWindow(j.detail.event),H=j=>i.openSiyuanMobileWindow(j.detail.event),D=j=>{o(0,n.window.siyuan.focus=j.detail.value,n),r()},z=j=>{o(0,n.window.siyuan.editorType=j.detail.value,n),r()};return e.$$set=j=>{"config"in j&&o(0,n=j.config),"plugin"in j&&o(1,i=j.plugin)},[n,i,s,r,l,a,u,d,h,g,p,c,f,m,E,V,I,q,x,F,K,X,A,H,D,z]}class Sl extends he{constructor(t){super(),de(this,t,$l,bl,pe,{config:0,plugin:1},null,[-1,-1])}}function uo(e,{delay:t=0,duration:o=400,easing:n=Yt}={}){const i=+getComputedStyle(e).opacity;return{delay:t,duration:o,easing:n,css:s=>`opacity: ${s*i}`}}var Ee=(e=>(e.n="b3-tooltips__n",e.ne="b3-tooltips__ne",e.e="b3-tooltips__e",e.se="b3-tooltips__se",e.s="b3-tooltips__s",e.sw="b3-tooltips__sw",e.w="b3-tooltips__w",e.nw="b3-tooltips__nw",e))(Ee||{});function vl(e){let t,o,n,i,s,r;return o=new ve({props:{icon:e[0]}}),{c(){t=R("button"),v(o.$$.fragment),k(t,"aria-label",e[1]),k(t,"class",n="block__icon block__icon--show fn__flex-center b3-tooltips "+e[4]),C(t,"toolbar__item--active",e[2]),C(t,"toolbar__item--disabled",e[3])},m(l,a){B(l,t,a),$(o,t,null),i=!0,s||(r=J(t,"click",e[5]),s=!0)},p(l,[a]){const u={};a&1&&(u.icon=l[0]),o.$set(u),(!i||a&2)&&k(t,"aria-label",l[1]),(!i||a&16&&n!==(n="block__icon block__icon--show fn__flex-center b3-tooltips "+l[4]))&&k(t,"class",n),(!i||a&20)&&C(t,"toolbar__item--active",l[2]),(!i||a&24)&&C(t,"toolbar__item--disabled",l[3])},i(l){i||(_(o.$$.fragment,l),i=!0)},o(l){b(o.$$.fragment,l),i=!1},d(l){l&&T(t),S(o),s=!1,r()}}}function El(e,t,o){let{icon:n}=t,{ariaLabel:i=void 0}=t,{active:s=!1}=t,{disabled:r=!1}=t,{tooltipsDirection:l=Ee.s}=t;function a(u){gr.call(this,e,u)}return e.$$set=u=>{"icon"in u&&o(0,n=u.icon),"ariaLabel"in u&&o(1,i=u.ariaLabel),"active"in u&&o(2,s=u.active),"disabled"in u&&o(3,r=u.disabled),"tooltipsDirection"in u&&o(4,l=u.tooltipsDirection)},[n,i,s,r,l,a]}class Re extends he{constructor(t){super(),de(this,t,El,vl,pe,{icon:0,ariaLabel:1,active:2,disabled:3,tooltipsDirection:4})}}function co(e){let t,o,n,i,s,r;return{c(){t=R("div"),o=R("span"),n=ge(e[12]),k(t,"class","webview-status tooltip svelte-x3hvqm")},m(l,a){B(l,t,a),N(t,o),N(o,n),r=!0},p(l,a){(!r||a&4096)&&De(n,l[12])},i(l){r||(l&&Pe(()=>{r&&(s&&s.end(1),i=yr(t,uo,{delay:0,duration:125}),i.start())}),r=!0)},o(l){i&&i.invalidate(),l&&(s=$r(t,uo,{delay:500,duration:250})),r=!1},d(l){l&&T(t),l&&s&&s.end()}}}function Tl(e){let t,o,n,i,s,r,l,a,u,d,h,g,p,c,f,m,E,V,I,q,x,F,K,X,A;n=new Re({props:{icon:"#iconLeft",ariaLabel:e[13].webview.goForwardOnePage,disabled:!e[4],tooltipsDirection:Ee.se}}),n.$on("click",e[14]),s=new Re({props:{icon:"#iconRight",ariaLabel:e[13].webview.goBackOnePage,disabled:!e[5],tooltipsDirection:Ee.se}}),s.$on("click",e[15]),l=new Re({props:{icon:e[6]?"#iconClose":"#iconRefresh",ariaLabel:e[6]?e[13].webview.stopLoadingThisPage:e[13].webview.reloadCurrentPage,tooltipsDirection:Ee.se}}),l.$on("click",e[16]),h=new Re({props:{icon:"#iconLanguage",ariaLabel:e[13].webview.openWithDefaultProgram,tooltipsDirection:Ee.sw}}),h.$on("click",e[18]),p=new Re({props:{icon:"#iconOpenWindow",ariaLabel:e[13].webview.openWithNewWindow,tooltipsDirection:Ee.sw}}),p.$on("click",e[19]),f=new Re({props:{icon:e[3]?"#iconFullscreenExit":"#iconFullscreen",ariaLabel:e[3]?e[13].webview.exitFullscreen:e[13].webview.enterFullscreen,active:e[3],tooltipsDirection:Ee.sw}}),f.$on("click",e[20]),E=new Re({props:{icon:"#iconBug",ariaLabel:e[8]?e[13].webview.closeDevTools:e[13].webview.openDevTools,active:e[8],tooltipsDirection:Ee.sw}}),E.$on("click",e[21]);let H=e[11]&&co(e);return{c(){t=R("div"),o=R("div"),v(n.$$.fragment),i=L(),v(s.$$.fragment),r=L(),v(l.$$.fragment),a=L(),u=R("input"),d=L(),v(h.$$.fragment),g=L(),v(p.$$.fragment),c=L(),v(f.$$.fragment),m=L(),v(E.$$.fragment),V=L(),I=R("div"),q=R("webview"),F=L(),H&&H.c(),k(u,"class","b3-text-field fn__flex-1 address-field svelte-x3hvqm"),k(u,"type","url"),k(o,"class","protyle-breadcrumb svelte-x3hvqm"),Bn(q.src,x=e[0])||k(q,"src",x),k(q,"useragent",e[1]),k(q,"class","fn__flex-1 svelte-x3hvqm"),k(q,"allowpopups",""),C(q,"pointer-events-disable",e[10]),Oe(q,"background",e[2]),k(I,"class","protyle-preview svelte-x3hvqm"),k(t,"class","fn__flex fn__flex-1 fn__flex-column content svelte-x3hvqm"),C(t,"fullscreen",e[3])},m(D,z){B(D,t,z),N(t,o),$(n,o,null),N(o,i),$(s,o,null),N(o,r),$(l,o,null),N(o,a),N(o,u),re(u,e[7]),N(o,d),$(h,o,null),N(o,g),$(p,o,null),N(o,c),$(f,o,null),N(o,m),$(E,o,null),N(t,V),N(t,I),N(I,q),e[25](q),N(t,F),H&&H.m(t,null),K=!0,X||(A=[J(u,"change",e[17]),J(u,"input",e[24]),J(I,"mouseenter",e[26]),J(I,"mouseleave",e[27])],X=!0)},p(D,[z]){const j={};z&16&&(j.disabled=!D[4]),n.$set(j);const _e={};z&32&&(_e.disabled=!D[5]),s.$set(_e);const P={};z&64&&(P.icon=D[6]?"#iconClose":"#iconRefresh"),z&64&&(P.ariaLabel=D[6]?D[13].webview.stopLoadingThisPage:D[13].webview.reloadCurrentPage),l.$set(P),z&128&&u.value!==D[7]&&re(u,D[7]);const Q={};z&8&&(Q.icon=D[3]?"#iconFullscreenExit":"#iconFullscreen"),z&8&&(Q.ariaLabel=D[3]?D[13].webview.exitFullscreen:D[13].webview.enterFullscreen),z&8&&(Q.active=D[3]),f.$set(Q);const O={};z&256&&(O.ariaLabel=D[8]?D[13].webview.closeDevTools:D[13].webview.openDevTools),z&256&&(O.active=D[8]),E.$set(O),(!K||z&1&&!Bn(q.src,x=D[0]))&&k(q,"src",x),(!K||z&2)&&k(q,"useragent",D[1]),(!K||z&1024)&&C(q,"pointer-events-disable",D[10]),z&4&&Oe(q,"background",D[2]),D[11]?H?(H.p(D,z),z&2048&&_(H,1)):(H=co(D),H.c(),_(H,1),H.m(t,null)):H&&(oe(),b(H,1,1,()=>{H=null}),ie()),(!K||z&8)&&C(t,"fullscreen",D[3])},i(D){K||(_(n.$$.fragment,D),_(s.$$.fragment,D),_(l.$$.fragment,D),_(h.$$.fragment,D),_(p.$$.fragment,D),_(f.$$.fragment,D),_(E.$$.fragment,D),_(H),K=!0)},o(D){b(n.$$.fragment,D),b(s.$$.fragment,D),b(l.$$.fragment,D),b(h.$$.fragment,D),b(p.$$.fragment,D),b(f.$$.fragment,D),b(E.$$.fragment,D),b(H),K=!1},d(D){D&&T(t),S(n),S(s),S(l),S(h),S(p),S(f),S(E),e[25](null),H&&H.d(),X=!1,se(A)}}}function Ol(e,t,o){let{src:n}=t,{tab:i}=t,{plugin:s}=t,{useragent:r=s.useragent}=t,{background:l=s.background}=t;const a=s.i18n;let u=!1,d=!1,h=!1,g=!1,p=decodeURI(n),c=!1,f,m=!1,E=!1,V="";function I(){d&&(f==null||f.goBack())}function q(){d&&(f==null||f.goBack())}function x(){g?f==null||f.stop():f==null||f.reload()}function F(P){if(p)try{const Q=new URL(p);f.loadURL(Q.href)}catch{try{const O=new URL(`http://${p}`);f.loadURL(O.href.replace(/^http:/,""))}catch{s.siyuan.showMessage(`${s.name}:
URL <code class="fn__code">${p}</code> ${a.message.nonStandardURL}
`,void 0,"error")}}}function K(){global.open(i.data.href,"_blank")}function X(P){s.openWindow(i.data.href,{x:P.screenX,y:P.screenY,title:i.data.title})}function A(){o(3,u=!u)}function H(){f&&(f.isDevToolsOpened()?(f.closeDevTools(),o(8,c=!1)):(f.openDevTools(),o(8,c=!0)))}mr(()=>{f.addEventListener("load-commit",P=>{P.isMainFrame&&(o(7,p=decodeURI(P.url)),o(22,i.data.href=P.url,i)),o(4,d=f.canGoBack()),o(5,h=f.canGoForward())}),f.addEventListener("page-title-updated",P=>{o(22,i.data.title=P.title,i),i.tab.updateTitle(P.title),o(22,i.tab.headElement.ariaLabel=P.title,i)}),f.addEventListener("page-favicon-updated",P=>{var O;const Q=P.favicons;if((O=i.tab.headElement.querySelector(".item__graphic"))==null||O.remove(),Q.length>0){const M=Q[0],Me=i.tab.headElement.querySelector(".item__icon");if(i.tab.docIcon!==M||!Me){o(22,i.tab.docIcon=M,i);const Ve=`<img src="${M}" />`;Me?Me.innerHTML=Ve:i.tab.headElement.insertAdjacentHTML("afterbegin",`<span class="item__icon">${Ve}</span>`)}}else i.tab.setDocIcon("".codePointAt(0).toString(16),!0)}),f.addEventListener("did-start-loading",P=>{o(6,g=!0)}),f.addEventListener("did-stop-loading",P=>{o(6,g=!1)}),f.addEventListener("devtools-open-url",P=>{s.openWebviewTab(P.url)}),f.addEventListener("update-target-url",P=>{P.url?(o(12,V=P.url),E||o(11,E=!0)):o(11,E=!1)}),f.addEventListener("context-menu",P=>{s.logger.debug(P),P.params.linkURL&&s.openWebviewTab(P.params.linkURL,P.params.titleText||P.params.linkText||P.params.altText)})});function D(){p=this.value,o(7,p)}function z(P){It[P?"unshift":"push"](()=>{f=P,o(9,f)})}const j=P=>o(10,m=P.button!==0),_e=()=>o(10,m=!0);return e.$$set=P=>{"src"in P&&o(0,n=P.src),"tab"in P&&o(22,i=P.tab),"plugin"in P&&o(23,s=P.plugin),"useragent"in P&&o(1,r=P.useragent),"background"in P&&o(2,l=P.background)},[n,r,l,u,d,h,g,p,c,f,m,E,V,a,I,q,x,F,K,X,A,H,i,s,D,z,j,_e]}class Bl extends he{constructor(t){super(),de(this,t,Ol,Tl,pe,{src:0,tab:22,plugin:23,useragent:1,background:2})}}const fo={general:{useragent:"",background:"transparent"},tab:{enable:!0,open:{mouse:{type:"click",button:be.Left,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!0}}},protocols:{https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}}},window:{enable:!0,open:{mouse:{type:"mousedown",button:be.Middle,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1},targets:{hyperlink:{editor:{enable:!0},other:{enable:!1}}},protocols:{siyuan:{enable:!0,prefix:"siyuan://"},https:{enable:!0,prefix:"https://"},http:{enable:!0,prefix:"http://"},file:{enable:!0,prefix:"file://"},ftps:{enable:!0,prefix:"ftps://"},ftp:{enable:!0,prefix:"ftp://"},"//":{enable:!0,prefix:"//"}}},params:{width:800,height:600,frame:!0,alwaysOnTop:!0,autoHideMenuBar:!0,enableMenuBar:!0},siyuan:{enable:!0,focus:!1,editorType:we.mobile}}},ht=class extends Te.Plugin{constructor(o){super(o);ee(this,"siyuan",Te);ee(this,"logger");ee(this,"TOP_BAR_MENU_ID");ee(this,"SETTINGS_DIALOG_ID");ee(this,"webview_tab");ee(this,"tab_bar_item");ee(this,"config");ee(this,"blockMenuEventListener",o=>{const n=o.detail,i=ir(o.detail);if(i){const s=[],r=(l,a)=>{const u=He(Tt(this.config.window.siyuan.editorType),{id:i.id,focus:a}),d=l.getBoundingClientRect();this.openSiyuanWindow(u,{screenX:globalThis.screenX+d.x,screenY:globalThis.screenY+d.y})};s.push({icon:"iconOpenWindow",label:this.i18n.menu.openEditor.label,click:l=>r(l,!1)}),!i.isDocumentBlock&&!i.isMultiBlock&&s.push({icon:"iconFocus",label:this.i18n.menu.openFocusedEditor.label,click:l=>r(l,!0)}),n.menu.addItem({icon:"iconLanguage",label:this.i18n.displayName,submenu:s})}});ee(this,"openTabEventListener",o=>{try{if(!this.config.tab.enable||!pn(o,this.config.tab.open.mouse))return;const n=this.parseHyperlinkMeta(o.target,this.config.tab.open.targets);if(n.valid&&(this.logger.info(n.href),this.isUrlSchemeAvailable(n.href,this.config.tab.open.protocols)))try{o.preventDefault(),o.stopPropagation(),this.openWebviewTab(n.href,n.title)}catch(i){this.logger.warn(i)}}catch(n){this.logger.warn(n)}});ee(this,"openWindowEventListener",o=>{try{if(!this.config.window.enable||!pn(o,this.config.window.open.mouse))return;const n=this.parseHyperlinkMeta(o.target,this.config.window.open.targets);if(n.valid){if(this.logger.info(n.href),n.enabled&&this.isUrlSchemeAvailable(n.href,this.config.window.open.protocols))if(o.preventDefault(),o.stopPropagation(),n.href.startsWith("siyuan://")){if(this.config.window.siyuan.enable){const i=He(Tt(this.config.window.siyuan.editorType),Pi(new URL(n.href)));this.openSiyuanWindow(i,o)}}else this.openWindow(n.href,{x:o.screenX,y:o.screenY,title:n.title||this.name})}else if(this.config.window.siyuan.enable){const i=Ri(o);if(i){o.preventDefault(),o.stopPropagation();const s=He(Tt(this.config.window.siyuan.editorType),{id:i,focus:this.config.window.siyuan.focus});this.openSiyuanWindow(s,o)}}}catch(n){this.logger.warn(n)}});this.logger=new mi(this.name),this.TOP_BAR_MENU_ID=`${this.name}-top-bar-menu`,this.SETTINGS_DIALOG_ID=`${this.name}-settings-dialog`;const n=this;this.webview_tab=this.addTab({type:"-webview-tag",init(){const i=this;new Bl({target:i.element,props:{src:i.data.href,tab:i,plugin:n}})}})}onload(){this.loadData(ht.GLOBAL_CONFIG_NAME).then(o=>{this.config=ut(fo,o||{})}).catch(o=>this.logger.error(o)).finally(()=>{cn&&Et&&globalThis.addEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.addEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.on("click-blockicon",this.blockMenuEventListener),this.eventBus.on("click-editortitleicon",this.blockMenuEventListener)})}onLayoutReady(){Et&&(new Te.Menu(this.TOP_BAR_MENU_ID),this.tab_bar_item=this.addTopBar({icon:"iconOpenWindow",title:this.i18n.displayName,position:"right",callback:o=>{const n=new Te.Menu(this.TOP_BAR_MENU_ID);n.addItem({icon:"iconSiYuan",label:this.i18n.menu.openDesktopWindow.label,click:s=>{const r=hn(s);this.openSiyuanDesktopWindow({screenX:r.centerX,screenY:r.centerY})}}),n.addItem({icon:"iconSiYuan",label:this.i18n.menu.openMobildWindow.label,click:s=>{const r=hn(s);this.openSiyuanMobileWindow({screenX:r.centerX,screenY:r.centerY})}});const i={x:0,y:0,isLeft:!0};if(o.target.classList.contains("fn__none")){const s=document.getElementById("barPlugins");if(s){const r=s.getBoundingClientRect();i.x=r.x+r.width/2,i.y=r.y+r.height/2}}else{const s=this.tab_bar_item.getBoundingClientRect();i.x=s.x+s.width/2,i.y=s.y+s.height/2}n.open(i)}}))}onunload(){cn&&Et&&globalThis.removeEventListener(this.config.tab.open.mouse.type,this.openTabEventListener,!0),globalThis.removeEventListener(this.config.window.open.mouse.type,this.openWindowEventListener,!0),this.eventBus.off("click-blockicon",this.blockMenuEventListener),this.eventBus.off("click-editortitleicon",this.blockMenuEventListener)}openSetting(){const o=this,n=new Te.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${o.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:fn?"92vw":"720px",height:fn?void 0:"640px"});new Sl({target:n.element.querySelector(`#${o.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this}})}async resetConfig(){return this.updateConfig(ut(fo))}async updateConfig(o){return o&&o!==this.config&&(this.config=o),this.saveData(ht.GLOBAL_CONFIG_NAME,this.config)}get useragent(){return this.config.general.useragent||global.navigator.userAgent}get background(){return this.config.general.background}openWebviewTab(o,n,i="iconLanguage"){Te.openTab({app:this.app,custom:{icon:i,title:n||this.name,fn:this.webview_tab,data:{href:o,title:n||this.name}}})}openWindow(o,n={x:0,y:0,title:null},i={defaultFontSize:globalThis.siyuan.config.editor.fontSize,defaultFontFamily:{standard:globalThis.siyuan.config.editor.fontFamily}}){try{const s=new URL(o),r=Ua(s,{backgroundColor:this.background,...this.config.window.params},n,i,this)}catch(s){this.logger.warn(s)}}openSiyuanDesktopWindow(o,n){const i={x:(o==null?void 0:o.screenX)??0,y:(o==null?void 0:o.screenY)??0,title:"desktop",alwaysOnTop:!1,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(n||He(Dt.desktop).href,i)}openSiyuanMobileWindow(o,n){const i={x:(o==null?void 0:o.screenX)??0,y:(o==null?void 0:o.screenY)??0,title:"mobile",alwaysOnTop:!0,autoHideMenuBar:!1,webPreferences:{nodeIntegration:!0,webviewTag:!0,contextIsolation:!1},enableMenuBar:!0,enableElectron:!0};this.openWindow(n||He(Dt.mobile).href,i)}openSiyuanWindow(o,n){switch(this.config.window.siyuan.editorType){case we.desktop:this.openSiyuanDesktopWindow(n,o.href);break;case we.mobile:this.openSiyuanMobileWindow(n,o.href);break}}isUrlSchemeAvailable(o,n){for(const i in n){const s=n[i];if(s.enable&&o.startsWith(s.prefix))return!0}return!1}parseHyperlinkMeta(o,n){const i={valid:!1,enabled:!1,href:void 0,title:void 0};switch(o.localName){case"a":i.valid=!0,i.enabled=n.hyperlink.other.enable,i.href=o.href,i.title=o.title||o.innerText;break;case"span":/\ba\b/.test(o.dataset.type)&&(i.valid=!0,i.enabled=n.hyperlink.editor.enable,i.href=o.dataset.href,i.title=o.dataset.title||o.innerText);break}return i}};let lt=ht;ee(lt,"GLOBAL_CONFIG_NAME","global-config");module.exports=lt;
